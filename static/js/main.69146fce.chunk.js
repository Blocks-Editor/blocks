/*! For license information please see main.69146fce.chunk.js.LICENSE.txt */
(this["webpackJsonpblocks-webapp"]=this["webpackJsonpblocks-webapp"]||[]).push([[0],[,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"d",(function(){return E})),n.d(e,"c",(function(){return T})),n.d(e,"r",(function(){return I})),n.d(e,"n",(function(){return A})),n.d(e,"t",(function(){return M})),n.d(e,"j",(function(){return L})),n.d(e,"g",(function(){return P})),n.d(e,"l",(function(){return R})),n.d(e,"b",(function(){return D})),n.d(e,"p",(function(){return _})),n.d(e,"f",(function(){return F})),n.d(e,"q",(function(){return V})),n.d(e,"h",(function(){return J})),n.d(e,"k",(function(){return z})),n.d(e,"m",(function(){return K})),n.d(e,"s",(function(){return q})),n.d(e,"o",(function(){return W})),n.d(e,"e",(function(){return U})),n.d(e,"i",(function(){return $}));var o=n(4),r=n(11),i=n(6),a=n(14),c=n(15),u=n(42),s=n(1),l=n(26),d=n(2);function p(t){var e=t.control,n=t.bindInput,o=t.validation,r=o.min,a=o.max,c=o.step,u=Object(l.a)(e),s=Object(i.a)(u,2),p=s[0],f=s[1];return Object(d.jsx)("input",{type:"number",style:{width:"4em"},ref:n,min:r,max:a,step:c,value:p||0,onChange:function(t){return f(t.target.value)}})}var f=n(12),v=n(9),h=n(10),m=n.n(h),b=n(30),y=n(52),g=["value","constraintType","abstract","invalid","onChange"];function j(t){var e,n,i,a,c=t.value,u=t.constraintType,l=t.abstract,p=t.invalid,h=t.onChange,k=Object(r.a)(t,g);u=u||E;var O=Object(f.a)(S.values()).filter((function(t){return(l||!t.data.abstract)&&u.isSubtype(t)})),w=Object(s.useContext)(v.g);if(c)try{c=$(c)}catch(x){h(c=void 0),w.emit(v.c,x)}return p=p||!c||!O.some((function(t){return t.isSubtype(c)})),Object(b.a)(),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("select",Object(o.a)(Object(o.a)({className:m()(p&&"invalid"),value:null===(e=c)||void 0===e?void 0:e.name,onChange:function(t){return h($(t.target.value))}},k),{},{children:[p&&Object(d.jsx)("option",{label:"(Type)",value:null===(n=c)||void 0===n?void 0:n.name}),O.map((function(t){return Object(d.jsx)("option",{label:t.name,value:t.name},t.name)}))]})),Object(d.jsx)("div",{className:"ps-2",children:null===(i=c)||void 0===i||null===(a=i.generics)||void 0===a?void 0:a.map((function(t,e){var n;return Object(d.jsx)(j,{value:t,constraintType:c.data.baseType.generics[e],"data-tip":Object(y.a)(null===(n=c.data.genericNames)||void 0===n?void 0:n[e]),onChange:function(t){var n=Object(f.a)(c.generics);n.splice(e,1,t),h($(Object(o.a)(Object(o.a)({},c.toJSON()),{},{generics:n})))}},e)}))})]})}var k=n(21),O=n(53),w=n(32);var x=["generics","meta"],C=["abstract","arbitraryGenerics"],N=function(){function t(e,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Object(a.a)(this,t),e instanceof t)throw new Error("Type cannot be named ".concat(e));this.name=e,this.parent=n,this.generics=o.map((function(t){return $(t)})),this.data=r,this.meta=i}return Object(c.a)(t,[{key:"toJSON",value:function(){return{name:this.name,generics:this.generics.map((function(t){return t.toJSON()}))}}},{key:"of",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $(this,e)}},{key:"withMeta",value:function(t){var e=X(this.name,this,this.generics);return Object.assign(e.meta,t),e}},{key:"isAbstract",value:function(){return this.data.abstract||this.generics.some((function(t){return t.isAbstract()}))}},{key:"getDefaultValue",value:function(){var t=this.data.defaultValue;return"function"===typeof t?t(this):t}},{key:"equals",value:function(t){return this.name===t.name&&this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.equals(t.generics[n])}))}},{key:"isSubtype",value:function(t){return!!t&&(this.name===t.name?this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.isSubtype(t.generics[n])})):!!t.parent&&this.isSubtype(t.parent))}},{key:"getSharedType",value:function(t){if(t)return this===t||this.isSubtype(t)?this:t.isSubtype(this)?t:this.parent?this.parent.getSharedType(t):void 0}},{key:"toTypeString",value:function(){var t,e;return null!==(t=null===(e=this.data.toTypeString)||void 0===e?void 0:e.call(this))&&void 0!==t?t:this.name+(this.generics.length?"<"+this.generics.map((function(t){return t.toTypeString()})).join(", ")+">":"")}},{key:"toString",value:function(){return"Type(".concat(this.toTypeString(),")")}}]),t}(),S=new Map,E=Y("Any",{category:"default",reversed:!1}),T=Y("AnyReversed",{category:"default",reversed:!0}),I=Y("Type",{parent:E,category:"types",controlType:function(t){var e=t.control,n=t.bindInput,o=Object(l.a)(e),r=Object(i.a)(o,2),a=r[0],c=r[1],u=e.config.type.generics[0],s=!e.validate(a);return Object(d.jsx)("div",{ref:n,children:Object(d.jsx)(j,{value:a,constraintType:u,invalid:s,onChange:c})})},defaultValue:function(t){return t.generics[0]},generics:[E]}),A=Y("Node",{parent:E,category:"nodes",controlType:function(t){var e,n=t.editor,o=t.control,r=t.bindInput,a=Object(l.a)(o),c=Object(i.a)(a,2),u=c[0],p=c[1],h=Object(s.useState)((function(){return Object(f.a)(n.nodes)})),b=Object(i.a)(h,2),y=b[0],g=b[1],j=Object(s.useContext)(v.g);Object(k.a)(j,v.a,(function(){return g(Object(f.a)(n.nodes))}));var x=null===(e=o.config.type)||void 0===e?void 0:e.meta.block,C=x&&(Array.isArray(x)?x:[x]).map((function(t){var e="string"===typeof t?t:t.name;return Object(w.b)(e),e}));C&&(y=y.filter((function(t){return!C||C.includes(t.name)})));var N=!u||!y.some((function(t){return String(t.id)===String(u)&&(!C||C.includes(t.name))}));return Object(d.jsxs)("select",{ref:r,className:m()(N&&"invalid"),style:{maxWidth:"100%"},value:u,onChange:function(t){return p(t.target.value||void 0)},children:[Object(d.jsx)("option",{label:"(Select a Node)",value:void 0},-1),y.map((function(t){return Object(d.jsx)("option",{label:Object(O.a)(t,n),value:t.id},t.id)}))]})},toTypeString:function(){return this.meta.block?"Node{block=".concat(JSON.stringify(this.meta.block),"}"):"Node"}}),M=Y("Value",{abstract:!0,parent:E,category:"values"}),L=Y("Identifier",{parent:E,controlType:u.a,validation:{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/}}),P=Y("Effect",{parent:T,category:"effects",generics:[M],toMotoko:function(t){return Object(i.a)(t,1)[0]}}),R=Y("Member",{parent:T,singleOutput:!0,category:"members"}),D=Y("Actor",{parent:T,singleOutput:!0,category:"actors"}),_=(Y("Module",{parent:T,singleOutput:!0,category:"modules"}),Y("Param",{parent:T,category:"parameters"})),F=Y("Bool",{parent:M,controlType:function(t){var e=t.control,n=t.bindInput,o=Object(l.a)(e),r=Object(i.a)(o,2),a=r[0],c=r[1];return Object(d.jsxs)("label",{ref:n,children:[Object(d.jsx)("input",{type:"checkbox",checked:!!a,onChange:function(t){return c(t.target.checked)}}),Object(d.jsx)("span",{className:"input-title my-0",style:{verticalAlign:"top"},children:e.name})]})},defaultValue:!1}),V=(Y("Char",{parent:M,controlType:u.a,validation:{minLength:1,maxLength:1}}),Y("Text",{parent:M,controlType:u.a,defaultValue:""})),J=Y("Float",{parent:M,controlType:p,defaultValue:0}),z=Y("Int",{parent:J,category:"integers",controlType:p,validation:{step:1}}),K=Y("Nat",{parent:J,category:"naturals",validation:{step:1,min:0}}),B=(Y("Blob",{parent:M}),Y("Principal",{parent:M}),Y("Error",{parent:M}),Y("Tuple",{abstract:!0,arbitraryGenerics:!0,parent:M,category:"tuples",toTypeString:function(){return this===B?this.name:"(".concat(this.generics.map((function(t){return t.toTypeString()})).join(", "),")")}})),q=B.of(),W=(Y("Object",{abstract:!0,arbitraryGenerics:!0,parent:M,category:"objects",toTypeString:function(){var t=this;return"(".concat(this.generics.map((function(e,n){return"".concat(t.genericNames[n],": ").concat(e.toTypeString())})).join(", "),")")}}),Y("Function",{parent:M,generics:[M,M],genericNames:["input","output"],category:"functions",toTypeString:function(){return"".concat(this.generics[0].toTypeString()," -> ").concat(this.generics[1].toTypeString())}}),Y("Optional",{parent:M,generics:[M],category:"optionals",toMotoko:function(t){var e=Object(i.a)(t,1)[0];return"?".concat(e)}})),U=Y("Async",{parent:M,generics:[M],category:"futures",toMotoko:function(t){var e=Object(i.a)(t,1)[0];return"async ".concat(e)}});function Y(t,e){var n=e.parent,o=e.generics,i=void 0===o?[]:o,a=e.meta,c=void 0===a?{}:a,u=X(t,n,i,Object(r.a)(e,x),c);return u.data.baseType=u,S.set(t,u),u}function G(t,e){if("string"===typeof t&&(t=$(t)),(!e||!e.length||e===t.generics)&&!t.data.arbitraryGenerics)return $(t);var n=X(t.name,t,e);if(!t.isSubtype(n))throw new Error("Generics not assignable to ".concat(t.toTypeString()," from ").concat(n.toTypeString()));return n}function X(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=e?e.data:{},u=(c.abstract,c.arbitraryGenerics,Object(r.a)(c,C)),s=e?e.meta:{};return new N(t,e||null,n||(e?e.generics:[]),Object(o.a)(Object(o.a)({},u),i),Object(o.a)(Object(o.a)({},s),a))}function $(t,e){if(arguments.length>1)return G(t,e);if(t instanceof N)return t;if("object"===typeof t)return G(t.name,(t.generics||[]).map((function(t){return $(t)})));if(!t)throw new Error("Invalid type: ".concat(t));if(!S.has(t))throw new Error("Unknown type: ".concat(t));return S.get(t)}},,,,,function(t,e,n){"use strict";n.d(e,"h",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"l",(function(){return f})),n.d(e,"g",(function(){return v})),n.d(e,"k",(function(){return h})),n.d(e,"m",(function(){return m})),n.d(e,"b",(function(){return b})),n.d(e,"f",(function(){return y})),n.d(e,"j",(function(){return g})),n.d(e,"a",(function(){return j})),n.d(e,"e",(function(){return k})),n.d(e,"i",(function(){return O})),n.d(e,"c",(function(){return w}));var o=n(4),r=n(11),i=n(14),a=n(13),c=["name","parent"],u=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.name=e,this.parent=n,this.root=n?n.root:this,this.data=o},s=new Map;function l(t){var e=t.name,n=t.parent,i=Object(r.a)(t,c),a=new u(e,n,n?Object(o.a)(Object(o.a)({},n.data),i):i);return s.set(a.name,a),a}function d(t){if(t instanceof u)return t;if(!s.has(t))throw new Error("Could not find category with name: ".concat(t));return s.get(t)}var p=l("Default"),f=l({name:"State",color:"#3fd",icon:a.g}),v=l({name:"Function",color:"#fd3",icon:a.f}),h=l({name:"Param",color:"#a8f",icon:a.o}),m=l({name:"Type",color:"#2af",icon:a.v}),b=l({name:"Compiler",color:"#f5a",icon:a.d}),y=l({name:"Expression",color:"#aaa",icon:a.i}),g=l({name:"Operator",icon:a.k}),j=l({name:"Actor",color:"#fa8",icon:a.n}),k=l({name:"Effect",icon:a.u}),O=l({name:"Literal",icon:a.r}),w=l({name:"Decomposition",icon:a.p})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return d}));var o=n(1),r=n.n(o),i=n(50),a="editor-change",c="editor-save",u="project-export",s="project-load",l="project-clear",d="error",p=new(n.n(i).a);p.setMaxListeners(1e3),p.on(d,console.error),window.EVENTS=p,e.g=r.a.createContext(p)},,,,,,,function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return s}));var o=n(6),r=n(3),i=n(8);function a(t,e,n){return t=Object(r.i)(t),{topRight:"result",title:"(".concat(e," a)"),category:i.j,inputs:[{key:"input",title:"a",type:t}],outputs:[{key:"result",type:t,toMotoko:function(t){var n=t.input;return"".concat(e,"(").concat(n,")")}}]}}function c(t,e,n){var a=Array.isArray(t)?t:[t,t],c=Object(o.a)(a,2),u=c[0],s=c[1];return u=Object(r.i)(u),s=Object(r.i)(s),{topRight:"result",title:"(a ".concat(e," b)"),category:i.j,inputs:[{key:"left",title:"a",type:u},{key:"right",title:"b",type:u}],outputs:[{key:"result",type:s,toMotoko:function(t){var n=t.left,o=t.right;return"(".concat(n," ").concat(e," ").concat(o,")")}}]}}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[r.h].concat(e))}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[[r.h,r.f]].concat(e))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return B}));var o=n(7),r=n.n(o);function i(t,e,n,o,r,i,a){try{var c=t[i](a),u=c.value}catch(s){return void n(s)}c.done?e(u):Promise.resolve(u).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function c(t){i(a,o,r,c,u,"next",t)}function u(t){i(a,o,r,c,u,"throw",t)}c(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){l(t,e,n[e])}))}return t}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?h(t):e}function b(t,e,n){return b="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}},b(t,e,n||t)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(u){r=!0,i=u}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var j=function t(e){c(this,t),l(this,"name",void 0),l(this,"data",{}),l(this,"engine",null),this.name=e},k=function(){function t(e){c(this,t),l(this,"name",void 0),l(this,"id",void 0),l(this,"position",[0,0]),l(this,"inputs",new Map),l(this,"outputs",new Map),l(this,"controls",new Map),l(this,"data",{}),l(this,"meta",{}),this.name=e,this.id=t.incrementId()}return s(t,[{key:"_add",value:function(t,e,n){if(t.has(e.key))throw new Error("Item with key '".concat(e.key,"' already been added to the node"));if(null!==e[n])throw new Error("Item has already been added to some node");e[n]=this,t.set(e.key,e)}},{key:"addControl",value:function(t){return this._add(this.controls,t,"parent"),this}},{key:"removeControl",value:function(t){t.parent=null,this.controls.delete(t.key)}},{key:"addInput",value:function(t){return this._add(this.inputs,t,"node"),this}},{key:"removeInput",value:function(t){t.removeConnections(),t.node=null,this.inputs.delete(t.key)}},{key:"addOutput",value:function(t){return this._add(this.outputs,t,"node"),this}},{key:"removeOutput",value:function(t){t.removeConnections(),t.node=null,this.outputs.delete(t.key)}},{key:"getConnections",value:function(){return[].concat(g(this.inputs.values()),g(this.outputs.values())).reduce((function(t,e){return[].concat(g(t),g(e.connections))}),[])}},{key:"update",value:function(){}},{key:"toJSON",value:function(){var t=function(t){return Array.from(t).reduce((function(t,e){var n=y(e,2),o=n[0],r=n[1];return t[o]=r.toJSON(),t}),{})};return{id:this.id,data:this.data,inputs:t(this.inputs),outputs:t(this.outputs),position:this.position,name:this.name}}}],[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}},{key:"resetId",value:function(){this.latestId=0}},{key:"fromJSON",value:function(e){var n=new t(e.name),o=y(e.position,2),r=o[0],i=o[1];return n.id=e.id,n.data=e.data,n.position=[r,i],n.name=e.name,t.latestId=Math.max(n.id,t.latestId),n}}]),t}();l(k,"latestId",0);var O=function(t){function e(t){var n;return c(this,e),l(h(n=m(this,f(e).call(this,t))),"editor",null),l(h(n),"data",{}),n}return p(e,t),s(e,[{key:"build",value:function(){var t=a(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.builder(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createNode",value:function(){var t=a(r.a.mark((function t(){var e,n,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},(n=new k(this.name)).data=e,t.next=5,this.build(n);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}(j),w=function(){function t(e,n){c(this,t),l(this,"output",void 0),l(this,"input",void 0),l(this,"data",{}),this.output=e,this.input=n,this.data={},this.input.addConnection(this)}return s(t,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),t}(),x=function(){function t(e){if(c(this,t),l(this,"key",void 0),l(this,"data",{}),l(this,"parent",null),this.constructor===t)throw new TypeError("Can not construct abstract class");if(!e)throw new Error("The key parameter is missing in super() of Control ");this.key=e}return s(t,[{key:"getNode",value:function(){if(null===this.parent)throw new Error("Control isn't added to Node/Input");if(this.parent instanceof k)return this.parent;if(!this.parent.node)throw new Error("Control hasn't be added to Input or Node");return this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,e){this.getNode().data[t]=e}}]),t}(),C=function(){function t(e){c(this,t),l(this,"events",{}),l(this,"silent",!1),this.events=e instanceof t?e.events:e.handlers}return s(t,[{key:"on",value:function(t,e){var n=this;return(t instanceof Array?t:t.split(" ")).forEach((function(t){if(!n.events[t])throw new Error("The event ".concat(t," does not exist"));n.events[t].push(e)})),this}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t in this.events))throw new Error("The event ".concat(t," cannot be triggered"));return this.events[t].reduce((function(t,n){return!1!==n(e)&&t}),!0)}},{key:"bind",value:function(t){if(this.events[t])throw new Error("The event ".concat(t," is already bound"));this.events[t]=[]}},{key:"exist",value:function(t){return Array.isArray(this.events[t])}}]),t}(),N=function(){function t(e,n,o,r){c(this,t),l(this,"node",null),l(this,"multipleConnections",void 0),l(this,"connections",[]),l(this,"key",void 0),l(this,"name",void 0),l(this,"socket",void 0),this.node=null,this.multipleConnections=r,this.connections=[],this.key=e,this.name=n,this.socket=o}return s(t,[{key:"removeConnection",value:function(t){this.connections.splice(this.connections.indexOf(t),1)}},{key:"removeConnections",value:function(){var t=this;this.connections.forEach((function(e){return t.removeConnection(e)}))}}]),t}(),S=function(t){function e(t,n,o){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return c(this,e),l(h(r=m(this,f(e).call(this,t,n,o,i))),"control",null),r}return p(e,t),s(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"addConnection",value:function(t){if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(t)}},{key:"addControl",value:function(t){this.control=t,t.parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&null!==this.control}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){if(!t.output.node)throw new Error("Node not added to Output");return{node:t.output.node.id,output:t.output.key,data:t.data}}))}}}]),e}(N),E=function(){function t(){c(this,t)}return s(t,null,[{key:"isValidData",value:function(t){return"string"===typeof t.id&&this.isValidId(t.id)&&t.nodes instanceof Object&&!(t.nodes instanceof Array)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,e){var n=t.split("@"),o=e.id.split("@"),r=[];return this.isValidData(e)||r.push("Data is not suitable"),t!==e.id&&r.push("IDs not equal"),n[0]!==o[0]&&r.push("Names don't match"),n[1]!==o[1]&&r.push("Versions don't match"),{success:Boolean(!r.length),msg:r.join(". ")}}}]),t}(),T=function(t){function e(t,n){var o;if(c(this,e),l(h(o=m(this,f(e).call(this,n))),"id",void 0),l(h(o),"plugins",void 0),l(h(o),"components",void 0),!E.isValidId(t))throw new Error("ID should be valid to name@0.1.0 format");return o.id=t,o.plugins=new Map,o.components=new Map,o}return p(e,t),s(e,[{key:"use",value:function(t,e){if(t.name&&this.plugins.has(t.name))throw new Error("Plugin ".concat(t.name," already in use"));t.install(this,e||{}),this.plugins.set(t.name,e)}},{key:"register",value:function(t){if(this.components.has(t.name))throw new Error("Component ".concat(t.name," already registered"));this.components.set(t.name,t),this.trigger("componentregister",t)}},{key:"destroy",value:function(){this.trigger("destroy")}}]),e}(C);function I(t,e){return window.addEventListener(t,e),function(){window.removeEventListener(t,e)}}var A=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e,n){},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){};c(this,t),this.onTranslate=n,this.onStart=o,this.onDrag=r,l(this,"pointerStart",void 0),l(this,"el",void 0),l(this,"destroy",void 0),l(this,"button",0),this.pointerStart=null,this.el=e,this.el.style.touchAction="none",this.el.addEventListener("pointerdown",this.down.bind(this));var i=I("pointermove",this.move.bind(this)),a=I("pointerup",this.up.bind(this));this.destroy=function(){i(),a()}}return s(t,[{key:"down",value:function(t){"mouse"===t.pointerType&&t.button!==this.button||(t.stopPropagation(),this.pointerStart=[t.pageX,t.pageY],this.onStart(t))}},{key:"move",value:function(t){if(this.pointerStart){t.preventDefault();var e=[t.pageX,t.pageY],n=e[1],o=[e[0]-this.pointerStart[0],n-this.pointerStart[1]],r=this.el.getBoundingClientRect().width/this.el.offsetWidth;this.onTranslate(o[0]/r,o[1]/r,t)}}},{key:"up",value:function(t){this.pointerStart&&(this.pointerStart=null,this.onDrag(t))}}]),t}(),M=function(){function t(e,n,o,r){c(this,t),l(this,"el",void 0),l(this,"intensity",void 0),l(this,"onzoom",void 0),l(this,"previous",null),l(this,"pointers",[]),l(this,"destroy",void 0),this.el=n,this.intensity=o,this.onzoom=r,e.addEventListener("wheel",this.wheel.bind(this)),e.addEventListener("pointerdown",this.down.bind(this)),e.addEventListener("dblclick",this.dblclick.bind(this));var i=I("pointermove",this.move.bind(this)),a=I("pointerup",this.end.bind(this)),u=I("pointercancel",this.end.bind(this));this.destroy=function(){i(),a(),u()}}return s(t,[{key:"wheel",value:function(t){t.preventDefault();var e=this.el.getBoundingClientRect(),n=t.deltaY<0?this.intensity:-this.intensity,o=(e.left-t.clientX)*n,r=(e.top-t.clientY)*n;this.onzoom(n,o,r,"wheel")}},{key:"touches",value:function(){var t={touches:this.pointers},e=[t.touches[0].clientX,t.touches[0].clientY],n=e[0],o=e[1],r=[t.touches[1].clientX,t.touches[1].clientY],i=r[0],a=r[1];return{cx:(n+i)/2,cy:(o+a)/2,distance:Math.sqrt(Math.pow(n-i,2)+Math.pow(o-a,2))}}},{key:"down",value:function(t){this.pointers.push(t)}},{key:"move",value:function(t){if(this.pointers=this.pointers.map((function(e){return e.pointerId===t.pointerId?t:e})),this.translating){var e=this.el.getBoundingClientRect(),n=this.touches(),o=n.cx,r=n.cy,i=n.distance;if(null!==this.previous){var a=i/this.previous.distance-1,c=(e.left-o)*a,u=(e.top-r)*a;this.onzoom(a,c-(this.previous.cx-o),u-(this.previous.cy-r),"touch")}this.previous={cx:o,cy:r,distance:i}}}},{key:"end",value:function(t){this.previous=null,this.pointers=this.pointers.filter((function(e){return e.pointerId!==t.pointerId}))}},{key:"dblclick",value:function(t){t.preventDefault();var e=this.el.getBoundingClientRect(),n=4*this.intensity,o=(e.left-t.clientX)*n,r=(e.top-t.clientY)*n;this.onzoom(n,o,r,"dblclick")}},{key:"translating",get:function(){return this.pointers.length>=2}}]),t}(),L=function(t){function e(t,n){var o;c(this,e),l(h(o=m(this,f(e).call(this,n))),"el",void 0),l(h(o),"container",void 0),l(h(o),"transform",{k:1,x:0,y:0}),l(h(o),"mouse",{x:0,y:0}),l(h(o),"_startPosition",null),l(h(o),"_zoom",void 0),l(h(o),"_drag",void 0);var r=o.el=document.createElement("div");return o.container=t,r.style.transformOrigin="0 0",o._zoom=new M(t,r,.1,o.onZoom.bind(h(o))),o._drag=new A(t,o.onTranslate.bind(h(o)),o.onStart.bind(h(o))),n.on("destroy",(function(){o._zoom.destroy(),o._drag.destroy()})),o.container.addEventListener("pointermove",o.pointermove.bind(h(o))),o.update(),o}return p(e,t),s(e,[{key:"update",value:function(){var t=this.transform;this.el.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px) scale(").concat(t.k,")")}},{key:"pointermove",value:function(t){var e=t.clientX,n=t.clientY,o=this.el.getBoundingClientRect(),r=e-o.left,i=n-o.top,a=this.transform.k;this.mouse={x:r/a,y:i/a},this.trigger("mousemove",d({},this.mouse))}},{key:"onStart",value:function(){this._startPosition=d({},this.transform)}},{key:"onTranslate",value:function(t,e){this._zoom.translating||this._startPosition&&this.translate(this._startPosition.x+t,this._startPosition.y+e)}},{key:"onZoom",value:function(t,e,n,o){this.zoom(this.transform.k*(1+t),e,n,o),this.update()}},{key:"translate",value:function(t,e){var n={transform:this.transform,x:t,y:e};this.trigger("translate",n)&&(this.transform.x=n.x,this.transform.y=n.y,this.update(),this.trigger("translated"))}},{key:"zoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,r=this.transform.k,i={transform:this.transform,zoom:t,source:o};if(this.trigger("zoom",i)){var a=(r-i.zoom)/(r-t||1);this.transform.k=i.zoom||1,this.transform.x+=e*a,this.transform.y+=n*a,this.update(),this.trigger("zoomed",{source:o})}}},{key:"appendChild",value:function(t){this.el.appendChild(t)}},{key:"removeChild",value:function(t){this.el.removeChild(t)}}]),e}(C),P=function(t){function e(t,n,o,r){var i;return c(this,e),l(h(i=m(this,f(e).call(this,r))),"connection",void 0),l(h(i),"inputNode",void 0),l(h(i),"outputNode",void 0),l(h(i),"el",void 0),i.connection=t,i.inputNode=n,i.outputNode=o,i.el=document.createElement("div"),i.el.style.position="absolute",i.el.style.zIndex="-1",i.trigger("renderconnection",{el:i.el,connection:i.connection,points:i.getPoints()}),i}return p(e,t),s(e,[{key:"getPoints",value:function(){var t=y(this.outputNode.getSocketPosition(this.connection.output),2),e=t[0],n=t[1],o=y(this.inputNode.getSocketPosition(this.connection.input),2);return[e,n,o[0],o[1]]}},{key:"update",value:function(){this.trigger("updateconnection",{el:this.el,connection:this.connection,points:this.getPoints()})}}]),e}(C),R=function(t){function e(t,n,o){var r;return c(this,e),(r=m(this,f(e).call(this,o))).trigger("rendercontrol",{el:t,control:n}),r}return p(e,t),e}(C),D=function(t){function e(t,n,o,r,i){var a,u;return c(this,e),l(h(u=m(this,f(e).call(this,i))),"el",void 0),l(h(u),"type",void 0),l(h(u),"io",void 0),l(h(u),"node",void 0),u.el=t,u.type=n,u.io=o,u.node=r,u.trigger("rendersocket",(l(a={el:t},n,u.io),l(a,"socket",o.socket),a)),u}return p(e,t),s(e,[{key:"getPosition",value:function(t){var e=t.position,n=this.el;return[e[0]+n.offsetLeft+n.offsetWidth/2,e[1]+n.offsetTop+n.offsetHeight/2]}}]),e}(C),_=function(t){function e(t,n,o){var r;return c(this,e),l(h(r=m(this,f(e).call(this,o))),"node",void 0),l(h(r),"component",void 0),l(h(r),"sockets",new Map),l(h(r),"controls",new Map),l(h(r),"el",void 0),l(h(r),"_startPosition",[]),l(h(r),"_drag",void 0),r.node=t,r.component=n,r.el=document.createElement("div"),r.el.style.position="absolute",r.el.addEventListener("contextmenu",(function(t){return r.trigger("contextmenu",{e:t,node:r.node})})),r._drag=new A(r.el,r.onTranslate.bind(h(r)),r.onSelect.bind(h(r)),(function(){r.trigger("nodedraged",t),r.trigger("nodedragged",t)})),r.trigger("rendernode",{el:r.el,node:t,component:n.data,bindSocket:r.bindSocket.bind(h(r)),bindControl:r.bindControl.bind(h(r))}),r.update(),r}return p(e,t),s(e,[{key:"clearSockets",value:function(){var t=this,e=[].concat(g(this.node.inputs.values()),g(this.node.outputs.values()));this.sockets.forEach((function(n){e.includes(n.io)||t.sockets.delete(n.io)}))}},{key:"bindSocket",value:function(t,e,n){this.clearSockets(),this.sockets.set(n,new D(t,e,n,this.node,this))}},{key:"bindControl",value:function(t,e){this.controls.set(e,new R(t,e,this))}},{key:"getSocketPosition",value:function(t){var e=this.sockets.get(t);if(!e)throw new Error("Socket not found for ".concat(t.name," with key ").concat(t.key));return e.getPosition(this.node)}},{key:"onSelect",value:function(t){var e={node:this.node,accumulate:t.ctrlKey,e:t};this.onStart(),this.trigger("multiselectnode",e),this.trigger("selectnode",e)}},{key:"onStart",value:function(){this._startPosition=g(this.node.position)}},{key:"onTranslate",value:function(t,e){this.trigger("translatenode",{node:this.node,dx:t,dy:e})}},{key:"onDrag",value:function(t,e){var n=this._startPosition[0]+t,o=this._startPosition[1]+e;this.translate(n,o)}},{key:"translate",value:function(t,e){var n=this.node,o={node:n,x:t,y:e};if(this.trigger("nodetranslate",o)){var r=y(n.position,2),i=[r[0],r[1]];n.position[0]=o.x,n.position[1]=o.y,this.update(),this.trigger("nodetranslated",{node:n,prev:i})}}},{key:"update",value:function(){var t=y(this.node.position,2),e=t[0],n=t[1];this.el.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){}},{key:"destroy",value:function(){this._drag.destroy()}}]),e}(C),F=function(t){function e(t,n,o){var r;return c(this,e),l(h(r=m(this,f(e).call(this,o))),"container",void 0),l(h(r),"components",void 0),l(h(r),"nodes",new Map),l(h(r),"connections",new Map),l(h(r),"area",void 0),r.container=t,r.components=n,r.container.style.overflow="hidden",r.container.addEventListener("click",r.click.bind(h(r))),r.container.addEventListener("contextmenu",(function(t){return r.trigger("contextmenu",{e:t,view:h(r)})})),o.on("destroy",I("resize",r.resize.bind(h(r)))),o.on("destroy",(function(){return r.nodes.forEach((function(t){return t.destroy()}))})),r.on("nodetranslated",r.updateConnections.bind(h(r))),r.area=new L(t,h(r)),r.container.appendChild(r.area.el),r}return p(e,t),s(e,[{key:"addNode",value:function(t){var e=this.components.get(t.name);if(!e)throw new Error("Component ".concat(t.name," not found"));var n=new _(t,e,this);this.nodes.set(t,n),this.area.appendChild(n.el)}},{key:"removeNode",value:function(t){var e=this.nodes.get(t);this.nodes.delete(t),e&&(this.area.removeChild(e.el),e.destroy())}},{key:"addConnection",value:function(t){if(!t.input.node||!t.output.node)throw new Error("Connection input or output not added to node");var e=this.nodes.get(t.input.node),n=this.nodes.get(t.output.node);if(!e||!n)throw new Error("View node not found for input or output");var o=new P(t,e,n,this);this.connections.set(t,o),this.area.appendChild(o.el)}},{key:"removeConnection",value:function(t){var e=this.connections.get(t);this.connections.delete(t),e&&this.area.removeChild(e.el)}},{key:"updateConnections",value:function(t){var e=this;t.node.getConnections().forEach((function(t){var n=e.connections.get(t);if(!n)throw new Error("Connection view not found");n.update()}))}},{key:"resize",value:function(){var t=this.container;if(!t.parentElement)throw new Error("Container doesn't have parent element");var e=t.parentElement.clientWidth,n=t.parentElement.clientHeight;t.style.width=e+"px",t.style.height=n+"px"}},{key:"click",value:function(t){var e=this.container;e===t.target&&this.trigger("click",{e:t,container:e})}}]),e}(C),V=function(){function t(){c(this,t),l(this,"list",[])}return s(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?this.contains(t)||this.list.push(t):this.list=[t]}},{key:"clear",value:function(){this.list=[]}},{key:"remove",value:function(t){this.list.splice(this.list.indexOf(t),1)}},{key:"contains",value:function(t){return-1!==this.list.indexOf(t)}},{key:"each",value:function(t){this.list.forEach(t)}}]),t}(),J=function t(e){c(this,t),l(this,"handlers",void 0),this.handlers=d({warn:[console.warn],error:[console.error],componentregister:[],destroy:[]},e)},z=function(t){function e(){return c(this,e),m(this,f(e).call(this,{nodecreate:[],nodecreated:[],noderemove:[],noderemoved:[],connectioncreate:[],connectioncreated:[],connectionremove:[],connectionremoved:[],translatenode:[],nodetranslate:[],nodetranslated:[],nodedraged:[],nodedragged:[],selectnode:[],multiselectnode:[],nodeselect:[],nodeselected:[],rendernode:[],rendersocket:[],rendercontrol:[],renderconnection:[],updateconnection:[],keydown:[],keyup:[],translate:[],translated:[],zoom:[],zoomed:[],click:[],mousemove:[],contextmenu:[],import:[],export:[],process:[],clear:[]}))}return p(e,t),e}(J),K=function(t){function e(t,n){var o;return c(this,e),l(h(o=m(this,f(e).call(this,t,new z))),"nodes",[]),l(h(o),"selected",new V),l(h(o),"view",void 0),o.view=new F(n,o.components,h(o)),o.on("destroy",I("keydown",(function(t){return o.trigger("keydown",t)}))),o.on("destroy",I("keyup",(function(t){return o.trigger("keyup",t)}))),o.on("selectnode",(function(t){var e=t.node,n=t.accumulate;return o.selectNode(e,n)})),o.on("nodeselected",(function(){return o.selected.each((function(t){var e=o.view.nodes.get(t);e&&e.onStart()}))})),o.on("translatenode",(function(t){var e=t.dx,n=t.dy;return o.selected.each((function(t){var r=o.view.nodes.get(t);r&&r.onDrag(e,n)}))})),o}return p(e,t),s(e,[{key:"addNode",value:function(t){this.trigger("nodecreate",t)&&(this.nodes.push(t),this.view.addNode(t),this.trigger("nodecreated",t))}},{key:"removeNode",value:function(t){var e=this;this.trigger("noderemove",t)&&(t.getConnections().forEach((function(t){return e.removeConnection(t)})),this.nodes.splice(this.nodes.indexOf(t),1),this.view.removeNode(t),this.trigger("noderemoved",t))}},{key:"connect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.trigger("connectioncreate",{output:t,input:e}))try{var o=t.connectTo(e);o.data=n,this.view.addConnection(o),this.trigger("connectioncreated",o)}catch(r){this.trigger("warn",r)}}},{key:"removeConnection",value:function(t){this.trigger("connectionremove",t)&&(this.view.removeConnection(t),t.remove(),this.trigger("connectionremoved",t))}},{key:"selectNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(-1===this.nodes.indexOf(t))throw new Error("Node not exist in list");this.trigger("nodeselect",t)&&(this.selected.add(t,e),this.trigger("nodeselected",t))}},{key:"getComponent",value:function(t){var e=this.components.get(t);if(!e)throw"Component ".concat(t," not found");return e}},{key:"register",value:function(t){b(f(e.prototype),"register",this).call(this,t),t.editor=this}},{key:"clear",value:function(){var t=this;g(this.nodes).forEach((function(e){return t.removeNode(e)})),this.trigger("clear")}},{key:"toJSON",value:function(){var t={id:this.id,nodes:{}};return this.nodes.forEach((function(e){return t.nodes[e.id]=e.toJSON()})),this.trigger("export",t),t}},{key:"beforeImport",value:function(t){var e=E.validate(this.id,t);return e.success?(this.silent=!0,this.clear(),this.trigger("import",t),!0):(this.trigger("warn",e.msg),!1)}},{key:"afterImport",value:function(){return this.silent=!1,!0}},{key:"fromJSON",value:function(){var t=a(r.a.mark((function t(e){var n,o=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.beforeImport(e)){t.next=2;break}return t.abrupt("return",!1);case 2:return n={},t.prev=3,t.next=6,Promise.all(Object.keys(e.nodes).map(function(){var t=a(r.a.mark((function t(i){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.nodes[i],c=o.getComponent(a.name),t.next=4,c.build(k.fromJSON(a));case 4:n[i]=t.sent,o.addNode(n[i]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:Object.keys(e.nodes).forEach((function(t){var r=e.nodes[t],i=n[t];Object.keys(r.outputs).forEach((function(t){r.outputs[t].connections.forEach((function(e){var r=e.node,a=e.data,c=i.outputs.get(t),u=n[r].inputs.get(e.input);if(!c||!u)return o.trigger("error","IO not found for node ".concat(i.id));o.connect(c,u,a)}))}))})),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),this.trigger("warn",t.t0),t.abrupt("return",!this.afterImport());case 13:return t.abrupt("return",this.afterImport());case 14:case"end":return t.stop()}}),t,this,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(T),B=function(t){function e(t,n,o){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return c(this,e),m(this,f(e).call(this,t,n,o,r))}return p(e,t),s(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"connectTo",value:function(t){if(!this.socket.compatibleWith(t.socket))throw new Error("Sockets not compatible");if(!t.multipleConnections&&t.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var e=new w(this,t);return this.connections.push(e),e}},{key:"connectedTo",value:function(t){return this.connections.some((function(e){return e.input===t}))}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){if(!t.input.node)throw new Error("Node not added to Input");return{node:t.input.node.id,input:t.input.key,data:t.data}}))}}}]),e}(N),q=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),l(this,"name",void 0),l(this,"data",void 0),l(this,"compatible",[]),this.name=e,this.data=n,this.compatible=[]}return s(t,[{key:"combineWith",value:function(t){this.compatible.push(t)}},{key:"compatibleWith",value:function(t){return this===t||this.compatible.includes(t)}}]),t}();var W=function(){function t(e){c(this,t),l(this,"nodes",void 0),this.nodes=e}return s(t,[{key:"extractInputNodes",value:function(t){var e=this;return Object.keys(t.inputs).reduce((function(n,o){var r=(t.inputs[o].connections||[]).reduce((function(t,n){return[].concat(g(t),[e.nodes[n.node]])}),[]);return[].concat(g(n),g(r))}),[])}},{key:"findSelf",value:function(t,e){var n,o=(n=e,t.filter((function(t){return-1!==n.indexOf(t)})));if(o.length)return o[0];var r=!0,i=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var s=c.value,l=[s].concat(g(t)),d=this.findSelf(l,this.extractInputNodes(s));if(d)return d}}catch(p){i=!0,a=p}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return null}},{key:"detect",value:function(){var t=this,e=Object.keys(this.nodes).map((function(e){return t.nodes[e]})),n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value,u=this.findSelf([c],this.extractInputNodes(c));if(u)return u}}catch(s){o=!0,r=s}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return null}}]),t}(),U=0,Y=1,G=2,X=function(t){function e(){return c(this,e),m(this,f(e).call(this,{}))}return p(e,t),e}(J),$=function(t){function e(t){var n;return c(this,e),l(h(n=m(this,f(e).call(this,t,new X))),"args",[]),l(h(n),"data",null),l(h(n),"state",U),l(h(n),"onAbort",(function(){})),n}return p(e,t),s(e,[{key:"clone",value:function(){var t=new e(this.id);return this.components.forEach((function(e){return t.register(e)})),t}},{key:"throwError",value:function(){var t=a(r.a.mark((function t(e){var n,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,t.next=3,this.abort();case 3:return this.trigger("error",{message:e,data:n}),this.processDone(),t.abrupt("return","error");case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"processStart",value:function(){return this.state===U?(this.state=Y,!0):(this.state===G||console.warn("The process is busy and has not been restarted.\n                Use abort() to force it to complete"),!1)}},{key:"processDone",value:function(){var t=this.state!==G;return this.state=U,t||(this.onAbort(),this.onAbort=function(){}),t}},{key:"abort",value:function(){var t=a(r.a.mark((function t(){var e=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.state===Y?(e.state=G,e.onAbort=t):e.state===G?(e.onAbort(),e.onAbort=t):t()})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"lock",value:function(){var t=a(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.unlockPool=e.unlockPool||[],e.busy&&!e.outputData?e.unlockPool.push(t):t(),e.busy=!0})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(t){t.unlockPool.forEach((function(t){return t()})),t.unlockPool=[],t.busy=!1}},{key:"extractInputData",value:function(){var t=a(r.a.mark((function t(e){var n,o,i,c,u,s,l,d=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},o=0,i=Object.keys(e.inputs);case 2:if(!(o<i.length)){t.next=13;break}return c=i[o],u=e.inputs[c],s=u.connections,t.next=8,Promise.all(s.map(function(){var t=a(r.a.mark((function t(e){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.data.nodes[e.node],t.next=3,d.processNode(n);case 3:if(o=t.sent){t.next=8;break}d.abort(),t.next=9;break;case 8:return t.abrupt("return",o[e.output]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:l=t.sent,n[c]=l;case 10:o++,t.next=2;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"processWorker",value:function(){var t=a(r.a.mark((function t(e){var n,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractInputData(e);case 2:return n=t.sent,o=this.components.get(e.name),i={},t.prev=5,t.next=8,o.worker.apply(o,[e,n,i].concat(g(this.args)));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),this.abort(),this.trigger("warn",t.t0);case 14:return t.abrupt("return",i);case 15:case"end":return t.stop()}}),t,this,[[5,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"processNode",value:function(){var t=a(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==G&&e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.lock(e);case 4:if(e.outputData){t.next=8;break}return t.next=7,this.processWorker(e);case 7:e.outputData=t.sent;case 8:return this.unlock(e),t.abrupt("return",e.outputData);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"forwardProcess",value:function(){var t=a(r.a.mark((function t(e){var n=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==G){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,Promise.all(Object.keys(e.outputs).map(function(){var t=a(r.a.mark((function t(o){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.outputs[o],t.next=3,Promise.all(i.connections.map(function(){var t=a(r.a.mark((function t(e){var o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.data.nodes[e.node],t.next=3,n.processNode(o);case 3:return t.next=5,n.forwardProcess(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"copy",value:function(t){return(t=Object.assign({},t)).nodes=Object.assign({},t.nodes),Object.keys(t.nodes).forEach((function(e){t.nodes[e]=Object.assign({},t.nodes[e])})),t}},{key:"validate",value:function(){var t=a(r.a.mark((function t(e){var n,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=E.validate(this.id,e),o=new W(e.nodes),n.success){t.next=6;break}return t.next=5,this.throwError(n.msg);case 5:case 10:return t.abrupt("return",t.sent);case 6:if(!(i=o.detect())){t.next=11;break}return t.next=10,this.throwError("Recursion detected",i);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"processStartNode",value:function(){var t=a(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(n=this.data.nodes[e]){t.next=7;break}return t.next=6,this.throwError("Node with such id not found");case 6:return t.abrupt("return",t.sent);case 7:return t.next=9,this.processNode(n);case 9:return t.next=11,this.forwardProcess(n);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"processUnreachable",value:function(){var t=a(r.a.mark((function t(){var e,n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.data,t.t0=r.a.keys(e.nodes);case 2:if((t.t1=t.t0()).done){t.next=12;break}if(n=t.t1.value,"undefined"!==typeof(o=e.nodes[n]).outputData){t.next=10;break}return t.next=8,this.processNode(o);case 8:return t.next=10,this.forwardProcess(o);case 10:t.next=2;break;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"process",value:function(){var t=a(r.a.mark((function t(e){var n,o,i,a,c=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,this.processStart()){t.next=3;break}return t.abrupt("return");case 3:if(this.validate(e)){t.next=5;break}return t.abrupt("return");case 5:for(this.data=this.copy(e),o=c.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=c[a];return this.args=i,t.next=10,this.processStartNode(n);case 10:return t.next=12,this.processUnreachable();case 12:return t.abrupt("return",this.processDone()?"success":"aborted");case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),e}(T),H={Engine:$,Recursion:W,Component:O,Control:x,Connection:w,Emitter:C,Input:S,IO:N,Node:k,NodeEditor:K,Output:B,Socket:q};e.d=H},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1);function r(t,e,n,r){return Object(o.useEffect)((function(){if(t){var o="addEventListener"in t;return o?t.addEventListener(e,n,r):t.on(e,n,r),function(){o?t.removeEventListener(e,n):t.off(e,n)}}})),n}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(6),r=n(1),i=n(21),a=n(9);function c(t){var e=t.getValue(),n=Object(r.useState)(e),c=Object(o.a)(n,2)[1],u=Object(r.useContext)(a.g);return Object(i.a)(u,a.a,(function(){var e;c(t.getValue()),null===(e=t.notifyEditorChange)||void 0===e||e.call(t)})),Object(i.a)(t.events,"update",(function(){return u.emit(a.a,t,e)})),[e,function(e){return t.setValue(e)}]}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s}));var o=n(12),r=n(4),i=n(3),a=n(8),c=i.g.of(i.s);function u(t,e){var n={key:"before",type:i.g,inferType:function(t){return t.after||c},toMotoko:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];var i=e.apply(void 0,[t].concat(o));if(void 0!==i){var a=t.after;return"".concat(i).concat(a?" "+a:"")}}};return Object(r.a)(Object(r.a)({category:a.e,topLeft:"before",topRight:"after"},t),{},{inputs:[].concat(Object(o.a)(t.inputs||[]),[{key:"after",type:i.g,optional:!0}]),outputs:[].concat(Object(o.a)(t.outputs||[]),[n])})}function s(t,e){return Object(r.a)(Object(r.a)({category:a.e,topLeft:"statement"},t),{},{outputs:[].concat(Object(o.a)(t.outputs||[]),[Object(r.a)({key:"statement",type:i.g},e)])})}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o,r=n(1),i=n(39);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.useEffect)((function(){clearTimeout(o),o=setTimeout((function(){return i.a.rebuild()}))}),t),i.a}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return b}));var o=n(28),r=n(6),i=n(4),a=n(68),c=n(3),u=n(8),s=[],l=new Set,d=n(94);function p(t,e,n){if(e){var r,i=Object(o.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a.key||t.props[a.key]!==a){if(t.props.hasOwnProperty(a.key))throw new Error("Duplicate prop in ".concat(t.name,": ").concat(a.key));a[n]=a[n]||!0,t.props[a.key]=a}}}catch(c){i.e(c)}finally{i.f()}}}d.keys().forEach((function(t){var e=Object(a.basename)(t,".js"),n=d(t).default;if(n=Object(i.a)({},n)){if(n.name=e,l.has(e))return void console.error("Duplicate block name: ".concat(e));n.category=n.category?Object(u.h)(n.category):u.d,n.props=n.props||{};for(var o=0,f=Object.entries(n.props);o<f.length;o++){var v=Object(r.a)(f[o],2),h=v[0],m=v[1];if(m.key&&m.key!==h)throw new Error("Prop key mismatch: ".concat(h," != ").concat(m.key));m.key=h}p(n,n.outputs,"output"),p(n,n.inputs,"input"),p(n,n.controls,"control"),n.inputs=[],n.outputs=[],n.controls=[];for(var b=0,y=Object.entries(n.props);b<y.length;b++){var g=Object(r.a)(y[b],2),j=g[0],k=g[1];k.key=j,k.output?n.outputs.includes(k)||n.outputs.push(k):k.input?n.inputs.includes(k)||n.inputs.push(k):k.control&&(n.controls.includes(k)||n.controls.push(k))}for(var O=0,w=Object.values(n.props);O<w.length;O++){var x=w[O];if(!x.type&&(x.input||x.output)&&x.control)throw console.log(x),new Error("Type not found for ".concat(n.name," : ").concat(x.key));x.type&&(x.type=Object(c.i)(x.type))}l.add(n.name),s.push(n)}}));var f=new Map(s.map((function(t){return[t.name,t]})));window.BLOCK_MAP=f;var v,h=Object(o.a)(f.values());try{var m=function(){var t=v.value;t.shortcuts?t.shortcuts.forEach((function(e){if(!e.block)throw new Error("Shortcut in ".concat(t.name," requires a `block` attribute"));e.block=b(e.block)})):t.shortcuts=[]};for(h.s();!(v=h.n()).done;)m()}catch(y){h.e(y)}finally{h.f()}function b(t){if(!t)throw new Error("Block cannot be ".concat(t));if("string"===typeof t){if(!f.has(t))throw new Error("Block does not exist: ".concat(t));return f.get(t)}return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(12),r=n(4),i=n(8);function a(t,e,n){return Object(r.a)(Object(r.a)({category:i.i,topRight:"value"},t),{},{outputs:[].concat(Object(o.a)(t.outputs||[]),[{key:"value",type:e,control:!0,toMotoko:function(t){var e=t.value;if(void 0!==e)return String(n?n(e):e)}}])})}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var o=n(12),r=n(4),i=n(3),a=n(56);function c(t,e){return e.compilers.motoko.getInput(t,"name")}function u(t,e){return Object(r.a)(Object(r.a)({topLeft:"member"},t),{},{inputs:[{key:"name",type:i.j}].concat(Object(o.a)(t.inputs||[])),outputs:[Object(r.a)({key:"member",type:i.l},e)].concat(Object(o.a)(t.outputs||[])),controls:[Object(a.a)({key:"visibility"},["public","private","system"])].concat(Object(o.a)(t.controls||[]))})}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(150);function r(t){return t?t.title||Object(o.a)(t.name):""}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n(6),r=(n(1),n(26)),i=n(10),a=n.n(i),c=n(2);function u(t){var e=t.control,n=t.bindInput,i=t.validation,u=i.minLength,s=i.maxLength,l=Object(r.a)(e),d=Object(o.a)(l,2),p=d[0],f=d[1],v=!e.validate(p);return Object(c.jsx)("input",{type:"text",className:a()("w-100",v&&"invalid"),autoComplete:"blocks-app",autoCorrect:"off",ref:n,value:p||"",placeholder:e.name,minLength:u,maxLength:s,onChange:function(t){return f(t.target.value||(e.config.optional&&u>0?void 0:""))}})}},,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(151);function r(t){return t?Object(o.a)(t):""}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(32),r=n(38);function i(t,e,n){var i=Object(o.b)(t.name);return!n&&i&&i.computeTitle?i.computeTitle(t,e):Object(r.a)(i)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var o=n(12),r=n(4),i=n(3),a=n(8),c=n(6),u=(n(1),n(26)),s=n(80),l=function(t){t.languages.register({id:"motoko"}),t.languages.setLanguageConfiguration("motoko",{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"<",close:">"}]}),t.languages.setMonarchTokensProvider("motoko",{defaultToken:"",tokenPostfix:".mo",keywords:["actor","and","async","assert","await","break","case","catch","class","continue","debug","else","false","for","func","if","in","import","module","not","null","object","or","label","let","loop","private","public","return","shared","try","throw","debug_show","query","switch","true","type","var","while","stable","flexible","system"],accessmodifiers:["public","private","shared"],typeKeywords:["Any","None","Null","Bool","Int","Int8","Int16","Int32","Int64","Nat","Nat8","Nat16","Nat32","Nat64","Word8","Word16","Word32","Word64","Float","Char","Text","Blob","Error","Principal"],operators:["=","<",">",":","<:","?","+","-","*","/","%","**","&","|","^","<<",">>","#","==","!=",">=","<=",":=","+=","-=","*=","/=","%=","**=","&=","|=","^=","<<=",">>=","#=","->"],symbols:/[=(){}[\].,:;@#_&\-<>`?!+*\\/]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@typeKeywords":"keyword.type","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]+/,"number.hex"],[/[0-9_]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}})},d=n(2);function p(t){var e=t.value,n=t.onChange;return Object(d.jsx)(s.a,{defaultLanguage:"motoko",beforeMount:l,value:e,onChange:function(t){null===n||void 0===n||n(t)},options:{minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent",scrollBeyondLastLine:!1,fontSize:16}})}function f(t){var e=t.control,n=(t.bindInput,Object(u.a)(e)),o=Object(c.a)(n,2),r=o[0],i=o[1];return Object(d.jsx)(p,{value:r,onChange:i})}var v=/{([0-9]+)}/g;function h(t,e){return(e||"").replaceAll(v,(function(e,n){return(n=+n)>=0&&n<t.length?t[n]:e}))}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r.a)(Object(r.a)({title:"{".concat(t,"}"),info:"Compile an arbitrary ".concat(t," expression"),category:a.f,icon:a.f.data.icon,topLeft:"inputs",topRight:"result"},n),{},{inputs:[{key:"inputs",type:i.d,multi:!0},{key:"type",type:i.r.of(e)}].concat(Object(o.a)(n.inputs||[])),outputs:[{key:"result",type:e,inferType:function(t){return t.type},toMotoko:function(t){return h(t.inputs,t.expression)}}].concat(Object(o.a)(n.outputs||[])),controls:[{key:"expression",controlType:f}].concat(Object(o.a)(n.controls||[]))})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var o=n(3),r=n(6),i=n(7),a=n.n(i),c=n(22),u=n(1),s=n(9),l=n(21);function d(t){var e,n,o,i=t.promise,a=t.loading,c=t.error,l=t.children,d=Object(u.useState)("loading"),p=Object(r.a)(d,2),f=p[0],v=p[1],h=Object(u.useState)(),m=Object(r.a)(h,2),b=m[0],y=m[1],g=Object(u.useContext)(s.g);return Object(u.useEffect)((function(){Promise.resolve(i).then((function(t){v("success"),y(t)})).catch((function(t){v("error"),y(t),c||g.emit(s.c,t)}))}),[i,c,g]),"loading"===f?null!==(n=null===a||void 0===a?void 0:a())&&void 0!==n?n:null:"error"===f?null!==(o=null===c||void 0===c?void 0:c(b))&&void 0!==o?o:null:null!==(e=null===l||void 0===l?void 0:l(b))&&void 0!==e?e:null}var p=n(69),f=n(13),v=n(159),h=n(30),m=n(39),b=n(2);function y(t){var e,n=t.control,o=t.bindInput,i=t.query,y=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(n,n.getNode(),n.editor);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return","<".concat(t.t0,">"));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),g=Object(u.useState)(y),j=Object(r.a)(g,2),k=j[0],O=j[1],w=Object(u.useState)(),x=Object(r.a)(w,2),C=x[0],N=x[1],S=Object(u.useContext)(s.g);Object(l.a)(S,s.a,(function(){O(y())}));var E=function(){N(!0),m.a.show(e),setTimeout((function(){return N(!1)}),1e3)};return Object(h.a)(),Object(b.jsx)(d,{promise:k,children:function(t){return(null!==t&&void 0!==t?t:null)&&Object(b.jsxs)("div",{className:"d-flex",children:[Object(b.jsx)("input",{type:"text",className:"w-100 small",readOnly:!0,ref:o,value:t||""}),Object(b.jsx)(p.CopyToClipboard,{text:t,children:Object(b.jsxs)(v.a,{ref:o,size:"sm",variant:"outline-light","data-tip":C?void 0:"Copy to Clipboard",onClick:E,children:[Object(b.jsx)("span",{ref:function(t){return e=t},"data-tip":"Copied!"}),Object(b.jsx)(f.e,{})]})})]})}})}var g=n(8);function j(t,e,n){function r(t){return function(o,r,i){var a=i.compilers[e].getInput(r,t);return n?n(a):a}}return{title:t,category:g.b,icon:g.b.data.icon,topLeft:"input",topRight:"reversed",inputs:[{key:"input",title:"Input",type:o.d},{key:"reversed",title:"Input",type:o.c}],controls:[{key:"reversedDisplay",title:"Display",config:{controlType:y,controlProps:{query:r("reversed")}}},{key:"display",config:{controlType:y,controlProps:{query:r("input")}}}]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(12),r=n(4),i=n(6),a=(n(1),n(26)),c=n(10),u=n.n(c),s=n(2);function l(t){var e=t.control,n=t.bindInput,o=t.options,r=t.findLabel,c=Object(a.a)(e),l=Object(i.a)(c,2),d=l[0],p=l[1];void 0!==d||o.includes(d)||(d=o[0],p(d));var f=!e.validate(d)||!o.includes(d);return Object(s.jsx)("select",{className:u()(f&&"invalid"),ref:n,value:d,onChange:function(t){return p(t.target.value||void 0)},children:o.map((function(t,e){var n;return Object(s.jsx)("option",{label:null!==(n=null===r||void 0===r?void 0:r(t,e))&&void 0!==n?n:t,value:t},e)}))})}function d(t,e){return Object(r.a)(Object(r.a)({},t),{},{config:Object(r.a)(Object(r.a)({},t.config||{}),{},{controlType:l,controlProps:{options:t.optional?[void 0].concat(Object(o.a)(e)):e,findLabel:function(t){return t?t.charAt(0).toUpperCase()+t.substring(1):"--"}}})})}},,,,,,,,,,,,,,,,,function(t,e,n){var o=[n(144),n(145),n(146)];t.exports={getExampleProjects:function(){return o}}},,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},,,,function(t,e,n){var o={"./Actor.js":95,"./ActorClass.js":96,"./Add.js":97,"./And.js":98,"./Async.js":99,"./Await.js":100,"./CodeType.js":101,"./CodeValue.js":102,"./CompareEqual.js":103,"./CompareGreater.js":104,"./CompareGreaterEqual.js":105,"./CompareLess.js":106,"./CompareLessEqual.js":107,"./CompareNotEqual.js":108,"./CompileMotoko.js":109,"./CompileType.js":112,"./Conditional.js":113,"./ConditionalValue.js":114,"./Divide.js":115,"./Function.js":116,"./FunctionCall.js":117,"./LiteralBool.js":118,"./LiteralFloat.js":119,"./LiteralInt.js":120,"./LiteralNat.js":121,"./LiteralText.js":122,"./LiteralType.js":123,"./LoopWhile.js":124,"./Multiply.js":125,"./Not.js":126,"./Null.js":127,"./Optional.js":128,"./OptionalUnwrap.js":129,"./Or.js":130,"./Parameter.js":131,"./Return.js":132,"./State.js":133,"./StateRead.js":134,"./StateUpdate.js":135,"./Subtract.js":136,"./TextConcat.js":137,"./TypeMember.js":138,"./TypeMemberReference.js":139,"./Variable.js":140};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=94},function(t,e,n){"use strict";n.r(e);var o=n(3),r={info:"An actor which can be deployed as a smart contract",category:n(8).a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){return e.compilers.motoko.getInputArgs(t).name},inputs:[{key:"name",type:o.j,optional:!0},{key:"members",type:o.l,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t){var e=t.name,n=t.members;return"actor".concat(e?" "+e:""," { ").concat(n.join(" ")," };")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(8),i={info:"An object-oriented class of actors",category:r.a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){var n=e.compilers.motoko.getInputArgs(t),o=n.name,r=n.params;if(o)return"".concat(o,"(").concat(r.join(", "),")")},inputs:[{key:"name",type:o.j,optional:!0},{key:"members",type:o.l,multi:!0},{key:"params",type:o.p,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t){var e=t.name,n=t.params,o=t.members;return"actor class".concat(e?" "+e:"","(").concat(n.join(", "),") = ").concat("this"," { ").concat(o.join(" ")," };")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.a)("+",(function(t,e){return t+e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)(r.f,"and",(function(t,e){return t&&e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(3),r={title:"(async a)",info:"Retrieve a value asynchronously",category:n(8).j,topRight:"result",inputs:[{key:"input",type:o.t}],outputs:[{key:"result",type:o.e,inferType:function(t){var e=t.input;return o.e.of(e)},toMotoko:function(t){var e=t.input;return"(async ".concat(e,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(3),r={title:"(await a)",info:"Wait for an asynchronous value",category:n(8).j,topRight:"result",inputs:[{key:"input",type:o.e}],outputs:[{key:"result",type:o.t,inferType:function(t){return t.input.generics[0]},toMotoko:function(t){var e=t.input;return"(await ".concat(e,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(54),r=n(3),i=Object(o.a)("type",r.r);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(54),r=n(3),i=Object(o.a)("value",r.t);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)([r.t,r.f],"==",(function(t,e){return t===e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.c)(">",(function(t,e){return t>e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.c)(">=",(function(t,e){return t>=e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.c)("<",(function(t,e){return t<e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.c)("<=",(function(t,e){return t<=e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)([r.t,r.f],"!=",(function(t,e){return t!==e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(55),r=Object(o.a)("Motoko","motoko");e.default=r},,,function(t,e,n){"use strict";n.r(e);var o=n(55),r=Object(o.a)("Type","type",(function(t){return null===t||void 0===t?void 0:t.toTypeString()}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(3),i=Object(o.b)({title:"if() then {} else {}",inputs:[{key:"condition",type:r.f},{key:"trueCase",title:"True",type:r.g,optional:!0},{key:"falseCase",title:"False",type:r.g,optional:!0}]},(function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;if("true"===String(e))return n;if("false"===String(e))return o;var r=o?" else { ".concat(o," }"):"";return"if (".concat(e,") { ").concat(n||""," }").concat(r,";")}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(3),r={title:"Map Bool",category:n(8).c,topRight:"result",inputs:[{key:"condition",type:o.f},{key:"true",type:o.t},{key:"false",type:o.t}],outputs:[{key:"result",type:o.t,toMotoko:function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;return!0===e?n:!1===e?o:"(if (".concat(e,") {").concat(n,"} else { ").concat(o," })")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.a)("/",(function(t,e){return t/e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(35),i=n(8),a=n(56),c=o.g.of(o.s),u=Object(r.b)({info:"Evaluate based on given input parameters",category:i.g,topRight:"body",computeTitle:function(t,e){var n=Object(r.a)(t,e),i=e.compilers.motoko.getInputArgs(t),a=i.params,c=i.asyncKind,u=e.compilers.type.getInput(t,"body");if(u)return u=u.generics[0],c&&(u=o.e.of(u)),n&&a&&"".concat(n,"(").concat(a.join(", "),")").concat(u?" : "+e.compilers.motoko.getTypeString(u):"")},shortcuts:[{block:"Return"},{block:"FunctionCall",nodeKey:"functionNode"}],inputs:[{key:"params",type:o.p,multi:!0},{key:"body",type:o.g,optional:!0}],controls:[{key:"shared",type:o.f},Object(a.a)({key:"asyncKind",optional:!0},["async","query"])]},{toMotoko:function(t,e,n){var r=t.visibility,i=t.shared,a=t.asyncKind,u=t.name,s=t.params,l=t.body,d=["system"!==r&&r,i&&"shared","query"===a&&a].filter((function(t){return t})).join(" "),p=l?n.inferType(e,"body"):c;if(p){p=p.generics[0],a&&(p=o.e.of(p));var f=n.getTypeString(p);if(f)return"".concat(d&&d+" ","func").concat(u?" "+u:"","(").concat(s.join(", "),")").concat("()"!==f?": "+f:""," { ").concat(l||""," };")}}});e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(3),i=n(13),a=n(8),c=Object(o.b)({info:"Invoke a function in this project",title:"Call Function",category:a.g,icon:i.q,computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"functionNode");if(n){var o=e.compilers.motoko.getInput(n,"name"),r=e.compilers.node.getInput(n,"params").map((function(t){return e.compilers.motoko.getInput(t,"name")}));return o&&"".concat(o,"(").concat(r.join(", "),")")}},inputs:[{key:"args",type:r.t,multi:!0}],outputs:[{key:"value",type:"Value",toMotoko:function(t,e,n){var o=t.functionNode,r=t.args,i=n.getInput(o,"name");if(i)return"".concat(i,"(").concat(r.join(", "),")")}}],controls:[{key:"functionNode",type:r.n.withMeta({block:"Function"})}]},(function(t,e,n){var o=t.functionNode,r=t.args,i=n.getOutput(o,"name");if(i)return"ignore ".concat(i,"(").concat(r.join(", "),");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(33),r=n(3),i=Object(o.a)({title:"Boolean"},r.f);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(33),r=n(3),i=Object(o.a)({title:"Float"},r.h);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(33),r=n(3),i=Object(o.a)({title:"Integer"},r.k);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(33),r=n(3),i=Object(o.a)({title:"Natural Number"},r.m);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(33),r=n(3),i=Object(o.a)({title:"Text"},r.q,JSON.stringify);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(8),r=n(3),i={title:"Type",category:o.m,topRight:"value",outputs:[{key:"value",type:r.r.of(r.t),control:!0,inferType:function(t){return t.value}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(3),i=Object(o.b)({title:"while() {}",info:"Repeat while the condition is true",inputs:[{key:"condition",type:r.f},{key:"loop",type:r.g,optional:!0}]},(function(t){var e=t.condition,n=t.loop;return"while (".concat(e,") { ").concat(null!==n&&void 0!==n?n:""," };")}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)(r.h,"*",(function(t,e){return t*e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.d)(r.f,"not",(function(t){return!t}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(3),r={category:n(8).i,topRight:"value",outputs:[{key:"value",type:o.o.of(o.t),toMotoko:function(){return"null"}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(3),r={title:"(?a)",info:"Create an optional version of the input value",category:n(8).j,topRight:"result",inputs:[{key:"input",type:o.t}],outputs:[{key:"result",type:o.o,inferType:function(t){var e=t.input;return o.o.of(e)},toMotoko:function(t){var e=t.input;return"(?".concat(e,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(3),i=n(8),a=Object(o.b)({title:"Unwrap Optional",info:"Run different logic depending on whether an Optional value is null",category:i.c,inputs:[{key:"input",type:r.o},{key:"valueCase",title:"Value",type:r.g,optional:!0},{key:"nullCase",title:"Null",type:r.g,optional:!0}],outputs:[{key:"value",type:r.t,inferType:function(t){return t.input},toMotoko:function(t,e){t.input;return"value__".concat(e.id)}}]},(function(t,e){var n=t.input,o=t.valueCase,r=t.nullCase;if("null"===String(n))return r;var i=o?"case (?value__".concat(e.id,") {").concat(o,"};"):"",a=r?"case null {".concat(r,"};"):"";return"switch (".concat(n,") { ").concat(i).concat(a&&" "+a," };")}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)(r.f,"or",(function(t,e){return t||e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(3),r={info:"An input parameter to a class or function",topLeft:"param",topRight:"value",category:n(8).k,computeTitle:function(t,e){var n=e.compilers.motoko.getInput(t,"name"),o=e.compilers.type.getInput(t,"type");return n&&"".concat(n," : ").concat(o?e.compilers.motoko.getTypeString(o):"Any")},inputs:[{key:"name",type:o.j},{key:"type",type:o.r.of(o.t)}],outputs:[{key:"param",type:o.p,toMotoko:function(t,e,n){var o=t.name,r=t.type,i=n.getTypeString(r)||"Any";return"".concat(o," : ").concat(i)}},{key:"value",type:o.t,toMotoko:function(t){return t.name},inferType:function(t){return t.type}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(27),i=n(8),a=n(13),c=Object(r.a)({info:"End a function's execution path",category:i.g,icon:a.c,inputs:[{key:"value",type:o.t,optional:!0}]},{inferType:function(t){var e=t.value;return o.g.of(e||o.s)},toMotoko:function(t){var e=t.value;return"return".concat(e?" "+e:"",";")}});e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(35),i=n(8),a=Object(r.b)({info:"A persistent smart contract variable",topRight:"value",category:i.l,computeTitle:function(t,e){var n=Object(r.a)(t,e),i=e.compilers.type.getInput(t,"initialValue")||o.s;return n&&"".concat(n,": ").concat(e.compilers.motoko.getTypeString(i))},shortcuts:[{block:"StateRead",nodeKey:"stateNode"},{block:"StateUpdate",nodeKey:"stateNode"}],inputs:[{key:"initialValue",type:o.t,optional:!0}],outputs:[{key:"value",type:o.t,toMotoko:function(t){return t.name},inferType:function(t){return t.initialValue}}],controls:[{key:"flexible",type:o.f}]},{toMotoko:function(t){var e=t.visibility,n=t.flexible,o=t.name,r=t.initialValue,i=["system"!==e&&e,!n&&"stable"].filter((function(t){return t})).join(" ");return"".concat(i&&i+" ").concat("var"," ").concat(o).concat(r?" = "+r:"",";")}});e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(8),i=n(13),a={title:"Read State",category:r.l,icon:i.b,topRight:"value",outputs:[{key:"value",type:o.t,inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"initialValue")},toMotoko:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"name")}}],controls:[{key:"stateNode",type:o.n.withMeta({block:"State"})}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(8),i=n(13),a=n(3),c=Object(o.b)({title:"Write State",category:r.l,icon:i.a,inputs:[{key:"value",type:"Value"}],controls:[{key:"stateNode",type:a.n.withMeta({block:"State"})}]},(function(t,e,n){var o=t.stateNode,r=t.value,i=n.getInput(o,"name");if(i)return"".concat(i," := ").concat(r,";")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(16),r=Object(o.a)("-",(function(t,e){return t-e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(16),r=n(3),i=Object(o.b)(r.q,"#",(function(t,e){return t||e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(35),i=n(8),a=Object(r.b)({title:"Named Type",info:"An actor-level type definition",category:i.m,topRight:"type",shortcuts:[{block:"TypeMemberReference",nodeKey:"typeNode"}],computeTitle:function(t,e){var n=Object(r.a)(t,e),o=e.compilers.type.getInput(t,"type"),i=e.compilers.motoko.getTypeString(o);return"".concat(n||"(?)"," = ").concat(i)},outputs:[{key:"type",type:o.r.of(o.t),control:!0,inferType:function(t){var e=t.type;if(!e.isAbstract())return o.r.of(e)}}]},{toMotoko:function(t){var e=t.visibility,n=t.name,o=t.type,r=["system"!==e&&e].filter((function(t){return t})).join(" ");return"".concat(r&&r+" ","type ").concat(n," = ").concat(o,";")}});e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(8),i=n(13),a={title:"Type Reference",category:r.m,icon:i.b,topRight:"type",computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"typeNode");if(n)return e.compilers.motoko.getInput(n,"name")},outputs:[{key:"type",type:o.r.of(o.t),inferType:function(t,e,n){var o=t.typeNode;return n.compilers.types.getInput(o,"type")}}],controls:[{key:"typeNode",type:o.n.withMeta({block:"TypeMember"})}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(27),r=n(3),i=n(8),a=Object(o.b)({title:"Local Variable",info:"Store and retrieve data from within a function",category:i.k,inputs:[{key:"name",type:r.j,optional:!0},{key:"initialValue",type:r.t}],outputs:[{key:"value",type:r.t,inferType:function(t){return t.initialValue},toMotoko:function(t,e){return t.name||"var__".concat(e.id)}}]},(function(t,e){var n=t.name,o=t.initialValue;return"var ".concat(n||"var__".concat(e.id)," = ").concat(o,";")}));e.default=a},,,,function(t){t.exports=JSON.parse('{"name":"Echo","description":"Return the input argument to a function.","version":"blocks-webapp@0.1.0","nodes":{"282":{"id":282,"data":{"visibility":"public","name":"say"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"params":{"connections":[{"node":284,"input":"param","data":{}}]},"body":{"connections":[{"node":285,"input":"statement","data":{}}]}},"position":[736,288],"name":"Function"},"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":282,"input":"member","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"284":{"id":284,"data":{"name":"phrase","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":282,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":285,"input":"value","data":{}}]}},"position":[960,384],"name":"Parameter"},"285":{"id":285,"data":{},"inputs":{"value":{"connections":[{"node":284,"output":"value","data":{}}]},"statement":{"connections":[{"node":282,"output":"body","data":{}}]}},"outputs":{},"position":[1184,288],"name":"Return"},"321":{"id":321,"data":{"functionNode":282},"inputs":{"args":{"connections":[{"node":322,"output":"value","data":{}}]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":324,"input":"input","data":{}}]}},"position":[800,704],"name":"FunctionCall"},"322":{"id":322,"data":{"value":"Hello World!"},"inputs":{},"outputs":{"value":{"connections":[{"node":321,"input":"args","data":{}}]}},"position":[576,768],"name":"LiteralText"},"324":{"id":324,"data":{},"inputs":{"input":{"connections":[{"node":321,"output":"value","data":{}}]}},"outputs":{"reversed":{"connections":[]}},"position":[1024,768],"name":"CompileMotoko"}}}')},function(t){t.exports=JSON.parse('{"name":"Counter","description":"Get, set, and increment a state variable.","version":"blocks-webapp@0.1.0","nodes":{"353":{"id":353,"data":{"name":"Counter"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":416,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":354,"input":"member","data":{}},{"node":355,"input":"member","data":{}},{"node":374,"input":"member","data":{}},{"node":375,"input":"member","data":{}}]}},"position":[544,384],"name":"Actor"},"354":{"id":354,"data":{"visibility":"public","name":"count"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":415,"output":"value","data":{}}]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[800,128],"name":"State"},"355":{"id":355,"data":{"visibility":"public","name":"get","asyncKind":"query"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":358,"input":"statement","data":{}}]}},"position":[800,416],"name":"Function"},"357":{"id":357,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":358,"input":"value","data":{}}]}},"position":[1024,448],"name":"StateRead"},"358":{"id":358,"data":{},"inputs":{"value":{"connections":[{"node":357,"output":"value","data":{}}]},"statement":{"connections":[{"node":355,"output":"body","data":{}}]}},"outputs":{},"position":[1248,416],"name":"Return"},"374":{"id":374,"data":{"visibility":"public","name":"set","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":378,"input":"param","data":{}}]},"body":{"connections":[{"node":377,"input":"before","data":{}}]}},"position":[800,736],"name":"Function"},"375":{"id":375,"data":{"visibility":"public","name":"inc","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":417,"input":"before","data":{}}]}},"position":[800,1056],"name":"Function"},"377":{"id":377,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":378,"output":"value","data":{}}]},"before":{"connections":[{"node":374,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1248,736],"name":"StateUpdate"},"378":{"id":378,"data":{"type":{"name":"Nat","generics":[]},"name":"n"},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":374,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":377,"input":"value","data":{}}]}},"position":[1024,832],"name":"Parameter"},"415":{"id":415,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":354,"input":"initialValue","data":{}}]}},"position":[544,224],"name":"LiteralNat"},"416":{"id":416,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":353,"input":"actor","data":{}}]}},"position":[256,384],"name":"CompileMotoko"},"417":{"id":417,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":419,"output":"result","data":{}}]},"before":{"connections":[{"node":375,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1440,1056],"name":"StateUpdate"},"418":{"id":418,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":419,"input":"left","data":{}}]}},"position":[1024,1120],"name":"StateRead"},"419":{"id":419,"data":{"right":"1"},"inputs":{"left":{"connections":[{"node":418,"output":"value","data":{}}]},"right":{"connections":[]}},"outputs":{"result":{"connections":[{"node":417,"input":"value","data":{}}]}},"position":[1232,1152],"name":"Add"}}}')},function(t){t.exports=JSON.parse('{"name":"Calculator","description":"Add, subtract, multiply, and divide a state variable.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[416,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Calculator"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":330,"input":"member","data":{}},{"node":331,"input":"member","data":{}},{"node":335,"input":"member","data":{}},{"node":336,"input":"member","data":{}},{"node":337,"input":"member","data":{}},{"node":339,"input":"member","data":{}}]}},"position":[640,288],"name":"Actor"},"330":{"id":330,"data":{"visibility":"public","name":"x"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":332,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[{"node":455,"input":"value","data":{}}]}},"position":[928,0],"name":"State"},"331":{"id":331,"data":{"visibility":"public","name":"clear","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":333,"input":"before","data":{}}]}},"position":[928,256],"name":"Function"},"332":{"id":332,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":330,"input":"initialValue","data":{}}]}},"position":[672,0],"name":"LiteralInt"},"333":{"id":333,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":334,"output":"value","data":{}}]},"before":{"connections":[{"node":331,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1376,256],"name":"StateUpdate"},"334":{"id":334,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":333,"input":"value","data":{}}]}},"position":[1168,320],"name":"LiteralInt"},"335":{"id":335,"data":{"visibility":"public","name":"add","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":340,"input":"before","data":{}}]}},"position":[928,544],"name":"Function"},"336":{"id":336,"data":{"visibility":"public","name":"subtract","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":345,"input":"before","data":{}}]}},"position":[928,832],"name":"Function"},"337":{"id":337,"data":{"visibility":"public","name":"multiply","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":346,"input":"before","data":{}}]}},"position":[928,1120],"name":"Function"},"339":{"id":339,"data":{"visibility":"public","name":"divide","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":347,"input":"before","data":{}}]}},"position":[928,1408],"name":"Function"},"340":{"id":340,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":343,"output":"result","data":{}}]},"before":{"connections":[{"node":335,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1664,544],"name":"StateUpdate"},"343":{"id":343,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":340,"input":"value","data":{}}]}},"position":[1456,608],"name":"Add"},"344":{"id":344,"data":{"name":"y","type":{"name":"Int","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":335,"output":"params","data":{}},{"node":336,"output":"params","data":{}},{"node":337,"output":"params","data":{}},{"node":339,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":343,"input":"right","data":{}},{"node":348,"input":"right","data":{}},{"node":349,"input":"right","data":{}},{"node":350,"input":"right","data":{}}]}},"position":[1184,992],"name":"Parameter"},"345":{"id":345,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":348,"output":"result","data":{}}]},"before":{"connections":[{"node":336,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1664,832],"name":"StateUpdate"},"346":{"id":346,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":349,"output":"result","data":{}}]},"before":{"connections":[{"node":337,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1664,1120],"name":"StateUpdate"},"347":{"id":347,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":350,"output":"result","data":{}}]},"before":{"connections":[{"node":339,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1664,1408],"name":"StateUpdate"},"348":{"id":348,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":345,"input":"value","data":{}}]}},"position":[1456,896],"name":"Subtract"},"349":{"id":349,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":346,"input":"value","data":{}}]}},"position":[1456,1184],"name":"Multiply"},"350":{"id":350,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":347,"input":"value","data":{}}]}},"position":[1456,1472],"name":"Divide"},"351":{"id":351,"data":{"stateNode":330},"inputs":{},"outputs":{"value":{"connections":[{"node":343,"input":"left","data":{}},{"node":348,"input":"left","data":{}},{"node":349,"input":"left","data":{}},{"node":350,"input":"left","data":{}}]}},"position":[1184,864],"name":"StateRead"},"455":{"id":455,"data":{},"inputs":{"value":{"connections":[{"node":330,"output":"value","data":{}}]},"statement":{"connections":[{"node":333,"output":"after","data":{}},{"node":340,"output":"after","data":{}},{"node":345,"output":"after","data":{}},{"node":346,"output":"after","data":{}},{"node":347,"output":"after","data":{}}]}},"outputs":{},"position":[2080,-32],"name":"Return"}}}')},function(t){t.exports=JSON.parse('{"name":"","description":"The default project.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[]}},"position":[704,288],"name":"Actor"}}}')},,function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),i=n(25),a=n.n(i),c=(n(88),n(7)),u=n.n(c),s=n(22),l=n(4),d=n(28),p=n(11),f=n(23),v=(n(90),n(59)),h=n(66),m=n(12),b=n(6),y=n(2),g=["x","y","children","style","handleCloseMenu"];function j(t){var e=t.x,n=t.y,r=t.children,i=t.style,a=t.handleCloseMenu,c=Object(p.a)(t,g),u=Object(o.useMemo)((function(){return Object(l.a)({position:"absolute",left:e,top:n},i)}),[e,n,i]),s=Object(o.useCallback)((function(t){if(t){var e=function(t){return t.stopPropagation()};t.addEventListener("pointermove",e),t.addEventListener("mousemove",e),t.addEventListener("wheel",e)}}),[]),d=Object(o.useCallback)((function(t){if(t){var e=function(){var e=t.getBoundingClientRect().bottom-window.innerHeight;e>0&&(t.style.top="".concat(n-e,"px"))};e(),t.onresize=e}}),[n]);return Object(y.jsx)("div",Object(l.a)(Object(l.a)({className:"context-menu-screen",style:{position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"all"},ref:s,onKeyDown:function(t){return 27===t.keyCode&&a()},onMouseDown:function(){return a()}},c),{},{children:Object(y.jsx)("div",{className:"context-menu-container",style:u,ref:d,children:Object(y.jsx)("div",{className:"context-menu",children:r})})}))}var k=r.a.createContext(null),O=n(10),w=n.n(O);function x(t){var e=t.children,n=t.color;return Object(y.jsx)("span",{className:"context-menu-icon",style:{color:n},children:e})}var C=["icon","color","selected","onAction","children","style"];function N(t){var e=t.icon,n=t.color,o=t.selected,r=t.onAction,i=t.children,a=t.style,c=Object(p.a)(t,C);return Object(y.jsxs)("div",Object(l.a)(Object(l.a)({className:w()("context-menu-action",o&&"selected"),style:Object(l.a)({color:n,userSelect:"none"},a),onMouseDown:function(t){return 0===t.button&&r(t)}},c),{},{children:[e&&Object(y.jsx)(x,{children:e}),i]}))}function S(){var t=Object(o.useContext)(k).editor;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(N,{onAction:function(){return t.selected.each((function(e){return t.removeNode(e)}))},children:"Delete"})})}var E=n(13),T=n(38),I=n(30),A=["component"];function M(t){var e=t.component,n=Object(p.a)(t,A),o=e.block,i=null===o||void 0===o?void 0:o.category;return Object(I.a)(),(null===o||void 0===o?void 0:o.info)&&(n=Object(l.a)({"data-tip":o.info.endsWith(".")?o.info:"".concat(o.info,"."),"data-place":"right"},n)),Object(y.jsx)(N,Object(l.a)(Object(l.a)({icon:r.a.createElement((null===o||void 0===o?void 0:o.icon)||(null===i||void 0===i?void 0:i.data.icon)||E.s),color:null===i||void 0===i?void 0:i.data.color},n),{},{children:Object(T.a)(o)||e.name}))}var L=["value","onChange","onAction","onKeyDown","children"];function P(t){var e=t.value,n=t.onChange,r=t.onAction,i=t.onKeyDown,a=t.children,c=Object(p.a)(t,L),u=Object(o.useCallback)((function(t){t&&t.focus()}),[{}]),s=(i||r)&&function(t){i&&i(t),r&&"Enter"===t.key&&r()};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(l.a)({type:"text",className:"context-menu-search",autoFocus:!0,ref:u,autoComplete:"blocks-search",value:e||"",onClick:function(t){return t.stopPropagation()},onChange:n&&function(t){return n(t.target.value)},onKeyDown:s},c)),Object(y.jsx)("div",{className:"context-menu-search-area",children:a})]})}function R(t){return JSON.parse(JSON.stringify(t))}function D(t,e){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(u.a.mark((function t(e,n){var o,r,i,a,c,s,l,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.data,r=n.meta,i=n.position,c=(a=void 0===i?{}:i).x,s=a.y,t.next=3,e.createNode(o?R(o):{});case 3:return l=t.sent,r&&(l.meta=Object.assign(R(r),l.meta)),d=[c,s],l.position[0]=d[0],l.position[1]=d[1],t.abrupt("return",l);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){var t=Object(o.useState)(""),e=Object(b.a)(t,2),n=e[0],r=e[1],i=Object(o.useState)(0),a=Object(b.a)(i,2),c=a[0],l=a[1],d=Object(o.useContext)(k),p=d.editor,f=d.mouse,v=d.context,h=function(t,e){var n=Object(m.a)(t.components).map((function(t){return t.name})).join("##");return Object(o.useMemo)((function(){return Object(m.a)(t.components.values()).map((function(t){return[e(t),t]})).sort((function(t,e){var n=Object(b.a)(t,1)[0],o=Object(b.a)(e,1)[0];if(Array.isArray(n)){for(var r=0;r<n.length;r++){var i=n[r].localeCompare(o[r]);if(0!==i)return i}return 0}return n.localeCompare(o)})).map((function(t){return Object(b.a)(t,2)[1]}))}),[n])}(p,(function(t){var e;return[null===(e=t.block)||void 0===e?void 0:e.category.root.name,t.data.title||t.name]}));if(h=v?function(t,e,n){var o,r,i,a,c,u;if(!t&&!e)return n;var s=null===t||void 0===t||null===(o=(r=t.socket).findType)||void 0===o?void 0:o.call(r),l=null===e||void 0===e||null===(i=(a=e.socket).findType)||void 0===i?void 0:i.call(a);if((null===(c=s)||void 0===c?void 0:c.data.reversed)||(null===(u=l)||void 0===u?void 0:u.data.reversed)){var d=[l,s];s=d[0],l=d[1]}return n.filter((function(t){return(!s||t.block.outputs.some((function(t){return s.isSubtype(t.type)||t.type.isSubtype(s)})))&&(!l||t.block.inputs.some((function(t){return l.isSubtype(t.type)||t.type.isSubtype(l)})))}))}(v.input,v.output,h):h.filter((function(t){return t.block.global})),c=Math.min(h.length-1,c),n){var g=n.toLowerCase();h=h.filter((function(t){var e;return(null===(e=t.keywords)||void 0===e?void 0:e.some((function(t){return t.toLowerCase().startsWith(g)})))||t.name.toLowerCase().startsWith(g)}))}function j(){return(j=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.length){t.next=3;break}return t.next=3,O(h[c]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=Object(o.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,i,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(""),p.trigger("hidecontextmenu"),t.next=4,D(e,{position:f});case 4:n=t.sent,p.addNode(n),v&&(o=v.input,i=v.output,o&&(a=Object(m.a)(n.outputs.values()).find((function(t){return o.socket.compatibleWith(t.socket)})),a&&p.connect(a,o)),i&&(c=Object(m.a)(n.inputs.values()).find((function(t){return t.socket.compatibleWith(i.socket)})),c&&p.connect(i,c)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[p,f,v]),w=h.map((function(t,e){return Object(y.jsx)(M,{component:t,selected:c===e,onAction:function(){return O(t)}},t.name)}));return v?Object(y.jsx)(P,{value:n,onChange:r,onKeyDown:function(t){38===t.keyCode&&l(Math.max(0,c-1)),40===t.keyCode&&l(c+1)},onAction:function(){return j.apply(this,arguments)},children:w}):w}var V=n(17);var J={name:"blocks-contextmenu",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.bind("hidecontextmenu"),t.bind("showcontextmenu");var n,o,r=e.offset?[e.offset.x,e.offset.y]:[-10,-10],i=Object(b.a)(r,2),c=i[0],u=i[1],s=null;t.on("hidecontextmenu",(function(){s&&(s.style.display="none")})),t.on(["click","contextmenu"],(function(){t.trigger("hidecontextmenu")})),t.on("contextmenu",(function(e){var o,r,i=e.e,l=e.node,d=e.context;if(null===(o=i.preventDefault)||void 0===o||o.call(i),null===(r=i.stopPropagation)||void 0===r||r.call(i),t.trigger("showcontextmenu",{e:i,node:l,context:d})){l&&(t.selected.contains(l)||t.selectNode(l));var p=[i.clientX,i.clientY],f=p[0],v=p[1];s||(s=document.createElement("div"),t.view.container.appendChild(s)),s.style.display="block",a.a.render(Object(y.jsx)(j,{x:f+c,y:v+u,handleCloseMenu:function(){return t.trigger("hidecontextmenu")},children:Object(y.jsx)(k.Provider,{value:{editor:t,mouse:n,node:l,context:d},children:l?Object(y.jsx)(S,{}):Object(y.jsx)(F,{})})}),s)}})),t.on("destroy",(function(){t.trigger("hidecontextmenu"),s&&(s.remove(),s=null)}));var l=!1,d=!1;t.view.container.addEventListener("pointermove",(function(t){return o=t})),t.on("mousemove",(function(t){n=t,l=!0})),t.on("connectionpick",(function(t){l=!1;var e=Object(m.a)(t.connections);setTimeout((function(){t.connections.length<e.length&&(d=!0)}))})),t.on("connectiondrop",(function(e){if(l)if(d)d=!1;else{var n=Object(m.a)(e.connections);setTimeout((function(){e.connections.length!==n.length||e.connections.some((function(t,e){return t.input!==n[e].input||t.output!==n[e].output}))||t.trigger("contextmenu",{e:o,context:{input:e instanceof V.d.Input?e:null,output:e instanceof V.d.Output?e:null}})}))}}))}},z=J,K=n(67),B=n.n(K),q=n(46),W=n(9),U=n(14),Y=n(15),G=n(18),X=n(19),$=n(158);function H(t){var e=t.type,n=t.socket,o=t.innerRef,r=t.io,i=n.findType(),a=!!i.data.reversed,c=r.multipleConnections&&r instanceof V.d.Input===!a;return Object(y.jsx)("div",{className:w()("socket",e,Object($.a)(n.name),c&&"multiple",a&&"reversed",!c&&r.connections.length&&"occupied","category-"+i.data.category),title:n.name,ref:function(t){return t&&o(t,e,r)}})}var Z=n(32),Q=n(21);function tt(t){var e=t.editor,n=t.node,r=t.block,i=t.fallback,a=function(){try{return r.computeTitle(n,e)}catch(t){return console.error("Unable to compute title for node: ".concat(n.name)),console.error(t),"<Error>"}},c=Object(o.useState)(a),u=Object(b.a)(c,2),s=u[0],l=u[1],d=Object(o.useContext)(W.g);Object(Q.a)(d,W.a,(function(){return l(a())}));var p=s||i||null;return Object(I.a)(),Object(y.jsx)("span",{"data-tip":p,children:p})}var et=n(53),nt=n(52);function ot(t){return t?t.title||Object(nt.a)(t.key):""}var rt=n(155),it=function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},at=n(159);function ct(t){var e=t.editor,n=t.node,i=t.shortcut,a=i.block,c=a.category,l=Object(o.useContext)(W.g),d=function(){var t=Object(s.a)(u.a.mark((function t(o){var r,c,s,d,p,f,v;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.components.get(a.name)){t.next=5;break}return l.emit(W.c,"Component not found: ".concat(a.name)),t.abrupt("return");case 5:return c={},n&&i.nodeKey&&(c[i.nodeKey]=n.id),t.next=9,r.createNode(c);case 9:s=t.sent,d=e.view.area.mouse,p=d.x,f=d.y,v=[p-80,f-20],s.position[0]=v[0],s.position[1]=v[1],e.addNode(s),e.view.nodes.get(s)._drag.down(o),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),l.emit(W.c,t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}();return Object(I.a)([a]),Object(y.jsx)(at.a,{ref:it,className:"node-shortcut-button px-1 pt-0 pb-1","data-tip":Object(T.a)(a),"data-delay-show":100,style:{background:"none",color:c.data.color,borderColor:c.data.color,cursor:"grab"},onMouseDown:d,children:a.icon?r.a.createElement(a.icon):Object(T.a)(a)})}function ut(t){var e=t.prop,n=t.node,o=t.hideLeft,r=t.hideRight,i=t.bindSocket,a=t.bindControl,c=n.inputs.get(e.key),u=n.outputs.get(e.key),s=n.controls.get(e.key)||(null===c||void 0===c?void 0:c.showControl())&&c.control,l=c&&!o&&Object(y.jsx)(H,{type:"input",socket:c.socket,io:c,innerRef:i}),d=u&&!r&&Object(y.jsx)(H,{type:"output",socket:u.socket,io:u,innerRef:i}),p=s&&Object(y.jsx)(q.a,{className:c?"input-control":"control",control:s,innerRef:a});return Object(y.jsxs)("div",{className:w()("prop","key-"+Object($.a)(e.key)),children:[Object(y.jsxs)("div",{className:"input",children:[l,p||l&&Object(y.jsx)("div",{className:"input-title",children:ot(e)})]}),Object(y.jsxs)("div",{className:"output",children:[!c&&d&&Object(y.jsx)("div",{className:"output-title",children:ot(e)}),d]})]})}var st=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(Y.a)(n,[{key:"render",value:function(){var t=this.props,e=t.editor,n=t.node,o=t.bindSocket,i=t.bindControl,a=this.state.selected,c=Object(Z.b)(n.name),u=c.topLeft&&n.inputs.get(c.topLeft),s=c.topRight&&n.outputs.get(c.topRight),l=Object(et.a)(n,e,!0);return c.computeTitle&&(l=Object(y.jsx)(tt,{editor:e,node:n,block:c,fallback:l})),Object(y.jsxs)("div",{className:w()("node",a),children:[Object(y.jsxs)("div",{className:"header d-flex",children:[u&&Object(y.jsx)("div",{children:Object(y.jsx)(H,{type:"input",socket:u.socket,io:u,innerRef:o})}),Object(y.jsxs)("div",{className:"title d-inline-block flex-grow-1 text-nowrap overflow-hidden",style:{color:c.category.data.color},children:[c.icon&&Object(y.jsx)("span",{className:"d-inline-block pe-1",style:{transform:"translateY(-.1em)"},children:r.a.createElement(c.icon)}),l]}),s&&Object(y.jsx)("div",{children:Object(y.jsx)(H,{type:"output",socket:s.socket,io:s,innerRef:o})})]}),c.shortcuts.length>0&&Object(y.jsx)(rt.a,{className:"px-4 py-1 w-100",style:{background:"#0002"},children:c.shortcuts.map((function(t,o){return Object(y.jsx)(ct,{editor:e,node:n,shortcut:t},o)}))}),Object.values(c.props).filter((function(t){return!t.hidden&&(t.control||(!u||t.key!==c.topLeft)&&(!s||t.key!==c.topRight))})).map((function(t){return Object(y.jsx)(ut,{prop:t,node:n,hideLeft:t.key===c.topLeft,hideRight:t.key===c.topRight,bindSocket:o,bindControl:i},t.key)}))]})}}]),n}(q.b),lt=n(37),dt=n(42),pt=n(50),ft=n.n(pt),vt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t,o,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(U.a)(this,n),(i=e.call(this,o)).name=r,i.config=a,i.editor=t,i.render="react",i.component=a.controlType||dt.a,i.props=Object(l.a)(Object(l.a)({},a.controlProps),{},{validation:a.validation||{},control:Object(lt.a)(i),editor:t,bindInput:it}),i.events=new ft.a,i}return Object(Y.a)(n,[{key:"validate",value:function(t){if(void 0===t&&!this.config.optional)return!1;if(null!==t&&void 0!==t){var e=this.config.validation;if(e){if("custom"in e&&!e.custom(t))return!1;if("minLength"in e&&t.length<e.minLength)return!1;if("maxLength"in e&&t.length>e.maxLength)return!1;if("min"in e&&t<e.min)return!1;if("max"in e&&t>e.max)return!1;if("step"in e&&t-(e.min||0)%e.step!==0)return!1;if("pattern"in e&&!e.pattern.test(t))return!1}}return!0}},{key:"getDefaultValue",value:function(){}},{key:"getValue",value:function(){var t=this.getData(this.key);return void 0===t?this.getDefaultValue():t}},{key:"setValue",value:function(t){this.putData(this.key,t),this.events.emit("update",t)}}]),n}(V.a),ht=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t,o,r){var i;return Object(U.a)(this,n),e.call(this,t,o.key,r,Object(l.a)(Object(l.a)(Object(l.a)({},(null===(i=o.type)||void 0===i?void 0:i.data)||{}),o.config||{}),{},{prop:o,type:o.type,optional:o.optional}))}return Object(Y.a)(n,[{key:"getDefaultValue",value:function(){var t;return null===(t=this.config.type)||void 0===t?void 0:t.getDefaultValue()}},{key:"notifyEditorChange",value:function(){}}]),n}(vt),mt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(Y.a)(n,[{key:"getEditorNode",value:function(t){return this.editor.nodes.find((function(e){return e.id===t.id}))}},{key:"getControls",value:function(t){return this.getEditorNode(t).controls}}]),n}(V.d.Component),bt=n(3),yt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(U.a)(this,n),t=Object(bt.i)(t),e.call(this,t.name,Object(l.a)(Object(l.a)({},t.data),{},{type:t}))}return Object(Y.a)(n,[{key:"findType",value:function(){return this.data.type}},{key:"setType",value:function(t){this.data.type=t}},{key:"compatibleWith",value:function(t){if(!("findType"in t))return!1;var e=this.findType(),n=t.findType();return e.isSubtype(n)||n.isSubtype(e)}}]),n}(V.d.Socket),gt=n(151),jt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t){var o,r;return Object(U.a)(this,n),(r=e.call(this,t.name)).block=t,r.keywords=[].concat(Object(m.a)(Object(gt.a)(t.name).toLowerCase().split(" ").filter((function(t){return t}))),Object(m.a)((null===(o=t.title)||void 0===o?void 0:o.split(" ").filter((function(t){return t})))||[]),Object(m.a)(t.keywords||[])),r}return Object(Y.a)(n,[{key:"builder",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,r,i,a,c,s,l,p,f,v,h,m,b,y=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t,e){var n=new yt(t.type);return!!t.type.data.reversed===e?o(t,n,e):r(t,n,e)},o=function(t,n,o){var r=ot(t),a=new V.d.Input(t.key,r,n,t.type.data.reversed||!!t.multi);return i(t,n,o)&&a.addControl(new ht(y.editor,t,r)),e.addInput(a),a},r=function(t,n,o){var r=ot(t),a=new V.d.Output(t.key,r,n,!t.type.data.reversed||!!t.multi);return e.addOutput(a),i(t,n,o)&&e.addControl(new ht(y.editor,t,r)),a},i=function(t,e,n){return t.control||!!e.data.reversed===n&&e.data.controlType},delete e.meta.title,a=Object(d.a)(this.block.inputs);try{for(a.s();!(c=a.n()).done;)s=c.value,n(s,!1)}catch(u){a.e(u)}finally{a.f()}l=Object(d.a)(this.block.outputs);try{for(l.s();!(p=l.n()).done;)f=p.value,n(f,!0)}catch(u){l.e(u)}finally{l.f()}v=Object(d.a)(this.block.controls);try{for(v.s();!(h=v.n()).done;)m=h.value,b=ot(m),e.addControl(new ht(this.editor,m,b))}catch(u){v.e(u)}finally{v.f()}case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(mt),kt=n(47),Ot=n(31),wt=n(82),xt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t,o){return Object(U.a)(this,n),e.call(this,"".concat(t.name,".").concat(o))}return n}(Object(wt.a)(Error)),Ct=function(){function t(e,n){Object(U.a)(this,t),this.editor=e,this.compileKey=n}return Object(Y.a)(t,[{key:"defaultCompile",value:function(t,e,n){}},{key:"postCompile",value:function(t,e,n){return t}},{key:"getNode",value:function(t){if(t instanceof V.d.Node)return t;if(!t)throw new Error("Node cannot be ".concat(JSON.stringify(t)));var e=String("string"===typeof t||"number"===typeof t?t:t.id);if(!(t=this.editor.nodes.find((function(t){return String(t.id)===e}))))throw new Error("Node does not exist: ".concat(e));return t}},{key:"getBlock",value:function(t){return t=this.getNode(t),Object(Z.b)(t.name)}},{key:"getInput",value:function(t,e){var n=this;t=this.getNode(t);var o=this.getBlock(t);if(!o.props.hasOwnProperty(e))throw new Error("Prop not found on ".concat(t.name,": ").concat(e));var r=o.props[e];if(r.input)if(r.type.data.reversed){var i=this._output(t,e);if(r.multi)return i.connections.map((function(t){return n._compileConnection(t,t.output,t.input,"inputs")}));if(i.connections.length){var a=i.connections[0];return this._compileConnection(a,a.output,a.input,"inputs")}}else{var c=this._input(t,e);if(r.multi)return c.connections.map((function(t){return n._compileConnection(t,t.input,t.output,"outputs")}));if(c.connections.length){var u=c.connections[0];return this._compileConnection(u,u.input,u.output,"outputs")}if(c.control)return c.control.getValue()}if(r.control){var s=this._control(t,r.key);return this.postCompile(s.getValue(),t,e)}}},{key:"getOutput",value:function(t,e){t=this.getNode(t);var n=this._prop(t,e);try{var o,r=this.getInputArgs(t);if(!r)return;return o=n[this.compileKey]?n[this.compileKey](r,t,this):this.defaultCompile(n,t,e),this.postCompile(o,t,e)}catch(i){if(i instanceof xt)return;console.error("[".concat(t.name,".").concat(e,"]"),i),this.editor.trigger("warn","[".concat(t.name,".").concat(e,"] ").concat(i))}}},{key:"getInputArgs",value:function(t){var e=this;t=this.getNode(t);for(var n=this.getBlock(t),o={},r=function(){var r=a[i];if(r.input||r.control){var c=!1;Object.defineProperty(o,r.key,{get:function(){if(!c){var o=e.getInput(t,r.key);if(void 0===o&&!r.optional)throw new xt(n,r.key);return c=!0,o}}})}},i=0,a=Object.values(n.props);i<a.length;i++)r();return o}},{key:"getTypeString",value:function(t){var e,n,o,r=this;return(null===(e=t=Object(bt.i)(t))||void 0===e||null===(n=(o=e.data)[this.compileKey])||void 0===n?void 0:n.call(o,t.generics.map((function(t){return r.getTypeString(t)})),this))||t.toTypeString()}},{key:"inferType",value:function(t,e){return this.editor.compilers.type.getInput(t,e)}},{key:"_compileConnection",value:function(t,e,n){return this.getOutput(n.node,n.key)}},{key:"_prop",value:function(t,e){var n=this.getBlock(t);if(!n.props.hasOwnProperty(e))throw new Error("Prop does not exist in ".concat(t.name,": ").concat(e));return n.props[e]}},{key:"_input",value:function(t,e){if(!t.inputs.has(e))throw new Error("Input not found on ".concat(t.name,": ").concat(e));return t.inputs.get(e)}},{key:"_output",value:function(t,e){if(!t.outputs.has(e))throw new Error("Output not found on ".concat(t.name,": ").concat(e));return t.outputs.get(e)}},{key:"_control",value:function(t,e){if(!t.controls.has(e))throw new Error("Control not found on ".concat(t.name,": ").concat(e));return t.controls.get(e)}}]),t}(),Nt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(U.a)(this,n),e.call(this,t,"toMotoko")}return Object(Y.a)(n,[{key:"defaultCompile",value:function(t,e,n){}},{key:"postCompile",value:function(t,e,n){var o=this;return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||null===t?t:void 0!==t?Array.isArray(t)?t.map((function(t){return o.postCompile(t,e,n)})).filter((function(t){return t})).join(" "):(console.warn("Unexpected Motoko expression:",t),String(t)):void 0}}]),n}(Ct),St=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(U.a)(this,n),e.call(this,t,"toEditorNode")}return Object(Y.a)(n,[{key:"defaultCompile",value:function(t,e,n){return e}},{key:"postCompile",value:function(t,e,n){if(t){var o;if("object"===typeof t){if(!(o=t.id))throw new Error("Invalid node object with keys: {".concat(Object.keys(t).join(", "),"}"))}else o=t;return o=String(o),this.editor.nodes.find((function(t){return String(t.id)===o}))}}}]),n}(Ct),Et=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(U.a)(this,n),e.call(this,t,"inferType")}return Object(Y.a)(n,[{key:"defaultCompile",value:function(t,e,n){return Object(bt.i)(t.type)}},{key:"postCompile",value:function(t,e,n){if(t)return(t=Object(bt.i)(t)).isAbstract()&&console.warn("[".concat(e.name,".").concat(n,"]"),"Abstract inferred type:",t.toTypeString()),t}}]),n}(Ct),Tt=function(t){Object(G.a)(n,t);var e=Object(X.a)(n);function n(){var t;Object(U.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).projectName="",t.compilers={type:new Et(Object(lt.a)(t)),node:new St(Object(lt.a)(t)),motoko:new Nt(Object(lt.a)(t))},t}return Object(Y.a)(n,[{key:"toJSON",value:function(){var t=Object(l.a)({name:this.projectName,description:"",version:this.id},Object(kt.a)(Object(Ot.a)(n.prototype),"toJSON",this).call(this));return delete t.id,t}},{key:"fromJSON",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,r=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object(l.a)({id:e.version},e),this.beforeImport(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return this.projectName=e.name||"",n=!1,t.prev=5,o={},t.next=9,Promise.all(Object.entries(e.nodes).map(function(){var t=Object(s.a)(u.a.mark((function t(e){var i,a,c,s,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(b.a)(e,2),a=i[0],c=i[1],t.prev=1,s=r.getComponent(c.name),t.next=5,s.build(V.d.Node.fromJSON(c));case 5:l=t.sent,o[a]=l,r.addNode(l),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),n=!0,t.abrupt("return",r.trigger("error",t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()));case 9:Object.entries(e.nodes).forEach((function(t){var e=Object(b.a)(t,2),i=e[0],a=e[1],c=o[i];Object.entries(a.outputs).forEach((function(t){var e=Object(b.a)(t,2),i=e[0];e[1].connections.forEach((function(t){var e=t.node,a=t.data,u=c.outputs.get(i),s=o[e];if(!s)return n=!0,r.trigger("error","Tried to connect to unknown node ".concat(c.id));var l=s.inputs.get(t.input);if(!u||!l)return n=!0,r.trigger("error","IO not found for node ".concat(c.id));r.connect(u,l,a)}))}))})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),this.trigger("warn",t.t0),n=!0;case 16:return t.abrupt("return",this.afterImport()&&!n);case 17:case"end":return t.stop()}}),t,this,[[5,12]])})));return function(e){return t.apply(this,arguments)}}()}]),n}(V.d.NodeEditor);function It(t){var e=t instanceof V.d.Input?"output":"input";t.connections.sort((function(t,n){return t[e].node.position[1]-n[e].node.position[1]}))}var At={name:"vertical-sort",install:function(t){t.on("connectioncreated",(function(t){It(t.input),It(t.output)})),t.on("nodedragged",(function(t){for(var e=0,n=[[t.inputs,"output"],[t.outputs,"input"]];e<n.length;e++){var o,r=Object(b.a)(n[e],2),i=r[0],a=r[1],c=Object(d.a)(i.values());try{for(c.s();!(o=c.n()).done;){var u,s=o.value,l=Object(d.a)(s.connections);try{for(l.s();!(u=l.n()).done;){It(u.value[a])}}catch(p){l.e(p)}finally{l.f()}}}catch(p){c.e(p)}finally{c.f()}}}))}};var Mt={name:"connection-drop",install:function(t){var e=function(t){t.code};document.addEventListener("keydown",e),t.on("destroy",(function(){return document.removeEventListener("keydown",e)}))}};var Lt={name:"connection-opacity",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDistance,o=void 0===n?500:n,r=e.opacityFalloff,i=void 0===r?200:r;t.on(["renderconnection","updateconnection","zoom"],(function(){setTimeout((function(){var e,n=Object(d.a)(t.view.container.querySelectorAll(".connection .main-path"));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.getBoundingClientRect().width;r.style.opacity=1/(1+Math.sqrt(Math.max(a-o,0)/i))}}catch(c){n.e(c)}finally{n.f()}}))}))}},Pt=Lt;var Rt,Dt={name:"drag-button",install:function(t){}},_t=n(24),Ft=n(0),Vt=["className","children"],Jt=_t.a.div(Rt||(Rt=Object(f.a)(["\n    \n"])));function zt(t){var e=t.className,n=t.children,o=Object(p.a)(t,Vt);return Object(y.jsx)(Jt,Object(l.a)(Object(l.a)({className:w()("bg-light text-secondary d-flex",e)},o),{},{children:Object(y.jsx)(Ft.b.Provider,{value:{style:{verticalAlign:"bottom",transform:"translateY(-1px)"}},children:n})}))}var Kt,Bt=["variant","tooltip","className"],qt=_t.a.div(Kt||(Kt=Object(f.a)(["\n\n"])));function Wt(t){var e=t.variant,n=t.tooltip,o=t.className,r=Object(p.a)(t,Bt);return Object(I.a)(),Object(y.jsx)(qt,Object(l.a)({className:w()("noselect h3 px-3 pt-1 pb-2 mb-0 d-inline-block text-center",e&&"text-".concat(e),o),"data-tip":n},r))}var Ut,Yt=["children"],Gt=Object(_t.a)(Wt)(Ut||(Ut=Object(f.a)(["\n  cursor: pointer;\n\n  :hover {\n    background: #0002;\n  }\n"])));function Xt(t){var e=t.children,n=Object(p.a)(t,Yt);return Object(y.jsx)(Gt,Object(l.a)(Object(l.a)({},n),{},{children:e}))}var $t=n(73),Ht=n(81),Zt=["options","onFile","onFileContent","className","children"];function Qt(t){var e=t.options,n=t.onFile,r=t.onFileContent,i=t.className,a=t.children,c=Object(p.a)(t,Zt),u=Object(o.useCallback)((function(t){if(t.length){var e=t[0];if(null===n||void 0===n||n(e),r){var o=new FileReader;o.onload=function(t){r(t.target.result)},o.readAsText(e)}}}),[n,r]),s=Object(Ht.a)(Object(l.a)({maxFiles:1,onDrop:u},e)),d=s.getRootProps,f=s.getInputProps,v=s.isDragActive;return Object(y.jsxs)("div",Object(l.a)(Object(l.a)({className:w()(i,v&&"dragging")},Object(l.a)(Object(l.a)({},c),d())),{},{children:[Object(y.jsx)("input",Object(l.a)({},f())),a]}))}var te,ee,ne,oe=["onLoadFileContent","className"],re=_t.a.div(te||(te=Object(f.a)(["\n  padding: 20px;\n"]))),ie=_t.a.div(ee||(ee=Object(f.a)(["\n  :hover {\n    background: #0001;\n  }\n"]))),ae=Object(_t.a)(Qt)(ne||(ne=Object(f.a)(["\n  padding: 2em;\n  border: 2px #0005 dashed;\n\n  &.dragging, &:hover {\n    background: #0002;\n  }\n"])));function ce(t){var e=t.onLoadFileContent,n=t.className,r=Object(p.a)(t,oe),i=Object(o.useContext)(W.g),a=Object($t.getExampleProjects)();return Object(y.jsxs)(re,Object(l.a)(Object(l.a)({className:w()("bg-light",n)},r),{},{children:[Object(y.jsx)(Qt,{onFileContent:e,children:Object(y.jsx)(ae,{className:w()("clickable text-center text-muted rounded-3"),children:Object(y.jsx)("h5",{children:"Import a .blocks file..."})})}),a.map((function(t,e){return Object(y.jsxs)(ie,{className:"clickable mt-2 px-3 py-2",onClick:function(){return i.emit(W.f,t)},children:[Object(y.jsx)("h4",{children:t.name}),Object(y.jsx)("div",{className:"text-muted",children:t.description||"(No description provided)"})]},e)}))]}))}var ue,se,le,de=n(157),pe=_t.a.input(ue||(ue=Object(f.a)(["\n  background: none !important;\n  border: none !important;\n  border-bottom: solid 2px #0005 !important;\n  font-weight: bold;\n  vertical-align: top;\n  margin-top: .4em;\n  padding: .25em .25em .1em;\n\n  :focus {\n    background: #0001 !important;\n  }\n"]))),fe=Object(_t.b)(se||(se=Object(f.a)(["\n  30% {\n    transform: scale(.9);\n  }\n"]))),ve=Object(_t.a)(E.t)(le||(le=Object(f.a)(["\n  &.animated {\n    animation: "," .5s ease-out;\n  }\n"])),fe);function he(t){var e=t.getEditor,n=t.onLoadFileContent,r=Object(o.useState)(""),i=Object(b.a)(r,2),a=i[0],c=i[1],u=Object(o.useState)(!1),s=Object(b.a)(u,2),l=s[0],d=s[1],p=Object(o.useState)(!1),f=Object(b.a)(p,2),v=f[0],h=f[1],m=Object(o.useContext)(W.g);Object(Q.a)(m,W.b,(function(){d(!0)})),Object(Q.a)(m,W.f,(function(t){c(t.name),h(!1)})),setTimeout((function(){c(e().projectName)}));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(zt,{children:[Object(y.jsx)(Wt,{variant:"primary",children:"BLOCKS."}),Object(y.jsxs)("div",{className:"d-inline-block mx-auto",children:[Object(y.jsx)(Xt,{onMouseDown:function(){return m.emit(W.d)},"data-tip":"New Project",children:Object(y.jsx)(E.j,{})}),Object(y.jsx)(pe,{type:"text",placeholder:"(Unnamed Project)",className:"text-secondary",value:a||"",onChange:function(t){return function(t){c(t);var n=e();n.projectName=t,m.emit(W.a,n)}(t.target.value)},onKeyDown:function(t){return"Enter"===t.key&&m.emit(W.b,e())}}),Object(y.jsx)(Xt,{tooltip:"Save Changes",onMouseDown:function(){return m.emit(W.b,e())},children:Object(y.jsx)(ve,{className:w()(l&&"animated"),onAnimationEnd:function(){return d(!1)}})}),Object(y.jsx)(Xt,{tooltip:"Export to File",onMouseDown:function(){return m.emit(W.e,e().toJSON())},children:Object(y.jsx)(E.h,{})}),Object(y.jsx)(Xt,{tooltip:"Load Project",onMouseDown:function(){return h(!v)},children:v?Object(y.jsx)(E.m,{}):Object(y.jsx)(E.l,{})})]})]}),Object(y.jsx)(de.a,{show:v,onHide:function(){return h(!1)},children:Object(y.jsx)(de.a.Body,{children:Object(y.jsx)(ce,{onLoadFileContent:n})})})]})}var me,be=["onSetup","onChange","onSave","className"];function ye(t){var e,n,o;return null!==(e=null!==(n=null===(o=t.findType)||void 0===o?void 0:o.call(t).data.category)&&void 0!==n?n:t.data.category)&&void 0!==e?e:"none"}var ge=_t.a.div(me||(me=Object(f.a)(["\n  width: 100%;\n  height: 100vh;\n"])));function je(t){var e=t.onSetup,n=t.onChange,r=t.onSave,i=t.className,a=Object(p.a)(t,be),c=Object(o.useContext)(W.g),f=null;Object(Q.a)(c,W.a,(function(t){t===f&&(null===n||void 0===n||n(f))})),Object(Q.a)(c,W.b,(function(t){t===f&&(null===r||void 0===r||r(f.toJSON(),f))}));var m=function(t){try{var e=JSON.parse(t);c.emit(W.f,e)}catch(n){c.emit(W.c,n)}};return Object(y.jsx)(Qt,{options:{noClick:!0},onFileContent:m,children:Object(y.jsxs)(ge,Object(l.a)(Object(l.a)({className:w()("node-editor d-flex flex-grow-1 flex-column",i)},a),{},{children:[Object(y.jsx)(he,{getEditor:function(){return f},onLoadFileContent:m}),Object(y.jsx)("div",{ref:function(t){if(f&&(f.clear(),f.components.clear(),f.destroy()),t){f=function(t){var e=new Tt("blocks-webapp@0.1.0",t);e.use(q.c,{component:st}),e.use(h.a),e.use(B.a),e.use(v.a,{background:function(){var t=document.createElement("div");return t.classList.add("grid"),t.style.pointerEvents="none",e.on("destroy",(function(){return t.remove()})),t}(),snap:{size:16,dynamic:!0}}),e.use(z),e.use(Mt),e.use(Pt),e.use(At),e.use(Dt,{editorButton:2});var n=!1;return e.view.container.addEventListener("mousedown",(function(t){n=!1})),e.on("mousemove",(function(t){n=!0})),e.on("click",(function(t){t.e,n||(e.selected.clear(),e.nodes.map((function(t){return t.update()})))})),e.on("zoom",(function(t){return"dblclick"!==t.source})),e.on("nodeselect",(function(t){return!e.selected.contains(t)})),e.on("renderconnection",(function(t){var e=t.el,n=t.connection,o=ye(n.input.socket),r=ye(n.output.socket);if(n.input.socket.data.reversed){var i=[r,o];o=i[0],r=i[1]}e.querySelector(".connection").classList.add("socket-input-category-".concat(o),"socket-output-category-".concat(r))})),e}(t),window.EDITOR=f;var n=function(t){var e=String.fromCharCode(t.which).toLowerCase();t.ctrlKey&&"s"===e&&(t.preventDefault(),c.emit(W.b,f),console.log("Saved successfully"))};document.addEventListener("keydown",n),f.on("destroy",(function(){return document.removeEventListener("keydown",n)}));var o,r=Object(d.a)(Z.a.values());try{for(r.s();!(o=r.n()).done;){var i=o.value,a=new jt(i);f.register(a)}}catch(m){r.e(m)}finally{r.f()}f.on(["nodecreated","noderemoved","nodedragged","connectioncreated","connectionremoved"],Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.silent||c.emit(W.a,f);case 1:case"end":return t.stop()}}),t)})))),f.on("error",(function(t){return c.emit(W.c,t)})),Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e(l,f);case 3:case"end":return t.stop()}}),t)})))().catch((function(t){return c.emit(W.c,t)}))}function l(t){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,f.fromJSON(e);case 4:return(n=t.sent)&&(f.view.resize(),v.a.zoomAt(f),c.emit(W.a,f)),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}})]}))})}var ke=n(79),Oe=n.n(ke),we=n(156);var xe="blocks.editorState",Ce=n(147);function Ne(){var t=Object(o.useContext)(W.g),e=function(){var t=Object(o.useState)({})[1];return function(){return t({})}}();Object(Q.a)(t,W.d,(function(){delete localStorage[xe],e()})),Object(Q.a)(t,W.f,(function(t){localStorage[xe]=JSON.stringify(t),e()})),Object(Q.a)(t,W.e,(function(t){var e=JSON.stringify(t);Oe.a.saveAs(new Blob([e]),"".concat(Object(we.a)(t.name||"project"),".blocks.json"))}));var n=function(){var t=Object(s.a)(u.a.mark((function t(e,n){var o,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=localStorage[xe],r=o?JSON.parse(o):Ce,t.next=4,e(r);case 4:if(t.sent){t.next=6;break}console.warn("Load error");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(y.jsx)(je,{onSetup:n,onChange:function(t){},onSave:function(t,e){localStorage[xe]=JSON.stringify(t)}})}var Se,Ee,Te=n(62),Ie=(n(148),n(39)),Ae=Object(_t.a)(Ie.a)(Se||(Se=Object(f.a)(["\n  padding: .5em 1em !important;\n"])));function Me(){return Object(y.jsx)(Ae,{backgroundColor:"#111",place:"bottom",delayShow:300})}function Le(){var t=Object(o.useContext)(W.g);return Object(Q.a)(t,W.c,(function(t){Object(Te.b)(t,{type:"error"})})),Object(y.jsxs)(r.a.StrictMode,{children:[Object(y.jsx)(Me,{}),Object(y.jsx)(Te.a,{}),Object(y.jsx)(Ne,{})]})}a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(Le,{})}),document.getElementById("root")),(Ee=function(){})&&Ee instanceof Function&&n.e(3).then(n.bind(null,160)).then((function(t){var e=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;e(Ee),n(Ee),o(Ee),r(Ee),i(Ee)}))}],[[149,1,2]]]);
//# sourceMappingURL=main.69146fce.chunk.js.map