(this["webpackJsonpblocks-webapp"]=this["webpackJsonpblocks-webapp"]||[]).push([[0],[,,function(t,e,n){"use strict";n.d(e,"a",(function(){return L})),n.d(e,"d",(function(){return M})),n.d(e,"c",(function(){return I})),n.d(e,"B",(function(){return E})),n.d(e,"t",(function(){return A})),n.d(e,"D",(function(){return R})),n.d(e,"i",(function(){return D})),n.d(e,"y",(function(){return P})),n.d(e,"n",(function(){return F})),n.d(e,"j",(function(){return B})),n.d(e,"q",(function(){return V})),n.d(e,"b",(function(){return z})),n.d(e,"w",(function(){return _})),n.d(e,"g",(function(){return q})),n.d(e,"z",(function(){return J})),n.d(e,"k",(function(){return U})),n.d(e,"o",(function(){return W})),n.d(e,"s",(function(){return K})),n.d(e,"x",(function(){return G})),n.d(e,"A",(function(){return Z})),n.d(e,"C",(function(){return H})),n.d(e,"v",(function(){return $})),n.d(e,"u",(function(){return X})),n.d(e,"h",(function(){return Y})),n.d(e,"e",(function(){return Q})),n.d(e,"r",(function(){return tt})),n.d(e,"p",(function(){return et})),n.d(e,"f",(function(){return nt})),n.d(e,"m",(function(){return rt})),n.d(e,"l",(function(){return ct}));var o=n(4),a=n(7),i=n(10),r=n(15),c=n(16),u=n(51),s=n(1),p=n(27),l=n(3);function d(t){var e=t.control,n=t.bindInput,o=t.validation,i=o.min,r=o.max,c=o.step,u=Object(p.a)(e),s=Object(a.a)(u,2),d=s[0],f=s[1];return Object(l.jsx)("input",{type:"number",style:{width:"4em"},ref:n,min:i,max:r,step:c,value:d||0,onChange:function(t){return f(+t.target.value||t.target.value)}})}var f=n(13),m=n(9),y=n(11),b=n.n(y),v=n(34),g=n(59),j=["value","constraintType","abstract","invalid","onChange"];function h(t){var e,n,a,r,c=t.value,u=t.constraintType,p=t.abstract,d=t.invalid,y=t.onChange,O=Object(i.a)(t,j);u=u||M;var k=Object(f.a)(L.values()).filter((function(t){return(p||!t.data.abstract)&&u.isSubtype(t)})),x=Object(s.useContext)(m.g);if(c)try{c=rt(c)}catch(w){y(c=void 0),x.emit(m.c,w)}return d=d||!c||!k.some((function(t){return t.isSubtype(c)})),Object(v.a)(),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("select",Object(o.a)(Object(o.a)({className:b()(d&&"invalid"),value:null===(e=c)||void 0===e?void 0:e.name,onChange:function(t){return y(rt(t.target.value))}},O),{},{children:[d&&Object(l.jsx)("option",{label:"(Type)",value:null===(n=c)||void 0===n?void 0:n.name}),k.map((function(t){return Object(l.jsx)("option",{label:t.name,value:t.name},t.name)}))]})),Object(l.jsx)("div",{className:"ps-2",children:null===(a=c)||void 0===a||null===(r=a.generics)||void 0===r?void 0:r.map((function(t,e){var n;return Object(l.jsx)(h,{value:t,constraintType:c.data.baseType.generics[e],abstract:p,"data-tip":Object(g.a)(null===(n=c.data.genericNames)||void 0===n?void 0:n[e]),onChange:function(t){var n=Object(f.a)(c.generics);n.splice(e,1,t),y(rt(Object(o.a)(Object(o.a)({},c.toJSON()),{},{generics:n})))}},e)}))})]})}var O=n(25),k=n(60),x=n(35);var w=n(14),C=["name"],T=["generics","meta"],S=["abstract","arbitraryGenerics"],N=function(){function t(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Object(r.a)(this,t),this.name=e,this.parent=n,this.generics=o.map((function(t){return rt(t)})),this.data=a,this.meta=i}return Object(c.a)(t,[{key:"toJSON",value:function(){return{name:this.name,generics:this.generics.map((function(t){return t.toJSON()}))}}},{key:"of",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return rt(this,e)}},{key:"withMeta",value:function(t){var e=t.name,n=Object(i.a)(t,C),o=it(e||this.name,this,this.generics);return Object.assign(o.meta,n),o}},{key:"isAbstract",value:function(){return this.data.abstract||this.generics.some((function(t){return t.isAbstract()}))}},{key:"getDefaultValue",value:function(){var t=this.data.defaultValue;return"function"===typeof t?t(this):t}},{key:"equals",value:function(t){return this.name===t.name&&this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.equals(t.generics[n])}))}},{key:"isSubtype",value:function(t){return!!t&&(this.data.alwaysSubtype===t||(!(!this.data.arbitraryGenerics||!t.parent||this.name!==t.parent.name)||(this.name===t.name?this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.isSubtype(t.generics[n])})):!!t.parent&&this.isSubtype(t.parent))))}},{key:"getSharedType",value:function(t){if(t)return this===t||this.isSubtype(t)?this:t.isSubtype(this)?t:this.parent?this.parent.getSharedType(t):void 0}},{key:"toTypeString",value:function(){var t,e;return null!==(t=null===(e=this.data.toTypeString)||void 0===e?void 0:e.call(this))&&void 0!==t?t:this.name+(this.generics.length?"<"+this.generics.map((function(t){return t.toTypeString()})).join(", ")+">":"")}},{key:"toString",value:function(){return"Type(".concat(this.toTypeString(),")")}}]),t}(),L=new Map;window.TYPE_MAP=L;var M=ot("Any",{abstract:!0,category:"default",reversed:!1}),I=ot("AnyReversed",{abstract:!0,category:"default",reversed:!0}),E=ot("Type",{parent:M,category:"types",controlType:function(t){var e=t.abstract,n=t.control,o=t.bindInput,i=Object(p.a)(n),r=Object(a.a)(i,2),c=r[0],u=r[1],s=n.config.type.generics[0],d=!n.validate(c);return Object(l.jsx)("div",{ref:o,children:Object(l.jsx)(h,{value:c,constraintType:s,abstract:e,invalid:d,onChange:u})})},defaultValue:function(t){return t.generics[0]},generics:[M]}),A=ot("Node",{parent:M,category:"nodes",controlType:function(t){var e,n=t.editor,o=t.control,i=t.bindInput,r=Object(p.a)(o),c=Object(a.a)(r,2),u=c[0],d=c[1],y=Object(s.useState)((function(){return Object(f.a)(n.nodes)})),v=Object(a.a)(y,2),g=v[0],j=v[1],h=Object(s.useContext)(m.g);Object(O.a)(h,m.a,(function(){return j(Object(f.a)(n.nodes))}));var w=null===(e=o.config.type)||void 0===e?void 0:e.meta.block,C=w&&(Array.isArray(w)?w:[w]).map((function(t){var e="string"===typeof t?t:t.name;return Object(x.b)(e),e}));C&&(g=g.filter((function(t){return!C||C.includes(t.name)})));var T=!u||!g.some((function(t){return String(t.id)===String(u)&&(!C||C.includes(t.name))}));return Object(l.jsxs)("select",{ref:i,className:b()(T&&"invalid"),style:{maxWidth:"100%"},value:u,onChange:function(t){return d(t.target.value||void 0)},children:[Object(l.jsx)("option",{label:"(Select a Node)",value:void 0},-1),g.map((function(t){return Object(l.jsx)("option",{label:Object(k.a)(t,n),value:t.id},t.id)}))]})},toTypeString:function(){return this.meta.block?"Node{block=".concat(JSON.stringify(this.meta.block),"}"):"Node"}}),R=ot("Value",{abstract:!0,parent:M,category:"values"}),D=ot("Custom",{parent:R,arbitraryGenerics:!0}),P=ot("Reference",{parent:M,category:"references"}),F=ot("Identifier",{parent:P,controlType:u.a,validation:{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/},defaultInput:function(t,e){return Object(w.c)(e,t.key)}}),B=ot("Effect",{parent:I,category:"effects",generics:[R],toMotoko:function(t){return Object(a.a)(t,1)[0]}}),V=ot("Member",{parent:I,singleOutput:!0,category:"members"}),z=ot("Actor",{parent:I,singleOutput:!0,category:"actors"}),_=(ot("Module",{parent:I,singleOutput:!0,category:"modules"}),ot("Param",{parent:I,category:"parameters"})),q=ot("Bool",{parent:R,controlType:function(t){var e=t.control,n=t.bindInput,o=Object(p.a)(e),i=Object(a.a)(o,2),r=i[0],c=i[1];return Object(l.jsxs)("label",{ref:n,children:[Object(l.jsx)("input",{type:"checkbox",checked:!!r,onChange:function(t){return c(t.target.checked)}}),Object(l.jsx)("span",{className:"input-title my-0",style:{verticalAlign:"top"},children:e.name})]})},defaultValue:!1}),J=(ot("Char",{parent:R,controlType:u.a,validation:{minLength:1,maxLength:1}}),ot("Text",{parent:R,controlType:u.a,defaultValue:""})),U=ot("Float",{parent:R,controlType:d,defaultValue:0}),W=ot("Int",{parent:U,category:"integers",controlType:d,validation:{step:1}}),K=ot("Nat",{parent:U,category:"naturals",validation:{step:1,min:0}}),G=(ot("Blob",{parent:R}),ot("Principal",{parent:R,category:"principals"})),Z=(ot("Error",{parent:R}),ot("Tuple",{abstract:!0,arbitraryGenerics:!0,parent:R,category:"tuples",toTypeString:function(){return this===Z?this.name:"(".concat(this.generics.map((function(t){return t.toTypeString()})).join(", "),")")}})),H=ot("Unit",Z.of());if(Z===H)throw new Error;ot("Object",{abstract:!0,arbitraryGenerics:!0,parent:R,category:"objects",toTypeString:function(){var t=this;return"(".concat(this.generics.map((function(e,n){return"".concat(t.genericNames[n],": ").concat(e.toTypeString())})).join(", "),")")}}),ot("Function",{parent:R,generics:[R,R],genericNames:["input","output"],category:"functions",toTypeString:function(){return"".concat(this.generics[0].toTypeString()," -> ").concat(this.generics[1].toTypeString())}});var $=ot("Optional",{parent:R,generics:[R],category:"optionals",toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"?".concat(e)}}),X=ot("Null",{parent:R,alwaysSubtype:$}),Y=ot("Collection",{abstract:!0,parent:R,category:"collections"}),Q=ot("Array",{parent:Y,generics:[R],genericNames:["item"],toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"[".concat(e,"]")}}),tt=ot("MutableArray",{parent:Q,generics:[R],genericNames:["item"],toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"[var ".concat(e,"]")}}),et=ot("Map",{parent:Y,generics:[R,R],genericNames:["key","value"],toMotoko:function(t){var e=Object(a.a)(t,2),n=e[0],o=e[1];return"HashMap.HashMap<".concat(n,", ").concat(o,">")}}),nt=ot("Async",{parent:R,generics:[R],category:"futures",toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"async ".concat(e)}});function ot(t,e){var n;if(e instanceof N)(n=e).name=t;else{var o=e.parent,a=e.generics,r=void 0===a?[]:a,c=e.meta,u=void 0===c?{}:c;(n=it(t,o,r,Object(i.a)(e,T),u)).data.baseType=n}return L.set(t,n),n}function at(t,e){if("string"===typeof t&&(t=rt(t)),(!e||!e.length||e===t.generics)&&!t.data.arbitraryGenerics)return rt(t);var n=it(t.name,t,e);if(!t.isSubtype(n))throw new Error("Generics not assignable to ".concat(t.toTypeString()," from ").concat(n.toTypeString()));return n}function it(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=e?e.data:{},u=(c.abstract,c.arbitraryGenerics,Object(i.a)(c,S)),s=e?e.meta:{};return new N(t,e||null,n||(e?e.generics:[]),Object(o.a)(Object(o.a)({},u),a),Object(o.a)(Object(o.a)({},s),r))}function rt(t,e){if(arguments.length>1)return at(t,e);if(t instanceof N)return t;if("object"===typeof t)return at(t.name,(t.generics||[]).map((function(t){return rt(t)})));if(!t)throw new Error("Invalid type: ".concat(t));if(!L.has(t))throw new Error("Unknown type: ".concat(t));return L.get(t)}function ct(){for(var t=arguments.length<=0?void 0:arguments[0],e=1;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];t?n&&(t=t.getSharedType(n)):t=n}return t}},,,,function(t,e,n){"use strict";n.d(e,"j",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"n",(function(){return f})),n.d(e,"i",(function(){return m})),n.d(e,"m",(function(){return y})),n.d(e,"o",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return g})),n.d(e,"h",(function(){return j})),n.d(e,"l",(function(){return h})),n.d(e,"a",(function(){return O})),n.d(e,"g",(function(){return k})),n.d(e,"k",(function(){return x})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return C}));var o=n(4),a=n(10),i=n(15),r=n(12),c=["name","parent"],u=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.name=e,this.parent=n,this.root=n?n.root:this,this.data=o},s=new Map;function p(t){var e=t.name,n=t.parent,i=Object(a.a)(t,c),r=new u(e,n,n?Object(o.a)(Object(o.a)({},n.data),i):i);return s.set(r.name,r),r}function l(t){if(t instanceof u)return t;if(!s.has(t))throw new Error("Could not find category with name: ".concat(t));return s.get(t)}var d=p("Default"),f=p({name:"State",color:"#3fd",icon:r.i,priority:10}),m=p({name:"Function",color:"#fd3",icon:r.h,priority:20}),y=p({name:"Param",color:"#a8f",icon:r.o,priority:3}),b=p({name:"Type",color:"#2af",icon:r.z}),v=p({name:"Collection",color:"#1c8",icon:r.A}),g=p({name:"Compiler",color:"#f5a",icon:r.d}),j=p({name:"Expression",color:"#aaa",icon:r.j}),h=p({name:"Operator",icon:r.k}),O=p({name:"Actor",color:"#fa8",icon:r.l}),k=p({name:"Effect",icon:r.y,priority:5}),x=p({name:"Literal",icon:r.s}),w=p({name:"Decomposition",icon:r.p}),C=p({name:"Comment",icon:r.e})},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return l}));var o=n(1),a=n.n(o),i=n(57),r="editor-change",c="editor-save",u="project-export",s="project-load",p="project-clear",l="error",d=new(n.n(i).a);d.setMaxListeners(1e3),d.on(l,console.error),window.EVENTS=d,e.g=a.a.createContext(d)},,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return f}));var o=n(15),a=n(16),i=n(18),r=n(20),c=n(7),u=n(43),s=n(2);function p(t,e){var n="number"===typeof t||"string"===typeof t?String(t):t.id;return"node__".concat(n).concat(e?"_"+e:"")}function l(t){return'$import$"'.concat(t,'"')}function d(t){if(!t)return t;t=String(t);var e={};t=t.replace(/\$import\$"([^"]*)"/g,(function(t,n){var o=n.includes("/")?n.substring(n.lastIndexOf("/")+1):n;if(e.hasOwnProperty(o)&&e[o]!==n)throw new Error('Conflicting import paths: "'.concat(n,'" != "').concat(e[o],'"'));return e[o]=n,o}));for(var n=0,o=Object.entries(e);n<o.length;n++){var a=Object(c.a)(o[n],2),i=a[0],r=a[1];t="import ".concat(i,' "').concat(r,'"; ').concat(t)}return t}var f=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t,"toMotoko")}return Object(a.a)(n,[{key:"defaultCompile",value:function(t,e){if(s.n.isSubtype(t.type))return console.log(e.name),p(e,t.key);if(s.B.isSubtype(t.type)){var n=t.type.generics[0];if(n&&!n.isAbstract())return this.getTypeString()}}},{key:"postCompile",value:function(t,e,n){var o=this;return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||null===t?t:void 0!==t?Array.isArray(t)?t.map((function(t){return o.postCompile(t,e,n)})).filter((function(t){return t})).join(" "):(console.warn("Unexpected Motoko expression:",t),String(t)):void 0}}]),n}(u.a)},,,,,function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return s}));var o=n(7),a=n(2),i=n(6);function r(t,e,n){return t=Object(a.m)(t),{topRight:"result",title:"(".concat(e," a)"),category:i.l,inputs:[{key:"input",title:"a",type:t}],outputs:[{key:"result",type:t,toMotoko:function(t){var n=t.input;return"".concat(e,"(").concat(n,")")}}]}}function c(t,e,n){var r=Array.isArray(t)?t:[t,t],c=Object(o.a)(r,2),u=c[0],s=c[1];return u=Object(a.m)(u),s=Object(a.m)(s),{title:"(a ".concat(e," b)"),category:i.l,topRight:"result",inputs:[{key:"left",title:"a",type:u},{key:"right",title:"b",type:u}],outputs:[{key:"result",type:s,toMotoko:function(t){var n=t.left,o=t.right;return"(".concat(n," ").concat(e," ").concat(o,")")}}]}}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[a.k].concat(e))}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[[a.k,a.g]].concat(e))}},,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s}));var o=n(4),a=n(13),i=n(2),r=n(6),c=i.j.of(i.C);function u(t,e){var n={key:"before",type:i.j,inferType:function(t,e,n){var o=n.getBlock(e);return i.l.apply(void 0,Object(a.a)(o.inputs.filter((function(t){return i.j.isSubtype(t.type)})).map((function(t){return n.getInput(e,t.key)}))))||c},toMotoko:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var i=e.apply(void 0,[t].concat(o));if(void 0!==i){var r=t.after;return"".concat(i).concat(r?" "+r:"")}}};return Object(o.a)(Object(o.a)({category:r.g,topLeft:"before",topRight:"after"},t),{},{inputs:[].concat(Object(a.a)(t.inputs||[]),[{key:"after",type:i.j,optional:!0}]),outputs:[].concat(Object(a.a)(t.outputs||[]),[n])})}function s(t,e){return Object(o.a)(Object(o.a)({category:r.g,topLeft:"statement"},t),{},{outputs:[].concat(Object(a.a)(t.outputs||[]),[Object(o.a)({key:"statement",type:i.j},e)])})}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(1);function a(t,e,n,a){return Object(o.useEffect)((function(){if(t){var o="addEventListener"in t;return o?t.addEventListener(e,n,a):t.on(e,n,a),function(){o?t.removeEventListener(e,n):t.off(e,n)}}})),n}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(7),a=n(1),i=n(25),r=n(9);function c(t){var e=t.getValue(),n=Object(a.useState)(e),c=Object(o.a)(n,2)[1],u=Object(a.useContext)(r.g);return Object(i.a)(u,r.a,(function(){var e;c(t.getValue()),null===(e=t.notifyEditorChange)||void 0===e||e.call(t)})),Object(i.a)(t.events,"update",(function(){return u.emit(r.a,t,e)})),[e,function(e){return t.setValue(e)}]}},,function(t,e,n){"use strict";n.r(e),n.d(e,"stateReadIcon",(function(){return c})),n.d(e,"stateWriteIcon",(function(){return u}));var o=n(2),a=n(32),i=n(6),r=n(12),c=r.b,u=r.a,s=Object(a.b)({info:"A persistent smart contract variable",topRight:"value",category:i.n,global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),i=e.compilers.type.getInput(t,"initialValue")||o.C;return n&&"".concat(n," : ").concat(e.compilers.motoko.getTypeString(i))},shortcuts:[{block:"StateRead",nodeKey:"stateNode"},{block:"StateUpdate",nodeKey:"stateNode"}],inputs:[{key:"initialValue",type:o.D,optional:!0}],outputs:[{key:"value",type:o.D,toMotoko:function(t){return t.name},inferType:function(t){return t.initialValue}}],controls:[{key:"stable",type:o.g}]},{toMotoko:function(t,e,n){var o=t.stable,a=t.name,i=t.initialValue,r=[!!o&&"stable"].filter((function(t){return t})).join(" "),c=n.editor.compilers.type.getInput(e,"initialValue");return i=i||"()","".concat(r&&r+" ").concat("var"," ").concat(a).concat(c?" : ".concat(n.getTypeString(c)):""," = ").concat(i,";")}});e.default=s},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m}));var o=n(13),a=n(4),i=n(2),r=n(7),c=(n(1),n(27)),u=n(11),s=n.n(u),p=n(3);function l(t){var e=t.control,n=t.bindInput,o=t.options,a=t.findLabel,i=Object(c.a)(e),u=Object(r.a)(i,2),l=u[0],d=u[1];void 0!==l||o.includes(l)||(l=o[0],d(l));var f=!e.validate(l)||!o.includes(l);return Object(p.jsx)("select",{className:s()(f&&"invalid"),ref:n,value:l,onChange:function(t){return d(t.target.value||void 0)},children:o.map((function(t,e){var n;return Object(p.jsx)("option",{label:null!==(n=null===a||void 0===a?void 0:a(t,e))&&void 0!==n?n:t,value:t},e)}))})}function d(t,e){return e.compilers.motoko.getInput(t,"name")}function f(){return t={key:"visibility"},e=["public","private","system"],Object(a.a)(Object(a.a)({},t),{},{config:Object(a.a)(Object(a.a)({},t.config||{}),{},{controlType:l,controlProps:{options:t.optional?[void 0].concat(Object(o.a)(e)):e,findLabel:function(t){return t?t.charAt(0).toUpperCase()+t.substring(1):"--"}}})});var t,e}function m(t,e){return Object(a.a)(Object(a.a)({topLeft:"member"},t),{},{inputs:[{key:"name",type:i.n}].concat(Object(o.a)(t.inputs||[])),outputs:[Object(a.a)({key:"member",type:i.q},e)].concat(Object(o.a)(t.outputs||[]))})}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o,a=n(1),i=n(39);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(a.useEffect)((function(){clearTimeout(o),o=setTimeout((function(){return i.a.rebuild()}))}),t),i.a}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return j}));var o=n(28),a=n(7),i=n(4),r=n(68),c=n(2),u=n(6);if("undefined"===typeof n(67).context){var s=n(106),p=n(68);n(67).context=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/\.js$/,i={},r=function t(e){s.readdirSync(e).forEach((function(n){var r=p.resolve(e,n);s.statSync(r).isDirectory()?o&&t(r):a.test(r)&&(i[r]=!0)}))},c=function(t){return n(67)(t)};return c.keys=function(){return Object.keys(i)},r(p.resolve(t,e)),c}}var l=[],d=new Set,f=n(107);function m(t,e,n){if(e){var a,i=Object(o.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(!r.key||t.props[r.key]!==r){if(t.props.hasOwnProperty(r.key))throw new Error("Duplicate prop in ".concat(t.name,": ").concat(r.key));r[n]=r[n]||!0,t.props[r.key]=r}}}catch(c){i.e(c)}finally{i.f()}}}f.keys().forEach((function(t){var e=Object(r.basename)(t,".js"),n=f(t).default;if(n=Object(i.a)({},n)){if(n.name=e,d.has(e))return void console.error("Duplicate block name: ".concat(e));n.category=n.category?Object(u.j)(n.category):u.f,n.props=n.props||{};for(var o=0,s=Object.entries(n.props);o<s.length;o++){var p=Object(a.a)(s[o],2),y=p[0],b=p[1];if(b.key&&b.key!==y)throw new Error("Prop key mismatch: ".concat(y," != ").concat(b.key));b.key=y}m(n,n.outputs,"output"),m(n,n.inputs,"input"),m(n,n.controls,"control"),n.inputs=[],n.outputs=[],n.controls=[];for(var v=0,g=Object.entries(n.props);v<g.length;v++){var j=Object(a.a)(g[v],2),h=j[0],O=j[1];O.key=h,O.output?n.outputs.includes(O)||n.outputs.push(O):O.input?n.inputs.includes(O)||n.inputs.push(O):O.control&&(n.controls.includes(O)||n.controls.push(O))}for(var k=0,x=Object.values(n.props);k<x.length;k++){var w=x[k];if(!w.type&&(w.input||w.output)&&w.control)throw console.log(w),new Error("Type not found for ".concat(n.name," : ").concat(w.key));w.type&&(w.type=Object(c.m)(w.type))}d.add(n.name),l.push(n)}}));var y=new Map(l.map((function(t){return[t.name,t]})));window.BLOCK_MAP=y;var b,v=Object(o.a)(y.values());try{var g=function(){var t=b.value;t.shortcuts?t.shortcuts.forEach((function(e){if(!e.block)throw new Error("Shortcut in ".concat(t.name," requires a `block` attribute"));e.block=j(e.block)})):t.shortcuts=[]};for(v.s();!(b=v.n()).done;)g()}catch(h){v.e(h)}finally{v.f()}function j(t){if(!t)throw new Error("Block cannot be ".concat(t));if("string"===typeof t){if(!y.has(t))throw new Error("Block does not exist: ".concat(t));return y.get(t)}return t}}).call(this,"/")},function(t,e,n){"use strict";n.r(e),n.d(e,"arrayImportRef",(function(){return r}));var o=n(2),a=n(14),i=n(6),r=Object(a.b)("mo:base/Array"),c={title:"Create Array",category:i.b,icon:i.b.data.icon,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value"),o=e.compilers.motoko.getOutput(t,"mutable");return n&&"new Array [ ".concat(o?"var ":"").concat(e.compilers.motoko.getTypeString(n.generics[0])," ]")},inputs:[{key:"itemType",type:o.B.of(o.D)},{key:"items",type:o.D,multi:!0}],outputs:[{key:"value",type:o.e,inferType:function(t,e,n){var a=t.itemType;return(n.editor.compilers.motoko.getInput(e,"mutable")?o.r:o.e).of(a)},toMotoko:function(t){var e=t.mutable,n=t.items;return"[".concat(e?n.length?"var ":"var":"").concat(n.join(", "),"]")}}],controls:[{key:"mutable",type:o.g}]};e.default=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(13),a=n(4),i=n(6);function r(t,e,n){return Object(a.a)(Object(a.a)({category:i.k,topRight:"value"},t),{},{outputs:[].concat(Object(o.a)(t.outputs||[]),[{key:"value",type:e,control:!0,toMotoko:function(t){var e=t.value;if(void 0!==e)return String(n?n(e):e)}}])})}},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(16),a=n(15),i=n(18),r=n(20),c=n(94),u=n(35),s=n(17),p=n(2),l=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t,o){return Object(a.a)(this,n),e.call(this,"".concat(t.name,".").concat(o))}return n}(Object(c.a)(Error)),d=function(){function t(e,n){Object(a.a)(this,t),this.editor=e,this.compileKey=n}return Object(o.a)(t,[{key:"defaultCompile",value:function(t,e){}},{key:"postCompile",value:function(t,e,n){return t}},{key:"getNode",value:function(t){if(t instanceof s.d.Node)return t;if(!t)throw new Error("Node cannot be ".concat(JSON.stringify(t)));var e=String("string"===typeof t||"number"===typeof t?t:t.id);if(!(t=this.editor.nodes.find((function(t){return String(t.id)===e}))))throw new Error("Node does not exist: ".concat(e));return t}},{key:"getBlock",value:function(t){return t=this.getNode(t),Object(u.b)(t.name)}},{key:"getInput",value:function(t,e){var n=this;t=this.getNode(t);var o=this.getBlock(t);if(!o.props.hasOwnProperty(e))throw new Error("Prop not found on ".concat(t.name,": ").concat(e));var a=o.props[e];if(a.input)if(a.type.data.reversed){var i=this._output(t,e);if(a.multi)return i.connections.map((function(t){return n._compileConnection(t,t.output,t.input,"inputs")}));if(i.connections.length){var r=i.connections[0];return this._compileConnection(r,r.output,r.input,"inputs")}}else{var c=this._input(t,e);if(a.multi)return c.connections.map((function(t){return n._compileConnection(t,t.input,t.output,"outputs")}));if(c.connections.length){var u=c.connections[0];return this._compileConnection(u,u.input,u.output,"outputs")}if(c.control)return c.control.getValue()}if(a.control){var s=this._control(t,a.key);return this.postCompile(s.getValue(),t,e)}}},{key:"getOutput",value:function(t,e){t=this.getNode(t);var n=this._prop(t,e);try{var o,a=this.getInputArgs(t);if(!a)return;return o=n[this.compileKey]?n[this.compileKey](a,t,this):this.defaultCompile(n,t),this.postCompile(o,t,e)}catch(i){if(i instanceof l)return;console.error("[".concat(t.name,".").concat(e,"]"),i),this.editor.trigger("warn","[".concat(t.name,".").concat(e,"] ").concat(i))}}},{key:"getInputArgs",value:function(t){var e=this;t=this.getNode(t);for(var n=this.getBlock(t),o={},a=function(){var a=r[i];if(a.input||a.control){var c=!1;Object.defineProperty(o,a.key,{get:function(){if(!c){var o,i,r,u=e.getInput(t,a.key);if(void 0===u&&!a.optional)if(void 0===(u=null===(o=a.type)||void 0===o||null===(i=(r=o.data).defaultInput)||void 0===i?void 0:i.call(r,a,t))&&!a.optional)throw new l(n,a.key);return c=!0,u}}})}},i=0,r=Object.values(n.props);i<r.length;i++)a();return o}},{key:"getTypeString",value:function(t){var e,n,o,a=this;return(null===(e=t=Object(p.m)(t))||void 0===e||null===(n=(o=e.data)[this.compileKey])||void 0===n?void 0:n.call(o,t.generics.map((function(t){return a.getTypeString(t)})),this))||t.toTypeString()}},{key:"inferType",value:function(t,e){return this.editor.compilers.type.getInput(t,e)}},{key:"_compileConnection",value:function(t,e,n){return this.getOutput(n.node,n.key)}},{key:"_prop",value:function(t,e){var n=this.getBlock(t);if(!n.props.hasOwnProperty(e))throw new Error("Prop does not exist in ".concat(t.name,": ").concat(e));return n.props[e]}},{key:"_input",value:function(t,e){if(!t.inputs.has(e))throw new Error("Input not found on ".concat(t.name,": ").concat(e));return t.inputs.get(e)}},{key:"_output",value:function(t,e){if(!t.outputs.has(e))throw new Error("Output not found on ".concat(t.name,": ").concat(e));return t.outputs.get(e)}},{key:"_control",value:function(t,e){if(!t.controls.has(e))throw new Error("Control not found on ".concat(t.name,": ").concat(e));return t.controls.get(e)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(192);function a(t){return t?t.title||Object(o.a)(t.name):""}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n(7),a=(n(1),n(27)),i=n(11),r=n.n(i),c=n(3);function u(t){var e=t.control,n=t.bindInput,i=t.validation,u=i.minLength,s=i.maxLength,p=Object(a.a)(e),l=Object(o.a)(p,2),d=l[0],f=l[1],m=!e.validate(d);return Object(c.jsx)("input",{type:"text",className:r()("w-100",m&&"invalid"),autoComplete:"blocks-app",autoCorrect:"off",ref:n,value:d||"",placeholder:e.name,minLength:u,maxLength:s,onChange:function(t){return f(t.target.value||void 0)}})}},,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(193);function a(t){return t?Object(o.a)(t):""}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(35),a=n(46);function i(t,e,n){var i=Object(o.b)(t.name);if(!n&&i&&i.computeTitle){var r=i.computeTitle(t,e);if(r)return r}return Object(a.a)(i)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=/{([0-9]+)}/g;function a(t,e){return(e||"").replaceAll(o,(function(e,n){return(n=+n)>=0&&n<t.length?t[n]:e}))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(7),a=(n(1),n(27)),i=n(4),r=n(10),c=n(90),u=function(t){t.languages.register({id:"motoko"}),t.languages.setLanguageConfiguration("motoko",{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"<",close:">"}]}),t.languages.setMonarchTokensProvider("motoko",{defaultToken:"",tokenPostfix:".mo",keywords:["actor","and","async","assert","await","break","case","catch","class","continue","debug","else","false","for","func","if","in","import","module","not","null","object","or","label","let","loop","private","public","return","shared","try","throw","debug_show","query","switch","true","type","var","while","stable","flexible","system"],accessmodifiers:["public","private","shared"],typeKeywords:["Any","None","Null","Bool","Int","Int8","Int16","Int32","Int64","Nat","Nat8","Nat16","Nat32","Nat64","Word8","Word16","Word32","Word64","Float","Char","Text","Blob","Error","Principal"],operators:["=","<",">",":","<:","?","+","-","*","/","%","**","&","|","^","<<",">>","#","==","!=",">=","<=",":=","+=","-=","*=","/=","%=","**=","&=","|=","^=","<<=",">>=","#=","->"],symbols:/[=(){}[\].,:;@#_&\-<>`?!+*\\/]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@typeKeywords":"keyword.type","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]+/,"number.hex"],[/[0-9_]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}})},s=n(3),p=["value","onChange"];function l(t){var e=t.value,n=t.onChange,o=Object(r.a)(t,p);return Object(s.jsx)(c.a,Object(i.a)({theme:"vs-dark",defaultLanguage:"motoko",beforeMount:u,value:e,onChange:function(t){null===n||void 0===n||n(t)},options:{tabSize:2,minimap:{enabled:!1},wordWrap:"off",scrollBeyondLastLine:!1,fontSize:16}},o))}function d(t){var e=t.control,n=t.bindInput,i=Object(a.a)(e),r=Object(o.a)(i,2),c=r[0],u=r[1];return Object(s.jsx)("div",{ref:n,style:{height:150},children:Object(s.jsx)(l,{value:c,onChange:u})})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var o=n(2),a=n(7),i=n(8),r=n.n(i),c=n(24),u=n(1),s=n(9),p=n(25);function l(t){var e,n,o,i=t.promise,r=t.loading,c=t.error,p=t.children,l=Object(u.useState)("loading"),d=Object(a.a)(l,2),f=d[0],m=d[1],y=Object(u.useState)(),b=Object(a.a)(y,2),v=b[0],g=b[1],j=Object(u.useContext)(s.g);return Object(u.useEffect)((function(){Promise.resolve(i).then((function(t){m("success"),g(t)})).catch((function(t){m("error"),g(t),c||j.emit(s.c,t)}))}),[i,c,j]),"loading"===f?null!==(n=null===r||void 0===r?void 0:r())&&void 0!==n?n:null:"error"===f?null!==(o=null===c||void 0===c?void 0:c(v))&&void 0!==o?o:null:null!==(e=null===p||void 0===p?void 0:p(v))&&void 0!==e?e:null}var d=n(81),f=n(12),m=n(201),y=n(34),b=n(39),v=n(3);function g(t){var e,n=t.control,o=t.bindInput,i=t.query,g=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(n,n.getNode(),n.editor);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return","<".concat(t.t0,">"));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),j=Object(u.useState)(g),h=Object(a.a)(j,2),O=h[0],k=h[1],x=Object(u.useState)(),w=Object(a.a)(x,2),C=w[0],T=w[1],S=Object(u.useContext)(s.g);Object(p.a)(S,s.a,(function(){k(g())}));var N=function(){T(!0),b.a.show(e),setTimeout((function(){return T(!1)}),1e3)};return Object(y.a)(),Object(v.jsx)(l,{promise:O,children:function(t){return(null!==t&&void 0!==t?t:null)&&Object(v.jsxs)("div",{className:"d-flex",children:[Object(v.jsx)("input",{type:"text",className:"w-100 small",readOnly:!0,ref:o,value:t||""}),Object(v.jsx)(d.CopyToClipboard,{text:t,children:Object(v.jsxs)(m.a,{ref:o,size:"sm",variant:"outline-light","data-tip":C?void 0:"Copy to Clipboard",onClick:N,children:[Object(v.jsx)("span",{ref:function(t){return e=t},"data-tip":"Copied!"}),Object(v.jsx)(f.g,{})]})})]})}})}var j=n(6),h=n(14);function O(t,e,n){function a(t){return function(o,a,i){var r=i.compilers[e].getInput(a,t),c=n?n(r):r;return Object(h.d)(c)}}return{title:t,category:j.d,icon:j.d.data.icon,topLeft:"input",topRight:"reversed",inputs:[{key:"input",title:"Input",type:o.d},{key:"reversed",title:"Input",type:o.c}],controls:[{key:"reversedDisplay",title:"Display",config:{controlType:g,controlProps:{query:a("reversed")}}},{key:"display",config:{controlType:g,controlProps:{query:a("input")}}}]}}},,,function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=67},,function(t,e,n){"use strict";n.r(e),n.d(e,"getFunctionReturnType",(function(){return u}));var o=n(2),a=n(32),i=n(6),r=n(14),c=o.C;function u(t,e){var n,a=(null===(n=e.compilers.type.getInput(t,"body"))||void 0===n?void 0:n.generics[0])||c,i=e.compilers.control.getInput(t,"query"),r=e.compilers.control.getInput(t,"visibility");return(i||"public"===r)&&(a=o.f.of(a)),a}var s=Object(a.b)({info:"Evaluate based on given input parameters",category:i.i,topRight:"body",global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.motoko.getInputArgs(t),i=o.params,r=o.body,c=u(t,e);if(n||i.length||r)return"".concat(n||"","(").concat(i.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"FunctionCall",nodeKey:"functionNode"},{block:"Return",connections:[{fromOutput:!0,from:"body",to:"statement"}]}],inputs:[{key:"params",type:o.w,multi:!0},{key:"body",type:o.j,optional:!0}],outputs:[{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(r.c)(e),".caller")}}],controls:[Object(a.c)(),{key:"query",type:o.g}]},{toMotoko:function(t,e,n){var o=t.name,a=t.visibility,i=t.query,c=t.params,s=t.body,p=e.outputs.get("caller").connections.length,l=["system"!==a&&a,!!p&&"shared"].filter((function(t){return t})).join(" "),d=u(e,n.editor),f=n.getTypeString(d);return[l,p?Object(r.c)(e):"",i?"query":"","func ".concat(o||"","(").concat(c.join(", "),")").concat("()"!==f?" : ".concat(f):""),"{ ".concat(s||""," };")]}});e.default=s},,,,,,,,,,,,,function(t,e,n){var o=[n(179),n(180),n(181),n(182),n(183),n(184)];t.exports={getExampleProjects:function(){return o}}},,,,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},,,,,function(t,e,n){var o={"./Actor.js":108,"./ActorClass.js":109,"./Add.js":110,"./And.js":111,"./ArrayAppend.js":112,"./ArrayAppended.js":113,"./ArrayFilter.js":114,"./ArrayGet.js":115,"./ArrayMap.js":116,"./ArrayPrepend.js":117,"./ArrayPut.js":118,"./Await.js":119,"./CodeType.js":120,"./CodeValue.js":121,"./CollectionGet.js":122,"./CollectionPut.js":123,"./CollectionSize.js":124,"./Comment.js":190,"./CommentRegion.js":191,"./CompareEqual.js":128,"./CompareGreater.js":129,"./CompareGreaterEqual.js":130,"./CompareLess.js":131,"./CompareLessEqual.js":132,"./CompareNotEqual.js":133,"./CompileMotoko.js":134,"./CompileType.js":137,"./Conditional.js":138,"./ConditionalValue.js":139,"./Divide.js":140,"./DivideInt.js":141,"./Function.js":69,"./FunctionCall.js":142,"./GlobalFunction.js":143,"./LiteralBool.js":144,"./LiteralCustomType.js":145,"./LiteralFloat.js":146,"./LiteralIdentifier.js":147,"./LiteralInt.js":148,"./LiteralNat.js":149,"./LiteralPair.js":150,"./LiteralPairType.js":151,"./LiteralText.js":152,"./LiteralTuple.js":153,"./LiteralTupleType.js":154,"./LiteralType.js":155,"./LoopWhile.js":156,"./MapGet.js":157,"./MapPut.js":158,"./MapRemove.js":159,"./Multiply.js":160,"./NewArray.js":36,"./NewTextHashMap.js":161,"./Not.js":162,"./Null.js":163,"./Optional.js":164,"./OptionalUnwrap.js":165,"./Or.js":166,"./Parameter.js":167,"./Query.js":168,"./ReferenceImport.js":169,"./Return.js":170,"./State.js":29,"./StateRead.js":171,"./StateUpdate.js":172,"./Subtract.js":173,"./TextConcat.js":174,"./TextSize.js":175,"./TypeMember.js":176,"./TypeMemberReference.js":177,"./Variable.js":178};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id=107},function(t,e,n){"use strict";n.r(e);var o=n(2),a={info:"An actor which can be deployed as a smart contract",category:n(6).a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){var n=e.compilers.motoko.getInputArgs(t).name;return n&&"actor ".concat(n)},inputs:[{key:"name",type:o.n,optional:!0},{key:"members",type:o.q,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t){var e=t.name,n=t.members;return"actor".concat(e?" "+e:""," { ").concat(n.join(" ")," };")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(14),r={info:"An object-oriented class of actors",category:a.a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){var n=e.compilers.motoko.getInputArgs(t),o=n.name,a=n.params;if(o)return"actor class ".concat(o,"(").concat(a.join(", "),")")},inputs:[{key:"name",type:o.n,optional:!0},{key:"members",type:o.q,multi:!0},{key:"params",type:o.w,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t,e,n){var o=t.name,a=t.params,r=t.members,c=e.outputs.get("caller").connections.length;return"".concat(c?"shared (".concat(Object(i.c)(e),")"):"","actor class").concat(o?" "+o:"","(").concat(a.join(", "),") = ").concat("this"," { ").concat(r.join(" ")," };")}},{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(i.c)(e),".caller")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.a)("+",(function(t,e){return t+e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)(a.g,"and",(function(t,e){return t&&e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(36),c=n(12),u=Object(a.b)({title:"Append (Array)",category:i.b,icon:c.u,inputs:[{key:"array",title:"Array",type:o.e},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.value;return"".concat(e," := ").concat(r.arrayImportRef,".append(").concat(e,", [").concat(n,"]);")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(29),r=n(36),c={title:"Appended (Array)",category:a.b,icon:i.stateWriteIcon,topRight:"result",hidden:!0,inputs:[{key:"array",type:o.e},{key:"item",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t){var e=t.array,n=t.item;return"".concat(r.arrayImportRef,".append(").concat(e,", ").concat(n,");")}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(12),r=n(14),c=n(36),u={title:"Filter Items (Array)",category:a.b,icon:i.n,topRight:"result",inputs:[{key:"array",type:o.e},{key:"body",title:"Filter",type:o.j.of(o.g)}],outputs:[{key:"result",type:o.e,inferType:function(t){return t.array},toMotoko:function(t,e,n){var a=t.array,i=t.body,u=(null===a||void 0===a?void 0:a.generics[0])||o.C,s=n.getTypeString(u);return"".concat(c.arrayImportRef,".filter<").concat(s,">(").concat(a,", func (").concat(Object(r.c)(e)," : ").concat(s,") : Bool { ").concat(i," })")}},{key:"item",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t,e,n){return Object(r.c)(e)}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(29),r={title:"Get (Array)",category:a.b,icon:i.stateReadIcon,topRight:"value",inputs:[{key:"array",type:o.e},{key:"index",type:o.s}],outputs:[{key:"value",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t){var e=t.array,n=t.index;return"".concat(e,"[").concat(n,"]")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(12),r=n(14),c=n(36),u={title:"Replace Items (Array)",category:a.b,icon:i.n,topRight:"body",inputs:[{key:"array",type:o.e},{key:"body",title:"Replace",type:o.j}],outputs:[{key:"result",type:o.e,inferType:function(t){var e=t.body;if(o.j.isSubtype(e))return o.e.of(e.generics[0])},toMotoko:function(t,e,n){var a=t.array,i=t.body,u=(null===a||void 0===a?void 0:a.generics[0])||o.C,s=n.editor.compilers.type.getInput(e,"body")||o.C,p=n.getTypeString(u),l=n.getTypeString(s);return"".concat(c.arrayImportRef,".map<").concat(p,", ").concat(l,">(").concat(a,", func (").concat(Object(r.c)(e)," : ").concat(p,") : ").concat(l," { ").concat(i," })")}},{key:"item",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t,e,n){return Object(r.c)(e)}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(36),c=n(12),u=Object(a.b)({title:"Prepend (Array)",category:i.b,icon:c.t,inputs:[{key:"array",title:"Array",type:o.e},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.value;return"".concat(e," := ").concat(r.arrayImportRef,".append([").concat(n,"], ").concat(e,");")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(29),c=Object(a.b)({title:"Put (Array)",category:i.b,icon:r.stateWriteIcon,inputs:[{key:"array",title:"Array (mutable)",type:o.r},{key:"index",type:o.s},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.index,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"(await a)",info:"Wait for an asynchronous value",category:n(6).l,topRight:"result",inputs:[{key:"input",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){return t.input.generics[0]},toMotoko:function(t){var e=t.input;return"(await ".concat(e,")")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(61),a=n(2),i=n(6),r=n(63),c={title:"{ Type }",info:"Compile an arbitrary type",category:i.h,icon:i.h.data.icon,topRight:"result",width:14,inputs:[{key:"inputs",type:a.B,multi:!0},{key:"type",type:a.B.of(a.D)}],outputs:[{key:"result",type:a.B.of(a.D),inferType:function(t){return t.type||a.i},toMotoko:function(t){var e=t.inputs,n=t.expression;return Object(o.a)(e,n)}}],controls:[{key:"expression",config:{controlType:r.a}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(61),a=n(2),i=n(6),r=n(63),c={title:"{ Expression }",info:"Compile an arbitrary expression",category:i.h,icon:i.h.data.icon,topRight:"result",width:14,inputs:[{key:"inputs",type:a.d,multi:!0},{key:"type",type:a.B.of(a.D)}],outputs:[{key:"result",type:a.D,inferType:function(t){return t.type},toMotoko:function(t){var e=t.inputs,n=t.expression;return"do { ".concat(Object(o.a)(e,n)," }")}}],controls:[{key:"expression",config:{controlType:r.a}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(29),r={title:"Get (Collection)",category:a.b,icon:i.stateReadIcon,topRight:"value",hidden:!0,inputs:[{key:"collection",type:o.h},{key:"key",type:o.D}],outputs:[{key:"value",type:o.v.of(o.D),inferType:function(t){var e=t.collection;if(o.p.isSubtype(e))return o.v.of(e.generics[1])},toMotoko:function(t){var e=t.collection,n=t.key;return"".concat(e,".get(").concat(n,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(29),c=Object(a.b)({title:"Put (Collection)",category:i.b,icon:r.stateWriteIcon,hidden:!0,inputs:[{key:"collection",type:i.b},{key:"key",type:o.D},{key:"value",type:o.D}]},(function(t){var e=t.collection,n=t.key,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(12),r={title:"Size (Collection)",category:a.b,icon:i.w,inputs:[{key:"collection",type:o.p}],outputs:[{key:"value",type:o.s,toMotoko:function(t){var e=t.map;return"".concat(e,".size()")}}]};e.default=r},,,,function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)([a.D,a.g],"==",(function(t,e){return t===e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.c)(">",(function(t,e){return t>e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.c)(">=",(function(t,e){return t>=e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.c)("<",(function(t,e){return t<e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.c)("<=",(function(t,e){return t<=e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)([a.D,a.g],"!=",(function(t,e){return t!==e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(64),a=Object(o.a)("Motoko","motoko");e.default=a},,,function(t,e,n){"use strict";n.r(e);var o=n(64),a=Object(o.a)("Type","type",(function(t){return null===t||void 0===t?void 0:t.toTypeString()}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(2),i=Object(o.b)({title:"if() then {} else {}",inputs:[{key:"condition",type:a.g},{key:"trueCase",title:"True",type:a.j,optional:!0},{key:"falseCase",title:"False",type:a.j,optional:!0}]},(function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;if("true"===String(e))return n;if("false"===String(e))return o;var a=o?" else { ".concat(o," }"):"";return"if (".concat(e,") { ").concat(n||""," }").concat(a,";")}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Map Bool",category:n(6).e,topLeft:"condition",topRight:"result",inputs:[{key:"condition",type:o.g},{key:"trueCase",type:o.D},{key:"falseCase",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){var e=t.trueCase,n=t.falseCase;return e.getSharedType(n)},toMotoko:function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;return!0===e?n:!1===e?o:"(if (".concat(e,") { ").concat(n," } else { ").concat(o," })")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.a)("/",(function(t,e){return t/e}));e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"intImportRef",(function(){return r}));var o=n(6),a=n(2),i=n(14),r=Object(i.b)("mo:base/Int"),c={title:"(a // b)",category:o.l,topRight:"result",inputs:[{key:"left",title:"a",type:a.o},{key:"right",title:"b",type:a.o}],outputs:[{key:"result",type:a.o,toMotoko:function(t){var e=t.left,n=t.right;return"".concat(r,".div(").concat(e,", ").concat(n,")")}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(2),i=n(12),r=n(6),c=n(69),u=Object(o.b)({info:"Invoke a function in this project",title:"Call Function",category:r.i,icon:i.r,computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"functionNode");if(n){var o=e.compilers.motoko.getInput(n,"name"),a=e.compilers.node.getInput(n,"params").map((function(t){return e.compilers.motoko.getInput(t,"name")}));return o&&"".concat(o,"(").concat(a.join(", "),")")}},inputs:[{key:"args",type:a.D,multi:!0}],outputs:[{key:"value",type:a.D,inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"functionNode");if(o)return Object(c.getFunctionReturnType)(o,n.editor)},toMotoko:function(t,e,n){var o=t.args,a=n.editor.compilers.node.getInput(e,"functionNode");if(a){var i=n.getInput(a,"name");if(i)return"".concat(i,"(").concat(o.join(", "),")")}}}],controls:[{key:"functionNode",type:a.t.withMeta({block:"Function"})}]},(function(t,e,n){var o=t.functionNode,a=t.args,i=n.getInput(o,"name");if(i)return"ignore ".concat(i,"(").concat(a.join(", "),");")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(62),r={title:"Method",info:"Define a callable method for the smart contract",category:a.i,icon:i.b,topRight:"body",computeTitle:function(t,e){var n,o=e.compilers.motoko.getInput(t,"name"),a=e.compilers.motoko.getInputArgs(t),i=a.params,r=a.body,c=null===(n=e.compilers.type.getInput(t,"body"))||void 0===n?void 0:n.generics[0];if(o||i.length||r)return"".concat(o||"","(").concat(i.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"Return",connections:[{from:"body",to:"statement"}]}],inputs:[{key:"name",type:o.n},{key:"params",type:o.w,multi:!0},{key:"body",type:o.j,optional:!0}],controls:[{key:"query",type:o.g}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),i=Object(o.a)({title:"Boolean"},a.g);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),i=n(2),r=n(12),c={title:"Custom Type",category:a.o,topRight:"value",icon:r.q,hidden:!0,inputs:[{key:"reference",type:i.y},{key:"generics",type:i.B.of(i.D),multi:!0}],outputs:[{key:"value",type:i.B.of(i.i),inferType:function(t,e,n){var a=n.editor.compilers.motoko.getInput(e,"reference"),r=n.editor.compilers.type.getInput(e,"generics");if(a)return i.i.of.apply(i.i,Object(o.a)(r)).withMeta({name:a})}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),i=Object(o.a)({title:"Float"},a.k);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Name",icon:n(12).m,topRight:"value",outputs:[{key:"value",type:o.n,control:!0}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),i=Object(o.a)({title:"Integer"},a.o);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),i=Object(o.a)({title:"Natural Number"},a.s);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),i={title:"Pair",category:o.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"Pair ".concat(e.compilers.motoko.getTypeString(n))},inputs:[{key:"left",title:"a",type:a.D},{key:"right",title:"b",type:a.D}],outputs:[{key:"value",type:a.A.of(a.D,a.D),inferType:function(t){var e=t.left,n=t.right;return a.A.of(e,n)},toMotoko:function(t){var e=t.left,n=t.right;return"(".concat(e,", ").concat(n,")")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),i={title:"Pair of Types",category:o.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&e.compilers.motoko.getTypeString(n)},inputs:[{key:"left",title:"a",type:a.B.of(a.D)},{key:"right",title:"b",type:a.B.of(a.D)}],outputs:[{key:"value",type:a.B.of(a.A.of(a.D,a.D)),inferType:function(t){var e=t.left,n=t.right;return a.A.of(e,n)}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),i=Object(o.a)({title:"Text"},a.z,JSON.stringify);e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),i=n(2),r={title:"Tuple",category:a.k,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"Tuple ".concat(e.compilers.motoko.getTypeString(n))},inputs:[{key:"inputs",type:i.D,multi:!0}],outputs:[{key:"value",type:i.A,inferType:function(t){var e=t.inputs;return i.A.of.apply(i.A,Object(o.a)(e))},toMotoko:function(t){var e=t.inputs;return"(".concat(e.join(", "),")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),i=n(2),r={title:"Tuple of Types",category:a.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&e.compilers.motoko.getTypeString(n)},inputs:[{key:"types",type:i.B.of(i.D),multi:!0}],outputs:[{key:"value",type:i.B.of(i.A),inferType:function(t){var e=t.types;return i.A.of.apply(i.A,Object(o.a)(e))}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),i={title:"Type",category:o.o,topRight:"value",outputs:[{key:"value",type:a.B.of(a.D),control:!0,inferType:function(t){return t.value}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(2),i=Object(o.b)({title:"while() {}",info:"Repeat while the condition is true",inputs:[{key:"condition",type:a.g},{key:"loop",type:a.j,optional:!0}]},(function(t){var e=t.condition,n=t.loop;return"while (".concat(e,") { ").concat(null!==n&&void 0!==n?n:""," };")}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(29),r={title:"Get (Map)",category:a.b,icon:i.stateReadIcon,topRight:"value",inputs:[{key:"map",type:o.p},{key:"key",type:o.D}],outputs:[{key:"value",type:o.v.of(o.D),inferType:function(t){var e=t.map;if(o.p.isSubtype(e))return o.v.of(e.generics[1])},toMotoko:function(t){var e=t.map,n=t.key;return"".concat(e,".get(").concat(n,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(29),c=Object(a.b)({title:"Put (Map)",category:i.b,icon:r.stateWriteIcon,inputs:[{key:"map",type:o.p},{key:"key",type:o.D},{key:"value",type:o.D}]},(function(t){var e=t.map,n=t.key,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(12),c=Object(a.b)({title:"Remove (Map)",category:i.b,icon:r.f,inputs:[{key:"map",type:o.p},{key:"key",type:o.D}]},(function(t){var e=t.map,n=t.key;return"".concat(e,".remove(").concat(n,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)(a.k,"*",(function(t,e){return t*e}));e.default=i},function(t,e,n){"use strict";n.r(e),n.d(e,"hashMapImportRef",(function(){return r})),n.d(e,"textImportRef",(function(){return c}));var o=n(2),a=n(14),i=n(6),r=Object(a.b)("mo:base/HashMap"),c=Object(a.b)("mo:base/Text"),u={title:"Create Map",category:i.b,icon:i.b.data.icon,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"new HashMap<".concat(e.compilers.motoko.getTypeString(n.generics[0]),", ").concat(e.compilers.motoko.getTypeString(n.generics[1]),">")},inputs:[{key:"keyType",type:o.B.of(o.z)},{key:"valueType",type:o.B.of(o.D)}],outputs:[{key:"value",type:o.p,inferType:function(t){var e=t.valueType;return o.p.of(o.z,e)},toMotoko:function(t,e,n){var o=n.editor.compilers.type.getInputArgs(e).valueType,a=n.getTypeString(o);return"".concat(r,".HashMap<Text, ").concat(a,">(0, ").concat(c,".equal, ").concat(c,".hash)")}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.d)(a.g,"not",(function(t){return!t}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={category:n(6).k,topRight:"value",outputs:[{key:"value",type:o.u,toMotoko:function(){return"null"}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Wrap Optional (?a)",info:"Create an optional version of the input value",category:n(6).l,inputs:[{key:"input",title:"Value",type:o.D}],outputs:[{key:"result",type:o.v,inferType:function(t){var e=t.input;return o.v.of(e)},toMotoko:function(t){var e=t.input;return"(?".concat(e,")")}},{key:"null",type:o.v,inferType:function(t){var e=t.input;return o.v.of(e)},toMotoko:function(t){t.input;return"null"}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(2),i=n(6),r=n(14),c=Object(o.b)({title:"Unwrap Optional",info:"Run different logic depending on whether an Optional value is null",category:i.e,inputs:[{key:"input",type:a.v},{key:"valueCase",title:"Value",type:a.j,optional:!0},{key:"nullCase",title:"Null",type:a.j,optional:!0}],outputs:[{key:"value",type:a.D,inferType:function(t){return t.input},toMotoko:function(t,e){t.input;return Object(r.c)(e)}}]},(function(t,e){var n=t.input,o=t.valueCase,a=t.nullCase;if("null"===String(n))return a;var i=o?"case (?".concat(Object(r.c)(e),") {").concat(o,"};"):"",c=a?"case null {".concat(a,"};"):"";return"switch (".concat(n,") { ").concat(i).concat(c&&" "+c," };")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)(a.g,"or",(function(t,e){return t||e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={info:"An input parameter to a class or function",topLeft:"param",topRight:"value",category:n(6).m,computeTitle:function(t,e){var n=e.compilers.motoko.getInput(t,"name"),o=e.compilers.type.getInput(t,"type");return n&&"".concat(n," : ").concat(o?e.compilers.motoko.getTypeString(o):"Any")},inputs:[{key:"name",type:o.n},{key:"type",type:o.B.of(o.D)}],outputs:[{key:"param",type:o.w,toMotoko:function(t,e,n){var o=t.name,a=t.type,i=n.getTypeString(a)||"Any";return"".concat(o," : ").concat(i)}},{key:"value",type:o.D,toMotoko:function(t){return t.name},inferType:function(t){return t.type}}]};e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"getQueryReturnType",(function(){return u}));var o=n(2),a=n(32),i=n(6),r=n(14),c=o.C;function u(t,e){var n=e.compilers.type.getInput(t,"body")||c;return"public"===e.compilers.control.getInput(t,"visibility")&&(n=o.f.of(n)),n}var s=Object(a.b)({info:"Return a value",category:i.i,topRight:"body",global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.motoko.getInputArgs(t),i=o.params,r=o.body,c=u(t,e);if(n||i.length||r)return"".concat(n||"","(").concat(i.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"FunctionCall",nodeKey:"functionNode"},{block:"Return",connections:[{from:"body",to:"statement"}]}],inputs:[{key:"params",type:o.w,multi:!0},{key:"body",type:o.D,optional:!0}],outputs:[{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(r.c)(e),".caller")}}],controls:[Object(a.c)(),{key:"query",type:o.g}]},{toMotoko:function(t,e,n){var o=t.name,a=t.visibility,i=t.params,c=t.body,s=e.outputs.get("caller").connections.length,p=["system"!==a&&a,!!s&&"shared"].filter((function(t){return t})).join(" "),l=u(e,n.editor),d=n.getTypeString(l);return[p,s?Object(r.c)(e):"","query func ".concat(o||"","(").concat(i.join(", "),")").concat("()"!==d?" : ".concat(d):""),"{ ".concat(c||""," };")]}});e.default=s},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(12),i=n(14),r={title:"Import Reference",icon:a.m,topRight:"value",outputs:[{key:"value",type:o.y,toMotoko:function(t){var e=t.path;return Object(i.b)(e)}}],controls:[{key:"path",type:o.z,config:{validation:{minLength:1}}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(23),i=n(6),r=n(12),c=Object(a.a)({info:"End a function's execution path",category:i.i,icon:r.c,inputs:[{key:"value",type:o.D,optional:!0}]},{inferType:function(t){var e=t.value;return o.j.of(e||o.C)},toMotoko:function(t){var e=t.value;return"return".concat(e?" "+e:"",";")}});e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(29),r={title:"Read State",category:a.n,icon:i.stateReadIcon,topRight:"value",outputs:[{key:"value",type:o.D,inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"initialValue")},toMotoko:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"name")}}],controls:[{key:"stateNode",type:o.t.withMeta({block:"State"})}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(6),i=n(2),r=n(29),c=Object(o.b)({title:"Write State",category:a.n,icon:r.stateWriteIcon,inputs:[{key:"value",type:"Value"}],controls:[{key:"stateNode",type:i.t.withMeta({block:"State"})}]},(function(t,e,n){var o=t.stateNode,a=t.value,i=n.getInput(o,"name");if(i)return"".concat(i," := ").concat(a,";")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(19),a=Object(o.a)("-",(function(t,e){return t-e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(19),a=n(2),i=Object(o.b)(a.z,"#",(function(t,e){return t||e}));e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Length (Text)",icon:n(12).w,inputs:[{key:"text",type:o.z}],outputs:[{key:"value",type:o.s,toMotoko:function(t){var e=t.text;return"".concat(e,".size()")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(32),i=n(6),r=Object(a.b)({title:"Named Type",info:"An actor-level type definition",category:i.o,topRight:"type",shortcuts:[{block:"TypeMemberReference",nodeKey:"typeNode"}],computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.type.getInput(t,"typeInput");return o&&"".concat(n||"(?)"," = ").concat(e.compilers.motoko.getTypeString(o))},inputs:[{key:"typeInput",title:"Definition",type:o.B.of(o.D)}],outputs:[{key:"type",type:o.B.of(o.D),inferType:function(t){var e=t.name,n=t.typeInput;if(!n.isAbstract())return n.withMeta({name:e})}}],controls:[Object(a.c)()]},{toMotoko:function(t){var e=t.visibility,n=t.name,o=t.typeInput,a=["system"!==e&&e].filter((function(t){return t})).join(" ");return"".concat(a&&a+" ","type ").concat(n," = ").concat(o,";")}});e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),i=n(12),r={title:"Type Reference",category:a.o,icon:i.b,topRight:"type",computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"typeNode");if(console.log(n),n)return e.compilers.motoko.getInput(n,"name")},outputs:[{key:"type",type:o.B.of(o.D),inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"typeNode");if(o)return n.editor.compilers.types.getInput(o,"type")}}],controls:[{key:"typeNode",type:o.t.withMeta({block:"TypeMember"})}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(2),i=n(6),r=n(14),c=Object(o.b)({title:"Local Variable",info:"Store and retrieve data from within a function",category:i.m,inputs:[{key:"name",type:a.n,optional:!0},{key:"initialValue",type:a.D}],outputs:[{key:"value",type:a.D,inferType:function(t){return t.initialValue},toMotoko:function(t,e){return t.name||Object(r.c)(e)}}]},(function(t,e){var n=t.name,o=t.initialValue;return"var ".concat(n||Object(r.c)(e)," = ").concat(o,";")}));e.default=c},function(t){t.exports=JSON.parse('{"name":"Echo","description":"Return the input argument to a function.","version":"blocks-webapp@0.1.0","nodes":{"282":{"id":282,"data":{"visibility":"public","name":"say","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":875,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":284,"input":"param","data":{}}]},"body":{"connections":[{"node":285,"input":"statement","data":{}}]}},"position":[736,288],"name":"Function"},"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":875,"input":"actor","data":{}}]}},"position":[224,288],"name":"CompileMotoko"},"284":{"id":284,"data":{"name":"phrase","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":282,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":285,"input":"value","data":{}}]}},"position":[960,384],"name":"Parameter"},"285":{"id":285,"data":{},"inputs":{"value":{"connections":[{"node":284,"output":"value","data":{}}]},"statement":{"connections":[{"node":282,"output":"body","data":{}}]}},"outputs":{},"position":[1184,288],"name":"Return"},"321":{"id":321,"data":{"functionNode":282},"inputs":{"args":{"connections":[{"node":322,"output":"value","data":{}}]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":324,"input":"input","data":{}}]}},"position":[800,704],"name":"FunctionCall"},"322":{"id":322,"data":{"value":"Hello World!"},"inputs":{},"outputs":{"value":{"connections":[{"node":321,"input":"args","data":{}}]}},"position":[576,768],"name":"LiteralText"},"324":{"id":324,"data":{},"inputs":{"input":{"connections":[{"node":321,"output":"value","data":{}}]}},"outputs":{"reversed":{"connections":[]}},"position":[1024,768],"name":"CompileMotoko"},"875":{"id":875,"data":{"name":"Echo"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":282,"input":"member","data":{}}]}},"position":[480,288],"name":"Actor"}}}')},function(t){t.exports=JSON.parse('{"name":"Counter","description":"Get, set, and increment a state variable.","version":"blocks-webapp@0.1.0","nodes":{"353":{"id":353,"data":{"name":"Counter"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":416,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":354,"input":"member","data":{}},{"node":355,"input":"member","data":{}},{"node":374,"input":"member","data":{}},{"node":375,"input":"member","data":{}}]}},"position":[544,384],"name":"Actor"},"354":{"id":354,"data":{"name":"count","stable":true},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":415,"output":"value","data":{}}]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[800,128],"name":"State"},"355":{"id":355,"data":{"visibility":"public","name":"get","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":358,"input":"statement","data":{}}]}},"position":[800,416],"name":"Function"},"357":{"id":357,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":358,"input":"value","data":{}}]}},"position":[1024,448],"name":"StateRead"},"358":{"id":358,"data":{},"inputs":{"value":{"connections":[{"node":357,"output":"value","data":{}}]},"statement":{"connections":[{"node":355,"output":"body","data":{}}]}},"outputs":{},"position":[1248,416],"name":"Return"},"374":{"id":374,"data":{"visibility":"public","name":"set"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":378,"input":"param","data":{}}]},"body":{"connections":[{"node":377,"input":"before","data":{}}]}},"position":[800,736],"name":"Function"},"375":{"id":375,"data":{"visibility":"public","name":"inc"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":417,"input":"before","data":{}}]}},"position":[800,1056],"name":"Function"},"377":{"id":377,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":378,"output":"value","data":{}}]},"before":{"connections":[{"node":374,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1248,736],"name":"StateUpdate"},"378":{"id":378,"data":{"type":{"name":"Nat","generics":[]},"name":"n"},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":374,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":377,"input":"value","data":{}}]}},"position":[1024,832],"name":"Parameter"},"415":{"id":415,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":354,"input":"initialValue","data":{}}]}},"position":[544,224],"name":"LiteralNat"},"416":{"id":416,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":353,"input":"actor","data":{}}]}},"position":[256,384],"name":"CompileMotoko"},"417":{"id":417,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":419,"output":"result","data":{}}]},"before":{"connections":[{"node":375,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1440,1056],"name":"StateUpdate"},"418":{"id":418,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":419,"input":"left","data":{}}]}},"position":[1024,1120],"name":"StateRead"},"419":{"id":419,"data":{"right":"1"},"inputs":{"left":{"connections":[{"node":418,"output":"value","data":{}}]},"right":{"connections":[]}},"outputs":{"result":{"connections":[{"node":417,"input":"value","data":{}}]}},"position":[1232,1152],"name":"Add"}}}')},function(t){t.exports=JSON.parse('{"name":"Calculator","description":"Add, subtract, multiply, and divide integers.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[416,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Calculator"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":330,"input":"member","data":{}},{"node":331,"input":"member","data":{}},{"node":335,"input":"member","data":{}},{"node":336,"input":"member","data":{}},{"node":337,"input":"member","data":{}},{"node":339,"input":"member","data":{}}]}},"position":[640,288],"name":"Actor"},"330":{"id":330,"data":{"name":"x","stable":true},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":332,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[{"node":455,"input":"value","data":{}}]}},"position":[928,0],"name":"State"},"331":{"id":331,"data":{"visibility":"public","name":"clear"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":333,"input":"before","data":{}}]}},"position":[928,256],"name":"Function"},"332":{"id":332,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":330,"input":"initialValue","data":{}}]}},"position":[672,0],"name":"LiteralInt"},"333":{"id":333,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":334,"output":"value","data":{}}]},"before":{"connections":[{"node":331,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1376,256],"name":"StateUpdate"},"334":{"id":334,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":333,"input":"value","data":{}}]}},"position":[1168,320],"name":"LiteralInt"},"335":{"id":335,"data":{"visibility":"public","name":"add"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":340,"input":"before","data":{}}]}},"position":[928,544],"name":"Function"},"336":{"id":336,"data":{"visibility":"public","name":"subtract"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":345,"input":"before","data":{}}]}},"position":[928,832],"name":"Function"},"337":{"id":337,"data":{"visibility":"public","name":"multiply"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":346,"input":"before","data":{}}]}},"position":[928,1120],"name":"Function"},"339":{"id":339,"data":{"visibility":"public","name":"divide"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":1188,"input":"before","data":{}}]}},"position":[928,1408],"name":"Function"},"340":{"id":340,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":343,"output":"result","data":{}}]},"before":{"connections":[{"node":335,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,544],"name":"StateUpdate"},"343":{"id":343,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":340,"input":"value","data":{}}]}},"position":[1616,608],"name":"Add"},"344":{"id":344,"data":{"name":"y","type":{"name":"Int","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":335,"output":"params","data":{}},{"node":336,"output":"params","data":{}},{"node":337,"output":"params","data":{}},{"node":339,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":343,"input":"right","data":{}},{"node":348,"input":"right","data":{}},{"node":349,"input":"right","data":{}},{"node":984,"input":"left","data":{}},{"node":1102,"input":"right","data":{}}]}},"position":[1184,992],"name":"Parameter"},"345":{"id":345,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":348,"output":"result","data":{}}]},"before":{"connections":[{"node":336,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,832],"name":"StateUpdate"},"346":{"id":346,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":349,"output":"result","data":{}}]},"before":{"connections":[{"node":337,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,1120],"name":"StateUpdate"},"348":{"id":348,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":345,"input":"value","data":{}}]}},"position":[1616,896],"name":"Subtract"},"349":{"id":349,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":346,"input":"value","data":{}}]}},"position":[1616,1184],"name":"Multiply"},"351":{"id":351,"data":{"stateNode":330},"inputs":{},"outputs":{"value":{"connections":[{"node":343,"input":"left","data":{}},{"node":348,"input":"left","data":{}},{"node":349,"input":"left","data":{}},{"node":1102,"input":"left","data":{}}]}},"position":[1184,864],"name":"StateRead"},"455":{"id":455,"data":{},"inputs":{"value":{"connections":[{"node":330,"output":"value","data":{}}]},"statement":{"connections":[{"node":333,"output":"after","data":{}},{"node":340,"output":"after","data":{}},{"node":345,"output":"after","data":{}},{"node":346,"output":"after","data":{}}]}},"outputs":{},"position":[2336,-32],"name":"Return"},"871":{"id":871,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":984,"input":"right","data":{}}]}},"position":[1376,1504],"name":"LiteralInt"},"902":{"id":902,"data":{},"inputs":{"input":{"connections":[{"node":1102,"output":"result","data":{}}]}},"outputs":{"result":{"connections":[{"node":1159,"input":"value","data":{}}]},"null":{"connections":[{"node":1100,"input":"value","data":{}}]}},"position":[1856,1632],"name":"Optional"},"984":{"id":984,"data":{},"inputs":{"left":{"connections":[{"node":344,"output":"value","data":{}}]},"right":{"connections":[{"node":871,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":1188,"input":"condition","data":{}}]}},"position":[1616,1440],"name":"CompareNotEqual"},"1100":{"id":1100,"data":{},"inputs":{"value":{"connections":[{"node":902,"output":"null","data":{}}]},"statement":{"connections":[{"node":1188,"output":"falseCase","data":{}}]}},"outputs":{},"position":[2208,1744],"name":"Return"},"1101":{"id":1101,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":1102,"output":"result","data":{}}]},"before":{"connections":[{"node":1188,"output":"trueCase","data":{}}]}},"outputs":{"after":{"connections":[{"node":1159,"input":"statement","data":{}}]}},"position":[2208,1552],"name":"StateUpdate"},"1102":{"id":1102,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":1101,"input":"value","data":{}},{"node":902,"input":"input","data":{}}]}},"position":[1616,1600],"name":"DivideInt"},"1159":{"id":1159,"data":{},"inputs":{"value":{"connections":[{"node":902,"output":"result","data":{}}]},"statement":{"connections":[{"node":1101,"output":"after","data":{}}]}},"outputs":{},"position":[2432,1472],"name":"Return"},"1188":{"id":1188,"data":{},"inputs":{"condition":{"connections":[{"node":984,"output":"result","data":{}}]},"before":{"connections":[{"node":339,"output":"body","data":{}}]}},"outputs":{"trueCase":{"connections":[{"node":1101,"input":"before","data":{}}]},"falseCase":{"connections":[{"node":1100,"input":"statement","data":{}}]},"after":{"connections":[]}},"position":[1984,1408],"name":"Conditional"}}}')},function(t){t.exports=JSON.parse('{"name":"Who am I?","description":"Access the caller of functions and actors.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":330,"input":"actor","data":{}}]}},"position":[224,448],"name":"CompileMotoko"},"328":{"id":328,"data":{"visibility":"public","name":"argument"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":336,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,32],"name":"Function"},"329":{"id":329,"data":{"visibility":"public","name":"whoami"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":339,"input":"statement","data":{}}]},"caller":{"connections":[{"node":339,"input":"value","data":{}}]}},"position":[960,352],"name":"Function"},"330":{"id":330,"data":{"name":"WhoAmI","undefined":""},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":334,"input":"member","data":{}},{"node":328,"input":"member","data":{}},{"node":329,"input":"member","data":{}},{"node":332,"input":"member","data":{}},{"node":333,"input":"member","data":{}}]},"params":{"connections":[{"node":331,"input":"param","data":{}}]},"caller":{"connections":[{"node":335,"input":"value","data":{}}]}},"position":[480,448],"name":"ActorClass"},"331":{"id":331,"data":{"name":"someone","type":{"name":"Principal","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":330,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":336,"input":"value","data":{}}]}},"position":[480,304],"name":"Parameter"},"332":{"id":332,"data":{"visibility":"public","name":"id"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":338,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,672],"name":"Function"},"333":{"id":333,"data":{"visibility":"public","name":"idQuick"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":337,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,992],"name":"Function"},"334":{"id":334,"data":{"visibility":"public","name":"installer","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":335,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,-288],"name":"Function"},"335":{"id":335,"data":{},"inputs":{"value":{"connections":[{"node":330,"output":"caller","data":{}}]},"statement":{"connections":[{"node":334,"output":"body","data":{}}]}},"outputs":{},"position":[1504,-288],"name":"Return"},"336":{"id":336,"data":{},"inputs":{"value":{"connections":[{"node":331,"output":"value","data":{}}]},"statement":{"connections":[{"node":328,"output":"body","data":{}}]}},"outputs":{},"position":[1504,32],"name":"Return"},"337":{"id":337,"data":{},"inputs":{"value":{"connections":[{"node":341,"output":"result","data":{}}]},"statement":{"connections":[{"node":333,"output":"body","data":{}}]}},"outputs":{},"position":[1504,992],"name":"Return"},"338":{"id":338,"data":{},"inputs":{"value":{"connections":[{"node":343,"output":"result","data":{}}]},"statement":{"connections":[{"node":332,"output":"body","data":{}}]}},"outputs":{},"position":[1504,672],"name":"Return"},"339":{"id":339,"data":{},"inputs":{"value":{"connections":[{"node":329,"output":"caller","data":{}}]},"statement":{"connections":[{"node":329,"output":"body","data":{}}]}},"outputs":{},"position":[1504,352],"name":"Return"},"340":{"id":340,"data":{"functionNode":329},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":343,"input":"input","data":{}}]}},"position":[1264,704],"name":"FunctionCall"},"341":{"id":341,"data":{"expression":"{0}.fromActor(this)","type":{"name":"Principal","generics":[]}},"inputs":{"inputs":{"connections":[{"node":342,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":337,"input":"value","data":{}}]}},"position":[1248,1104],"name":"CodeValue"},"342":{"id":342,"data":{"path":"mo:base/Principal"},"inputs":{},"outputs":{"value":{"connections":[{"node":341,"input":"inputs","data":{}}]}},"position":[1024,1296],"name":"ReferenceImport"},"343":{"id":343,"data":{},"inputs":{"input":{"connections":[{"node":340,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":338,"input":"value","data":{}}]}},"position":[1504,768],"name":"Await"}}}')},function(t){t.exports=JSON.parse('{"name":"Phone Book","description":"Add tuples to persistent key-value storage.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":326,"input":"member","data":{}},{"node":429,"input":"member","data":{}},{"node":428,"input":"member","data":{}}]}},"position":[704,288],"name":"Actor"},"326":{"id":326,"data":{"name":"phonebook"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":327,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[960,0],"name":"State"},"327":{"id":327,"data":{"keyType":{"name":"Text","generics":[]},"valueType":{"name":"Text","generics":[]}},"inputs":{"keyType":{"connections":[]},"valueType":{"connections":[{"node":467,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":326,"input":"initialValue","data":{}}]}},"position":[704,0],"name":"NewTextHashMap"},"428":{"id":428,"data":{"visibility":"public","name":"insert"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":432,"input":"param","data":{}},{"node":433,"input":"param","data":{}},{"node":489,"input":"param","data":{}}]},"body":{"connections":[{"node":430,"input":"before","data":{}}]}},"position":[960,608],"name":"Function"},"429":{"id":429,"data":{"visibility":"public","name":"find","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":432,"input":"param","data":{}}]},"body":{"connections":[{"node":450,"input":"statement","data":{}}]}},"position":[960,288],"name":"Function"},"430":{"id":430,"data":{},"inputs":{"map":{"connections":[{"node":431,"output":"value","data":{}}]},"key":{"connections":[{"node":432,"output":"value","data":{}}]},"value":{"connections":[{"node":522,"output":"value","data":{}}]},"before":{"connections":[{"node":428,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1632,608],"name":"MapPut"},"431":{"id":431,"data":{"stateNode":326},"inputs":{},"outputs":{"value":{"connections":[{"node":451,"input":"map","data":{}},{"node":430,"input":"map","data":{}}]}},"position":[1216,320],"name":"StateRead"},"432":{"id":432,"data":{"name":"name","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":429,"output":"params","data":{}},{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":451,"input":"key","data":{}},{"node":430,"input":"key","data":{}}]}},"position":[1184,480],"name":"Parameter"},"433":{"id":433,"data":{"name":"phone","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":522,"input":"inputs","data":{}}]}},"position":[1184,704],"name":"Parameter"},"450":{"id":450,"data":{},"inputs":{"value":{"connections":[{"node":451,"output":"value","data":{}}]},"statement":{"connections":[{"node":429,"output":"body","data":{}}]}},"outputs":{},"position":[1840,288],"name":"Return"},"451":{"id":451,"data":{},"inputs":{"map":{"connections":[{"node":431,"output":"value","data":{}}]},"key":{"connections":[{"node":432,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":450,"input":"value","data":{}}]}},"position":[1632,352],"name":"MapGet"},"467":{"id":467,"data":{"left":{"name":"Text","generics":[]},"right":{"name":"Text","generics":[]}},"inputs":{"left":{"connections":[]},"right":{"connections":[]}},"outputs":{"value":{"connections":[{"node":327,"input":"valueType","data":{}}]}},"position":[448,0],"name":"LiteralPairType"},"489":{"id":489,"data":{"name":"address","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":522,"input":"inputs","data":{}}]}},"position":[1184,848],"name":"Parameter"},"522":{"id":522,"data":{},"inputs":{"inputs":{"connections":[{"node":433,"output":"value","data":{}},{"node":489,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":430,"input":"value","data":{}}]}},"position":[1408,736],"name":"LiteralTuple"}}}')},function(t){t.exports=JSON.parse('{"name":"To-Do List","description":"Create, display, and complete a list of tasks.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":761,"input":"member","data":{}},{"node":567,"input":"member","data":{}},{"node":647,"input":"member","data":{}},{"node":564,"input":"member","data":{}},{"node":563,"input":"member","data":{}},{"node":562,"input":"member","data":{}},{"node":565,"input":"member","data":{}},{"node":578,"input":"member","data":{}}]}},"position":[704,288],"name":"Actor"},"562":{"id":562,"data":{"visibility":"public","name":"show","asyncKind":"query"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":579,"input":"statement","data":{}}]}},"position":[992,448],"name":"Function"},"563":{"id":563,"data":{"visibility":"public","name":"clear","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":646,"input":"before","data":{}}]}},"position":[992,128],"name":"Function"},"564":{"id":564,"data":{"name":"toDoList"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":694,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[992,-160],"name":"State"},"565":{"id":565,"data":{"visibility":"public","name":"add","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":759,"input":"param","data":{}}]},"body":{"connections":[{"node":828,"input":"before","data":{}}]}},"position":[992,768],"name":"Function"},"566":{"id":566,"data":{},"inputs":{"itemType":{"connections":[{"node":567,"output":"type","data":{}}]},"items":{"connections":[]}},"outputs":{"value":{"connections":[{"node":662,"input":"value","data":{}}]}},"position":[1248,-144],"name":"NewArray"},"567":{"id":567,"data":{"visibility":"public","name":"ToDo"},"inputs":{"name":{"connections":[]},"typeInput":{"connections":[{"node":568,"output":"result","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"type":{"connections":[{"node":566,"input":"itemType","data":{}}]}},"position":[992,-704],"name":"TypeMember"},"568":{"id":568,"data":{"expression":"{\\r\\n    id: Nat;\\r\\n    description: Text;\\r\\n    completed: Bool;\\r\\n}","type":{"name":"Custom","generics":[]}},"inputs":{"inputs":{"connections":[]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":567,"input":"typeInput","data":{}}]}},"position":[448,-720],"name":"CodeType"},"578":{"id":578,"data":{"visibility":"public","name":"complete","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":763,"input":"param","data":{}}]},"body":{"connections":[{"node":766,"input":"before","data":{}}]}},"position":[992,1088],"name":"Function"},"579":{"id":579,"data":{},"inputs":{"value":{"connections":[{"node":831,"output":"result","data":{}}]},"statement":{"connections":[{"node":562,"output":"body","data":{}}]}},"outputs":{},"position":[2080,448],"name":"Return"},"646":{"id":646,"data":{"stateNode":"564"},"inputs":{"value":{"connections":[{"node":769,"output":"value","data":{}}]},"before":{"connections":[{"node":563,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1472,128],"name":"StateUpdate"},"647":{"id":647,"data":{"visibility":"private","name":"newToDoList"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":662,"input":"statement","data":{}}]}},"position":[992,-480],"name":"Function"},"662":{"id":662,"data":{},"inputs":{"value":{"connections":[{"node":566,"output":"value","data":{}}]},"statement":{"connections":[{"node":647,"output":"body","data":{}}]}},"outputs":{},"position":[1472,-192],"name":"Return"},"677":{"id":677,"data":{"stateNode":564},"inputs":{},"outputs":{"value":{"connections":[{"node":831,"input":"inputs","data":{}}]}},"position":[1248,480],"name":"StateRead"},"694":{"id":694,"data":{"functionNode":"647"},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":564,"input":"initialValue","data":{}}]}},"position":[704,-96],"name":"FunctionCall"},"759":{"id":759,"data":{"name":"description","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":565,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":773,"input":"inputs","data":{}}]}},"position":[1248,864],"name":"Parameter"},"761":{"id":761,"data":{"name":"nextId"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":762,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[992,-992],"name":"State"},"762":{"id":762,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":761,"input":"initialValue","data":{}}]}},"position":[768,-928],"name":"LiteralNat"},"763":{"id":763,"data":{"name":"id","type":{"name":"Nat","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":578,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":765,"input":"inputs","data":{}}]}},"position":[1248,1184],"name":"Parameter"},"765":{"id":765,"data":{"expression":"Array.map<ToDo, ToDo>({1}, func (todo : ToDo) : ToDo {\\r\\n  if (todo.id == {0}) {\\r\\n    return {\\r\\n      {0} = todo.id;\\r\\n      description = todo.description;\\r\\n      completed = true;\\r\\n    };\\r\\n  };\\r\\n  todo\\r\\n})","type":{"name":"MutableArray","generics":[{"name":"Custom","generics":[]}]}},"inputs":{"inputs":{"connections":[{"node":763,"output":"value","data":{}},{"node":830,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":766,"input":"value","data":{}}]}},"position":[1536,1152],"name":"CodeValue"},"766":{"id":766,"data":{"stateNode":564},"inputs":{"value":{"connections":[{"node":765,"output":"result","data":{}}]},"before":{"connections":[{"node":578,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[2080,1088],"name":"StateUpdate"},"769":{"id":769,"data":{"functionNode":647},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":646,"input":"value","data":{}}]}},"position":[1248,160],"name":"FunctionCall"},"773":{"id":773,"data":{"type":{"name":"Custom","generics":[]},"expression":"let result: ToDo = {\\r\\n  id = nextId;\\r\\n  description = {0};\\r\\n  completed = false;\\r\\n};\\r\\nnextId += 1;\\r\\nresult"},"inputs":{"inputs":{"connections":[{"node":759,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":828,"input":"value","data":{}}]}},"position":[1536,800],"name":"CodeValue"},"828":{"id":828,"data":{},"inputs":{"array":{"connections":[{"node":829,"output":"value","data":{}}]},"value":{"connections":[{"node":773,"output":"result","data":{}}]},"before":{"connections":[{"node":565,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[2080,768],"name":"ArrayPrepend"},"829":{"id":829,"data":{"stateNode":"564"},"inputs":{},"outputs":{"value":{"connections":[{"node":828,"input":"array","data":{}}]}},"position":[1792,688],"name":"StateRead"},"830":{"id":830,"data":{"stateNode":564},"inputs":{},"outputs":{"value":{"connections":[{"node":765,"input":"inputs","data":{}}]}},"position":[1248,1328],"name":"StateRead"},"831":{"id":831,"data":{"type":{"name":"Text","generics":[]},"expression":"var output : Text = \\"\\\\n___TO-DOs___\\";\\r\\nfor (todo : ToDo in {0}.vals()) {\\r\\n  output #= \\"\\\\n(\\" # {1}.toText(todo.id) # \\") \\" # todo.description;\\r\\n  if (todo.completed) { output #= \\" \u2714\\"; };\\r\\n};\\r\\noutput"},"inputs":{"inputs":{"connections":[{"node":677,"output":"value","data":{}},{"node":1000,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":579,"input":"value","data":{}}]}},"position":[1536,352],"name":"CodeValue"},"1000":{"id":1000,"data":{"path":"mo:base/Nat"},"inputs":{},"outputs":{"value":{"connections":[{"node":831,"input":"inputs","data":{}}]}},"position":[1248,576],"name":"ReferenceImport"}}}')},,,function(t){t.exports=JSON.parse('{"name":"","description":"","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[]}},"position":[704,288],"name":"Actor"}}}')},,function(t,e,n){"use strict";n.r(e);var o=n(1),a=n.n(o),i=n(30),r=n.n(i),c=(n(100),n(8)),u=n.n(c),s=n(24),p=n(4),l=n(13),d=n(28),f=n(10),m=n(21),y=(n(102),n(55)),b=n(76),v=n(7),g=n(3),j=["x","y","children","style","handleCloseMenu"];function h(t){var e=t.x,n=t.y,a=t.children,i=t.style,r=t.handleCloseMenu,c=Object(f.a)(t,j),u=Object(o.useMemo)((function(){return Object(p.a)({position:"absolute",left:e,top:n},i)}),[e,n,i]),s=Object(o.useCallback)((function(t){if(t){var e=function(t){return t.stopPropagation()};t.addEventListener("pointermove",e),t.addEventListener("mousemove",e),t.addEventListener("wheel",e)}}),[]),l=Object(o.useCallback)((function(t){if(t){var e=function(){var e=t.getBoundingClientRect().bottom-window.innerHeight;e>0&&(t.style.top="".concat(n-e,"px"))};e(),t.onresize=e}}),[n]);return Object(g.jsx)("div",Object(p.a)(Object(p.a)({className:"context-menu-screen",style:{position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"all"},ref:s,onKeyDown:function(t){return 27===t.keyCode&&r()},onMouseDown:function(){return r()}},c),{},{children:Object(g.jsx)("div",{className:"context-menu-container",style:u,ref:l,children:Object(g.jsx)("div",{className:"context-menu",children:a})})}))}var O=a.a.createContext(null),k=n(11),x=n.n(k);function w(t){var e=t.children,n=t.color;return Object(g.jsx)("span",{className:"context-menu-icon",style:{color:n},children:e})}var C=["icon","color","selected","onAction","children","style"];function T(t){var e=t.icon,n=t.color,o=t.selected,a=t.onAction,i=t.children,r=t.style,c=Object(f.a)(t,C);return Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:x()("context-menu-action",o&&"selected"),style:Object(p.a)({color:n,userSelect:"none"},r),onMouseDown:function(t){return 0===t.button&&a(t)}},c),{},{children:[e&&Object(g.jsx)(w,{children:e}),i]}))}function S(t){return JSON.parse(JSON.stringify(t))}var N=function(){var t=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,Promise.all(e.selected.list.map(function(){var t=Object(s.a)(u.a.mark((function t(o){var a,i,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.getComponent(o.name),t.next=3,a.createNode(S(o.data));case 3:return(i=t.sent).meta=S(o.meta),r=[o.position[0]+25,o.position[1]+25],i.position[0]=r[0],i.position[1]=r[1],e.addNode(i),n[o.id]=i,t.abrupt("return",{original:o,clone:i});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:t.sent.forEach((function(t){var n=t.original;e.selected.remove(n),n.update()}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function L(){var t=Object(o.useContext)(O).editor;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(T,{onAction:function(){return N(t)},children:"Clone"}),Object(g.jsx)(T,{onAction:function(){return t.selected.each((function(e){return t.removeNode(e)}))},children:"Delete"})]})}var M=n(12),I=n(46),E=n(34),A=["component"];function R(t){var e=t.component,n=Object(f.a)(t,A),o=e.block,i=null===o||void 0===o?void 0:o.category;return Object(E.a)(),(null===o||void 0===o?void 0:o.info)&&(n=Object(p.a)({"data-tip":o.info.endsWith(".")?o.info:"".concat(o.info,"."),"data-place":"right"},n)),Object(g.jsx)(T,Object(p.a)(Object(p.a)({icon:a.a.createElement((null===o||void 0===o?void 0:o.icon)||(null===i||void 0===i?void 0:i.data.icon)||M.v),color:null===i||void 0===i?void 0:i.data.color},n),{},{children:Object(I.a)(o)||e.name}))}var D=["value","onChange","onAction","onKeyDown","children"];function P(t){var e=t.value,n=t.onChange,a=t.onAction,i=t.onKeyDown,r=t.children,c=Object(f.a)(t,D),u=Object(o.useCallback)((function(t){t&&t.focus()}),[{}]),s=(i||a)&&function(t){i&&i(t),a&&"Enter"===t.key&&a()};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",Object(p.a)({type:"text",className:"context-menu-search",autoFocus:!0,ref:u,autoComplete:"blocks-search",value:e||"",onClick:function(t){return t.stopPropagation()},onChange:n&&function(t){return n(t.target.value)},onKeyDown:s},c)),Object(g.jsx)("div",{className:"context-menu-search-area",children:r})]})}function F(t){return JSON.parse(JSON.stringify(t))}function B(t,e){return V.apply(this,arguments)}function V(){return(V=Object(s.a)(u.a.mark((function t(e,n){var o,a,i,r,c,s,p,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.data,a=n.meta,i=n.position,c=(r=void 0===i?{}:i).x,s=r.y,t.next=3,e.createNode(o?F(o):{});case 3:return p=t.sent,a&&(p.meta=Object.assign(F(a),p.meta)),l=[c,s],p.position[0]=l[0],p.position[1]=l[1],t.abrupt("return",p);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){var t=Object(o.useState)(""),e=Object(v.a)(t,2),n=e[0],a=e[1],i=Object(o.useState)(0),r=Object(v.a)(i,2),c=r[0],p=r[1],d=Object(o.useContext)(O),f=d.editor,m=d.mouse,y=d.context,b=function(t,e){var n=Object(l.a)(t.components).map((function(t){return t.name})).join("##");return Object(o.useMemo)((function(){return Object(l.a)(t.components.values()).filter((function(t){var e,n;return t&&"block"in t&&!(null===(e=t.block)||void 0===e?void 0:e.hidden)&&!(null===(n=t.block)||void 0===n?void 0:n.deprecated)})).map((function(t){return[e(t),t]})).sort((function(t,e){var n=Object(v.a)(t,1)[0],o=Object(v.a)(e,1)[0];if(Array.isArray(n)){for(var a=0;a<n.length;a++){var i="number"===typeof n[a]?n[a]-o[a]:n[a].localeCompare(o[a]);if(0!==i)return i}return 0}return n.localeCompare(o)})).map((function(t){return Object(v.a)(t,2)[1]}))}),[n])}(f,(function(t){var e,n;return[-((null===(e=t.block)||void 0===e?void 0:e.category.data.priority)||0),(null===(n=t.block)||void 0===n?void 0:n.category.root.name)||"",t.data.title||t.name]}));if(b=y?function(t,e,n){var o,a,i,r,c,u;if(!t&&!e)return n;var s=null===t||void 0===t||null===(o=(a=t.socket).findType)||void 0===o?void 0:o.call(a),p=null===e||void 0===e||null===(i=(r=e.socket).findType)||void 0===i?void 0:i.call(r);if((null===(c=s)||void 0===c?void 0:c.data.reversed)||(null===(u=p)||void 0===u?void 0:u.data.reversed)){var l=[p,s];s=l[0],p=l[1]}return n.filter((function(t){return(!s||t.block.outputs.some((function(t){return s.isSubtype(t.type)})))&&(!p||t.block.inputs.some((function(t){return p.isSubtype(t.type)||t.type.isSubtype(p)})))}))}(y.input,y.output,b):b.filter((function(t){return t.block.global})),c=Math.min(b.length-1,c),n){var j=n.toLowerCase();b=b.filter((function(t){var e;return(null===(e=t.keywords)||void 0===e?void 0:e.some((function(t){return t.toLowerCase().startsWith(j)})))||t.name.toLowerCase().startsWith(j)}))}function h(){return(h=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.length){t.next=3;break}return t.next=3,k(b[c]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=Object(o.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,i,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(""),f.trigger("hidecontextmenu"),t.next=4,B(e,{position:m});case 4:n=t.sent,f.addNode(n),y&&(o=y.input,i=y.output,o&&(r=Object(l.a)(n.outputs.values()).find((function(t){return o.socket.compatibleWith(t.socket)})),r&&f.connect(r,o)),i&&(c=Object(l.a)(n.inputs.values()).find((function(t){return t.socket.compatibleWith(i.socket)})),c&&f.connect(i,c)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[f,m,y]),x=b.map((function(t,e){return Object(g.jsx)(R,{component:t,selected:c===e,onAction:function(){return k(t)}},t.name)}));return y?Object(g.jsx)(P,{value:n,onChange:a,onKeyDown:function(t){38===t.keyCode&&p(Math.max(0,c-1)),40===t.keyCode&&p(c+1)},onAction:function(){return h.apply(this,arguments)},children:x}):x}var _=n(17);var q={name:"blocks-contextmenu",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.bind("hidecontextmenu"),t.bind("showcontextmenu");var n,o,a=e.offset?[e.offset.x,e.offset.y]:[-10,-10],i=Object(v.a)(a,2),c=i[0],u=i[1],s=null;t.on("hidecontextmenu",(function(){s&&(s.style.display="none")})),t.on(["click","contextmenu"],(function(){t.trigger("hidecontextmenu")})),t.on("contextmenu",(function(e){var o,a,i=e.e,p=e.node,l=e.context;if(null===(o=i.preventDefault)||void 0===o||o.call(i),null===(a=i.stopPropagation)||void 0===a||a.call(i),t.trigger("showcontextmenu",{e:i,node:p,context:l})){p&&(t.selected.contains(p)||t.selectNode(p));var d=[i.clientX,i.clientY],f=d[0],m=d[1];s||(s=document.createElement("div"),t.view.container.appendChild(s)),s.style.display="block",r.a.render(Object(g.jsx)(h,{x:f+c,y:p?m-50:m+u,handleCloseMenu:function(){return t.trigger("hidecontextmenu")},children:Object(g.jsx)(O.Provider,{value:{editor:t,mouse:n,node:p,context:l},children:p?Object(g.jsx)(L,{}):Object(g.jsx)(z,{})})}),s)}})),t.on("destroy",(function(){t.trigger("hidecontextmenu"),s&&(s.remove(),s=null)}));var p=!1,d=!1;t.view.container.addEventListener("pointermove",(function(t){return o=t})),t.on("mousemove",(function(t){n=t,p=!0})),t.on("connectionpick",(function(t){p=!1;var e=Object(l.a)(t.connections);setTimeout((function(){t.connections.length<e.length&&(d=!0)}))})),t.on("connectiondrop",(function(e){if(p)if(d)d=!1;else{var n=Object(l.a)(e.connections);setTimeout((function(){e.connections.length!==n.length||e.connections.some((function(t,e){return t.input!==n[e].input||t.output!==n[e].output}))||t.trigger("contextmenu",{e:o,context:{input:e instanceof _.d.Input?e:null,output:e instanceof _.d.Output?e:null}})}))}}))}},J=q,U=n(77),W=n.n(U),K=n(49),G=n(9),Z=n(15),H=n(16),$=n(18),X=n(20),Y=n(200),Q=a.a.createContext([]);function tt(t){var e=t.type,n=t.socket,a=t.innerRef,i=t.io,r=Object(o.useState)(!1),c=Object(v.a)(r,2),u=c[0],s=c[1],p=Object(o.useContext)(Q);Object(o.useEffect)((function(){var t=function(t,e){if(t){var o,a,r,c;if(i instanceof _.c===e instanceof _.c)return;var u=i instanceof _.c===!!n.data.reversed?[i,e]:[e,i],p=Object(v.a)(u,2),l=p[0],d=p[1],f=null===(o=(a=l.socket).findType)||void 0===o?void 0:o.call(a),m=null===(r=(c=d.socket).findType)||void 0===r?void 0:r.call(c);m&&(null===f||void 0===f?void 0:f.isSubtype(m))&&s(!0)}else s(!1)};return p.push(t),function(){var e=p.indexOf(t);-1!==e&&p.splice(e,1)}}),[n,p,i]);var l=n.findType(),d=!!l.data.reversed,f=i.multipleConnections&&i instanceof _.d.Input===!d;return Object(g.jsx)("div",{className:x()("socket",e,Object(Y.a)(n.name),u&&"relevant",f&&"multiple",d&&"reversed",!f&&i.connections.length&&"occupied","category-"+l.data.category),title:n.name,ref:function(t){return t&&a(t,e,i)},children:Object(g.jsx)("div",{className:"socket-color w-100 h-100"})})}var et=n(35),nt=n(25);function ot(t){var e=t.editor,n=t.node,a=t.block,i=t.fallback,r=function(){if(!e.silent)try{return a.computeTitle(n,e)}catch(t){return console.error("Unable to compute title for node: ".concat(n.name)),console.error(t),"<Error>"}},c=Object(o.useState)(r),u=Object(v.a)(c,2),s=u[0],p=u[1],l=Object(o.useContext)(G.g);Object(nt.a)(l,G.a,(function(){return p(r())}));var d=s||i||null;return Object(E.a)(),Object(g.jsx)("span",{"data-tip":d,children:d})}var at=n(60),it=n(59);function rt(t){return t?t.title||Object(it.a)(t.key):""}var ct=n(197),ut=n(44),st=n(201);function pt(t){var e=t.editor,n=t.node,i=t.shortcut,r=i.block,c=r.category,p=Object(o.useContext)(G.g),l=function(){var t=Object(s.a)(u.a.mark((function t(o){var a,c,s,l,f,m,y,b,g,j,h,O,k,x,w;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.components.get(r.name)){t.next=5;break}return p.emit(G.c,"Component not found: ".concat(r.name)),t.abrupt("return");case 5:return c={},n&&i.nodeKey&&(c[i.nodeKey]=n.id),t.next=9,e.createNodeAtCursor(a,c);case 9:if(s=t.sent,e.view.nodes.get(s)._drag.down(o),i.connections){l=Object(d.a)(i.connections);try{for(l.s();!(f=l.n()).done;)m=f.value,y=m.from,b=m.to,g=m.fromOutput,j=g?n.outputs.get(y):n.inputs.get(y),h=g?s.inputs.get(b):s.outputs.get(b),O=g?[j,h]:[h,j],k=Object(v.a)(O,2),x=k[0],w=k[1],x&&w?e.connect(x,w):console.warn("Could not connect",x,"to",w)}catch(u){l.e(u)}finally{l.f()}}t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),p.emit(G.c,t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(E.a)([r]),Object(g.jsx)(st.a,{ref:ut.a,className:"node-shortcut-button px-1 pt-0 pb-1","data-tip":Object(I.a)(r),"data-delay-show":100,style:{background:"none",color:c.data.color,borderColor:c.data.color,cursor:"grab"},onMouseDown:l,children:r.icon?a.a.createElement(r.icon):Object(I.a)(r)})}function lt(t){var e=t.prop,n=t.node,o=t.hideLeft,a=t.hideRight,i=t.bindSocket,r=t.bindControl,c=n.inputs.get(e.key),u=n.outputs.get(e.key),s=n.controls.get(e.key)||(null===c||void 0===c?void 0:c.showControl())&&c.control,p=c&&!o&&Object(g.jsx)(tt,{type:"input",socket:c.socket,io:c,innerRef:i}),l=u&&!a&&Object(g.jsx)(tt,{type:"output",socket:u.socket,io:u,innerRef:i}),d=s&&Object(g.jsx)(K.a,{className:c?"input-control":"control",control:s,innerRef:r});return Object(g.jsxs)("div",{className:x()("prop","key-"+Object(Y.a)(e.key)),children:[Object(g.jsxs)("div",{className:"input",children:[p,d||p&&Object(g.jsx)("div",{className:"input-title",children:rt(e)})]}),Object(g.jsxs)("div",{className:"output",children:[!c&&l&&Object(g.jsx)("div",{className:"output-title",children:rt(e)}),l]})]})}var dt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(){return Object(Z.a)(this,n),e.apply(this,arguments)}return Object(H.a)(n,[{key:"render",value:function(){var t=this.props,e=t.editor,n=t.node,o=t.bindSocket,i=t.bindControl,r=this.state.selected,c=Object(et.b)(n.name);if(c.component){var u=c.component;return Object(g.jsx)(u,{block:c,nodeHandle:this})}var s=c.topLeft&&n.inputs.get(c.topLeft),p=c.topRight&&n.outputs.get(c.topRight),l=Object(at.a)(n,e,!0);c.computeTitle&&(l=Object(g.jsx)(ot,{editor:e,node:n,block:c,fallback:l}));var d=function(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var r=i.apply(void 0,[e].concat(o));return e&&(e.title=rt(t)),r}},f=32*(n.data["editor:width"]||c.width||6)-3;return Object(g.jsxs)("div",{style:{width:f},className:x()("node",r,c.className),children:[Object(g.jsxs)("div",{className:"header d-flex",children:[s&&Object(g.jsx)("div",{children:Object(g.jsx)(tt,{type:"input",socket:s.socket,io:s,innerRef:o})}),Object(g.jsxs)("div",{className:"title d-inline-block flex-grow-1 text-nowrap overflow-hidden",style:{color:c.category.data.color},children:[c.icon&&Object(g.jsx)("span",{className:"d-inline-block pe-1",style:{transform:"translateY(-.1em)"},children:a.a.createElement(c.icon)}),l]}),p&&Object(g.jsx)("div",{children:Object(g.jsx)(tt,{type:"output",socket:p.socket,io:p,innerRef:o})})]}),c.shortcuts.length>0&&Object(g.jsx)(ct.a,{className:"px-4 py-1 w-100",style:{background:"#0002"},children:c.shortcuts.map((function(t,o){return Object(g.jsx)(pt,{editor:e,node:n,shortcut:t},o)}))}),Object.values(c.props).filter((function(t){return!t.hidden&&(t.control||(!s||t.key!==c.topLeft)&&(!p||t.key!==c.topRight))})).map((function(t){return Object(g.jsx)(lt,{prop:t,node:n,hideLeft:t.key===c.topLeft,hideRight:t.key===c.topRight,bindSocket:o,bindControl:d(t)},t.key)}))]})}}]),n}(K.b),ft=n(40),mt=n(51),yt=n(57),bt=n.n(yt),vt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t,o,a){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(Z.a)(this,n),(i=e.call(this,o)).name=a,i.config=r,i.editor=t,i.render="react",i.component=r.controlType||mt.a,i.props=Object(p.a)(Object(p.a)({},r.controlProps),{},{validation:r.validation||{},control:Object(ft.a)(i),editor:t,bindInput:ut.a}),i.events=new bt.a,i}return Object(H.a)(n,[{key:"validate",value:function(t){if(void 0===t&&!this.config.optional)return!1;if(null!==t&&void 0!==t){var e=this.config.validation;if(e){if("custom"in e&&!e.custom(t))return!1;if("minLength"in e&&t.length<e.minLength)return!1;if("maxLength"in e&&t.length>e.maxLength)return!1;if("min"in e&&t<e.min)return!1;if("max"in e&&t>e.max)return!1;if("step"in e&&t-(e.min||0)%e.step!==0)return!1;if("pattern"in e&&!e.pattern.test(t))return!1}}return!0}},{key:"getDefaultValue",value:function(){}},{key:"getValue",value:function(){var t=this.getData(this.key);return void 0===t?this.getDefaultValue():t}},{key:"setValue",value:function(t){this.putData(this.key,t),this.events.emit("update",t)}}]),n}(_.a),gt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t,o,a){var i;return Object(Z.a)(this,n),e.call(this,t,o.key,a,Object(p.a)(Object(p.a)(Object(p.a)({},(null===(i=o.type)||void 0===i?void 0:i.data)||{}),o.config||{}),{},{prop:o,type:o.type,optional:o.optional}))}return Object(H.a)(n,[{key:"getDefaultValue",value:function(){var t;return null===(t=this.config.type)||void 0===t?void 0:t.getDefaultValue()}},{key:"notifyEditorChange",value:function(){}}]),n}(vt),jt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(){return Object(Z.a)(this,n),e.apply(this,arguments)}return Object(H.a)(n,[{key:"getEditorNode",value:function(t){return this.editor.nodes.find((function(e){return e.id===t.id}))}},{key:"getControls",value:function(t){return this.getEditorNode(t).controls}}]),n}(_.d.Component),ht=n(2),Ot=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(Z.a)(this,n),t=Object(ht.m)(t),e.call(this,t.name,Object(p.a)(Object(p.a)({},t.data),{},{type:t}))}return Object(H.a)(n,[{key:"findType",value:function(){return this.data.type}},{key:"compatibleWith",value:function(t){if(!("findType"in t))return!1;var e=this.findType(),n=t.findType();return e.isSubtype(n)||n.isSubtype(e)}}]),n}(_.d.Socket),kt=n(41),xt=n(31),wt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t,o,a,i){var r;return Object(Z.a)(this,n),(r=e.call(this,a.type)).nodeId=t,r.nodeName=o,r.prop=a,r.typeCompiler=i,r._isTypeOfType=ht.B.isSubtype(r.prop.type),r}return Object(H.a)(n,[{key:"findType",value:function(){if(this.typeCompiler.editor.silent)return Object(kt.a)(Object(xt.a)(n.prototype),"findType",this).call(this);try{var t=this.typeCompiler.getOutput(this.nodeId,this.prop.key);if(t)return this._isTypeOfType&&(ht.B.isSubtype(t)&&console.warn("Type of Type of Type (Intentional?)"),t=ht.B.of(t)),t||Object(kt.a)(Object(xt.a)(n.prototype),"findType",this).call(this)}catch(e){console.warn("Error on socket [".concat(this.nodeName,".").concat(this.prop.key,"]:"),e)}return Object(kt.a)(Object(xt.a)(n.prototype),"findType",this).call(this)}}]),n}(Ot),Ct=n(193),Tt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t){var o,a;return Object(Z.a)(this,n),(a=e.call(this,t.name)).block=t,a.keywords=[].concat(Object(l.a)(Object(Ct.a)(t.name).toLowerCase().split(" ").filter((function(t){return t}))),Object(l.a)((null===(o=t.title)||void 0===o?void 0:o.split(" ").filter((function(t){return t})))||[]),Object(l.a)(t.keywords||[])),a}return Object(H.a)(n,[{key:"builder",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,i,r,c,s,p,l,f,m,y,b,v,g=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t,n){var i=n?new wt(e.id,e.name,t,g.editor.compilers.type):new Ot(t.type);return!!t.type.data.reversed===n?o(t,i,n):a(t,i,n)},o=function(t,n,o){var a=rt(t),r=new _.d.Input(t.key,a,n,t.type.data.reversed||!!t.multi);return i(t,n,o)&&r.addControl(new gt(g.editor,t,a)),e.addInput(r),r},a=function(t,n,o){var a=rt(t),r=new _.d.Output(t.key,a,n,!t.type.data.reversed||!!t.multi);return e.addOutput(r),i(t,n,o)&&e.addControl(new gt(g.editor,t,a)),r},i=function(t,e,n){return t.control||!!e.data.reversed===n&&e.data.controlType&&!t.multi},delete e.meta.title,r=Object(d.a)(this.block.inputs);try{for(r.s();!(c=r.n()).done;)s=c.value,n(s,!1)}catch(u){r.e(u)}finally{r.f()}p=Object(d.a)(this.block.outputs);try{for(p.s();!(l=p.n()).done;)f=l.value,n(f,!0)}catch(u){p.e(u)}finally{p.f()}m=Object(d.a)(this.block.controls);try{for(m.s();!(y=m.n()).done;)b=y.value,v=rt(b),e.addControl(new gt(this.editor,b,v))}catch(u){m.e(u)}finally{m.f()}case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(jt),St=n(14),Nt=n(43),Lt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(Z.a)(this,n),e.call(this,t,"toEditorNode")}return Object(H.a)(n,[{key:"defaultCompile",value:function(t,e){return e}},{key:"postCompile",value:function(t,e,n){if(t){var o;if("object"===typeof t){if(!(o=t.id))throw new Error("Invalid node object with keys: {".concat(Object.keys(t).join(", "),"}"))}else o=t;return o=String(o),this.editor.nodes.find((function(t){return String(t.id)===o}))}}}]),n}(Nt.a),Mt=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(Z.a)(this,n),e.call(this,t,"inferType")}return Object(H.a)(n,[{key:"defaultCompile",value:function(t,e){return Object(ht.m)(t.type)}},{key:"postCompile",value:function(t,e,n){if(void 0!==t){if(!(t=Object(ht.m)(t)).isAbstract())return t;console.warn("[".concat(e.name,".").concat(n,"]"),"Abstract inferred type:",t.toTypeString())}}}]),n}(Nt.a),It=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(t){return Object(Z.a)(this,n),e.call(this,t,"toControl")}return Object(H.a)(n,[{key:"defaultCompile",value:function(t,e){}},{key:"postCompile",value:function(t,e,n){return t}}]),n}(Nt.a),Et=function(t){Object($.a)(n,t);var e=Object(X.a)(n);function n(){var t;Object(Z.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).projectName="",t.projectDescription="",t.compilers={control:new It(Object(ft.a)(t)),node:new Lt(Object(ft.a)(t)),type:new Mt(Object(ft.a)(t)),motoko:new St.a(Object(ft.a)(t))},t}return Object(H.a)(n,[{key:"toJSON",value:function(){var t=Object(p.a)({name:this.projectName,description:this.projectDescription,version:this.id},Object(kt.a)(Object(xt.a)(n.prototype),"toJSON",this).call(this));return delete t.id,t}},{key:"fromJSON",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object(p.a)({id:e.version},e),this.beforeImport(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return this.projectName=e.name||"",this.projectDescription=e.description||"",n=!1,t.prev=6,o={},t.next=10,Promise.all(Object.entries(e.nodes).map(function(){var t=Object(s.a)(u.a.mark((function t(e){var i,r,c,s,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(v.a)(e,2),r=i[0],c=i[1],t.prev=1,s=a.getComponent(c.name),t.next=5,s.build(_.d.Node.fromJSON(c));case 5:p=t.sent,o[r]=p,a.addNode(p),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),n=!0,t.abrupt("return",a.trigger("error",t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()));case 10:Object.entries(e.nodes).forEach((function(t){var e=Object(v.a)(t,2),i=e[0],r=e[1],c=o[i];Object.entries(r.outputs).forEach((function(t){var e=Object(v.a)(t,2),i=e[0];e[1].connections.forEach((function(t){var e=t.node,r=t.data,u=c.outputs.get(i),s=o[e];if(!s)return n=!0,a.trigger("error","Tried to connect to unknown node ".concat(c.id));var p=s.inputs.get(t.input);if(!u||!p)return n=!0,a.trigger("error","IO not found for node ".concat(c.id));a.connect(u,p,r)}))}))})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),this.trigger("warn",t.t0),n=!0;case 17:return t.abrupt("return",this.afterImport()&&!n);case 18:case"end":return t.stop()}}),t,this,[[6,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createNode",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,i,r,c,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},o=s.length>2&&void 0!==s[2]?s[2]:null,t.next=4,e.createNode(n);case 4:return a=t.sent,o&&(i=o.x,r=o.y,c=[i,r],a.position[0]=c[0],a.position[1]=c[1]),this.addNode(a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createNodeAtCursor",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,i,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},o=this.view.area.mouse,a=o.x,i=o.y,t.abrupt("return",this.createNode(e,n,{x:a-80,y:i-20}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(_.d.NodeEditor);function At(t){var e=t instanceof _.d.Input?"output":"input";t.connections.sort((function(t,n){return t[e].node.position[1]-n[e].node.position[1]}))}var Rt={name:"vertical-sort",install:function(t){t.on("connectioncreated",(function(t){At(t.input),At(t.output)})),t.on("nodedragged",(function(t){for(var e=0,n=[[t.inputs,"output"],[t.outputs,"input"]];e<n.length;e++){var o,a=Object(v.a)(n[e],2),i=a[0],r=a[1],c=Object(d.a)(i.values());try{for(c.s();!(o=c.n()).done;){var u,s=o.value,p=Object(d.a)(s.connections);try{for(p.s();!(u=p.n()).done;){At(u.value[r])}}catch(l){p.e(l)}finally{p.f()}}}catch(l){c.e(l)}finally{c.f()}}}))}};var Dt={name:"connection-drop",install:function(t){var e=function(t){t.code};document.addEventListener("keydown",e),t.on("destroy",(function(){return document.removeEventListener("keydown",e)}))}};var Pt={name:"connection-opacity",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDistance,o=void 0===n?500:n,a=e.opacityFalloff,i=void 0===a?200:a;t.on(["renderconnection","updateconnection","zoom"],(function(){setTimeout((function(){var e,n=Object(d.a)(t.view.container.querySelectorAll(".connection .main-path"));try{for(n.s();!(e=n.n()).done;){var a=e.value,r=a.getBoundingClientRect().width;a.style.opacity=1/(1+Math.sqrt(Math.max(r-o,0)/i))}}catch(c){n.e(c)}finally{n.f()}}))}))}},Ft=Pt;var Bt,Vt={name:"drag-button",install:function(t){}},zt=n(22),_t=n(0),qt=["title","titleId"];function Jt(){return Jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Jt.apply(this,arguments)}function Ut(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Wt(t,e){var n=t.title,a=t.titleId,i=Ut(t,qt);return o.createElement("svg",Jt({ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,Bt||(Bt=o.createElement("linearGradient",{id:"svg-block-gradient",width:0,height:0,x2:1,y2:1},o.createElement("stop",{offset:"0%",stopColor:"#00EFFB"}),o.createElement("stop",{offset:"50%",stopColor:"#8649E1"}),o.createElement("stop",{offset:"100%",stopColor:"#F900E3"}))))}var Kt,Gt,Zt=o.forwardRef(Wt),Ht=(n.p,["className","children"]),$t=zt.a.div(Kt||(Kt=Object(m.a)(["\n    \n"]))),Xt=Object(zt.a)(Zt)(Gt||(Gt=Object(m.a)(["\n  height: 0;\n  width: 0;\n"])));function Yt(t){var e=t.className,n=t.children,o=Object(f.a)(t,Ht);return Object(g.jsxs)($t,Object(p.a)(Object(p.a)({className:x()("bg-light text-secondary d-flex py-2 justify-content-start align-items-center",e)},o),{},{children:[Object(g.jsx)(Xt,{}),Object(g.jsx)(_t.b.Provider,{value:{style:{verticalAlign:"bottom",transform:"translateY(-1px)"}},children:n})]}))}var Qt,te=["variant","tooltip","className"],ee=zt.a.div(Qt||(Qt=Object(m.a)(["\n\n"])));function ne(t){var e=t.variant,n=t.tooltip,o=t.className,a=Object(f.a)(t,te);return Object(E.a)(),Object(g.jsx)(ee,Object(p.a)({className:x()("noselect h3 mx-3 px-3 pt-2 pb-2 mb-0 d-inline-block text-center",e&&"text-".concat(e),o),"data-tip":n},a))}var oe,ae,ie=["children"],re=Object(zt.a)(ne)(oe||(oe=Object(m.a)(['\n  cursor: pointer;\n  border-radius: 10px;\n\n  :hover {\n    background: #F0F0F0;\n  }\n\n  :hover > svg {\n    fill: url("#svg-block-gradient");\n  }\n']))),ce=zt.a.svg(ae||(ae=Object(m.a)(["\n  position: absolute;\n  width: 0;\n  height: 0;\n"])));function ue(t){var e=t.children,n=Object(f.a)(t,ie);return Object(g.jsxs)(re,Object(p.a)(Object(p.a)({},n),{},{children:[Object(g.jsx)(ce,{"aria-hidden":"true",focusable:"false"}),e]}))}var se=n(82),pe=n(91),le=["options","onFile","onFileContent","className","children"];function de(t){var e=t.options,n=t.onFile,a=t.onFileContent,i=t.className,r=t.children,c=Object(f.a)(t,le),u=Object(o.useCallback)((function(t){if(t.length){var e=t[0];if(null===n||void 0===n||n(e),a){var o=new FileReader;o.onload=function(t){a(t.target.result)},o.readAsText(e)}}}),[n,a]),s=Object(pe.a)(Object(p.a)({maxFiles:1,onDrop:u},e)),l=s.getRootProps,d=s.getInputProps,m=s.isDragActive;return Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:x()(i,m&&"dragging")},Object(p.a)(Object(p.a)({},c),l())),{},{children:[Object(g.jsx)("input",Object(p.a)({},d())),r]}))}var fe,me,ye,be=["onLoadFileContent","className"],ve=zt.a.div(fe||(fe=Object(m.a)(["\n  padding: 20px;\n"]))),ge=zt.a.div(me||(me=Object(m.a)(["\n  :hover {\n    background: #0001;\n  }\n"]))),je=Object(zt.a)(de)(ye||(ye=Object(m.a)(["\n  padding: 2em;\n  border: 2px #0005 dashed;\n\n  &.dragging, &:hover {\n    background: #0002;\n  }\n"])));function he(t){var e=t.onLoadFileContent,n=t.className,a=Object(f.a)(t,be),i=Object(o.useContext)(G.g),r=Object(se.getExampleProjects)();return Object(g.jsxs)(ve,Object(p.a)(Object(p.a)({className:x()("bg-light",n)},a),{},{children:[Object(g.jsx)(de,{onFileContent:e,children:Object(g.jsx)(je,{className:x()("clickable text-center text-muted rounded-3"),children:Object(g.jsx)("h5",{children:"Import a .blocks file . . ."})})}),r.map((function(t,e){return Object(g.jsxs)(ge,{className:"clickable mt-2 px-3 py-2",onClick:function(){return i.emit(G.f,t)},children:[Object(g.jsx)("h4",{className:"fw-normal",children:t.name}),Object(g.jsx)("div",{className:"text-muted",children:t.description||"(No description provided)"})]},e)}))]}))}var Oe,ke=n(199),xe=["title","titleId"];function we(){return we=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},we.apply(this,arguments)}function Ce(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Te(t,e){var n=t.title,a=t.titleId,i=Ce(t,xe);return o.createElement("svg",we({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,Oe||(Oe=o.createElement("g",null,o.createElement("path",{d:"M20,15L20,19C20,19.549 19.549,20 19,20C19,20 5,20 5,20C4.451,20 4,19.549 4,19C4,19 4,15 4,15C4,14.448 3.552,14 3,14C2.448,14 2,14.448 2,15L2,19C2,20.646 3.354,22 5,22L19,22C20.646,22 22,20.646 22,19L22,15C22,14.448 21.552,14 21,14C20.448,14 20,14.448 20,15Z"}),o.createElement("path",{d:"M11,12.586L7.707,9.293C7.317,8.903 6.683,8.903 6.293,9.293C5.903,9.683 5.903,10.317 6.293,10.707L11.293,15.707C11.413,15.827 11.556,15.91 11.708,15.957L11.711,15.958C11.795,15.983 11.884,15.998 11.976,16L12,16L12.024,16C12.116,15.998 12.205,15.983 12.289,15.958L12.292,15.957C12.444,15.91 12.587,15.827 12.707,15.707L17.707,10.707C18.097,10.317 18.097,9.683 17.707,9.293C17.317,8.903 16.683,8.903 16.293,9.293L13,12.586L13,3C13,2.448 12.552,2 12,2C11.448,2 11,2.448 11,3L11,12.586Z"}))))}var Se,Ne=o.forwardRef(Te),Le=(n.p,["title","titleId"]);function Me(){return Me=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Me.apply(this,arguments)}function Ie(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ee(t,e){var n=t.title,a=t.titleId,i=Ie(t,Le);return o.createElement("svg",Me({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,Se||(Se=o.createElement("path",{d:"M21,8L21,7.988C20.998,7.807 20.947,7.637 20.861,7.492C20.819,7.42 20.767,7.353 20.707,7.293L14.707,1.293C14.647,1.233 14.58,1.181 14.508,1.139C14.362,1.053 14.193,1.002 14.012,1L14,1L6,1C4.354,1 3,2.354 3,4L3,20C3,21.646 4.354,23 6,23L18,23C19.646,23 21,21.646 21,20L21,8ZM13,3L6,3C5.451,3 5,3.451 5,4C5,4 5,20 5,20C5,20.549 5.451,21 6,21C6,21 18,21 18,21C18.549,21 19,20.549 19,20L19,9L14,9C13.448,9 13,8.552 13,8L13,3ZM11,14L9,14C8.448,14 8,14.448 8,15C8,15.552 8.448,16 9,16L11,16L11,18C11,18.552 11.448,19 12,19C12.552,19 13,18.552 13,18L13,16L15,16C15.552,16 16,15.552 16,15C16,14.448 15.552,14 15,14L13,14L13,12C13,11.448 12.552,11 12,11C11.448,11 11,11.448 11,12L11,14ZM15,7L17.586,7L15,4.414L15,7Z"})))}var Ae,Re=o.forwardRef(Ee),De=(n.p,["title","titleId"]);function Pe(){return Pe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Pe.apply(this,arguments)}function Fe(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Be(t,e){var n=t.title,a=t.titleId,i=Fe(t,De);return o.createElement("svg",Pe({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,Ae||(Ae=o.createElement("path",{d:"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5L1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8C21,8 21,19 21,19Z"})))}var Ve,ze=o.forwardRef(Be),_e=(n.p,["title","titleId"]);function qe(){return qe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},qe.apply(this,arguments)}function Je(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ue(t,e){var n=t.title,a=t.titleId,i=Je(t,_e);return o.createElement("svg",qe({width:"100%",height:"100%",viewBox:"0 0 30 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,o.createElement("g",{id:"Artboard1",transform:"matrix(1.25,0,0,1,0,0)"},o.createElement("rect",{x:0,y:0,width:24,height:24,style:{fill:"none"}}),Ve||(Ve=o.createElement("g",{transform:"matrix(0.8,0,0,1,2.4,0)"},o.createElement("path",{d:"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5C1,5 1,19 1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8L21,19Z"})))))}var We,Ke=o.forwardRef(Ue),Ge=(n.p,["title","titleId"]);function Ze(){return Ze=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ze.apply(this,arguments)}function He(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function $e(t,e){var n=t.title,a=t.titleId,i=He(t,Ge);return o.createElement("svg",Ze({width:"100%",height:"100%",viewBox:"0 0 30 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,o.createElement("g",{id:"Artboard1",transform:"matrix(1.25,0,0,1,0,0)"},o.createElement("rect",{x:0,y:0,width:24,height:24,style:{fill:"none"}}),We||(We=o.createElement("g",{transform:"matrix(0.8,0,0,1,0,0)"},o.createElement("path",{d:"M5.8,21.747C5.825,21.769 5.851,21.789 5.878,21.809C6.059,21.941 6.27,22.003 6.479,22L6.527,21.998C6.572,21.995 6.617,21.99 6.661,21.981C6.772,21.993 6.885,22 7,22L23,22C23.32,22 23.621,21.847 23.809,21.588L29.597,13.621C29.818,13.317 29.85,12.914 29.679,12.579C29.509,12.244 29.164,12.033 28.788,12.033L25.939,12.033L26,8C26,6.354 24.646,5 23,5L14.535,5C14.535,5 12.832,2.445 12.832,2.445C12.647,2.167 12.334,2 12,2L7,2C5.354,2 4,3.354 4,5C4,5 4,19 4,19C4,20.22 4.745,21.28 5.8,21.747ZM8.428,20L12.763,14.033L26.826,14.033C26.826,14.033 22.49,20 22.49,20L8.428,20ZM23.939,12.033C23.961,10.57 24,7.993 24,7.987C23.993,7.444 23.544,7 23,7L14,7C13.666,7 13.353,6.833 13.168,6.555C13.168,6.555 11.465,4 11.465,4C11.465,4 7,4 7,4C6.451,4 6,4.451 6,5L6,19C6,19.238 6.085,19.457 6.225,19.629L11.445,12.445L11.445,12.445C11.627,12.196 11.922,12.033 12.254,12.033L23.939,12.033Z"})))))}var Xe,Ye=o.forwardRef($e),Qe=(n.p,["title","titleId"]);function tn(){return tn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},tn.apply(this,arguments)}function en(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function nn(t,e){var n=t.title,a=t.titleId,i=en(t,Qe);return o.createElement("svg",tn({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,Xe||(Xe=o.createElement("path",{d:"M19,22C20.646,22 22,20.646 22,19L22,8C22,7.735 21.895,7.48 21.707,7.293L16.707,2.293C16.52,2.105 16.265,2 16,2L5,2C3.354,2 2,3.354 2,5L2,19C2,20.646 3.354,22 5,22L19,22ZM8,4L8,7L15,7C15.552,7 16,7.448 16,8C16,8.552 15.552,9 15,9L7,9C6.448,9 6,8.552 6,8L6,4L5,4C4.451,4 4,4.451 4,5C4,5 4,19 4,19C4,19.549 4.451,20 5,20L6,20L6,13C6,12.448 6.448,12 7,12L17,12C17.552,12 18,12.448 18,13L18,20L19,20C19.549,20 20,19.549 20,19C20,19 20,8.414 20,8.414C20,8.414 15.586,4 15.586,4L8,4ZM8,20L16,20L16,14C16,14 8,14 8,14L8,20Z"})))}var on,an,rn,cn,un,sn=o.forwardRef(nn),pn=(n.p,["fill","size"]),ln="rgb(108, 117, 125)",dn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=n.fill,a=n.size,i=Object(f.a)(n,pn);return Object(g.jsx)(t,Object(p.a)({fill:o||ln,width:(a||24)*e,height:a||24},i))}},fn=dn(Ne),mn=dn(Re),yn=(dn(ze),dn(Ke,1.25)),bn=dn(Ye,1.25),vn=dn(sn),gn=n(39),jn=n(62),hn=zt.a.input(on||(on=Object(m.a)(["\n    border: 2px solid transparent !important;\n    border-bottom: solid 2px #0003 !important;\n    font-weight: bold;\n    vertical-align: top;\n    margin-top: .4em;\n    padding: .25em .25em .1em;\n    position: relative;\n    background-clip: padding-box;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: linear-gradient(30deg, #00EFFB, #8649E1, #F900E3);\n        margin: -2px;\n        z-index: -1;\n        opacity: 0;\n    }\n\n    :focus {\n        outline: none;\n\n        &::before {\n            opacity: 1;\n        }\n    }\n"]))),On=Object(zt.b)(an||(an=Object(m.a)(["\n    30% {\n        transform: scale(.6);\n    }\n"]))),kn=Object(zt.a)(vn)(rn||(rn=Object(m.a)(["\n    &.animating {\n        animation: "," .7s ease-out;\n    }\n"])),On),xn=Object(zt.b)(cn||(cn=Object(m.a)(["\n    from {\n        transform: rotate(0);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n"]))),wn=Object(zt.a)(jn.a)(un||(un=Object(m.a)([" // TODO: sparkle like the others\n    &.animating {\n        animation: "," .7s ease-out;\n    }\n"])),xn);function Cn(t){var e=t.getEditor,n=t.onLoadFileContent,a=Object(o.useState)(""),i=Object(v.a)(a,2),r=i[0],c=i[1],u=Object(o.useState)(!1),s=Object(v.a)(u,2),p=s[0],l=s[1],d=Object(o.useState)(!1),f=Object(v.a)(d,2),m=f[0],b=f[1],j=Object(o.useState)(!1),h=Object(v.a)(j,2),O=h[0],k=h[1],w=Object(o.useContext)(G.g);Object(nt.a)(w,G.b,(function(){l(!0)})),Object(nt.a)(w,G.f,(function(t){c(t.name),k(!1)})),setTimeout((function(){c(e().projectName)}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(Yt,{children:[Object(g.jsx)(ne,{variant:"dark",children:Object(g.jsx)("img",{src:"".concat("https://blocks-editor.github.io/blocks","/img/logo-gradient.png"),height:"48px",alt:"Blocks Logo"})}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center mx-3",children:[Object(g.jsx)(hn,{type:"text",placeholder:"Unnamed Project",className:"bg-light text-secondary",value:r||"",onChange:function(t){return function(t){c(t);var n=e();n.projectName=t,w.emit(G.a,n)}(t.target.value)},onKeyDown:function(t){return"Enter"===t.key&&w.emit(G.b,e())}}),Object(g.jsx)(ue,{tooltip:"Save Changes",onMouseDown:function(){return w.emit(G.b,e())},children:Object(g.jsx)(kn,{className:x()(p&&"animating"),onAnimationEnd:function(){return l(!1)}})}),Object(g.jsx)(ue,{tooltip:"Export to File",onMouseDown:function(){return w.emit(G.e,e().toJSON())},children:Object(g.jsx)(fn,{})}),Object(g.jsx)(ue,{tooltip:"New Project",onMouseDown:function(){return w.emit(G.d)},children:Object(g.jsx)(mn,{})}),Object(g.jsx)(ue,{tooltip:"Load Project",onMouseDown:function(){return k(!O)},children:O?Object(g.jsx)(bn,{}):Object(g.jsx)(yn,{})}),Object(g.jsx)(ue,{tooltip:"Reset Viewport",onMouseDown:function(){y.a.zoomAt(e()),b(!0)},children:Object(g.jsx)(wn,{className:x()(m&&"animating"),onAnimationEnd:function(){return b(!1)}})})]})]}),Object(g.jsx)(ke.a,{show:O,onShow:function(){return gn.a.hide()},onHide:function(){return k(!1)},children:Object(g.jsx)(ke.a.Body,{children:Object(g.jsx)(he,{onLoadFileContent:n})})})]})}var Tn,Sn=new Map(Object.entries({c:"Comment",d:"CommentRegion","-":"Subtract","=":"Add",8:"Multiply","/":"Divide",7:"And","\\":"Or",1:"Not",r:"Return",",":"LiteralTuple",".":"LiteralIdentifier","'":"LiteralText",x:"CodeValue",b:"LiteralBool",n:"LiteralNat",i:"LiteralInt",f:"LiteralFloat",a:"NewArray",m:"NewTextHashMap",o:"Optional",u:"OptionalUnwrap"}).map((function(t){var e=Object(v.a)(t,2),n=e[0],o=e[1];return[n,Object(et.b)(o)]}))),Nn=["hideMenu","onSetup","onChange","onSave","className"],Ln=["input","textarea"];var Mn=zt.a.div(Tn||(Tn=Object(m.a)(["\n    width: 100%;\n    height: 100vh;\n"])));function In(t){var e=t.hideMenu,n=t.onSetup,a=t.onChange,i=t.onSave,r=t.className,c=Object(f.a)(t,Nn),m=Object(o.useContext)(G.g),v=Object(o.useContext)(Q),j=null;Object(nt.a)(m,G.a,(function(t){t===j&&(null===a||void 0===a||a(j))})),Object(nt.a)(m,G.b,(function(t){t===j&&(null===i||void 0===i||i(j.toJSON(),j))}));var h=function(t){try{var e=JSON.parse(t);m.emit(G.f,e)}catch(n){m.emit(G.c,n)}};return Object(g.jsx)(de,{options:{noClick:!0},onFileContent:h,children:Object(g.jsxs)(Mn,Object(p.a)(Object(p.a)({className:x()("node-editor d-flex flex-grow-1 flex-column",r)},c),{},{children:[!e&&Object(g.jsx)(Cn,{getEditor:function(){return j},onLoadFileContent:h}),Object(g.jsx)("div",{ref:function(t){if(j&&(j.silent=!0,j.clear(),j.components.clear(),j.destroy()),t){j=function(t){var e=new Et("blocks-webapp@0.1.0",t);e.use(K.c,{component:dt}),e.use(b.a),e.use(W.a),e.use(y.a,{background:function(){var t=document.createElement("div");return t.classList.add("grid"),t.style.pointerEvents="none",window.chrome||e.on("zoom",(function(e){var n=e.zoom;t.classList.toggle("far",n<=1),t.classList.toggle("d-none",n<=.5)})),e.on("destroy",(function(){return t.remove()})),t}(),snap:{size:16,dynamic:!0}}),e.use(J),e.use(Dt),e.use(Ft),e.use(Rt),e.use(Vt,{editorButton:2});var n=!1;return e.view.container.addEventListener("mousedown",(function(t){n=!1})),e.on("mousemove",(function(t){n=!0})),e.on("click",(function(t){t.e,n||(e.selected.clear(),e.nodes.forEach((function(t){return t.update()})))})),e.on("zoom",(function(t){return"dblclick"!==t.source})),e.on("nodeselect",(function(t){return!e.selected.contains(t)})),e.on("renderconnection",(function(t){var e=t.el,n=t.connection,o=function(t){var e,n,o;return null!==(e=null!==(n=null===(o=t.type)||void 0===o?void 0:o.data.category)&&void 0!==n?n:t.data.category)&&void 0!==e?e:"none"}((n.input.socket.data.reversed?n.input:n.output).socket);e.querySelector(".connection").classList.add("socket-output-category-".concat(o))})),e}(t),window.EDITOR=j;var e=function(t){var e=t.key;if(t.ctrlKey||t.metaKey)"s"===e&&(t.preventDefault(),m.emit(G.b,j),console.log("Saved successfully"));else if(!document.activeElement||!Ln.includes(document.activeElement.nodeName.toLowerCase()))if("Delete"===e)j.selected.each((function(t){return j.removeNode(t)}));else{var n=Sn.get(e);n&&j.createNodeAtCursor(j.getComponent(n.name)).catch((function(t){return m.emit("error",t)}))}};document.addEventListener("keydown",e),j.on("destroy",(function(){return document.removeEventListener("keydown",e)}));var o,a,i=Object(d.a)(et.a.values());try{for(i.s();!(o=i.n()).done;){var r=o.value,c=new Tt(r);j.register(c)}}catch(k){i.e(k)}finally{i.f()}j.on(["nodecreated","noderemoved","nodedragged","connectioncreated","connectionremoved"],Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.silent||(clearTimeout(a),a=setTimeout((function(){m.emit(G.a,j)})));case 1:case"end":return t.stop()}}),t)})))),j.on("error",(function(t){return m.emit(G.c,t)})),Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===n||void 0===n?void 0:n(h,j);case 2:case"end":return t.stop()}}),t)})))().catch((function(t){return m.emit(G.c,t)}));var p=function(t,e){f=null;var n,o=Object(d.a)(v);try{for(o.s();!(n=o.n()).done;){(0,n.value)(!1,t,e)}}catch(k){o.e(k)}finally{o.f()}},f=null,g=!1;j.on("mousemove",(function(t){g=!0})),j.on("connectionpick",(function(t){if(g=!1,f)p(f,t);else{var e=Object(l.a)(t.connections);setTimeout((function(){if(t.connections.length<e.length){var n=e.find((function(e){return!t.connections.includes(e)}));f=t===n.input?n.output:n.input}else f=t;var o,a=Object(d.a)(v);try{for(a.s();!(o=a.n()).done;){(0,o.value)(!0,f)}}catch(k){a.e(k)}finally{a.f()}}))}})),j.on("connectiondrop",(function(t){if(g){var e=Object(l.a)(t.connections);setTimeout((function(){t.connections.length!==e.length||t.connections.some((function(t,n){return t.input!==e[n].input||t.output!==e[n].output}))||p(t)}))}}))}function h(t){return O.apply(this,arguments)}function O(){return O=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,j.fromJSON(e);case 4:return(n=t.sent)&&(j.view.resize(),y.a.zoomAt(j),m.emit(G.a,j),j.nodes.forEach((function(t){return t.update()}))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}}})]}))})}var En=n(88),An=n.n(En),Rn=n(198);var Dn,Pn=n(89),Fn="blocks.editorState",Bn=n(187),Vn=function(){try{return window.self!==window.top}catch(t){return!0}}(),zn=Vn?{}:localStorage;function _n(){var t=function(){var t=Object(o.useState)({})[1];return function(){return t({})}}(),e=Object(Pn.parse)(window.location.search.substring(1)).menu,n=Object(o.useContext)(G.g);Object(nt.a)(n,G.d,(function(){Dn=Bn,t()})),Object(nt.a)(n,G.f,(function(e){Dn=e,t()})),Object(nt.a)(n,G.e,(function(t){var e=JSON.stringify(t);An.a.saveAs(new Blob([e]),"".concat(Object(Rn.a)(t.name||"project"),".blocks"))}));var a=function(){var t=Object(s.a)(u.a.mark((function t(e,n){var o,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Dn?JSON.stringify(Dn):zn[Fn],Dn=null,o?a=JSON.parse(o):Vn||(a=Bn),t.t0=a,!t.t0){t.next=8;break}return t.next=7,e(a);case 7:t.t0=!t.sent;case 8:if(!t.t0){t.next=10;break}console.warn("Load error");case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(nt.a)(window,"message",(function(e){var n,o=e.source,a=e.data;Vn&&o===window.parent&&("string"===typeof a&&(console.log("Received message:",a),"load"===(null===(n=a=JSON.parse(a))||void 0===n?void 0:n.type)&&(Dn=a.state?JSON.parse(JSON.stringify(a.state)):Bn,t())))})),Object(g.jsx)(In,{hideMenu:"hidden"===e,onSetup:a,onChange:function(t){},onSave:function(t,e){var n=JSON.stringify(t);if(zn[Fn]=n,Vn){var o={type:"save",state:n};console.log("Sending message:",o);window.parent.postMessage(o,"*")}}})}Vn&&console.log("Using embedded mode.");var qn,Jn=n(72),Un=(n(188),Object(zt.a)(gn.a)(qn||(qn=Object(m.a)(["\n  padding: .5em 1em !important;\n"]))));function Wn(){return Object(g.jsx)(Un,{backgroundColor:"#111",place:"bottom",delayShow:300})}var Kn,Gn=n(93);function Zn(){var t=Object(o.useContext)(G.g);return Object(nt.a)(t,G.c,(function(t){Object(Jn.b)(t,{type:"error"})})),Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsxs)(Gn.a,{children:[Object(g.jsx)(Wn,{}),Object(g.jsx)(Jn.a,{}),Object(g.jsx)(_n,{})]})})}r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(Zn,{})}),document.getElementById("root")),(Kn=function(){})&&Kn instanceof Function&&n.e(3).then(n.bind(null,202)).then((function(t){var e=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;e(Kn),n(Kn),o(Kn),a(Kn),i(Kn)}))},function(t,e,n){"use strict";n.r(e);var o,a,i=n(2),r=n(6),c=n(7),u=n(21),s=(n(1),n(92)),p=n(22),l=n(44),d=n(27),f=n(3),m=p.a.div(o||(o=Object(u.a)(["\n  cursor: pointer;\n  color: black;\n  background: ",";\n"])),(function(t){return t.selected?"#fffa":"#fff8"})),y=Object(p.a)(s.a)(a||(a=Object(u.a)(["\n  font-weight: 500;\n  resize: horizontal;\n  background: #fff8;\n"])));var b={info:"A text comment",category:r.c,global:!0,component:function(t){t.block;var e=t.nodeHandle,n=e.props.node,o=e.state.selected,a=Object(d.a)(n.controls.get("text")),i=Object(c.a)(a,2),r=i[0],u=i[1],s=Object(d.a)(n.controls.get("widthPixels")),p=Object(c.a)(s,2),b=p[0],v=p[1];return Object(f.jsx)(m,{className:"pt-2 ps-2 pe-4 rounded-3",selected:o,children:Object(f.jsx)(y,{style:{width:b||200},rows:1,maxRows:100,ref:l.a,value:r||"",placeholder:"Comment",onChange:function(t){return u(t.target.value)},onMouseUp:function(t){return v(t.target.clientWidth)}})})},controls:[{key:"text",type:i.z},{key:"widthPixels",type:i.k}]};e.default=b},function(t,e,n){"use strict";n.r(e);var o,a,i=n(2),r=n(6),c=n(7),u=n(21),s=(n(1),n(22)),p=n(27),l=n(44),d=n(3),f=s.a.div(o||(o=Object(u.a)(["\n  cursor: pointer;\n    // background: ",";\n  border: 2px solid ",";\n"])),(function(t){return t.selected?"#fff8":"#fff3"}),(function(t){return t.selected?"#fffa":"#fff8"})),m=s.a.div(a||(a=Object(u.a)(["\n  pointer-events: none;\n  //cursor: default;\n  background: #fff1;\n  resize: both;\n  overflow: hidden;\n"])));var y=n(12),b={title:"Region",info:"A background region",category:r.c,icon:y.x,global:!0,component:function(t){t.block;var e=t.nodeHandle,n=e.props.node,o=e.state.selected,a=Object(p.a)(n.controls.get("widthPixels")),i=Object(c.a)(a,2),r=i[0],u=i[1],s=Object(p.a)(n.controls.get("heightPixels")),y=Object(c.a)(s,2),b=y[0],v=y[1];return Object(d.jsx)(f,{ref:function(t){t&&(t.parentElement.style.zIndex="-1")},className:"p-2 rounded-3",selected:o,children:Object(d.jsx)(m,{ref:l.a,style:{width:r||300,height:b||100},onMouseUp:function(t){return u(t.target.clientWidth)&v(t.target.clientHeight)}})})},controls:[{key:"text",type:i.z},{key:"widthPixels",type:i.k},{key:"heightPixels",type:i.k}]};e.default=b}],[[189,1,2]]]);
//# sourceMappingURL=main.8d3fdedc.chunk.js.map