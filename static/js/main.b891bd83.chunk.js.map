{"version":3,"sources":["utils/isPrincipal.js","block-types/types.js","block-categories/categories.js","editor/format/formatHelpers.js","editor/useCases.js","contexts/EventsContext.js","block-patterns/statement-patterns.js","utils/eventHelpers.js","compilers/utils/nodeIdentifierRef.js","hooks/utils/useListener.js","block-patterns/operator-patterns.js","blocks/State.js","compilers/MotokoCompiler.js","utils/makeObservable.js","hooks/useReactTooltip.js","block-patterns/member-patterns.js","hooks/utils/useLocalStorage.js","hooks/useControlValue.js","components/rete/controls/CodeControlHandle.js","block-patterns/code-patterns.js","compilers/utils/compileGlobalMotoko.js","hooks/utils/useObservableState.js","editor/blocks.js","utils/isEmbeddedMode.js","block-patterns/literal-patterns.js","blocks/NewArray.js","utils/getQueryConfig.js","compilers/Compiler.js","hooks/persistent/useThemeState.js","utils/bindNodeInput.js","block-patterns/search-patterns.js","components/monaco/CodeEditor.js","utils/getEmbedConfig.js","blocks/OptionalOrDefault.js","config/configureMonaco.js","editor/format/prettyPrintMotoko.js","hooks/useThemes.js","editor/themes.js","components/common/Loading.js","components/common/CopyToClipboardButton.js","components/rete/controls/OutputControlHandle.js","block-patterns/compile-patterns.js","components/rete/controls/SelectControlHandle.js","block-patterns/control-patterns.js","editor sync","blocks/MainParameter.js","blocks/Function.js","examples/examples.js","blocks sync /.js$","blocks/Actor.js","blocks/ActorClass.js","blocks/Add.js","blocks/And.js","blocks/ArrayAppend.js","blocks/ArrayAppended.js","blocks/ArrayFilter.js","blocks/ArrayGet.js","blocks/ArrayMap.js","blocks/ArrayPrepend.js","blocks/ArrayPut.js","blocks/Assert.js","blocks/Await.js","blocks/Class.js","blocks/CodeMember.js","blocks/CodeReference.js","blocks/CodeStatement.js","blocks/CodeType.js","blocks/CodeValue.js","blocks/CollectionGet.js","blocks/CollectionPut.js","blocks/CollectionSize.js","blocks/CompareEqual.js","blocks/CompareGreater.js","blocks/CompareGreaterEqual.js","blocks/CompareLess.js","blocks/CompareLessEqual.js","blocks/CompareNotEqual.js","blocks/CompileMotoko.js","blocks/CompileType.js","blocks/Conditional.js","blocks/ConditionalValue.js","blocks/CounterState.js","blocks/DebugPrint.js","blocks/Divide.js","blocks/DivideInt.js","blocks/FunctionCall.js","blocks/HashText.js","blocks/LiteralBool.js","blocks/LiteralCustomType.js","blocks/LiteralFloat.js","blocks/LiteralIdentifier.js","blocks/LiteralInt.js","blocks/LiteralNat.js","blocks/LiteralPair.js","blocks/LiteralPairType.js","blocks/LiteralPrincipal.js","blocks/LiteralText.js","blocks/LiteralTuple.js","blocks/LiteralTupleType.js","blocks/LiteralType.js","blocks/LoopForIntRange.js","blocks/LoopWhile.js","blocks/MainActor.js","blocks/MainInstaller.js","blocks/MainParameterRead.js","blocks/MapGet.js","blocks/MapGetOrDefault.js","blocks/MapPut.js","blocks/MapRemove.js","blocks/MapTransfer.js","blocks/Max.js","blocks/Min.js","blocks/Multiply.js","blocks/NewHashMap.js","blocks/Not.js","blocks/Null.js","blocks/Object.js","blocks/Optional.js","blocks/OptionalUnwrap.js","blocks/Or.js","blocks/Parameter.js","blocks/ReferenceImport.js","blocks/ReferencePathName.js","blocks/Return.js","blocks/SetupValue.js","blocks/SplitPair.js","blocks/StateRead.js","blocks/StateUpdate.js","blocks/Subtract.js","blocks/TextConcat.js","blocks/TextSize.js","blocks/TypeMember.js","blocks/TypeMemberReference.js","blocks/ValueCall.js","blocks/Variable.js","components/global/GlobalTooltip.js","assets/icons/gradient.svg","components/common/menus/TopMenu.js","components/common/menus/MenuItem.js","hooks/persistent/useButtonTitleState.js","components/common/menus/MenuButton.js","components/common/FileDropZone.js","contexts/LoadFileContext.js","components/common/MenuModalOption.js","setupFirebase.js","observables/editorStateStore.js","compilers/NodeCompiler.js","compilers/TypeCompiler.js","compilers/ControlCompiler.js","compilers/ConnectionCompiler.js","editor/BlocksNodeEditor.js","utils/getBlockLabel.js","utils/getNodeLabel.js","utils/getInfoText.js","components/rete/nodes/parts/DynamicTitle.js","utils/getDefaultLabel.js","utils/getPropLabel.js","contexts/ConnectionAwareListContext.js","hooks/persistent/useLearningModeState.js","components/rete/sockets/SocketHandle.js","components/rete/nodes/parts/ShortcutButton.js","components/rete/nodes/parts/PropField.js","components/rete/nodes/views/DefaultNodeView.js","components/rete/nodes/NodeHandle.js","plugins/rete-blocks-contextmenu-plugin/components/ContextMenu.js","plugins/rete-blocks-contextmenu-plugin/contexts/MenuContext.js","plugins/rete-blocks-contextmenu-plugin/components/MenuIcon.js","plugins/rete-blocks-contextmenu-plugin/components/MenuAction.js","utils/jsonCopy.js","plugins/rete-blocks-contextmenu-plugin/components/menus/SelectionMenu.js","plugins/rete-blocks-contextmenu-plugin/components/MenuComponent.js","plugins/rete-blocks-contextmenu-plugin/components/MenuSearch.js","plugins/rete-blocks-contextmenu-plugin/components/menus/PlacementMenu.js","plugins/rete-blocks-contextmenu-plugin/hooks/useEditorComponents.js","observables/contextMenuStore.js","plugins/rete-blocks-contextmenu-plugin/index.js","plugins/rete-connection-drop-plugin/index.js","plugins/rete-connection-opacity-plugin/index.js","plugins/rete-position-sort-plugin/index.js","plugins/rete-drag-button-plugin/index.js","observables/createNodeStore.js","plugins/rete-blocks-history-plugin/index.js","observables/editorSelectionStore.js","editor/createEditor.js","tutorials/utils/getTutorialNode.js","tutorials/steps/createNodeStep.js","tutorials/utils/tutorialStyles.js","hooks/persistent/useOutputPanelState.js","utils/capitalize.js","tutorials/utils/tutorialText.js","utils/isMenuHidden.js","tutorials/definitions/helloWorldTutorial.js","utils/isOutputPanelHidden.js","tutorials/tutorials.js","observables/editorStore.js","hooks/persistent/useTutorialProgressState.js","hooks/useNodeEditor.js","observables/tutorialStepStore.js","hooks/persistent/useTelemetryState.js","telemetry.js","observables/editorMenuStore.js","hooks/persistent/useEditorMenuState.js","components/common/MenuModal.js","components/editor/LoadProjectModal.js","assets/icons/download.svg","assets/icons/file-plus.svg","assets/icons/folder.svg","assets/icons/folder-wide.svg","assets/icons/folder-open.svg","assets/icons/save.svg","assets/icons/crosshair.svg","assets/icons/learning.svg","assets/icons/settings.svg","assets/icons/share.svg","assets/icons/menu.svg","components/common/Icon.js","components/common/menus/FloatingMenu.js","hooks/persistent/useThemePartsState.js","hooks/persistent/useAutosaveState.js","editor/shortcutKeys.js","components/editor/KeyBindingDetail.js","components/editor/SettingsModal.js","components/editor/TutorialsModal.js","hooks/utils/useTimeout.js","components/editor/SocialModal.js","observables/mobileMenuStore.js","components/common/menus/MobileMenu.js","components/common/menus/MobileMenuButton.js","components/editor/EditorMenu.js","utils/vibrate.js","components/common/ExternalLink.js","components/editor/OutputPanel.js","hooks/persistent/useFullscreenPanelState.js","components/rete/controls/TextControlHandle.js","components/common/inputs/TypeSelect.js","editor/controls/BaseControl.js","components/rete/controls/NumberControlHandle.js","components/rete/controls/CheckboxControlHandle.js","components/rete/controls/NodeControlHandle.js","components/rete/controls/TypeControlHandle.js","editor/controls/PropControl.js","utils/flattenUniqueTypes.js","editor/sockets/PropSocket.js","editor/sockets/PropOutputSocket.js","editor/components/BlockComponent.js","components/rete/EditorWrapper.js","hooks/useTutorialVariables.js","hooks/utils/useObjectObservable.js","components/editor/TutorialCard.js","tutorials/utils/getTutorialStep.js","hooks/persistent/useFamiliarityState.js","components/editor/Editor.js","parsers/parseMotoko.js","parsers/generateBlocksFromParseResult.js","components/editor/EditorPage.js","hooks/utils/useRedraw.js","components/TabLayout.js","components/global/GlobalTheme.js","observables/keyDownStore.js","observables/keyUpStore.js","components/global/GlobalObservables.js","components/App.js","index.js","components/rete/nodes/views/CommentNodeView.js","blocks/Comment.js","components/rete/nodes/views/RegionNodeView.js","blocks/CommentRegion.js"],"names":["regex","Type","name","parent","generics","data","meta","this","map","type","getType","t","toJSON","otherMeta","buildType","Object","assign","abstract","some","isAbstract","value","defaultValue","other","length","every","i","equals","alwaysSubtype","isSpecialSubtype","call","arbitraryGenerics","isSubtype","getSharedType","toTypeString","g","join","TYPE_MAP","Map","window","anyType","createType","category","reversed","anyReversedType","typeType","info","controlType","fromJSON","nodeType","block","JSON","stringify","valueType","toMotoko","customType","referenceType","identifierType","validation","pattern","custom","MOTOKO_KEYWORDS","includes","defaultInput","prop","node","nodeIdentifierRef","key","effectType","memberType","singleOutput","containerType","paramType","boolType","textType","minLength","maxLength","floatType","isNaN","intType","step","natType","min","blobType","principalType","string","test","tupleType","values","unitType","withMeta","Error","objectType","genericNames","functionType","input","output","formatParentheses","optionalType","nullType","collectionType","arrayType","item","mutableArrayType","mapType","asyncType","unionType","nat32Type","console","log","all","getIntValidation","getNatValidation","n","max","x","baseType","set","getGenericType","parentName","get","parentData","parentMeta","arguments","warn","has","keys","a","b","Category","root","CATEGORY_MAP","createCategory","getCategory","defaultCategory","stateCategory","color","icon","FaDatabase","priority","functionCategory","FaCubes","paramCategory","FaLongArrowAltRight","typeCategory","FaTextHeight","collectionCategory","FaTh","compilerCategory","FaCode","expressionCategory","FaEject","operatorCategory","FaFilter","actorCategory","FaFont","effectCategory","FaStream","literalCategory","FaPlusCircle","decompositionCategory","FaNetworkWired","commentCategory","FaCommentAlt","formatString","Array","isArray","filter","s","undefined","startsWith","endsWith","substring","formatOptionalParentheses","formatCurlyBraces","formatStatementBlock","formatMembers","members","formatStatement","statement","after","FOR_DEBUGGING","FOR_LEARNING_MOTOKO","FOR_ASSIGNING_ID","FOR_BUILDING_API","FOR_STORING_DATA","FOR_TRANSACTIONS","FOR_REUSABLE_LOGIC","FOR_ORGANIZATION","FOR_DOCUMENTATION","FOR_CONFIGURATION","FOR_CUSTOM_LOGIC","FOR_ERROR_HANDLING","EDITOR_CHANGE_EVENT","EDITOR_SAVE_EVENT","PROJECT_EXPORT_EVENT","PROJECT_LOAD_EVENT","PROJECT_CLEAR_EVENT","ERROR_EVENT","events","EventEmitter","setMaxListeners","on","error","EVENTS","React","createContext","defaultType","of","statementBlock","compileFn","typeFn","beforeProp","inferType","props","compiler","getBlock","inputs","getInput","result","topLeft","topRight","optional","outputs","endStatementBlock","statementProp","onEvents","eventKeys","listenerFn","currentKey","timeout","forEach","event","setTimeout","clearTimeout","onAnyClick","onClick","onLeftClick","button","onAnyRelease","onLeftPress","onAnyPress","component","id","String","useListener","target","listener","options","useEffect","domTarget","addEventListener","removeEventListener","off","unaryOperatorBlock","symbol","evaluate","title","binaryOperatorBlock","inputType","resultType","left","right","logicalBinaryOperatorBlock","args","arithmeticOperatorBlock","numberComparisonOperatorBlock","stateReadIcon","FaAngleRight","stateWriteIcon","FaAngleDoubleRight","memberBlock","useCases","global","memberPriority","STATE_PRIORITY","computeTitle","editor","getUserDefinedName","compilers","motoko","getTypeString","shortcuts","nodeKey","request","initialValue","controls","advanced","stable","readonly","setup","modifiers","m","importRef","resolveImportRefs","code","imports","replace","match","path","lastIndexOf","hasOwnProperty","entries","sort","localeCompare","MotokoCompiler","Compiler","ObservableValue","_value","_listeners","newValue","previous","fn","subscribe","push","unsubscribe","makeObservable","useReactTooltip","ReactTooltip","rebuild","visibilityControlProp","stringSelectProp","memberProp","storage","isEmbeddedMode","localStorage","observableMap","makeLocalStorageObservable","observable","parse","useLocalStorage","useObservableState","storedValue","setStoredValue","setValue","useCallback","valueToStore","Function","useControlValue","control","getValue","useState","updateVisualValue","useContext","EventsContext","emit","CodeControlHandle","bindInput","ref","style","height","CodeEditor","onChange","replaceRegex","expressionControl","config","expressionArgsInput","multi","parseCodeBlockInputs","expression","TYPE_PRIORITY","FUNCTION_PRIORITY","mainSharedRef","compileGlobalMotoko","actorName","pascalCase","details","memberNodes","nodes","io","connections","socket","findType","aBlock","position","installerNodes","paramNodes","installerPart","classPart","compileGlobalParameter","actorPart","getOutput","prefixes","actorCode","prettyPrintMotoko","setValueState","require","context","fs","base","scanSubDirectories","regularExpression","files","readDirectory","directory","readdirSync","file","fullPath","resolve","statSync","isDirectory","Module","__dirname","allBlocks","blockNames","Set","blockContext","addProps","propList","basename","default","find","addProp","advancedProp","err","add","BLOCK_MAP","embedded","self","top","getQueryConfig","e","literalBlock","stringifier","arrayImportRef","mutable","itemType","items","location","search","UndefinedInputError","compileKey","_caching","_inputCache","_outputCache","silent","Rete","Node","getNode","_getInput","_resolveInput","_output","c","_compileConnection","_input","_compileControl","_control","cacheKey","_cacheKey","_getOutput","_prop","getInputArgs","defaultCompile","postCompile","trigger","loaded","defineProperty","clear","connection","from","to","defaultTheme","THEMES","THEME_STORE","getEmbedConfig","useThemeState","themes","useThemes","setId","theme","bindNodeInput","stopPropagation","findNodeSearchOptions","text","componentName","flatMap","toLowerCase","readOnly","others","monaco","defaultLanguage","beforeMount","configureMonaco","tabSize","minimap","enabled","wordWrap","scrollBeyondLastLine","fontSize","optionImportRef","defineTheme","nightOwlTheme","languages","register","setLanguageConfiguration","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","accessmodifiers","typeKeywords","operators","symbols","escapes","tokenizer","cases","include","token","bracket","next","comment","whitespace","indent","trim","depth","lines","split","repeat","parts","styledComponents","Loading","promise","loading","children","status","setStatus","setResult","Promise","then","catch","CopyToClipboardButton","tooltipRef","size","variant","buttonRef","copied","setCopied","Button","className","show","OutputControlHandle","query","findValue","valuePromise","setValuePromise","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","compileBlock","compilerKey","displayFn","queryFor","inputKey","width","controlProps","SelectControlHandle","findLabel","invalid","validate","classNames","option","label","charAt","toUpperCase","controlDefault","updateNode","webpackEmptyContext","req","module","exports","typeString","defaultReturnType","getFunctionReturnType","visibility","params","body","returnType","fromOutput","shared","returnString","examples","getExampleProjects","webpackContext","webpackContextResolve","__webpack_require__","o","hidden","hasCaller","FaRegCaretSquareRight","array","FaLayerGroup","_","index","fromType","toType","fromTypeString","FaRegCaretSquareLeft","FaExclamation","condition","FaBox","trimRight","collection","FaSitemap","trueCase","falseCase","falsePart","FaListOl","reduce","debugImportRef","FaSearch","intImportRef","FaPlayCircle","functionNode","paramNames","customSearch","textImportRef","FaHashtag","FaPencilAlt","reference","FaItalic","principalImportRef","slice","types","iterImportRef","inclusive","loop","configNode","FaCompress","amount","successRef","amountRef","fromBalanceRef","hashMapImportRef","keyType","keyImportRef","keyTypeString","valueTypeString","hashFunction","valueCase","nullCase","valuePart","nullPart","FaCaretLeft","FiAlignLeft","stateNode","typeInput","typeNode","FaRegPlayCircle","callable","StyledReactTooltip","styled","GlobalTooltip","backgroundColor","place","delayShow","multiline","_linearGradient","_excluded","_extends","source","prototype","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgGradient","_ref","svgRef","titleId","x2","y2","offset","stopColor","ForwardRef","MenuContainer","div","HiddenGradient","Gradient","TopMenu","Provider","verticalAlign","ItemContainer","MenuItem","tooltip","useButtonTitleState","StyledMenuItem","MenuButton","noMargin","buttonTitles","FileDropZone","onFile","onFileContent","onDrop","reader","FileReader","onload","readAsText","useDropzone","maxFiles","noClick","getRootProps","getInputProps","isDragActive","Container","MenuModalOption","description","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analyticsPromise","isSupported","supported","getAnalytics","EDITOR_STATE_STORE","getFirestore","NodeCompiler","TypeCompiler","ControlCompiler","ConnectionCompiler","BlocksNodeEditor","version","readme","bind","clearCache","splice","json","language","beforeImport","hadError","jsonNode","getComponent","build","addNode","jsonOutput","jsonConnection","nodeId","targetOutput","otherNode","targetInput","connect","afterImport","createNode","y","view","area","mouse","logTelemetry","node_type","update","conn","NodeEditor","getBlockLabel","capitalCase","getNodeLabel","simplified","getInfoText","DynamicTitle","fallback","showInfo","setTitle","getDefaultLabel","sentenceCase","getPropLabel","useLearningModeState","SocketHandle","propKey","innerRef","relevant","setRelevant","requested","setRequested","learningMode","connectionAwareList","ConnectionAwareListContext","socketType","multiple","multipleConnections","Input","updateRequested","findProp","starting","connectionIO","Output","outputType","socketNoun","el","ShortcutButton","shortcut","handlePress","components","createNodeAtCursor","newNode","_drag","down","fromIO","toIO","borderColor","cursor","onMouseDown","createElement","PropField","hideLeft","hideRight","bindSocket","bindControl","showControl","getDefaultValue","leftSocket","rightSocket","controlField","paramCase","DefaultNodeView","nodeHandle","selected","state","getBindControl","transform","ButtonGroup","background","NodeHandle","NodeView","ContextMenu","styleProp","touch","handleCloseMenu","useMemo","zIndex","isMobile","boxShadow","pointerEvents","bindScreen","bindContainer","moveIntoWindow","getBoundingClientRect","bottom","innerHeight","onresize","onKeyDown","keyCode","MenuContext","MenuIcon","MenuAction","onAction","userSelect","jsonCopy","cloneSelected","newNodeMap","list","original","clone","remove","SelectionMenu","each","removeNode","MenuComponent","specialTitle","FaRegStickyNote","opacity","MenuSearch","focus","handleKeyDown","autoFocus","autoComplete","maxHeight","deepCopy","obj","PlacementMenu","searchText","setSearchText","setIndex","menu","sortFn","hash","deprecated","v","compare","useEditorComponents","findRelevantComponents","lower","k","Math","handleSearchAction","handleCreateOption","compatibleWith","menuItems","CONTEXT_MENU_STORE","ContextMenuPlugin","install","mouseEvent","offsetX","offsetY","hideContextMenu","display","preventDefault","ctrlKey","contains","selectNode","clientX","clientY","document","container","appendChild","menuContext","ReactDOM","render","connectionMouseMoved","removingConnection","prevConnections","touchStart","touchNode","touchTimeout","getPosition","changedTouches","pageX","pageY","abs","ConnectionDropPlugin","ConnectionOpacityPlugin","minDistance","opacityFalloff","querySelectorAll","pathElement","distance","sqrt","sortConnections","aPos","bPos","PositionSortPlugin","ioMap","DragButtonPlugin","CREATE_NODE_STORE","UndoRedoHistory","delay","undoHistory","redoHistory","current","_timeout","_resetCurrent","shift","_applyCurrent","pop","HistoryPlugin","history","metaKey","shiftKey","EDITOR_SELECTION_STORE","EDITOR_VERSION","process","findCategory","getTutorialNode","createNodeStep","isComplete","progress","setupNode","highlightStyle","css","animation","keyframes","animationStyle","getNodeSelector","selector","highlightNode","highlightNodeSocket","highlightContextMenuComponent","blockName","OUTPUT_PANEL_STATE","useOutputPanelState","capitalize","TUTORIAL_LEFT_CLICK","TUTORIAL_CONTEXT_MENU_CLICK","TUTORIAL_CLICK_DRAG","isMenuHidden","functionNodeId","returnNodeId","textNodeId","getFunctionNode","getReturnNode","getTextNode","helloWorldTutorial","setupVariables","contextMenu","editorState","editorSelection","outputPanel","steps","removeConnection","textNode","TUTORIALS","EDITOR_STORE","defaultTutorial","defaultState","tutorial","TUTORIAL_PROGRESS_STORE","useTutorialProgressState","setState","useNodeEditor","freeze","setProgress","TUTORIAL_STEP_STORE","TELEMETRY_STORE","analytics","logEvent","mobile","editor_version","editor_mode","project","tutorial_step","automaticDataCollectionEnabled","telemetry","EDITOR_MENU_STORE","useEditorMenuState","callAndSubscribe","interaction","TitleContainer","MenuModal","setOpenMenu","StyledFileDropZone","LoadProjectModal","loadFile","LoadFileContext","accept","DROP_ZONE_EXTENSIONS","example","_g","SvgDownload","viewBox","xmlns","xmlnsXlink","xmlSpace","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","d","_path","SvgFilePlus","SvgFolder","SvgFolderWide","fill","SvgFolderOpen","SvgSave","SvgCrosshair","SvgLearning","_path2","SvgSettings","SvgShare","SvgMenu","defaultFill","createIcon","SvgComponent","widthRatio","defaults","DownloadIcon","Download","FilePlusIcon","FilePlus","FolderWideIcon","Folder","FolderWide","FolderOpenIcon","FolderOpen","SaveIcon","Save","CrosshairIcon","Crosshair","LearningIcon","Learning","SettingsIcon","Settings","SocialIcon","Share","Menu","FaGithub","ContainerDiv","FloatingMenu","useThemePartsState","useAutosaveState","SHORTCUT_KEYS","BlockShortcutContainer","ShortcutContainer","KeyContainer","KeyboardShortcut","binding","KeyBindingDetail","settingInputs","select","toggle","checked","NestedContainer","Setting","note","extras","SettingInput","fontWeight","extra","SettingsModal","setTheme","themeParts","setThemeParts","autosave","setAutosave","setLearningMode","setTelemetry","setButtonTitles","settings","part","hideMobile","setting","href","rel","tutorials","TutorialsModal","currentTutorial","transition","borderStyle","borderWidth","borderLeftColor","useTimeout","socials","wallets","SocialContainer","StyledSocialIcon","SocialModal","url","inputElement","address","handleSelect","onFocus","onCopy","MOBILE_MENU_STORE","fullscreen","MobileMenu","isOpen","setOpen","innerWidth","StyledMobileMenuItem","MobileMenuButton","BlocksLogo","img","ProjectNameInput","saveAnimation","StyledSaveIcon","StyledZoomIcon","StyledLearningIcon","LogoContainer","BetaMark","EditorMenu","setName","saveAnimating","setSaveAnimating","zoomAnimating","setZoomAnimating","openMenu","setOutputPanel","saveAction","exportAction","newAction","loadAction","tutorialAction","settingsAction","socialAction","onClickMenuButton","onClickMobileMenuButton","src","alt","draggable","placeholder","updateName","onAnimationEnd","AreaPlugin","zoomAt","duration","navigator","vibrate","Modal","onShow","hide","onHide","Body","ExternalLink","textDecoration","OutputContainer","closed","ClipboardButton","playgroundOrigin","playgroundKey","outputPanelId","OutputPanel","panel","setPanel","setFullscreen","setOutput","playgroundWindow","ack","setInterval","postMessage","acknowledge","deploy","actions","payload","responseListener","origin","clearInterval","TextControlHandle","autoCorrect","TypeSelect","constraintType","controlTypes","number","checkbox","setNodes","blockFilter","maxWidth","BaseControl","getData","putData","PropControl","flattenUniqueTypes","generic","PropSocket","otherType","Socket","PropOutputSocket","typeCompiler","nodeName","_isTypeOfType","BlockComponent","getEditorNode","isPropOutput","addPropInput","addPropOutput","isOutput","shouldPropHaveControl","addControl","addInput","addOutput","Component","inputTags","EditorWrapper","onSetup","onSave","_editor","loadState","resize","element","destroy","firstChild","removeChild","EDITOR_NAME","use","ReactRenderPlugin","ConnectionPlugin","AutoArrangePlugin","classList","chrome","zoom","snap","dynamic","editorButton","updateSelection","mouseMoved","querySelector","random","toString","createEditor","EDITOR","activeElement","handleConnectionEnd","startIO","endIO","currentIO","useTutorialVariables","object","callbacks","callback","useObjectObservable","StyledCard","Card","StyledCardHeader","Header","GlobalStyle","createGlobalStyle","tutorialCss","stepCss","HelperCard","iconTooltip","hideCloseButton","TutorialProgressCard","onComplete","variables","getTutorialStep","rendered","TutorialCard","familiarityConfig","useFamiliarityState","familiarity","setFamiliarity","resetTutorial","onAccept","onDecline","EditorContainer","EditorControls","Editor","loadBlocksFile","content","indentString","line","subLines","j","subIndent","subLine","parseActorClass","parseType","parseState","parseFunction","paramResult","paramRegex","exec","typeResult","getVisibility","stateResult","kind","states","nameResult","functions","nextEditorState","STORAGE_EDITOR_STATE","DEFAULT_STATE","EditorPage","redraw","useRedraw","LOAD_MOTOKO","parseMotoko","showFunction","funcName","functionX","generateBlocksFromParseResult","FileSaver","saveAs","Blob","onEditorSetup","stateString","onEditorChange","onEditorSave","message","TabLayout","GlobalTheme","KEY_DOWN_STORE","KEY_UP_STORE","GlobalObservables","App","toast","storageFlag","isSafari","sessionStorage","autoClose","onClose","StrictMode","marginTop","getElementById","StyledTextArea","TextareaAutosize","textArea","setText","setWidth","offsetWidth","rows","maxRows","ResizeArea","FaSquareFull","setHeight","parentElement","clientWidth","clientHeight"],"mappings":"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","file":"static/js/main.b891bd83.chunk.js","sourcesContent":["const regex = /^[0-9a-z-]+$/;\r\n\r\n// TODO: verify based on check sequence\r\nexport default function isPrincipal(string) {\r\n    return typeof string === 'string' && regex.test(string);\r\n}","import nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {MOTOKO_KEYWORDS} from '../config/configureMonaco';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\nimport isPrincipal from '../utils/isPrincipal';\r\n\r\nclass Type {\r\n    constructor(name, parent, generics, data = {}, meta = {}) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.generics = generics.map(type => getType(type));\r\n        this.data = data;\r\n        this.meta = meta;\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            generics: this.generics.map(t => t.toJSON()),\r\n        };\r\n    }\r\n\r\n    of(...generics) {\r\n        return getType(this, generics);\r\n    }\r\n\r\n    withMeta(meta) {\r\n        let {name, ...otherMeta} = meta;\r\n        let type = buildType(name || this.name, this, this.generics);\r\n        Object.assign(type.meta, otherMeta);\r\n        return type;\r\n    }\r\n\r\n    isAbstract() {\r\n        return this.data.abstract || this.generics.some(type => type.isAbstract());\r\n    }\r\n\r\n    getDefaultValue() {\r\n        let value = this.data.defaultValue;\r\n        return typeof value === 'function' ? value(this) : value;\r\n    }\r\n\r\n    equals(other) {\r\n        return this.name === other.name && this.generics.length === other.generics.length && this.generics.every((t, i) => t.equals(other.generics[i]));\r\n    }\r\n\r\n    // TODO: rename to something like `isAssignableFrom`\r\n    isSubtype(other) {\r\n        if(!other) {\r\n            return false;\r\n        }\r\n        if(this.data.alwaysSubtype === other) {\r\n            return true;///\r\n        }\r\n        if(this.data.isSpecialSubtype?.call(this, other)) {\r\n            return true;\r\n        }\r\n        if(this.data.arbitraryGenerics && other.parent && this.name === other.parent.name) {\r\n            // e.g. `Tuple : Tuple<A, B, C>`\r\n            return true;\r\n        }\r\n        if(this.name === other.name) {\r\n            return this.generics.length === other.generics.length && this.generics.every((t, i) => t.isSubtype(other.generics[i]));\r\n        }\r\n        return !!other.parent && this.isSubtype(other.parent);\r\n    }\r\n\r\n    getSharedType(other) {\r\n        if(!other) {\r\n            return;\r\n        }\r\n        if(this === other) {\r\n            return this;\r\n        }\r\n        if(this.isSubtype(other)) {\r\n            return this;\r\n        }\r\n        if(other.isSubtype(this)) {\r\n            return other;\r\n        }\r\n        if(this.parent) {\r\n            return this.parent.getSharedType(other);\r\n        }\r\n    }\r\n\r\n    toTypeString() {\r\n        return this.data.toTypeString?.call(this) ?? this.name + (this.generics.length ? '<' + this.generics.map(g => g.toTypeString()).join(', ') + '>' : '');\r\n    }\r\n\r\n    toString() {\r\n        return `Type(${this.toTypeString()})`;\r\n    }\r\n}\r\n\r\nexport const TYPE_MAP = new Map();\r\n\r\nwindow.TYPE_MAP = TYPE_MAP; // Browser debug\r\n\r\nexport const anyType = createType('Any', {\r\n    abstract: true,\r\n    category: 'default',\r\n    reversed: false,\r\n});\r\nexport const anyReversedType = createType('AnyReversed', {\r\n    abstract: true,\r\n    category: 'default',\r\n    // parent: anyType,\r\n    reversed: true,\r\n});\r\n\r\nexport const typeType = createType('Type', {\r\n    info: 'A specific category of possible values',\r\n    parent: anyType,\r\n    category: 'types',\r\n    controlType: 'type',\r\n    defaultValue: type => type.generics[0],\r\n    generics: [anyType],\r\n    fromJSON(value) {\r\n        return getType(value);\r\n    },\r\n});\r\nexport const nodeType = createType('Node', {\r\n    info: 'A specific node in the editor',\r\n    parent: anyType,\r\n    category: 'nodes',\r\n    controlType: 'node',\r\n    toTypeString() {\r\n        return this.meta.block ? `Node{block=${JSON.stringify(this.meta.block)}}` : 'Node';\r\n    },\r\n});\r\n\r\n// High-level type categories\r\nexport const valueType = createType('Value', {\r\n    abstract: true,\r\n    parent: anyType,\r\n    category: 'values',\r\n    toMotoko() {\r\n        if(this === valueType) {\r\n            return 'Any';\r\n        }\r\n    },\r\n});\r\nexport const customType = createType('Custom', {\r\n    info: 'A custom user-defined value',\r\n    // abstract: true, // TEMP\r\n    parent: valueType,\r\n    arbitraryGenerics: true,\r\n    // toMotoko() {\r\n    //     console.log(this)///\r\n    //     return this.meta.motoko || '$Custom$';\r\n    // },\r\n});\r\nexport const referenceType = createType('Reference', {\r\n    info: 'A programmatic path to a value, type, function, actor, class, object, or module',\r\n    parent: anyType,\r\n    category: 'references',\r\n});\r\nexport const identifierType = createType('Identifier', {\r\n    info: 'A name consisting of letters and underscores',\r\n    parent: referenceType,\r\n    controlType: 'text',\r\n    // defaultValue: '',\r\n    validation: {\r\n        pattern: /^[a-zA-Z_][a-zA-Z0-9_]*$/,\r\n        custom: value => !MOTOKO_KEYWORDS.includes(value),\r\n    },\r\n    defaultInput(prop, node) {\r\n        // Create placeholder identifier\r\n        return nodeIdentifierRef(node, prop.key);\r\n    },\r\n});\r\nexport const effectType = createType('Effect', {\r\n    info: 'A statement which runs after calling a function',\r\n    parent: anyReversedType,\r\n    category: 'effects',\r\n    generics: [valueType],\r\n    toMotoko([value]) {\r\n        return value;\r\n    },\r\n});\r\nexport const memberType = createType('Member', {\r\n    info: 'Something defined within a container (actor, object, class, or module)',\r\n    parent: anyReversedType,\r\n    singleOutput: true,\r\n    category: 'members',\r\n});\r\nexport const containerType = createType('Container', {\r\n    info: 'An actor, object, class, or module',\r\n    parent: memberType,\r\n    singleOutput: true,\r\n    category: 'containers',\r\n});\r\nexport const moduleType = createType('Module', {\r\n    info: 'A group of related containers (actors, objects, classes, and/or modules)',\r\n    parent: memberType,\r\n    singleOutput: true,\r\n    category: 'modules',\r\n});\r\nexport const paramType = createType('Parameter', {\r\n    info: 'An input to a function, class, or actor',\r\n    parent: anyReversedType,\r\n    category: 'parameters',\r\n});\r\n\r\n// Value types\r\nexport const boolType = createType('Bool', {\r\n    info: 'A logical value representing \"true\" or \"false\"',\r\n    parent: valueType,\r\n    controlType: 'checkbox',\r\n    defaultValue: false,\r\n});\r\nexport const charType = createType('Char', {\r\n    info: 'A single character of text',\r\n    parent: valueType,\r\n    controlType: 'text',\r\n    validation: {\r\n        minLength: 1,\r\n        maxLength: 1,\r\n    },\r\n});\r\nexport const textType = createType('Text', {\r\n    info: 'A sequence of letters, numbers, emojis, and other characters',\r\n    parent: valueType,\r\n    controlType: 'text',\r\n    defaultValue: '',\r\n});\r\nexport const floatType = createType('Float', {\r\n    info: 'A decimal number (-0.1, 123, 1.0e5)',\r\n    parent: valueType,\r\n    controlType: 'text',\r\n    validation: {\r\n        custom: value => !isNaN(+value),\r\n    },\r\n    defaultValue: 0,\r\n});\r\nexport const intType = createType('Int', {\r\n    info: 'A numeric integer (..., -2, -1, 0, 1, 2, ...)',\r\n    parent: floatType,\r\n    category: 'integers',\r\n    controlType: 'number',\r\n    validation: {\r\n        step: 1,\r\n    },\r\n});\r\nexport const natType = createType('Nat', {\r\n    info: 'A natural number (0, 1, 2, ...)',\r\n    parent: floatType,\r\n    category: 'naturals',\r\n    controlType: 'number',\r\n    validation: {\r\n        step: 1,\r\n        min: 0,\r\n    },\r\n});\r\nexport const blobType = createType('Blob', {\r\n    info: 'Immutable binary data (similar to an HTML5 blob)',\r\n    parent: valueType,\r\n});\r\nexport const principalType = createType('Principal', {\r\n    info: 'A wallet or smart contract address',\r\n    parent: valueType,\r\n    category: 'principals',\r\n    validation: {\r\n        custom: value => isPrincipal(value),\r\n    },\r\n});\r\nexport const errorType = createType('Error', {\r\n    info: 'An error value for custom exception handling',\r\n    parent: valueType,\r\n});\r\nexport const tupleType = createType('Tuple', {\r\n    info: 'A combination of multiple values in a specific order',\r\n    abstract: true,\r\n    arbitraryGenerics: true,\r\n    parent: valueType,\r\n    category: 'tuples',\r\n    // controlType: ,\r\n    toTypeString() {\r\n        return this === tupleType ? this.name : `(${this.generics.map(t => t.toTypeString()).join(', ')})`;\r\n    },\r\n    toMotoko(values) {\r\n        return `(${values.join(', ')})`;\r\n    },\r\n});\r\n// export const unitType = createType('Unit', {\r\n//     parent: tupleType,\r\n// });\r\nexport const unitType = createType('Unit', tupleType.withMeta({\r\n    info: 'An empty tuple; the only possible value for the \"Unit\" type',\r\n}));\r\nif(tupleType === unitType) throw new Error(); // TODO: move to tests\r\nexport const objectType = createType('Object', {\r\n    info: 'An object which can include values, functions, types, or other members',\r\n    abstract: true,\r\n    arbitraryGenerics: true,\r\n    parent: valueType,\r\n    category: 'objects',\r\n    // controlType: ,\r\n    toTypeString() {\r\n        return `{${this.generics.map((t, i) => `${this.genericNames[i]}: ${t.toTypeString()}`).join(', ')}}`;\r\n    },\r\n    toMotoko(values) {\r\n        return `{${values.map((t, i) => `${this.genericNames[i]}: ${t}`).join(', ')}}`;\r\n    },\r\n});\r\nexport const functionType = createType('Function', {\r\n    info: 'A callable sequence of events which optionally returns a value',\r\n    parent: valueType,\r\n    generics: [valueType, valueType],\r\n    genericNames: ['input', 'output'],\r\n    category: 'functions',\r\n    toTypeString() {\r\n        return `(${this.generics[0].toTypeString()} -> ${this.generics[1].toTypeString()})`;\r\n    },\r\n    toMotoko([input, output]) {\r\n        return formatParentheses(`${input} -> ${output}`);\r\n    },\r\n});\r\nexport const optionalType = createType('Optional', {\r\n    info: 'A value which has the possibility of being null',\r\n    parent: valueType,\r\n    generics: [valueType],\r\n    category: 'optionals',\r\n    toMotoko([value]) {\r\n        return `?${value}`;\r\n    },\r\n});\r\nexport const nullType = createType('Null', {\r\n    info: 'An \"Optional\" value representing nothing',\r\n    parent: valueType,\r\n    alwaysSubtype: optionalType,\r\n});\r\nexport const collectionType = createType('Collection', {\r\n    info: 'A compound data structure such as an Array or Map',\r\n    abstract: true,\r\n    parent: valueType,\r\n    category: 'collections',\r\n});\r\nexport const arrayType = createType('Array', {\r\n    info: 'An ordered sequence of values with a specific type',\r\n    parent: collectionType,\r\n    generics: [valueType],\r\n    genericNames: ['item'],\r\n    toMotoko([item]) {\r\n        return `[${item}]`;\r\n    },\r\n});\r\nexport const mutableArrayType = createType('MutableArray', {\r\n    parent: arrayType,\r\n    generics: [valueType],\r\n    genericNames: ['item'],\r\n    toMotoko([item]) {\r\n        return `[var ${item}]`;\r\n    },\r\n});\r\nexport const mapType = createType('Map', {\r\n    info: 'A dictionary-style object for mapping keys to values',\r\n    parent: collectionType,\r\n    generics: [valueType, valueType],\r\n    genericNames: ['key', 'value'],\r\n    toMotoko([key, value]) {\r\n        return `HashMap.HashMap<${key}, ${value}>`; // TODO: import reference\r\n    },\r\n});\r\nexport const asyncType = createType('Async', {\r\n    info: 'An asynchronous value or process',\r\n    parent: valueType,\r\n    generics: [valueType],\r\n    category: 'futures',\r\n    toMotoko([value]) {\r\n        return `async ${value}`;\r\n    },\r\n});\r\nexport const unionType = createType('Union', {\r\n    info: 'Any of the specified types',\r\n    abstract: true,\r\n    parent: valueType,\r\n    arbitraryGenerics: true,\r\n    controlType: 'type',\r\n    isSpecialSubtype(other) {\r\n        return this.generics.some(t => t.isSubtype(other));\r\n    },\r\n    toMotoko(values) {\r\n        return formatParentheses(values.join(' or '));\r\n    },\r\n});\r\nexport const intersectionType = createType('Intersection', {\r\n    info: 'All of the specified types',\r\n    abstract: true,\r\n    parent: valueType,\r\n    arbitraryGenerics: true,\r\n    controlType: 'type',\r\n    isSpecialSubtype(other) {\r\n        console.log(other);////\r\n        return this.generics.all(t => t.isSubtype(other));\r\n    },\r\n    toMotoko(values) {\r\n        return formatParentheses(values.join(' and '));\r\n    },\r\n});\r\nexport const noneType = createType('None', {\r\n    info: 'A type with no possible value',\r\n    parent: valueType,\r\n});\r\n\r\n// // Fixed-size int values\r\nexport const int8Type = createType('Int8', {\r\n    parent: intType,\r\n    validation: getIntValidation(8),\r\n});\r\n\r\nexport const int16Type = createType('Int16', {\r\n    parent: intType,\r\n    validation: getIntValidation(16),\r\n});\r\nexport const int32Type = createType('Int32', {\r\n    parent: intType,\r\n    validation: getIntValidation(32),\r\n});\r\nexport const int64Type = createType('Int64', {\r\n    parent: intType,\r\n    validation: getIntValidation(64),\r\n});\r\n// Fixed-size nat values\r\nexport const nat8Type = createType('Nat8', {\r\n    parent: natType,\r\n    validation: getNatValidation(8),\r\n});\r\nexport const nat16Type = createType('Nat16', {\r\n    parent: natType,\r\n    validation: getNatValidation(16),\r\n});\r\nexport const nat32Type = createType('Nat32', {\r\n    parent: natType,\r\n    validation: getNatValidation(32),\r\n});\r\nexport const nat64Type = createType('Nat64', {\r\n    parent: natType,\r\n    validation: getNatValidation(64),\r\n});\r\n\r\nfunction getNatValidation(n) {\r\n    return {\r\n        ...natType.data.validation,\r\n        max: 2 ** n - 1,\r\n    };\r\n}\r\n\r\nfunction getIntValidation(n) {\r\n    let x = 2 ** (n - 1);\r\n    return {\r\n        ...intType.data.validation,\r\n        min: -x,\r\n        max: x - 1,\r\n    };\r\n}\r\n\r\n// Create a global type\r\nfunction createType(name, data) {\r\n    let type;\r\n    if(data instanceof Type) {\r\n        type = data;\r\n        type.name = name;\r\n    }\r\n    else {\r\n        let {parent} = data;\r\n        let {generics = [], meta = {}, ...other} = data;\r\n        type = buildType(name, parent, generics, other, meta);\r\n        type.data.baseType = type;///\r\n    }\r\n    TYPE_MAP.set(name, type);\r\n    return type;\r\n}\r\n\r\n// Get or create a generic version of the given type\r\nfunction getGenericType(parent, generics) {\r\n    if(typeof parent === 'string') {\r\n        // parent = getType(parent);\r\n        const parentName = parent;\r\n        parent = TYPE_MAP.get(parentName);\r\n        if(!parent) {\r\n            throw new Error(`Unknown type with name: ${parentName}`);\r\n        }\r\n    }\r\n\r\n    // TODO: refactor special cases\r\n    if(parent === tupleType && !generics.length) {\r\n        return unitType;\r\n    }\r\n    // if(parent === tupleType && generics.length === 1) {\r\n    //     return generics[0];\r\n    // }\r\n    if(parent === asyncType && generics.length && asyncType.isSubtype(generics[0])) {\r\n        return generics[0];\r\n    }\r\n\r\n    if((!generics || !generics.length || generics === parent.generics) && !parent.data.arbitraryGenerics) {\r\n        return getType(parent);\r\n    }\r\n    let type = buildType(parent.name, parent, generics);\r\n    if(!parent.isSubtype(type)) {\r\n        throw new Error(`Generics not assignable to ${parent.toTypeString()} from ${type.toTypeString()}`);\r\n    }\r\n    return type;\r\n}\r\n\r\n// Instantiate a new type\r\nfunction buildType(name, parent, generics, data = {}, meta = {}) {\r\n    // Special cases for data inheritance\r\n    let {\r\n        abstract,\r\n        arbitraryGenerics,\r\n        ...parentData\r\n    } = parent ? parent.data : {};\r\n    let parentMeta = parent ? parent.meta : {};\r\n    return new Type(\r\n        name,\r\n        parent || null,\r\n        generics || (parent ? parent.generics : []),\r\n        {...parentData, ...data},\r\n        {...parentMeta, ...meta},\r\n    );\r\n}\r\n\r\n// Get or create a type\r\nexport function getType(type, generics) {\r\n    if(arguments.length > 1) {\r\n        return getGenericType(type, generics);\r\n    }\r\n    if(type instanceof Type) {\r\n        return type;\r\n    }\r\n    if(typeof type === 'object') {\r\n        return getGenericType(type.name, (type.generics || []).map(t => getType(t)));\r\n    }\r\n    if(!type) {\r\n        throw new Error(`Invalid type: ${type}`);\r\n    }\r\n    console.warn('Creating type from value:', type);\r\n    if(!TYPE_MAP.has(type)) {\r\n        throw new Error(`Unknown type: ${typeof type === 'object' ? `object with keys: ${Object.keys(type)}` : type}`);\r\n    }\r\n    return TYPE_MAP.get(type);\r\n}\r\n\r\nexport function getSharedType(...types) {\r\n    let a = types[0];\r\n    for(let i = 1; i < types.length; i++) {\r\n        let b = types[i];\r\n        if(!a) {\r\n            a = b;\r\n        }\r\n        else if(b) {\r\n            a = a.getSharedType(b);\r\n        }\r\n    }\r\n    return a;\r\n}","import {\r\n    FaCode,\r\n    FaCommentAlt,\r\n    FaCubes,\r\n    FaDatabase,\r\n    FaEject,\r\n    FaFilter,\r\n    FaFont,\r\n    FaLongArrowAltRight,\r\n    FaNetworkWired,\r\n    FaPlusCircle,\r\n    FaStream,\r\n    FaTextHeight,\r\n    FaTh,\r\n} from 'react-icons/fa';\r\n\r\nclass Category {\r\n    constructor(name, parent, data = {}) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.root = parent ? parent.root : this;\r\n        this.data = data;\r\n    }\r\n}\r\n\r\nconst CATEGORY_MAP = new Map();\r\n\r\nfunction createCategory(data) {\r\n    let {name, parent, ...other} = data;\r\n    let category = new Category(name, parent, parent ? {...parent.data, ...other} : other);\r\n    CATEGORY_MAP.set(category.name, category);\r\n    return category;\r\n}\r\n\r\nexport function getCategory(name) {\r\n    if(name instanceof Category) {\r\n        return name;\r\n    }\r\n    if(!CATEGORY_MAP.has(name)) {\r\n        throw new Error(`Could not find category with name: ${name}`);\r\n    }\r\n    return CATEGORY_MAP.get(name);\r\n}\r\n\r\n\r\nexport const defaultCategory = createCategory('Default', {});\r\nexport const stateCategory = createCategory({\r\n    name: 'State',\r\n    color: '#3fd',\r\n    icon: FaDatabase,\r\n    priority: 10,\r\n});\r\nexport const functionCategory = createCategory({\r\n    name: 'Function',\r\n    color: '#fd3',\r\n    icon: FaCubes,\r\n    priority: 20,\r\n});\r\nexport const paramCategory = createCategory({\r\n    name: 'Param',\r\n    color: '#a8f',\r\n    icon: FaLongArrowAltRight,\r\n    priority: 3,\r\n});\r\nexport const typeCategory = createCategory({\r\n    name: 'Type',\r\n    color: '#2af',\r\n    icon: FaTextHeight,\r\n});\r\nexport const collectionCategory = createCategory({\r\n    name: 'Collection',\r\n    color: '#1c5',\r\n    icon: FaTh,\r\n});\r\nexport const compilerCategory = createCategory({\r\n    name: 'Compiler',\r\n    color: '#f5a',\r\n    icon: FaCode,\r\n});\r\nexport const expressionCategory = createCategory({\r\n    name: 'Expression',\r\n    color: '#aaa',\r\n    icon: FaEject,\r\n});\r\nexport const operatorCategory = createCategory({\r\n    name: 'Operator',\r\n    // color: '#57f',\r\n    icon: FaFilter,\r\n});\r\nexport const actorCategory = createCategory({\r\n    name: 'Actor',\r\n    color: '#fa8',\r\n    icon: FaFont,\r\n});\r\nexport const effectCategory = createCategory({\r\n    name: 'Effect',\r\n    // color: '#57f',\r\n    icon: FaStream,\r\n    priority: 5,\r\n});\r\nexport const literalCategory = createCategory({\r\n    name: 'Literal',\r\n    // color: '#8fa',\r\n    icon: FaPlusCircle,\r\n    priority: 6,\r\n});\r\nexport const decompositionCategory = createCategory({\r\n    name: 'Decomposition',\r\n    // color: '#ccc',\r\n    icon: FaNetworkWired,\r\n});\r\nexport const commentCategory = createCategory({\r\n    name: 'Comment',\r\n    // color: '#ccc',\r\n    icon: FaCommentAlt,\r\n    priority: -1,\r\n});\r\n","export function formatString(string) {\r\n    if(Array.isArray(string)) {\r\n        string = string.map(formatString).filter(s => s).join(' ');\r\n    }\r\n    return string === '' || string === null || string === undefined ? '' : string;\r\n}\r\n\r\nexport function formatParentheses(string) {\r\n    string = formatString(string);\r\n    // Remove trivial double parentheses\r\n    if(string.startsWith('(') && string.endsWith(')')) {\r\n        const s = string.substring(1, string.length - 1);\r\n        if(!s.includes('(') && !s.includes(')')) {\r\n            string = s;\r\n        }\r\n    }\r\n    return `(${string})`;\r\n}\r\n\r\nexport function formatOptionalParentheses(string) {\r\n    string = formatString(string);\r\n    if(string.includes(' ')) {\r\n        string = formatParentheses(string);\r\n    }\r\n    return string;\r\n}\r\n\r\nexport function formatCurlyBraces(string) {\r\n    string = formatString(string);\r\n    return `{\\n${string}\\n}`;\r\n}\r\n\r\nexport function formatStatementBlock(string) {\r\n    string = formatString(string);\r\n    return `${formatCurlyBraces(string)};`;\r\n}\r\n\r\nexport function formatMembers(members) {\r\n    if(!members) {\r\n        return '';\r\n    }\r\n    return `${members.join('\\n\\n')}`;\r\n}\r\n\r\nexport function formatStatement(statement, after) {\r\n    statement = formatString(statement);\r\n    if(!statement) {\r\n        return after;\r\n    }\r\n    if(!statement.endsWith(';')) {\r\n        statement = `${statement};`;\r\n    }\r\n    return after ? `${statement}\\n${after}` : statement;\r\n}\r\n","export const FOR_DEBUGGING = 'debugging';\r\nexport const FOR_LEARNING_MOTOKO = 'learning Motoko';\r\nexport const FOR_ASSIGNING_ID = 'assigning unique IDs';\r\nexport const FOR_BUILDING_API = 'building an API';\r\nexport const FOR_STORING_DATA = 'storing data';\r\nexport const FOR_TRANSACTIONS = 'transaction logic';\r\nexport const FOR_REUSABLE_LOGIC = 'writing reusable logic';\r\nexport const FOR_ORGANIZATION = 'project organization';\r\nexport const FOR_DOCUMENTATION = 'documentation';\r\nexport const FOR_CONFIGURATION = 'configuration';\r\nexport const FOR_CUSTOM_LOGIC = 'custom logic';\r\nexport const FOR_ERROR_HANDLING = 'error handling';","import React from 'react';\r\nimport EventEmitter from 'events';\r\n\r\nexport const EDITOR_CHANGE_EVENT = 'editor-change';\r\nexport const EDITOR_SAVE_EVENT = 'editor-save';\r\nexport const PROJECT_EXPORT_EVENT = 'project-export';\r\nexport const PROJECT_LOAD_EVENT = 'project-load';\r\nexport const PROJECT_CLEAR_EVENT = 'project-clear';\r\nexport const ERROR_EVENT = 'error';\r\n\r\nconst events = new EventEmitter();\r\nevents.setMaxListeners(1000);\r\nevents.on(ERROR_EVENT, console.error);\r\n\r\n// Browser debug\r\nwindow.EVENTS = events;\r\n\r\nexport default React.createContext(events);\r\n","import {effectType, getSharedType, unitType} from '../block-types/types';\r\nimport {effectCategory} from '../block-categories/categories';\r\nimport {formatStatement} from '../editor/format/formatHelpers';\r\n\r\nconst defaultType = effectType.of(unitType);\r\n\r\nexport function statementBlock(block, compileFn, typeFn) {\r\n    const beforeProp = {\r\n        key: 'before',\r\n        type: effectType,\r\n        inferType(props, node, compiler) {\r\n            // return after || defaultType;\r\n\r\n            let block = compiler.getBlock(node);\r\n            return getSharedType(...(typeFn ? [effectType.of(typeFn(props, node, compiler))] : []), ...block.inputs\r\n                .filter(prop => effectType.isSubtype(prop.type))\r\n                .map(prop => compiler.getInput(node, prop.key))) || defaultType;\r\n        },\r\n        toMotoko(props, node, compiler) {\r\n            let result = compileFn(props, node, compiler);\r\n            if(result === undefined) {\r\n                return;\r\n            }\r\n            let {after} = props;\r\n            return formatStatement(result, after);//`${result}${after ? ' ' + after : ''}`;\r\n        },\r\n    };\r\n    // for(let [key, fn] of Object.entries(compileObject)) {\r\n    //     beforeProp[key] = typeof fn === 'function' ? function(props, ...args) {\r\n    //         let result = fn(props, ...args);\r\n    //         if(result === undefined) {\r\n    //             return;\r\n    //         }\r\n    //         let {after} = props;\r\n    //         return `${result}${after ? ' ' + after : ''}`;\r\n    //     } : fn;\r\n    // }\r\n\r\n    return {\r\n        category: effectCategory,\r\n        topLeft: 'before',\r\n        topRight: 'after',\r\n        ...block,\r\n        inputs: [\r\n            ...block.inputs || [], {\r\n                key: 'after',\r\n                type: effectType,\r\n                optional: true,\r\n                // multi: true,\r\n            },\r\n        ],\r\n        outputs: [\r\n            ...block.outputs || [],\r\n            beforeProp,\r\n        ],\r\n    };\r\n}\r\n\r\nexport function endStatementBlock(block, statementProp) {\r\n    return {\r\n        category: effectCategory,\r\n        topLeft: 'statement',\r\n        ...block,\r\n        outputs: [...block.outputs || [], {\r\n            key: 'statement',\r\n            type: effectType,\r\n            ...statementProp,\r\n        }],\r\n    };\r\n}\r\n","function onEvents(eventKeys, listenerFn) {\r\n    let currentKey;\r\n    let timeout;\r\n    const result = {};\r\n    eventKeys.forEach(key => {\r\n        result[key] = (event) => {\r\n            // Prevent firing multiple times under different event names\r\n            if(currentKey && currentKey !== key) {\r\n                return;\r\n            }\r\n            currentKey = key;\r\n            if(timeout === undefined) {\r\n                timeout = setTimeout(() => {\r\n                    clearTimeout(timeout);\r\n                    timeout = undefined;\r\n                    currentKey = undefined;\r\n                });\r\n            }\r\n            return listenerFn(event);\r\n        };\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function onAnyClick(listenerFn) {\r\n    return {\r\n        onClick: listenerFn,\r\n    };\r\n}\r\n\r\nexport function onLeftClick(listenerFn) {\r\n    return onAnyClick(event => {\r\n        if(event.button === undefined || event.button === 0) {\r\n            return listenerFn(event);\r\n        }\r\n    });\r\n}\r\n\r\nexport function onAnyPress(listenerFn) {\r\n    return onEvents(['onMouseDown', 'onTouchStart'], listenerFn);\r\n}\r\n\r\nexport function onAnyRelease(listenerFn) {\r\n    return onEvents(['onMouseUp', 'onTouchEnd'], listenerFn);\r\n}\r\n\r\nexport function onLeftPress(listenerFn) {\r\n    return onAnyPress(event => {\r\n        if(event.button === undefined || event.button === 0) {\r\n            return listenerFn(event);\r\n        }\r\n    });\r\n}","export default function nodeIdentifierRef(node, key) {\r\n    // TODO: ensure `id` is a valid identifier\r\n    const type = node.component?.name || 'node';\r\n    const id = typeof node === 'number' || typeof node === 'string' ? String(node) : node.id;\r\n    return `${type}__${id}${key ? '_' + key : ''}`;\r\n}\r\n","import {useEffect} from 'react';\r\n\r\nexport default function useListener(target, event, listener, options) {\r\n    useEffect(() => {\r\n        if(!target) {\r\n            return;\r\n        }\r\n        const domTarget = 'addEventListener' in target;\r\n        if(domTarget) {\r\n            target.addEventListener(event, listener, options);\r\n        }\r\n        else {\r\n            target.on(event, listener, options);\r\n        }\r\n        return () => {\r\n            if(domTarget) {\r\n                target.removeEventListener(event, listener);\r\n            }\r\n            else {\r\n                target.off(event, listener);\r\n            }\r\n        };\r\n    }, [target, event, listener, options]);\r\n    return listener;\r\n}","import {boolType, floatType, getType} from '../block-types/types';\r\nimport {operatorCategory} from '../block-categories/categories';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nexport function unaryOperatorBlock(type, symbol, evaluate) {\r\n    type = getType(type);\r\n    return {\r\n        topRight: 'result',\r\n        title: `(${symbol} a)`,\r\n        category: operatorCategory,\r\n        inputs: [{\r\n            key: 'input',\r\n            title: 'a',\r\n            type,\r\n        }],\r\n        outputs: [{\r\n            key: 'result',\r\n            type,\r\n            toMotoko({input}) {\r\n                return `${symbol}(${input})`;\r\n            },\r\n            // inferType({input}) {\r\n            //     return input;\r\n            // },\r\n        }],\r\n    };\r\n}\r\n\r\nexport function binaryOperatorBlock(type, symbol, evaluate) {\r\n    let [inputType, resultType] = Array.isArray(type) ? type : [type, type];\r\n\r\n    inputType = getType(inputType);\r\n    resultType = getType(resultType);\r\n\r\n    return {\r\n        title: `(a ${symbol} b)`,\r\n        info: `Perform the '${symbol}' operation between two ${type.name} values`,\r\n        category: operatorCategory,\r\n        topRight: 'result',\r\n        inputs: [{\r\n            key: 'left',\r\n            title: 'a',\r\n            type: inputType,\r\n        }, {\r\n            key: 'right',\r\n            title: 'b',\r\n            type: inputType,\r\n        }],\r\n        outputs: [{\r\n            key: 'result',\r\n            type: resultType,\r\n            toMotoko({left, right}) {\r\n                return formatParentheses(`${left} ${symbol} ${right}`);\r\n            },\r\n            // inferType({left, right}) {\r\n            //     return left.getSharedType(right);\r\n            // },\r\n        }],\r\n    };\r\n}\r\n\r\nexport function logicalBinaryOperatorBlock(...args) {\r\n    return binaryOperatorBlock(boolType, ...args);\r\n}\r\n\r\nexport function arithmeticOperatorBlock(...args) {\r\n    return binaryOperatorBlock(floatType, ...args);\r\n}\r\n\r\nexport function numberComparisonOperatorBlock(...args) {\r\n    return binaryOperatorBlock([floatType, boolType], ...args);\r\n}","import {boolType, effectType, identifierType, unitType, valueType} from '../block-types/types';\r\nimport {getUserDefinedName, memberBlock} from '../block-patterns/member-patterns';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {FaAngleDoubleRight, FaAngleRight} from 'react-icons/fa';\r\nimport {FOR_BUILDING_API, FOR_STORING_DATA} from '../editor/useCases';\r\nimport {formatStatement} from '../editor/format/formatHelpers';\r\nimport {STATE_PRIORITY} from '../compilers/utils/compileGlobalMotoko';\r\n\r\nexport const stateReadIcon = FaAngleRight;\r\nexport const stateWriteIcon = FaAngleDoubleRight;\r\n\r\nconst block = memberBlock({\r\n    info: 'A persistent smart contract variable',\r\n    useCases: [FOR_BUILDING_API, FOR_STORING_DATA],\r\n    // topRight: 'value',\r\n    topRight: 'setup',\r\n    category: stateCategory,\r\n    global: true,\r\n    memberPriority: STATE_PRIORITY,\r\n    computeTitle(node, editor) {\r\n        let name = getUserDefinedName(node, editor);\r\n        let type = editor.compilers.type.getInput(node, 'initialValue') || unitType;\r\n        return name && `${name} : ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'StateRead',\r\n        nodeKey: 'stateNode',\r\n    }, {\r\n        block: 'StateUpdate',\r\n        nodeKey: 'stateNode',\r\n    }],\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'initialValue',\r\n        type: valueType,\r\n        optional: true,\r\n        request: true,\r\n    }, {\r\n        key: 'setup',\r\n        type: effectType.of(unitType),\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n        inferType({initialValue}) {\r\n            return initialValue;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'stable',\r\n        info: 'Preserve the state over canister upgrades: see the Motoko docs to learn more',\r\n        type: boolType,\r\n        advanced: true,\r\n    }, {\r\n        key: 'readonly',\r\n        info: 'Readonly states cannot be reassigned, but value mutations are still possible',\r\n        type: boolType,\r\n        advanced: true,\r\n    }],\r\n}, {\r\n    toMotoko({stable, readonly, name, initialValue, setup}, node, compiler) {\r\n        let modifiers = [!!stable && 'stable'].filter(m => m).join(' ');\r\n        let type = compiler.editor.compilers.type.getInput(node, 'initialValue');\r\n\r\n        initialValue = initialValue || '()';\r\n\r\n        let statement = `${modifiers && modifiers + ' '}${readonly ? 'let' : 'var'} ${name}${type ? ` : ${compiler.getTypeString(type)}` : ''} = ${initialValue};`;\r\n        if(setup) {\r\n            statement = formatStatement(statement, setup);\r\n        }\r\n        return statement;\r\n    },\r\n});\r\nexport default block;\r\n","import Compiler from './Compiler';\r\nimport {getType, identifierType, typeType} from '../block-types/types';\r\nimport nodeIdentifierRef from './utils/nodeIdentifierRef';\r\nimport {formatString} from '../editor/format/formatHelpers';\r\n\r\nexport function importRef(name) {\r\n    return `$import$\"${name}\"`;\r\n}\r\n\r\nexport function resolveImportRefs(code) {\r\n    if(!code) {\r\n        return [[], ''];\r\n    }\r\n    code = String(code);\r\n\r\n    const imports = {};\r\n    code = code.replace(/\\$import\\$\"([^\"]*)\"/g, (match, path) => {\r\n        const id = path.includes('/') ? path.substring(path.lastIndexOf('/') + 1) : path;\r\n        if(imports.hasOwnProperty(id) && imports[id] !== path) {\r\n            throw new Error(`Conflicting import paths: \"${path}\" != \"${imports[id]}\"`);\r\n        }\r\n        imports[id] = path;\r\n        return id;\r\n    });\r\n    let prefixes = Object.entries(imports)\r\n        .sort(([a], [b]) => a.localeCompare(b)) // Sort by identifier\r\n        .map(([id, path]) => `import ${id} \"${path}\";`);\r\n    return [prefixes, code];\r\n}\r\n\r\nexport default class MotokoCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toMotoko');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n        // TODO: refactor these special cases\r\n\r\n        if(identifierType.isSubtype(prop.type)) {\r\n            // console.log(node.name)///\r\n            return nodeIdentifierRef(node, prop.key);\r\n        }\r\n\r\n        if(typeType.isSubtype(prop.type)) {\r\n            let type = prop.type.generics[0];\r\n            if(type && !type.isAbstract()) {\r\n                return this.getTypeString(type);\r\n            }\r\n        }\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        if(typeof result === 'string' || typeof result === 'number' || typeof result === 'boolean' || result === null || result === undefined) {\r\n            return result;\r\n        }\r\n        if(Array.isArray(result)) {\r\n            // return result.map(r => this.postCompile(r, node, key)).filter(s => s).join(' ');\r\n            result = formatString(result, node, key);\r\n            return result; //???\r\n        }\r\n\r\n        // Type object\r\n        if(result.name && result.generics) {\r\n            return this.getTypeString(getType(result));\r\n        }\r\n\r\n        console.warn('Unexpected Motoko expression:', result);\r\n        return String(result);\r\n    }\r\n}","// Lightweight observable value implementation\r\n// Derived from: https://stackoverflow.com/a/62002044\r\n\r\nclass ObservableValue {\r\n    constructor(value) {\r\n        this._value = value;\r\n        this._listeners = [];\r\n    }\r\n\r\n    get() {\r\n        return this._value;\r\n    }\r\n\r\n    set(newValue) {\r\n        if(this._value === newValue) {\r\n            return;\r\n        }\r\n        const previous = this._value;\r\n        this._value = newValue;\r\n        this._listeners.forEach(fn => fn(this._value, previous));\r\n    }\r\n\r\n    callAndSubscribe(listenerFn) {\r\n        listenerFn(this._value);\r\n        this.subscribe(listenerFn);\r\n    }\r\n\r\n    subscribe(listenerFn) {\r\n        this._listeners.push(listenerFn);\r\n        return () => this.unsubscribe(listenerFn);\r\n    }\r\n\r\n    unsubscribe(listenerFn) {\r\n        this._listeners = this._listeners.filter(fn => fn !== listenerFn);\r\n    }\r\n}\r\n\r\nexport default function makeObservable(value) {\r\n    return new ObservableValue(value);\r\n}","import ReactTooltip from 'react-tooltip';\r\n\r\nlet timeout;\r\n\r\n// Rebuild react-tooltip\r\nexport default function useReactTooltip() {\r\n    if(timeout === undefined) {\r\n        timeout = setTimeout(() => {\r\n            timeout = undefined;\r\n            ReactTooltip.rebuild();\r\n        });\r\n    }\r\n    return ReactTooltip;\r\n}\r\n","import {memberType} from '../block-types/types';\r\nimport {stringSelectProp} from './control-patterns';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\n\r\n\r\nexport function getUserDefinedName(node, editor) {\r\n    const name = editor.compilers.motoko.getInput(node, 'name');\r\n    if(name && name !== nodeIdentifierRef(node, 'name') /* Default identifier */) {\r\n        return name;\r\n    }\r\n}\r\n\r\nexport function visibilityControlProp() {\r\n    return stringSelectProp({\r\n        key: 'visibility',\r\n        info: 'Whether this function is callable from outside of its actor, class, object, or module',\r\n        advanced: true,\r\n        // optional: true,\r\n    }, ['public', 'private', 'system']);\r\n}\r\n\r\nexport function memberBlock(block, memberProp) {\r\n    return {\r\n        topLeft: 'member',\r\n        ...block,\r\n        // inputs: [\r\n        //     {\r\n        //         key: 'name',\r\n        //         type: identifierType,\r\n        //     },\r\n        //     ...block.inputs || [],\r\n        // ],\r\n        outputs: [\r\n            {\r\n                key: 'member',\r\n                type: memberType,\r\n                ...memberProp,\r\n            },\r\n            ...block.outputs || [],\r\n        ],\r\n    };\r\n}","import isEmbeddedMode from '../../utils/isEmbeddedMode';\r\nimport useObservableState from './useObservableState';\r\nimport makeObservable from '../../utils/makeObservable';\r\nimport {useCallback} from 'react';\r\n\r\n// Derived from: https://usehooks.com/useLocalStorage/\r\n\r\nconst storage = isEmbeddedMode() ? {} : window.localStorage;\r\n\r\nconst observableMap = new Map();\r\n\r\nexport function makeLocalStorageObservable(key, defaultValue) {\r\n    if(observableMap.has(key)) {\r\n        // throw new Error(`Local storage observable already exists for key: ${key}`);\r\n        return observableMap.get(key);\r\n    }\r\n    let observable;\r\n    try {\r\n        const item = storage[key];\r\n        observable = makeObservable(item ? JSON.parse(item) : defaultValue);\r\n    }\r\n    catch(error) {\r\n        console.error(error);\r\n        observable = makeObservable(defaultValue);\r\n    }\r\n    observableMap.set(key, observable);\r\n    observable.subscribe(value => {\r\n        if(value !== undefined) {\r\n            storage[key] = JSON.stringify(value);\r\n        }\r\n        else {\r\n            delete storage[key];\r\n        }\r\n    });\r\n    return observable;\r\n}\r\n\r\nexport default function useLocalStorage(key, defaultValue) {\r\n\r\n    // Find or create global observable value for key\r\n    const observable = observableMap.get(key) || makeLocalStorageObservable(key, defaultValue);\r\n\r\n    const [storedValue, setStoredValue] = useObservableState(observable);\r\n\r\n    const setValue = useCallback(value => {\r\n        try {\r\n            const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n            setStoredValue(valueToStore);\r\n        }\r\n        catch(error) {\r\n            console.error(error);\r\n        }\r\n    }, [storedValue, setStoredValue]);\r\n\r\n    return [\r\n        storedValue,\r\n        setValue,\r\n        // observable,\r\n    ];\r\n}","import {useCallback, useContext, useState} from 'react';\r\nimport useListener from './utils/useListener';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../contexts/EventsContext';\r\n\r\nexport default function useControlValue(control) {\r\n    const value = control.getValue();\r\n    const [, updateVisualValue] = useState(value); // updateVisualValue(..): redraw component if value changed\r\n\r\n    const events = useContext(EventsContext);\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => {\r\n        updateVisualValue(control.getValue());\r\n    });\r\n\r\n    useListener(control.events, 'update', () => {\r\n        events.emit(EDITOR_CHANGE_EVENT, control.editor, control);\r\n    });\r\n\r\n    const setValue = useCallback(value => control.setValue(value), [control]);\r\n\r\n    return [value, setValue];\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\nimport CodeEditor from '../../monaco/CodeEditor';\r\n\r\n\r\nexport default function CodeControlHandle({control, bindInput}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    return (\r\n        <div ref={bindInput} style={{height: 150}}>\r\n            <CodeEditor value={value} onChange={setValue}/>\r\n        </div>\r\n    );\r\n}\r\n","import CodeControlHandle from '../components/rete/controls/CodeControlHandle';\r\nimport {anyType} from '../block-types/types';\r\n\r\nlet replaceRegex = /{([0-9]+)}/g;\r\n\r\nexport function expressionControl() {\r\n    return {\r\n        key: 'expression',\r\n        config: {\r\n            controlType: CodeControlHandle,\r\n        },\r\n    };\r\n}\r\n\r\nexport function expressionArgsInput(type) {\r\n    return {\r\n        key: 'inputs',\r\n        info: 'Reference inputs as {0}, {1}, {2}, ...',\r\n        type: type || anyType,\r\n        multi: true, // TODO: separate arg sockets\r\n    };\r\n}\r\n\r\nexport function parseCodeBlockInputs(inputs, expression) {\r\n    return (expression || '').replace(replaceRegex, (match, i) => {\r\n        i = +i;\r\n        return i >= 0 && i < inputs.length ? inputs[i] : match;\r\n    });\r\n}\r\n","import {resolveImportRefs} from '../MotokoCompiler';\r\nimport prettyPrintMotoko from '../../editor/format/prettyPrintMotoko';\r\nimport {formatParentheses} from '../../editor/format/formatHelpers';\r\nimport {pascalCase} from 'change-case';\r\nimport {compileGlobalParameter} from '../../blocks/MainParameter';\r\nimport {getBlock} from '../../editor/blocks';\r\nimport {memberType} from '../../block-types/types';\r\n\r\n// Priority for ordering members\r\nexport const TYPE_PRIORITY = 3;\r\nexport const FUNCTION_PRIORITY = 2;\r\nexport const STATE_PRIORITY = 1;\r\n\r\nconst defaultActorName = 'Main';\r\nconst installerBlockName = 'MainInstaller';\r\nconst mainParameterBlockName = 'MainParameter';\r\n\r\nexport function mainSharedRef(editor) {\r\n    return 'main__install';\r\n}\r\n\r\nexport function mainInstanceRef(editor) {\r\n    return 'main__this';\r\n}\r\n\r\nexport default function compileGlobalMotoko(editor) {\r\n\r\n    const actorName = pascalCase(editor.details.name) || defaultActorName;\r\n\r\n    const memberNodes = editor.nodes\r\n        .filter(node => {\r\n            const io = node.inputs.get('member');\r\n            if(!io || io.connections.length) {\r\n                return false;\r\n            }\r\n            const type = /* reversed */ io.socket.findType?.();\r\n            return type && memberType.isSubtype(type);\r\n        })\r\n        .map(node => [node, getBlock(node.name)])\r\n        .sort(([a, aBlock], [b, bBlock]) => (bBlock.memberPriority - aBlock.memberPriority) || (a.position[0] - b.position[0]) || (a.position[1] - b.position[1]) || 0)\r\n        .map(([node]) => node);\r\n\r\n    const installerNodes = editor.nodes.filter(node => node.name === installerBlockName);\r\n    const paramNodes = editor.nodes.filter(node => node.name === mainParameterBlockName);\r\n\r\n    const installerPart = installerNodes.length && `shared${formatParentheses(mainSharedRef(editor))}`;\r\n\r\n    const thisPart = '';//`= ${mainInstanceRef(editor)}`\r\n    const classPart = (installerPart || thisPart || paramNodes.length) && `${formatParentheses(paramNodes.map(node => {\r\n        return compileGlobalParameter(node, editor.compilers.motoko);\r\n    }).join(', '))}`;\r\n\r\n    const actorPart = `${installerPart ? `${installerPart} ` : ''}actor ${classPart ? `class ${actorName}${classPart}` : actorName}${thisPart ? ` ${thisPart}` : ''}`;\r\n\r\n    const [prefixes, actorCode] = resolveImportRefs(`${actorPart} {${memberNodes.map(node => {\r\n        const result = editor.compilers.motoko.getOutput(node, 'member');\r\n        return result ? `\\n  ${result}` : '';\r\n    }).join('\\n')}\\n}`);\r\n\r\n    // console.log(prettyPrintMotoko(`${prefixes.length ? prefixes.join('\\n') + '\\n\\n' : ''}${actorCode}`))///\r\n    // throw new Error()\r\n\r\n    return prettyPrintMotoko(`${prefixes.length ? prefixes.join('\\n') + '\\n\\n' : ''}${actorCode}`);\r\n}\r\n","import {useCallback, useEffect, useState} from 'react';\r\n\r\nexport default function useObservableState(observable) {\r\n    const [value, setValueState] = useState(observable.get());\r\n\r\n    // // Subscribe immediately\r\n    // const unsubscribe = useMemo(() => observable.subscribe(setValueState), [observable]);\r\n    //\r\n    // // Unsubscribe on cleanup\r\n    // useEffect(() => unsubscribe, [unsubscribe]);\r\n\r\n    useEffect(() => observable.subscribe(setValueState), [observable]);\r\n\r\n    const setValue = useCallback(value => observable.set(value), [observable]);\r\n\r\n    return [value, setValue];\r\n}\r\n","import {basename} from 'path';\r\nimport {getType} from '../block-types/types';\r\nimport {defaultCategory, getCategory} from '../block-categories/categories';\r\nimport {advancedProp} from '../block-patterns/control-patterns';\r\n\r\n// Temp: `/utils/jest/requireContextTransform`\r\n// noinspection JSUnresolvedVariable\r\nif(typeof require.context === 'undefined') {\r\n    const fs = require('fs');\r\n    const path = require('path');\r\n\r\n    // noinspection JSUndefinedPropertyAssignment\r\n    require.context = (base = '.', scanSubDirectories = false, regularExpression = /\\.js$/) => {\r\n        const files = {};\r\n\r\n        const readDirectory = (directory) => {\r\n            fs.readdirSync(directory).forEach((file) => {\r\n                const fullPath = path.resolve(directory, file);\r\n                if(fs.statSync(fullPath).isDirectory()) {\r\n                    if(scanSubDirectories) {\r\n                        readDirectory(fullPath);\r\n                    }\r\n                }\r\n                else if(regularExpression.test(fullPath)) {\r\n                    files[fullPath] = true;\r\n                }\r\n            });\r\n        };\r\n\r\n        const Module = (file) => {\r\n            return require(file);\r\n        };\r\n        Module.keys = () => Object.keys(files);\r\n\r\n        readDirectory(path.resolve(__dirname, base));\r\n        return Module;\r\n    };\r\n}\r\n\r\nconst allBlocks = [];\r\nconst blockNames = new Set();\r\n\r\n// noinspection JSUnresolvedFunction\r\nconst blockContext = require.context('../blocks', true, /\\.js$/);\r\nblockContext.keys().forEach(path => {\r\n    let name = basename(path, '.js');\r\n    let block = blockContext(path).default;\r\n    block = {...block}; // HMR fix\r\n    if(block) {\r\n        block.name = name;\r\n        if(blockNames.has(name)) {\r\n            console.error(`Duplicate block name: ${name}`);\r\n            return;\r\n        }\r\n        if(!block.info) {\r\n            console.warn('Missing info for block:', block.name);\r\n        }\r\n        block.category = block.category ? getCategory(block.category) : defaultCategory;\r\n        block.props = block.props || {};\r\n        for(let [key, prop] of Object.entries(block.props)) {\r\n            if(prop.key && prop.key !== key) {\r\n                throw new Error(`Prop key mismatch: ${key} != ${prop.key}`);\r\n            }\r\n            prop.key = key;\r\n        }\r\n\r\n        // `outputs` prioritized over `inputs`\r\n        addProps(block, block.outputs, 'output');\r\n        addProps(block, block.inputs, 'input');\r\n        addProps(block, block.controls, 'control');\r\n\r\n        // TODO: refactor to a distant land\r\n        if(!('editor:advanced' in block.props) && Object.values(block.props).find(prop => prop.advanced)) {\r\n            addProp(block, advancedProp(), 'control');\r\n        }\r\n\r\n        // Rearrange block inputs/outputs/controls\r\n        block.inputs = [];\r\n        block.outputs = [];\r\n        block.controls = [];\r\n\r\n        for(let [key, prop] of Object.entries(block.props)) {\r\n            prop.key = key;\r\n            // `output` prioritized over `input`\r\n            if(prop.output) {\r\n                if(!block.outputs.includes(prop)) {\r\n                    block.outputs.push(prop);\r\n                }\r\n            }\r\n            else if(prop.input) {\r\n                if(!block.inputs.includes(prop)) {\r\n                    block.inputs.push(prop);\r\n                }\r\n            }\r\n            else if(prop.control) {\r\n                if(!block.controls.includes(prop)) {\r\n                    block.controls.push(prop);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Type deserialization\r\n        for(let prop of Object.values(block.props)) {\r\n            if(!prop.type && (prop.input || prop.output) && prop.control) {\r\n                throw new Error(`Type not found for ${block.name}.${prop.key}`);\r\n            }\r\n            if(prop.type) {\r\n                try {\r\n                    prop.type = getType(prop.type);\r\n                }\r\n                catch(err) {\r\n                    console.error(`Error while getting type for ${block.name}.${prop.key}`);\r\n                    throw err;\r\n                }\r\n            }\r\n        }\r\n\r\n        blockNames.add(block.name);\r\n        allBlocks.push(block);\r\n    }\r\n});\r\n\r\nfunction addProps(block, propList, type) {\r\n    if(propList) {\r\n        for(let prop of propList) {\r\n            if(prop.key && block.props[prop.key] === prop) {\r\n                continue;\r\n            }\r\n            if(block.props.hasOwnProperty(prop.key)) {\r\n                throw new Error(`Duplicate prop in ${block.name}: ${prop.key}`);\r\n            }\r\n            prop[type] = prop[type] || true;\r\n            block.props[prop.key] = prop;\r\n        }\r\n    }\r\n}\r\n\r\nfunction addProp(block, prop, type) {\r\n    if(prop.key && block.props[prop.key] === prop) {\r\n        return;\r\n    }\r\n    if(block.props.hasOwnProperty(prop.key)) {\r\n        throw new Error(`Duplicate prop in ${block.name}: ${prop.key}`);\r\n    }\r\n    prop[type] = prop[type] || true;\r\n    block.props[prop.key] = prop;\r\n}\r\n\r\n\r\nexport const BLOCK_MAP = new Map(allBlocks.map(block => [block.name, block]));\r\n\r\nwindow.BLOCK_MAP = BLOCK_MAP; // Browser debugging\r\n\r\n// Post-initialization\r\nfor(let block of BLOCK_MAP.values()) {\r\n    if(block.shortcuts) {\r\n        block.shortcuts.forEach(s => {\r\n            if(!s.block) {\r\n                throw new Error(`Shortcut in ${block.name} requires a \\`block\\` attribute`);\r\n            }\r\n            s.block = getBlock(s.block);\r\n        });\r\n    }\r\n    else {\r\n        block.shortcuts = [];\r\n    }\r\n}\r\n\r\nexport function getBlock(name) {\r\n    if(!name) {\r\n        throw new Error(`Block cannot be ${name}`);\r\n    }\r\n    if(typeof name === 'string') {\r\n        if(!BLOCK_MAP.has(name)) {\r\n            throw new Error(`Block does not exist: ${name}`);\r\n        }\r\n        return BLOCK_MAP.get(name);\r\n    }\r\n    return name;\r\n}","// Derived from: https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t\r\n\r\nimport getQueryConfig from './getQueryConfig';\r\n\r\nlet embedded = true;\r\ntry {\r\n    embedded = window.self !== window.top || getQueryConfig('embed');\r\n}\r\ncatch(e) {\r\n}\r\n\r\nexport default function isEmbeddedMode() {\r\n    return embedded;\r\n}\r\n","import {literalCategory} from '../block-categories/categories';\r\n\r\nexport function literalBlock(block, type, stringifier) {\r\n    return {\r\n        info: type.data.info,\r\n        category: literalCategory,\r\n        topRight: 'value',\r\n        ...block,\r\n        outputs: [...block.outputs || [], {\r\n            key: 'value',\r\n            type,\r\n            control: true,\r\n            toMotoko({value}) {\r\n                if(value === undefined) {\r\n                    return;\r\n                }\r\n                return String(stringifier ? stringifier(value) : value);\r\n            },\r\n        }],\r\n    };\r\n}","import {arrayType, boolType, mutableArrayType, typeType, valueType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FOR_STORING_DATA} from '../editor/useCases';\r\n\r\nexport const arrayImportRef = importRef('mo:base/Array');\r\n\r\nconst block = {\r\n    title: 'Create Array',\r\n    info: 'Create a new array with the specified items',\r\n    useCases: [FOR_STORING_DATA],\r\n    category: collectionCategory,\r\n    icon: collectionCategory.data.icon,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');\r\n        let mutable = editor.compilers.motoko.getOutput(node, 'mutable');\r\n        return type && `new Array [ ${mutable ? 'var ' : ''}${editor.compilers.motoko.getTypeString(type.generics[0])} ]`;\r\n    },\r\n    inputs: [{\r\n        key: 'itemType',\r\n        type: typeType.of(valueType),\r\n    }, {\r\n        key: 'items',\r\n        type: valueType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: arrayType,\r\n        inferType({itemType}, node, compiler) {\r\n            let mutable = compiler.editor.compilers.motoko.getInput(node, 'mutable');\r\n            return (mutable ? mutableArrayType : arrayType).of(itemType);\r\n        },\r\n        toMotoko({mutable, items}) {\r\n            return `[${mutable ? (items.length ? 'var ' : 'var') : ''}${items.join(', ')}]`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'mutable',\r\n        info: 'Mutable arrays can dynamically replace elements after initialization',\r\n        type: boolType,\r\n    }],\r\n};\r\nexport default block;\r\n","import {parse} from 'querystring';\r\n\r\nconst config = parse(window.location.search.substring(1));\r\n\r\nexport default function getQueryConfig(key, defaultValue) {\r\n    return key in config ? config[key] : defaultValue;\r\n}\r\n","import {getBlock} from '../editor/blocks';\r\nimport Rete from 'rete';\r\nimport {getType} from '../block-types/types';\r\n\r\nexport class UndefinedInputError extends Error {\r\n    constructor(block, key) {\r\n        super(`${block.name}.${key}`);\r\n    }\r\n}\r\n\r\nexport default class Compiler {\r\n    constructor(editor, compileKey) {\r\n        this.editor = editor;\r\n        this.compileKey = compileKey;\r\n\r\n        this._caching = false;\r\n        this._inputCache = new Map();\r\n        this._outputCache = new Map();\r\n    }\r\n\r\n    // Default output value if `[compileKey]` does not exist on block property\r\n    defaultCompile(prop, node) {\r\n    }\r\n\r\n    // Post-process results from either `prop[compileKey]` or `defaultCompile(..)`\r\n    postCompile(result, node, key) {\r\n        return result;\r\n    }\r\n\r\n    getNode(node, silent = false) {\r\n        if(node instanceof Rete.Node) {\r\n            return node;\r\n        }\r\n        if(!node) {\r\n            throw new Error(`Node cannot be ${JSON.stringify(node)}`);\r\n        }\r\n        const id = String(typeof node === 'string' || typeof node === 'number' ? node : node.id);\r\n        node = this.editor.nodes.find(node => String(node.id) === id);\r\n        if(!node && !silent) {\r\n            throw new Error(`Node does not exist: ${id}`);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    getBlock(node) {\r\n        node = this.getNode(node);\r\n        return getBlock(node.name);\r\n    }\r\n\r\n    getInput(node, key) {\r\n        node = this.getNode(node, true);\r\n        if(!node) {\r\n            return;\r\n        }\r\n        // const cacheKey = this._cacheKey(node, key);\r\n        // if(this._caching && this._inputCache.has(cacheKey)) {\r\n        //     return this._inputCache.get(cacheKey);\r\n        // }\r\n        // this._inputCache.set(cacheKey, undefined);\r\n        // noinspection UnnecessaryLocalVariableJS\r\n        let result = this._getInput(node, key);\r\n        // this._inputCache.set(cacheKey, result);\r\n        return result;\r\n    }\r\n\r\n    _getInput(node, key) {\r\n        const block = this.getBlock(node);\r\n        if(!block.props.hasOwnProperty(key)) {\r\n            throw new Error(`Prop not found on ${node.name}: ${key}`);\r\n        }\r\n        const prop = block.props[key];\r\n        let result = this._resolveInput(node, prop);\r\n        if(result === undefined && !prop.optional) {\r\n            result = prop.type?.data.defaultInput?.(prop, node);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    _resolveInput(node, prop) {\r\n        if(prop.input) {\r\n            if(!prop.type.data.reversed) {\r\n                const input = this._input(node, prop.key);\r\n                if(prop.multi) {\r\n                    return input.connections.map(c => this._compileConnection(c, c.input, c.output, 'outputs'));\r\n                }\r\n                if(input.connections.length) {\r\n                    const c = input.connections[0];\r\n                    return this._compileConnection(c, c.input, c.output, 'outputs');\r\n                }\r\n                if(input.control) {\r\n                    // return input.control.getValue();\r\n                    return this._compileControl(input.control, prop);\r\n                }\r\n            }\r\n            else {\r\n                const output = this._output(node, prop.key);\r\n                if(prop.multi) {\r\n                    return output.connections.map(c => this._compileConnection(c, c.output, c.input, 'inputs'));\r\n                }\r\n                if(output.connections.length) {\r\n                    const c = output.connections[0];\r\n                    return this._compileConnection(c, c.output, c.input, 'inputs');\r\n                }\r\n            }\r\n        }\r\n\r\n        if(prop.control) {\r\n            const control = this._control(node, prop.key);\r\n            return this._compileControl(control, prop);\r\n        }\r\n    }\r\n\r\n    getOutput(node, key) {\r\n        node = this.getNode(node, true);\r\n        if(!node) {\r\n            return;\r\n        }\r\n        const cacheKey = this._cacheKey(node, key);\r\n        if(this._caching && this._outputCache.has(cacheKey)) {\r\n            return this._outputCache.get(cacheKey);\r\n        }\r\n        this._outputCache.set(cacheKey, undefined);\r\n        const result = this._getOutput(node, key);\r\n        this._outputCache.set(cacheKey, result);\r\n        return result;\r\n    }\r\n\r\n    _getOutput(node, key) {\r\n        const prop = this._prop(node, key);\r\n        try {\r\n            const args = this.getInputArgs(node);\r\n            if(!args) {\r\n                return;\r\n            }\r\n            let result = prop[this.compileKey]?.(args, node, this);\r\n            if(result === undefined) {\r\n                result = this.defaultCompile(prop, node);\r\n            }\r\n            return this.postCompile(result, node, key);\r\n        }\r\n        catch(err) {\r\n            if(err instanceof UndefinedInputError) {\r\n                return;\r\n            }\r\n            console.error(`[${node.name}.${key}]`, err);\r\n            this.editor.trigger('warn', `[${node.name}.${key}] ${err}`);\r\n        }\r\n    }\r\n\r\n    getInputArgs(node) {\r\n        node = this.getNode(node, true);\r\n        let args = {};\r\n        if(!node) {\r\n            return args;\r\n        }\r\n        const block = this.getBlock(node);\r\n        for(const prop of Object.values(block.props)) {\r\n            if(prop.input || prop.control) {\r\n                // Lazy-compile inputs\r\n                let loaded = false;\r\n                let loadedValue;\r\n                Object.defineProperty(args, prop.key, {\r\n                    get: () => {\r\n                        if(loaded) {\r\n                            return loadedValue;\r\n                        }\r\n                        let value = this.getInput(node, prop.key);\r\n                        if(value === undefined && !prop.optional) {\r\n                            throw new UndefinedInputError(block, prop.key);\r\n                        }\r\n                        loaded = true;\r\n                        return value;\r\n                    },\r\n                });\r\n            }\r\n        }\r\n        if(process.env.NODE_ENV !== 'production') {\r\n            // Throw error on missing key\r\n            const target = args;\r\n            args = new Proxy({}, {\r\n                get: (_, key) => {\r\n                    if(!target.hasOwnProperty(key)) {\r\n                        throw new Error(`Unknown input: ${block.name}.${key}`);\r\n                    }\r\n                    return target[key];\r\n                },\r\n            });\r\n        }\r\n        return args;\r\n    }\r\n\r\n    clearCache() {\r\n        this._inputCache.clear();\r\n        this._outputCache.clear();\r\n    }\r\n\r\n    getTypeString(type) {\r\n        type = getType(type);\r\n        const generics = type.generics.map(t => this.getTypeString(t));\r\n        return type?.data[this.compileKey]?.call(type, generics, this) || (generics.length ? `${type.name}<${generics.join(', ')}>` : type.name);\r\n    }\r\n\r\n    inferType(node, key) {\r\n        return this.editor.compilers.type.getInput(node, key);\r\n    }\r\n\r\n    _compileConnection(connection, from, to) {\r\n        return this.getOutput(to.node, to.key);\r\n    }\r\n\r\n    _compileControl(control, prop) {\r\n        const node = control.getNode();\r\n        let value = control.getValue();\r\n        if(value === undefined) {\r\n            value = this.defaultCompile(prop, node);\r\n        }\r\n        return this.postCompile(value, node, prop.key);\r\n    }\r\n\r\n    _prop(node, key) {\r\n        const block = this.getBlock(node);\r\n        if(!block.props.hasOwnProperty(key)) {\r\n            throw new Error(`Prop does not exist in ${node.name}: ${key}`);\r\n        }\r\n        return block.props[key];\r\n    }\r\n\r\n    _input(node, key) {\r\n        if(!node.inputs.has(key)) {\r\n            throw new Error(`Input not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.inputs.get(key);\r\n    }\r\n\r\n    _output(node, key) {\r\n        if(!node.outputs.has(key)) {\r\n            throw new Error(`Output not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.outputs.get(key);\r\n    }\r\n\r\n    _control(node, key) {\r\n        if(!node.controls.has(key)) {\r\n            throw new Error(`Control not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.controls.get(key);\r\n    }\r\n\r\n    _cacheKey(node, key) {\r\n        return `${node.id}.${key}`;\r\n    }\r\n}","import useLocalStorage, {makeLocalStorageObservable} from '../utils/useLocalStorage';\r\nimport useThemes from '../useThemes';\r\nimport getEmbedConfig from '../../utils/getEmbedConfig';\r\nimport {useCallback} from 'react';\r\nimport {THEMES} from '../../editor/themes';\r\n\r\nconst defaultTheme = THEMES[0];\r\n\r\nexport const THEME_STORE = makeLocalStorageObservable('blocks.theme', getEmbedConfig('theme', defaultTheme.id));\r\n\r\nexport default function useThemeState() {\r\n    const themes = useThemes();\r\n    const [id, setId] = useLocalStorage(THEME_STORE);\r\n\r\n    return [\r\n        themes.find(theme => theme.id === id) || defaultTheme,\r\n        useCallback(id => setId(id), [setId]),\r\n    ];\r\n}\r\n","// Enable selecting input fields without dragging node\r\nexport const bindNodeInput = ref => ref && ref.addEventListener('pointerdown', event => event.stopPropagation());\r\n","export function findNodeSearchOptions(text, editor, componentName, nodeKey) {\r\n    return editor.nodes.flatMap(node => {\r\n        if(node.name === componentName) {\r\n            const title = editor.compilers.motoko.getInput(node, 'name');\r\n            if(title && title.toLowerCase().startsWith(text.toLowerCase())) {\r\n                return [{\r\n                    title,\r\n                    data: {\r\n                        [nodeKey]: node.id,\r\n                    },\r\n                }];\r\n            }\r\n        }\r\n        return [];\r\n    });\r\n}\r\n","import MonacoEditor from '@monaco-editor/react';\r\nimport {configureMonaco} from '../../config/configureMonaco';\r\nimport useThemeState from '../../hooks/persistent/useThemeState';\r\n\r\nexport default function CodeEditor({value, onChange, readOnly, options, ...others}) {\r\n    // const monaco = useMonaco();\r\n    const [theme] = useThemeState();\r\n\r\n    const onEditorChange = (newValue) => {\r\n        onChange?.(newValue);\r\n    };\r\n\r\n    return (\r\n        <MonacoEditor\r\n            // width=\"30vh\"\r\n            // height=\"40vh\"\r\n            theme={theme.monaco || 'vs-dark'}\r\n            defaultLanguage=\"motoko\"\r\n            beforeMount={configureMonaco}\r\n            // onMount={(editor, monaco) => {\r\n            //     setTimeout(() => {\r\n            //         console.log(editor.getAction('editor.action.formatDocument').run());\r\n            //\r\n            //         // console.log(editor.trigger('actor{public func test() : Text {}}', 'editor.action.formatDocument'));\r\n            //     },500);\r\n            // }}\r\n            value={value}\r\n            // path={fileName}\r\n            onChange={onEditorChange}\r\n            options={{\r\n                tabSize: 2,\r\n                minimap: {enabled: false},\r\n                wordWrap: 'off',\r\n                // wrappingIndent: 'indent',\r\n                scrollBeyondLastLine: false,\r\n                fontSize: 16,\r\n                readOnly,\r\n                ...options,\r\n            }}\r\n            {...others}\r\n        />\r\n    );\r\n}","import isEmbeddedMode from './isEmbeddedMode';\r\nimport getQueryConfig from './getQueryConfig';\r\n\r\nexport default function getEmbedConfig(key, defaultValue) {\r\n    return isEmbeddedMode() ? getQueryConfig(key, defaultValue) : defaultValue;\r\n}\r\n","import {optionalType, valueType} from '../block-types/types';\r\nimport {decompositionCategory} from '../block-categories/categories';\r\nimport {FOR_ERROR_HANDLING} from '../editor/useCases';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nexport const optionImportRef = importRef('mo:base/Option');\r\n\r\nconst block = {\r\n    title: 'Optional or Default',\r\n    info: 'Unwrap an optional value, falling back to a default if null',\r\n    useCases: [FOR_ERROR_HANDLING],\r\n    category: decompositionCategory,\r\n    topRight: 'value',\r\n    inputs: [{\r\n        key: 'input',\r\n        type: optionalType,\r\n    }, {\r\n        key: 'defaultValue',\r\n        title: 'Default',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            if(optionalType.isSubtype(input)) {\r\n                return input.generics[0];\r\n            }\r\n        },\r\n        toMotoko({input, defaultValue}) {\r\n            return `${optionImportRef}.get${formatParentheses(`${input}, ${defaultValue}`)}`;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import nightOwlTheme from 'monaco-themes/themes/Night Owl.json';\r\n\r\n// Derived from: https://github.com/dfinity/motoko-playground/blob/main/src/config/monacoConfig.js\r\n\r\nexport const MOTOKO_KEYWORDS = [\r\n    'actor', 'and', 'async', 'assert', 'await', 'break', 'case', 'catch', 'class',\r\n    'continue', 'debug', 'else', 'false', 'for', 'func', 'if', 'in', 'import',\r\n    'module', 'not', 'null', 'object', 'or', 'label', 'let', 'loop', 'private',\r\n    'public', 'return', 'shared', 'try', 'throw', 'debug_show', 'query', 'switch',\r\n    'true', 'type', 'var', 'while', 'stable', 'flexible', 'system',\r\n];\r\n\r\nexport const configureMonaco = (monaco) => {\r\n    monaco.editor.defineTheme('night-owl', nightOwlTheme);\r\n\r\n    monaco.languages.register({id: 'motoko'});\r\n    monaco.languages.setLanguageConfiguration('motoko', {\r\n        comments: {\r\n            lineComment: '//',\r\n            blockComment: ['/*', '*/'],\r\n        },\r\n        brackets: [\r\n            ['{', '}'],\r\n            ['[', ']'],\r\n            ['(', ')'],\r\n        ],\r\n        autoClosingPairs: [\r\n            {open: '{', close: '}'},\r\n            {open: '[', close: ']'},\r\n            {open: '(', close: ')'},\r\n            {open: '\"', close: '\"'},\r\n            {open: '<', close: '>'},\r\n        ],\r\n    });\r\n    monaco.languages.setMonarchTokensProvider('motoko', {\r\n        defaultToken: '',\r\n        tokenPostfix: '.mo',\r\n        // prettier-ignore\r\n        keywords: MOTOKO_KEYWORDS,\r\n        accessmodifiers: ['public', 'private', 'shared'],\r\n        // prettier-ignore\r\n        typeKeywords: [\r\n            'Any', 'None', 'Null', 'Bool', 'Int', 'Int8', 'Int16', 'Int32', 'Int64', 'Nat',\r\n            'Nat8', 'Nat16', 'Nat32', 'Nat64', 'Word8', 'Word16', 'Word32', 'Word64', 'Float',\r\n            'Char', 'Text', 'Blob', 'Error', 'Principal',\r\n        ],\r\n        // prettier-ignore\r\n        operators: [\r\n            '=', '<', '>', ':', '<:', '?', '+', '-', '*', '/', '%', '**', '&', '|', '^', '<<', '>>',\r\n            '#', '==', '!=', '>=', '<=', ':=', '+=', '-=', '*=', '/=', '%=', '**=', '&=', '|=',\r\n            '^=', '<<=', '>>=', '#=', '->',\r\n        ],\r\n        symbols: /[=(){}[\\].,:;@#_&\\-<>`?!+*\\\\/]/,\r\n        // C# style strings\r\n        escapes:\r\n            /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\r\n        tokenizer: {\r\n            root: [\r\n                // identifiers and keywords\r\n                [\r\n                    /[a-zA-Z_$][\\w$]*/,\r\n                    {\r\n                        cases: {\r\n                            '@typeKeywords': 'keyword.type',\r\n                            '@keywords': 'keyword',\r\n                            '@default': 'identifier',\r\n                        },\r\n                    },\r\n                ],\r\n                // whitespace\r\n                {include: '@whitespace'},\r\n\r\n                // delimiters and operators\r\n                [/[{}()[\\]]/, '@brackets'],\r\n                [/[<>](?!@symbols)/, '@brackets'],\r\n                [/@symbols/, {cases: {'@operators': 'operator', '@default': ''}}],\r\n                // numbers\r\n                [/\\d*\\.\\d+([eE][-+]?\\d+)?/, 'number.float'],\r\n                [/0[xX][0-9a-fA-F_]+/, 'number.hex'],\r\n                [/[0-9_]+/, 'number'],\r\n\r\n                // delimiter: after number because of .\\d floats\r\n                [/[;,.]/, 'delimiter'],\r\n\r\n                // strings\r\n                [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'], // non-teminated string\r\n                [/\"/, {token: 'string.quote', bracket: '@open', next: '@string'}],\r\n\r\n                // characters\r\n                [/'[^\\\\']'/, 'string'],\r\n                [/(')(@escapes)(')/, ['string', 'string.escape', 'string']],\r\n                [/'/, 'string.invalid'],\r\n            ],\r\n\r\n            comment: [\r\n                [/[^/*]+/, 'comment'],\r\n                [/\\/\\*/, 'comment', '@push'], // nested comment\r\n                ['\\\\*/', 'comment', '@pop'],\r\n                [/[/*]/, 'comment'],\r\n            ],\r\n\r\n            string: [\r\n                [/[^\\\\\"]+/, 'string'],\r\n                [/@escapes/, 'string.escape'],\r\n                [/\\\\./, 'string.escape.invalid'],\r\n                [/\"/, {token: 'string.quote', bracket: '@close', next: '@pop'}],\r\n            ],\r\n\r\n            whitespace: [\r\n                [/[ \\t\\r\\n]+/, 'white'],\r\n                [/\\/\\*/, 'comment', '@comment'],\r\n                [/\\/\\/.*$/, 'comment'],\r\n            ],\r\n        },\r\n    });\r\n};","export default function prettyPrintMotoko(text, indent = '\\t') {\r\n    if(!text.trim()) {\r\n        return '';\r\n    }\r\n\r\n    let depth = 0;\r\n\r\n    const lines = text.split('\\n')\r\n        .map(s => s.trim())\r\n        // .flatMap(s => {\r\n        //     s = replaceSyntax(s, '{ ', '{\\n');\r\n        //     s = replaceSyntax(s, ' }', '\\n}');\r\n        //     s = replaceSyntax(s, '; ', ';\\n');\r\n        //     return text.split('\\n');\r\n        // })\r\n        .map(s => {\r\n            s = s.trim();\r\n            if(s.startsWith('}') && depth > 0) {\r\n                depth--;\r\n            }\r\n            s = indent.repeat(depth) + s;\r\n            if(s.endsWith('{')) {\r\n                depth++;\r\n            }\r\n            return s;\r\n        });\r\n\r\n    return lines.join('\\n');\r\n}","import {THEMES} from '../editor/themes';\r\n\r\nexport default function useThemes() {\r\n    return THEMES; // In the future, we could make it possible to import additional themes\r\n}\r\n","export const THEMES = [{\r\n    id: 'dark',\r\n    name: 'Dark',\r\n    parts: ['monospace-labels', 'vibrant-borders'],\r\n    monaco: 'night-owl',\r\n    styledComponents: {},\r\n}, {\r\n//     id: 'light',\r\n//     name: 'Light',\r\n//     parts: ['monospace-labels'],\r\n//     monaco: 'light',\r\n//     styledComponents: {},\r\n// }, {\r\n//     id: 'light-dark',\r\n//     name: 'Light-Dark',\r\n//     parts: ['monospace-labels'],\r\n//     monaco: 'vs-dark',\r\n//     styledComponents: {},\r\n// }, {\r\n    id: 'grey',\r\n    name: 'Grey',\r\n    parts: ['monospace-labels'],\r\n    monaco: 'vs-dark',\r\n    styledComponents: {},\r\n}];","import {useContext, useEffect, useState} from 'react';\r\nimport EventsContext, {ERROR_EVENT} from '../../contexts/EventsContext';\r\n\r\nexport default function Loading({promise, loading, error, children}) {\r\n    let [status, setStatus] = useState('loading');\r\n    let [result, setResult] = useState();\r\n\r\n    let events = useContext(EventsContext);\r\n\r\n    useEffect(() => {\r\n        Promise.resolve(promise)\r\n            .then(result => {\r\n                setStatus('success');\r\n                setResult(result);\r\n            })\r\n            .catch(err => {\r\n                setStatus('error');\r\n                setResult(err);\r\n                if(!error) {\r\n                    events.emit(ERROR_EVENT, err);\r\n                }\r\n            });\r\n    }, [promise, error, events]);\r\n\r\n    if(status === 'loading') {\r\n        return loading?.() ?? null;\r\n    }\r\n    if(status === 'error') {\r\n        return error?.(result) ?? null;\r\n    }\r\n    return children?.(result) ?? null;\r\n}","import {Button} from 'react-bootstrap';\r\nimport {FaCopy} from 'react-icons/fa';\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard/lib/Component';\r\nimport React, {useState} from 'react';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport useReactTooltip from '../../hooks/useReactTooltip';\r\nimport {onAnyClick} from '../../utils/eventHelpers';\r\n\r\nexport default function CopyToClipboardButton({text, size, variant, buttonRef, ...others}) {\r\n\r\n    const [copied, setCopied] = useState();\r\n\r\n    let tooltipRef;\r\n    const showTooltip = () => {\r\n        setCopied(true);\r\n        ReactTooltip.show(tooltipRef);\r\n        setTimeout(() => /*ReactTooltip.hide(tooltipRef)&*/setCopied(false), 1000);\r\n    };\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <CopyToClipboard text={text} /* onCopy={() => setCopied(true)} */ >\r\n            <Button\r\n                ref={buttonRef}\r\n                size={size || 'sm'}\r\n                variant={variant || 'outline-light'}\r\n                className=\"d-flex py-2\"\r\n                data-tip={copied ? undefined : 'Copy to Clipboard'}\r\n                {...onAnyClick(showTooltip)}>\r\n                <span ref={ref => tooltipRef = ref} data-tip=\"Copied!\"/>\r\n                <FaCopy/>\r\n            </Button>\r\n        </CopyToClipboard>\r\n    );\r\n}","import React, {useContext, useState} from 'react';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../contexts/EventsContext';\r\nimport useListener from '../../../hooks/utils/useListener';\r\nimport Loading from '../../common/Loading';\r\nimport CopyToClipboardButton from '../../common/CopyToClipboardButton';\r\nimport CodeEditor from '../../monaco/CodeEditor';\r\n\r\nexport default function OutputControlHandle({control, bindInput, query}) {\r\n\r\n    const findValue = async () => {\r\n        try {\r\n            return await query(control, control.getNode(), control.editor);\r\n        }\r\n        catch(err) {\r\n            console.warn(err);\r\n            return `<${err}>`;\r\n        }\r\n    };\r\n\r\n    const [valuePromise, setValuePromise] = useState(findValue);\r\n    // const [copied, setCopied] = useState();\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => {\r\n        setValuePromise(findValue());\r\n    });\r\n\r\n    // let tooltipRef;\r\n    // const showTooltip = () => {\r\n    //     setCopied(true);\r\n    //     ReactTooltip.show(tooltipRef);\r\n    //     setTimeout(() => /*ReactTooltip.hide(tooltipRef)&*/setCopied(false), 1000);\r\n    // };\r\n\r\n    // useReactTooltip();\r\n\r\n    return (\r\n        <Loading promise={valuePromise}>\r\n            {value => (value ?? null) && (\r\n                <div className=\"d-flex\">\r\n                    {/*<input*/}\r\n                    {/*    type=\"text\"*/}\r\n                    {/*    className=\"w-100 small\"*/}\r\n                    {/*    readOnly*/}\r\n                    {/*    ref={bindInput}*/}\r\n                    {/*    value={value || ''}*/}\r\n                    {/*/>*/}\r\n                    <div ref={bindInput} className=\"w-100\">\r\n                        <CodeEditor\r\n                            value={value}\r\n                            readOnly\r\n                            options={{\r\n                                lineNumbers: 'off',\r\n                                glyphMargin: false,\r\n                                folding: false,\r\n                                lineDecorationsWidth: 0,\r\n                                lineNumbersMinChars: 0,\r\n                                minimap: {\r\n                                    enabled: false,\r\n                                },\r\n                            }}/>\r\n                    </div>\r\n                    <CopyToClipboardButton text={value} /* onCopy={() => setCopied(true)} */ >\r\n                        {/*<Button*/}\r\n                        {/*    ref={bindInput}*/}\r\n                        {/*    size=\"sm\"*/}\r\n                        {/*    variant=\"outline-light\"*/}\r\n                        {/*    data-tip={copied ? undefined : 'Copy to Clipboard'}*/}\r\n                        {/*    {...onAnyClick(showTooltip)}>*/}\r\n                        {/*    <span ref={ref => tooltipRef = ref} data-tip=\"Copied!\"/>*/}\r\n                        {/*    <FaCopy/>*/}\r\n                        {/*</Button>*/}\r\n                    </CopyToClipboardButton>\r\n                </div>\r\n            )}\r\n        </Loading>\r\n    );\r\n}\r\n","import {anyReversedType, anyType} from '../block-types/types';\r\nimport OutputControlHandle from '../components/rete/controls/OutputControlHandle';\r\nimport {compilerCategory} from '../block-categories/categories';\r\nimport {resolveImportRefs} from '../compilers/MotokoCompiler';\r\nimport prettyPrintMotoko from '../editor/format/prettyPrintMotoko';\r\n\r\nexport function compileBlock(compilerKey, block, displayFn) {\r\n    function queryFor(inputKey) {\r\n        return (control, node, editor) => {\r\n            let value = editor.compilers[compilerKey].getInput(node, inputKey);\r\n            let string = displayFn ? displayFn(value, node, editor) : value;\r\n            const [/*prefixes*/, code] = resolveImportRefs(string);\r\n            return prettyPrintMotoko([/*...prefixes, */code].join(' '));\r\n        };\r\n    }\r\n\r\n    return {\r\n        category: compilerCategory,\r\n        icon: compilerCategory.data.icon,\r\n        topLeft: 'input',\r\n        topRight: 'reversed',\r\n        width: 8,\r\n        ...block,\r\n        inputs: [{\r\n            key: 'input',\r\n            title: 'Input',\r\n            type: anyType,\r\n            optional: true,\r\n        }, {\r\n            key: 'reversed',\r\n            title: 'Input',\r\n            type: anyReversedType,\r\n            optional: true,\r\n        }],\r\n        controls: [{\r\n            key: 'reversedDisplay',\r\n            title: 'Display',\r\n            config: {\r\n                controlType: OutputControlHandle,\r\n                controlProps: {\r\n                    query: queryFor('reversed'),\r\n                },\r\n            },\r\n        }, {\r\n            key: 'display',\r\n            config: {\r\n                controlType: OutputControlHandle,\r\n                controlProps: {\r\n                    query: queryFor('input'),\r\n                },\r\n            },\r\n        }],\r\n    };\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport default function SelectControlHandle({control, bindInput, options, findLabel}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    if(value === undefined && !options.includes(value)) {\r\n        value = options[0];\r\n        setValue(value);\r\n    }\r\n\r\n    let invalid = !control.validate(value) || !options.includes(value);\r\n\r\n    return (\r\n        <select\r\n            className={classNames(invalid && 'invalid')}\r\n            ref={bindInput}\r\n            value={value}\r\n            onChange={event => setValue(event.target.value || undefined)}>\r\n            {options.map((option, i) => (\r\n                <option key={i} label={findLabel?.(option, i) ?? option} value={option}/>\r\n            ))}\r\n        </select>\r\n    );\r\n}\r\n","import SelectControlHandle from '../components/rete/controls/SelectControlHandle';\r\nimport {boolType} from '../block-types/types';\r\n\r\nexport function stringSelectProp(prop, options) {\r\n    options = prop.optional ? [undefined, ...options] : options;\r\n    return {\r\n        ...prop,\r\n        config: {\r\n            ...prop.config || {},\r\n            controlType: SelectControlHandle,\r\n            controlProps: {\r\n                options,\r\n                findLabel: (option) => option ? option.charAt(0).toUpperCase() + option.substring(1) : '--',\r\n            },\r\n            controlDefault: options[0],\r\n        },\r\n    };\r\n}\r\n\r\nexport function advancedProp() {\r\n    return {\r\n        key: 'editor:advanced',\r\n        title: 'Advanced',\r\n        type: boolType,\r\n        config: {\r\n            onChange(control) {\r\n                control.editor.updateNode(control.getNode());\r\n            },\r\n        },\r\n    };\r\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 98;","import {identifierType, typeType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport {FOR_CONFIGURATION} from '../editor/useCases';\r\n\r\nexport function compileGlobalParameter(node, compiler) {\r\n    let {name, type} = compiler.getInputArgs(node);\r\n    let typeString = compiler.getTypeString(type) || 'Any';\r\n    return `${name} : ${typeString}`;\r\n}\r\n\r\nconst block = {\r\n    title: 'Config',\r\n    info: 'A top-level input parameter to the smart contract',\r\n    useCases: [FOR_CONFIGURATION],\r\n    topRight: 'value',\r\n    category: paramCategory,\r\n    global: true,\r\n    computeTitle(node, editor) {\r\n        let name = editor.compilers.motoko.getInput(node, 'name');\r\n        let type = editor.compilers.type.getInput(node, 'type');\r\n        return name && `${name} : ${type ? editor.compilers.motoko.getTypeString(type) : 'Any'}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'MainParameterRead',\r\n        nodeKey: 'configNode',\r\n    }],\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n        inferType({type}) {\r\n            return type;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {\r\n    asyncType,\r\n    boolType,\r\n    effectType,\r\n    functionType,\r\n    identifierType,\r\n    paramType,\r\n    principalType,\r\n    tupleType,\r\n    unitType,\r\n} from '../block-types/types';\r\nimport {getUserDefinedName, memberBlock, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FOR_BUILDING_API, FOR_REUSABLE_LOGIC} from '../editor/useCases';\r\nimport {formatParentheses, formatStatementBlock} from '../editor/format/formatHelpers';\r\nimport {FUNCTION_PRIORITY} from '../compilers/utils/compileGlobalMotoko';\r\n\r\nconst defaultReturnType = unitType;\r\n\r\nexport function getFunctionReturnType(node, editor) {\r\n    let type = editor.compilers.type.getInput(node, 'body')?.generics[0] || defaultReturnType;\r\n    let query = editor.compilers.control.getInput(node, 'query');\r\n    let visibility = editor.compilers.control.getInput(node, 'visibility');\r\n    if(query || visibility === 'public') {\r\n        type = asyncType.of(type);\r\n    }\r\n    return type;\r\n}\r\n\r\nconst block = memberBlock({\r\n    info: 'Evaluate based on given input parameters',\r\n    useCases: [FOR_BUILDING_API, FOR_REUSABLE_LOGIC],\r\n    category: functionCategory,\r\n    topRight: 'body',\r\n    global: true,\r\n    memberPriority: FUNCTION_PRIORITY,\r\n    computeTitle(node, editor) {\r\n        let name = getUserDefinedName(node, editor);\r\n        // return name;/////\r\n        let {params, body} = editor.compilers.motoko.getInputArgs(node);\r\n        let returnType = getFunctionReturnType(node, editor);\r\n        if(!name && !params.length && !body) {\r\n            return;\r\n        }\r\n        return `${name || ''}(${params.join(', ')})${returnType ? ' : ' + editor.compilers.motoko.getTypeString(returnType) : ''}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'FunctionCall',\r\n        nodeKey: 'functionNode',\r\n    }, {\r\n        block: 'Return',\r\n        connections: [{\r\n            fromOutput: true,\r\n            from: 'body',\r\n            to: 'statement',\r\n        }],\r\n    }],\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'params',\r\n        title: 'Parameters',\r\n        type: paramType,\r\n        multi: true,\r\n    }, {\r\n        key: 'body',\r\n        type: effectType,\r\n        optional: true,\r\n        request: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'caller',\r\n        info: 'The remote principal which called this function',\r\n        type: principalType,\r\n        advanced: true,\r\n        toMotoko({name}, node, compiler) {\r\n            return `${name}__msg.caller`;\r\n        },\r\n    }, {\r\n        key: 'function',\r\n        info: 'The callable function value',\r\n        type: functionType,\r\n        advanced: true,\r\n        inferType({params}, node, compiler) {\r\n            const returnType = getFunctionReturnType(node, compiler.editor);\r\n            return functionType.of(tupleType.of(...params), returnType);\r\n        },\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(),\r\n        {\r\n            key: 'query',\r\n            info: 'A query function runs faster but cannot modify state values',\r\n            type: boolType,\r\n            advanced: true,\r\n        },\r\n    ],\r\n}, {\r\n    toMotoko({name, visibility, query, params, body}, node, compiler) {\r\n        let hasCaller = node.outputs.get('caller').connections.length;\r\n\r\n        let shared = !!hasCaller;\r\n        let modifiers = [visibility !== 'system' && visibility].filter(m => m).join(' ');\r\n\r\n        let returnType = getFunctionReturnType(node, compiler.editor);\r\n        let returnString = compiler.getTypeString(returnType);\r\n        return [\r\n            modifiers,\r\n            shared ? `shared${formatParentheses(`${name}__msg`)}` : '',\r\n            query ? 'query' : '',\r\n            `func ${name || ''}${formatParentheses(params.join(', '))}${returnString !== '()' ? ` : ${returnString}` : ''}`,\r\n            formatStatementBlock(body || ''),\r\n        ];\r\n    },\r\n});\r\nexport default block;\r\n","const examples = [\r\n    require('./files/Echo.blocks.json'),\r\n    // require('./files/Counter.blocks.json'),\r\n    require('./files/Calculator.blocks.json'),\r\n    // require('./files/WhoAmI.blocks.json'),\r\n    require('./files/PhoneBook.blocks.json'),\r\n    require('./files/ToDoList.blocks.json'),\r\n    require('./files/SimpleCurrency.blocks.json'),\r\n    require('./files/TextSharingApi.blocks.json'),\r\n];\r\n\r\nmodule.exports = {\r\n    getExampleProjects() {\r\n        return examples;\r\n    },\r\n};","var map = {\n\t\"./Actor.js\": 149,\n\t\"./ActorClass.js\": 150,\n\t\"./Add.js\": 151,\n\t\"./And.js\": 152,\n\t\"./ArrayAppend.js\": 153,\n\t\"./ArrayAppended.js\": 154,\n\t\"./ArrayFilter.js\": 155,\n\t\"./ArrayGet.js\": 156,\n\t\"./ArrayMap.js\": 157,\n\t\"./ArrayPrepend.js\": 158,\n\t\"./ArrayPut.js\": 159,\n\t\"./Assert.js\": 160,\n\t\"./Await.js\": 161,\n\t\"./Class.js\": 162,\n\t\"./CodeMember.js\": 163,\n\t\"./CodeReference.js\": 164,\n\t\"./CodeStatement.js\": 165,\n\t\"./CodeType.js\": 166,\n\t\"./CodeValue.js\": 167,\n\t\"./CollectionGet.js\": 168,\n\t\"./CollectionPut.js\": 169,\n\t\"./CollectionSize.js\": 170,\n\t\"./Comment.js\": 246,\n\t\"./CommentRegion.js\": 247,\n\t\"./CompareEqual.js\": 171,\n\t\"./CompareGreater.js\": 172,\n\t\"./CompareGreaterEqual.js\": 173,\n\t\"./CompareLess.js\": 174,\n\t\"./CompareLessEqual.js\": 175,\n\t\"./CompareNotEqual.js\": 176,\n\t\"./CompileMotoko.js\": 177,\n\t\"./CompileType.js\": 180,\n\t\"./Conditional.js\": 181,\n\t\"./ConditionalValue.js\": 182,\n\t\"./CounterState.js\": 183,\n\t\"./DebugPrint.js\": 184,\n\t\"./Divide.js\": 185,\n\t\"./DivideInt.js\": 186,\n\t\"./Function.js\": 101,\n\t\"./FunctionCall.js\": 187,\n\t\"./HashText.js\": 188,\n\t\"./LiteralBool.js\": 189,\n\t\"./LiteralCustomType.js\": 190,\n\t\"./LiteralFloat.js\": 191,\n\t\"./LiteralIdentifier.js\": 192,\n\t\"./LiteralInt.js\": 193,\n\t\"./LiteralNat.js\": 194,\n\t\"./LiteralPair.js\": 195,\n\t\"./LiteralPairType.js\": 196,\n\t\"./LiteralPrincipal.js\": 197,\n\t\"./LiteralText.js\": 198,\n\t\"./LiteralTuple.js\": 199,\n\t\"./LiteralTupleType.js\": 200,\n\t\"./LiteralType.js\": 201,\n\t\"./LoopForIntRange.js\": 202,\n\t\"./LoopWhile.js\": 203,\n\t\"./MainActor.js\": 204,\n\t\"./MainInstaller.js\": 205,\n\t\"./MainParameter.js\": 100,\n\t\"./MainParameterRead.js\": 206,\n\t\"./MapGet.js\": 207,\n\t\"./MapGetOrDefault.js\": 208,\n\t\"./MapPut.js\": 209,\n\t\"./MapRemove.js\": 210,\n\t\"./MapTransfer.js\": 211,\n\t\"./Max.js\": 212,\n\t\"./Min.js\": 213,\n\t\"./Multiply.js\": 214,\n\t\"./NewArray.js\": 56,\n\t\"./NewHashMap.js\": 215,\n\t\"./Not.js\": 216,\n\t\"./Null.js\": 217,\n\t\"./Object.js\": 218,\n\t\"./Optional.js\": 219,\n\t\"./OptionalOrDefault.js\": 72,\n\t\"./OptionalUnwrap.js\": 220,\n\t\"./Or.js\": 221,\n\t\"./Parameter.js\": 222,\n\t\"./ReferenceImport.js\": 223,\n\t\"./ReferencePathName.js\": 224,\n\t\"./Return.js\": 225,\n\t\"./SetupValue.js\": 226,\n\t\"./SplitPair.js\": 227,\n\t\"./State.js\": 34,\n\t\"./StateRead.js\": 228,\n\t\"./StateUpdate.js\": 229,\n\t\"./Subtract.js\": 230,\n\t\"./TextConcat.js\": 231,\n\t\"./TextSize.js\": 232,\n\t\"./TypeMember.js\": 233,\n\t\"./TypeMemberReference.js\": 234,\n\t\"./ValueCall.js\": 235,\n\t\"./Variable.js\": 236\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 148;","import {containerType, identifierType, memberType} from '../block-types/types';\r\nimport {actorCategory} from '../block-categories/categories';\r\nimport {formatMembers, formatStatementBlock} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    info: 'An actor which can be deployed as a smart contract',\r\n    category: actorCategory,\r\n    topLeft: 'actor',\r\n    topRight: 'members',\r\n    // global: true,\r\n    hidden: true,///\r\n    computeTitle(node, editor) {\r\n        let {name} = editor.compilers.motoko.getInputArgs(node);\r\n        return name && `actor ${name}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }, {\r\n        key: 'members',\r\n        type: memberType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'actor',\r\n        type: containerType,\r\n        toMotoko({name, members}) {\r\n            return [\r\n                'actor',\r\n                name,\r\n                formatStatementBlock(formatMembers(members)),\r\n            ];\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {identifierType, memberType, paramType, principalType} from '../block-types/types';\r\nimport {actorCategory} from '../block-categories/categories';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {formatMembers, formatParentheses, formatStatementBlock} from '../editor/format/formatHelpers';\r\n\r\n// TODO: subclasses\r\nlet thisName = 'this';\r\n\r\nconst block = {\r\n    info: 'An object-oriented class of actors',\r\n    category: actorCategory,\r\n    topLeft: 'parent',\r\n    topRight: 'members',\r\n    // global: true,\r\n    hidden: true,///\r\n    computeTitle(node, editor) {\r\n        let {name, params} = editor.compilers.motoko.getInputArgs(node);\r\n        if(!name) {\r\n            return;\r\n        }\r\n        return `actor class ${name}${formatParentheses(params.join(', '))}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }, {\r\n        key: 'members',\r\n        type: memberType,\r\n        multi: true,\r\n    }, {\r\n        key: 'params',\r\n        type: paramType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'parent',\r\n        type: memberType,\r\n        toMotoko({name, params, members}, node, compiler) {\r\n            let hasCaller = node.outputs.get('caller').connections.length;\r\n\r\n            return `${hasCaller ? `shared(${nodeIdentifierRef(node)}) ` : ''}actor class${name ? ' ' + name : ''}${formatParentheses(params.join(', '))} = ${thisName} ${formatStatementBlock(formatMembers(members))}`;\r\n        },\r\n        // }, {\r\n        //     key: 'this',\r\n        //     type: valueType,\r\n        //     toMotoko({}) {\r\n        //         return thisName;\r\n        //     },\r\n    }, {\r\n        key: 'caller',\r\n        type: principalType,\r\n        toMotoko(args, node, compiler) {\r\n            return `${nodeIdentifierRef(node)}.caller`;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = {\r\n    ...arithmeticOperatorBlock('+', (a, b) => a + b),\r\n    info: 'Add two numbers',\r\n};\r\nexport default block;\r\n","import {logicalBinaryOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = {\r\n    ...logicalBinaryOperatorBlock('and', (a, b) => a && b),\r\n    info: 'Return true if-and-only-if both arguments are true',\r\n};\r\nexport default block;","import {arrayType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {FaRegCaretSquareRight} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Append (Array)',\r\n    info: 'Add an item to the end of an array',\r\n    category: collectionCategory,\r\n    icon: FaRegCaretSquareRight,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, value}) => {\r\n    return `${array} := ${arrayImportRef}.append(${array}, [${value}]);`;\r\n});\r\nexport default block;\r\n","import {arrayType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\nimport {arrayImportRef} from './NewArray';\r\n\r\nconst block = {\r\n    title: 'Appended (Array)',\r\n    info: 'Return an array with an item added to the end',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    topRight: 'result',\r\n    hidden: true,///\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko({array, item}) {\r\n            return `${arrayImportRef}.append(${array}, ${item});`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, boolType, effectType, unitType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaLayerGroup} from 'react-icons/fa';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {formatCurlyBraces} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: 'Filter Items (Array)',\r\n    info: 'Create a sub-array containing items matching the \"Filter\" logic',\r\n    category: collectionCategory,\r\n    icon: FaLayerGroup,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'body',\r\n        title: 'Filter',\r\n        type: effectType.of(boolType),\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: arrayType,\r\n        inferType({array}) {\r\n            return array;\r\n        },\r\n        toMotoko({array, body}, node, compiler) {\r\n            let type = array?.generics[0] || unitType;\r\n            let typeString = compiler.getTypeString(type);\r\n\r\n            return `${arrayImportRef}.filter<${typeString}>(${array}, func (${nodeIdentifierRef(node)} : ${typeString}) : Bool ${formatCurlyBraces(body)})`;\r\n        },\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko(_, node, compiler) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, natType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Array)',\r\n    info: 'Get the item at a specific index',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'index',\r\n        type: natType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko({array, index}) {\r\n            return `${array}[${index}]`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, effectType, unitType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaLayerGroup} from 'react-icons/fa';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {formatCurlyBraces} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: 'Replace Items (Array)',\r\n    info: 'Replace each item based on the given logic',\r\n    category: collectionCategory,\r\n    icon: FaLayerGroup,\r\n    topRight: 'body',\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'body',\r\n        title: 'Replace',\r\n        type: effectType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: arrayType,\r\n        inferType({body}) {\r\n            if(effectType.isSubtype(body)) {\r\n                return arrayType.of(body.generics[0]);\r\n            }\r\n        },\r\n        toMotoko({array, body}, node, compiler) {\r\n            let fromType = array?.generics[0] || unitType;\r\n            let toType = compiler.editor.compilers.type.getInput(node, 'body') || unitType;\r\n\r\n            let fromTypeString = compiler.getTypeString(fromType);\r\n            let toTypeString = compiler.getTypeString(toType);\r\n\r\n            return `${arrayImportRef}.map<${fromTypeString}, ${toTypeString}>(${array}, func (${nodeIdentifierRef(node)} : ${fromTypeString}) : ${toTypeString} ${formatCurlyBraces(body)})`;\r\n        },\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko(_, node, compiler) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {FaRegCaretSquareLeft} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Prepend (Array)',\r\n    info: 'Add an item to the beginning of an array',\r\n    category: collectionCategory,\r\n    icon: FaRegCaretSquareLeft,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, value}) => {\r\n    return `${array} := ${arrayImportRef}.append([${value}], ${array});`;\r\n});\r\nexport default block;\r\n","import {mutableArrayType, natType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Put (Array)',\r\n    info: 'Set the item at a specific index',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array (mutable)',\r\n        type: mutableArrayType,\r\n    }, {\r\n        key: 'index',\r\n        type: natType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, index, value}) => {\r\n    return `${array}.put(${index}, ${value});`;\r\n});\r\nexport default block;\r\n","import {boolType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {FaExclamation} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Assert',\r\n    info: 'If the condition is false, terminate the program',\r\n    // category: debugCategory,\r\n    icon: FaExclamation,\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }],\r\n}, ({condition}) => {\r\n    return `assert ${condition};`;\r\n});\r\nexport default block;\r\n","import {asyncType, valueType} from '../block-types/types';\r\nimport {operatorCategory} from '../block-categories/categories';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: '(await a)',\r\n    info: 'Wait for an asynchronous value',\r\n    category: operatorCategory,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'input',\r\n        type: asyncType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            return input.generics[0];\r\n        },\r\n        toMotoko({input}) {\r\n            return formatParentheses(`await ${input}`);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {containerType, identifierType, memberType, paramType, principalType} from '../block-types/types';\r\nimport {actorCategory} from '../block-categories/categories';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\nimport {getUserDefinedName, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {FaBox} from 'react-icons/fa';\r\n\r\n// TODO: subclasses\r\nlet thisName = 'this';\r\n\r\nconst block = {\r\n    info: 'An object-oriented class',\r\n    category: actorCategory,\r\n    icon: FaBox,\r\n    topLeft: 'member',\r\n    topRight: 'members',\r\n    global: true,\r\n    hidden: true,///\r\n    computeTitle(node, editor) {\r\n        let name = getUserDefinedName(node, editor);\r\n        let {params} = editor.compilers.motoko.getInputArgs(node);\r\n        if(!name && !params.length) {\r\n            return;\r\n        }\r\n        return `class ${name || ''}${formatParentheses(params.join(', '))}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'members',\r\n        type: memberType,\r\n        multi: true,\r\n    }, {\r\n        key: 'params',\r\n        title: 'Parameters',\r\n        type: paramType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'member',\r\n        type: containerType,\r\n        toMotoko({visibility, name, params, members}, node, compiler) {\r\n            // let hasCaller = node.outputs.get('caller').connections.length;\r\n            // return `${visibility} ${hasCaller ? `shared (${nodeIdentifierRef(node)}) ` : ''}class${name ? ' ' + name : ''}${formatParentheses(params.join(', '))} = ${thisName} ${formatStatementBlock(formatMembers(members))}`;\r\n        },\r\n        // }, {\r\n        //     key: 'this',\r\n        //     type: valueType,\r\n        //     toMotoko({}) {\r\n        //         return thisName;\r\n        //     },\r\n    }, /*{\r\n        key: 'caller',\r\n        type: principalType,\r\n        advanced: true,\r\n        toMotoko(args, node, compiler) {\r\n            return `${nodeIdentifierRef(node)}.caller`;\r\n        },\r\n    }, */{\r\n        key: 'self',\r\n        type: principalType,\r\n        advanced: true,\r\n        toMotoko(args, node, compiler) {\r\n            return thisName;\r\n        },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(),\r\n    ],\r\n};\r\nexport default block;","import {expressionArgsInput, expressionControl, parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {memberType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\nimport {memberBlock} from '../block-patterns/member-patterns';\r\n\r\nconst block = memberBlock({\r\n    title: '{ Member }',\r\n    info: 'Compile an arbitrary member',\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    width: 14,\r\n    inputs: [\r\n        expressionArgsInput(),\r\n    ],\r\n    controls: [\r\n        expressionControl(),\r\n    ],\r\n}, {\r\n    type: memberType,\r\n    toMotoko({inputs, expression}) {\r\n        let result = parseCodeBlockInputs(inputs, expression)?.trimRight();\r\n        if(result && !result.endsWith(';')) {\r\n            result += ';';\r\n        }\r\n        return result;\r\n    },\r\n});\r\nexport default block;\r\n","import {expressionArgsInput, expressionControl, parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {referenceType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\n\r\nconst block = {\r\n    title: '{ Reference }',\r\n    info: 'Compile an arbitrary reference',\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    topRight: 'result',\r\n    width: 14,\r\n    inputs: [\r\n        expressionArgsInput(),\r\n    ],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: referenceType,\r\n        toMotoko({inputs, expression}) {\r\n            return parseCodeBlockInputs(inputs, expression);\r\n        },\r\n    }],\r\n    controls: [\r\n        expressionControl(),\r\n    ],\r\n};\r\nexport default block;\r\n","import {expressionArgsInput, expressionControl, parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {typeType, valueType} from '../block-types/types';\r\n\r\nconst block = statementBlock({\r\n    title: '{ Statement }',\r\n    info: 'Compile an arbitrary statement',\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    // topLeft: 'inputs',\r\n    // topRight: 'result',\r\n    width: 14,\r\n    inputs: [\r\n        expressionArgsInput(),\r\n        {\r\n            key: 'type',\r\n            type: typeType.of(valueType),\r\n        },\r\n    ],\r\n    controls: [\r\n        expressionControl(),\r\n    ],\r\n}, ({inputs, expression}) => {\r\n    return parseCodeBlockInputs(inputs, expression) || '';\r\n}, ({type}) => {\r\n    return type;\r\n});\r\nexport default block;\r\n","import {expressionArgsInput, expressionControl, parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {customType, typeType, valueType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\n\r\nconst block = {\r\n    title: '{ Type }',\r\n    info: 'Compile an arbitrary type',\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    // topLeft: 'inputs',\r\n    topRight: 'result',\r\n    width: 14,\r\n    inputs: [\r\n        expressionArgsInput(/* typeType */),\r\n        {\r\n            key: 'type',\r\n            type: typeType.of(valueType),\r\n        },\r\n    ],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: typeType.of(valueType),\r\n        inferType({type}) {\r\n            return type || customType; // TODO: distinct customType\r\n        },\r\n        toMotoko({inputs, expression}) {\r\n            return parseCodeBlockInputs(inputs, expression);\r\n        },\r\n    }],\r\n    controls: [\r\n        expressionControl(),\r\n    ],\r\n};\r\nexport default block;\r\n","import {expressionArgsInput, expressionControl, parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {typeType, valueType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\nimport {formatCurlyBraces} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: '{ Expression }',\r\n    info: 'Compile an arbitrary expression',\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    // topLeft: 'inputs',\r\n    topRight: 'result',\r\n    width: 14,\r\n    inputs: [\r\n        expressionArgsInput(),\r\n        {\r\n            key: 'type',\r\n            type: typeType.of(valueType),\r\n        },\r\n    ],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({type}) {\r\n            // return parseInputs(inputs, typeCode);\r\n            return type;\r\n        },\r\n        toMotoko({inputs, expression}) {\r\n            return `do ${formatCurlyBraces(parseCodeBlockInputs(inputs, expression))}`;\r\n        },\r\n    }],\r\n    controls: [\r\n        expressionControl(),\r\n    ],\r\n};\r\nexport default block;\r\n","import {collectionType, mapType, optionalType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Collection)',\r\n    info: 'Retrieve an item corresponding to the given key',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    hidden: true,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: collectionType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: optionalType.of(valueType),\r\n        inferType({collection}) {\r\n            if(mapType.isSubtype(collection)) {\r\n                return optionalType.of(collection.generics[1]);\r\n            }\r\n        },\r\n        toMotoko({collection, key}) {\r\n            return `${collection}.get(${key})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    info: 'Update an item corresponding to the given key',\r\n    title: 'Put (Collection)',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    hidden: true,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: collectionCategory,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({collection, key, value}) => {\r\n    return `${collection}.put(${key}, ${value});`;\r\n});\r\nexport default block;\r\n","import {mapType, natType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaSitemap} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Size (Collection)',\r\n    info: 'Determine the size (or length) of a collection',\r\n    category: collectionCategory,\r\n    icon: FaSitemap,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: mapType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: natType,\r\n        toMotoko({map}) {\r\n            return `${map}.size()`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    ...binaryOperatorBlock([valueType, boolType], '==', (a, b) => a === b),\r\n    info: 'Check if two values are equal',\r\n};\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('>', (a, b) => a > b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('>=', (a, b) => a >= b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('<', (a, b) => a < b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('<=', (a, b) => a <= b);\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    ...binaryOperatorBlock([valueType, boolType], '!=', (a, b) => a !== b),\r\n    info: 'Check if two values are non-equal',\r\n};\r\nexport default block;\r\n","import {compileBlock} from '../block-patterns/compile-patterns';\r\nimport {FOR_DEBUGGING, FOR_DOCUMENTATION, FOR_LEARNING_MOTOKO} from '../editor/useCases';\r\n\r\nconst block = compileBlock('motoko', {\r\n    title: 'Motoko',\r\n    info: 'Compile an expression to Motoko source code.',\r\n    useCases: [FOR_DEBUGGING, FOR_LEARNING_MOTOKO, FOR_DOCUMENTATION],\r\n    // global: true,\r\n});\r\nexport default block;\r\n","import {compileBlock} from '../block-patterns/compile-patterns';\r\nimport {FOR_DEBUGGING, FOR_DOCUMENTATION, FOR_LEARNING_MOTOKO} from '../editor/useCases';\r\n\r\nconst block = compileBlock('type', {\r\n    title: 'Type',\r\n    info: 'Display the type signature of an expression.',\r\n    useCases: [FOR_DEBUGGING, FOR_LEARNING_MOTOKO, FOR_DOCUMENTATION],\r\n    // global: true,\r\n}, (type, node, editor) => type && editor.compilers.motoko.getTypeString(type));\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType} from '../block-types/types';\r\nimport {formatCurlyBraces, formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = statementBlock({\r\n    title: 'if() then {} else {}',\r\n    info: 'Evaluate based on a given condition',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'trueCase',\r\n        title: 'True',\r\n        type: effectType,\r\n        optional: true,\r\n    }, {\r\n        key: 'falseCase',\r\n        title: 'False',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n}, ({condition, trueCase, falseCase}) => {\r\n    if(String(condition) === 'true') {\r\n        return trueCase;\r\n    }\r\n    if(String(condition) === 'false') {\r\n        return falseCase;\r\n    }\r\n\r\n    let falsePart = falseCase ? ['else', formatCurlyBraces(falseCase)] : '';\r\n    return [\r\n        'if',\r\n        formatParentheses(condition),\r\n        formatCurlyBraces(trueCase || ''),\r\n        falsePart,\r\n    ];\r\n});\r\nexport default block;","import {boolType, valueType} from '../block-types/types';\r\nimport {decompositionCategory} from '../block-categories/categories';\r\nimport {formatCurlyBraces, formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: 'Map Bool',\r\n    info: 'Replace `true` and `false` with two different values',\r\n    category: decompositionCategory,\r\n    topLeft: 'condition',\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'trueCase',\r\n        type: valueType,\r\n    }, {\r\n        key: 'falseCase',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({trueCase, falseCase}) {\r\n            return trueCase.getSharedType(falseCase);\r\n        },\r\n        toMotoko({condition, trueCase, falseCase}) {\r\n            if(condition === true) {\r\n                return trueCase;\r\n            }\r\n            else if(condition === false) {\r\n                return falseCase;\r\n            }\r\n            return formatParentheses(`if ${formatParentheses(condition)} ${formatCurlyBraces(trueCase)} else ${formatCurlyBraces(falseCase)}`);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {identifierType, natType} from '../block-types/types';\r\nimport {memberBlock} from '../block-patterns/member-patterns';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {FaListOl} from 'react-icons/fa';\r\nimport {FOR_ASSIGNING_ID, FOR_BUILDING_API, FOR_STORING_DATA} from '../editor/useCases';\r\nimport {formatCurlyBraces, formatStatement} from '../editor/format/formatHelpers';\r\nimport {STATE_PRIORITY} from '../compilers/utils/compileGlobalMotoko';\r\n\r\nconst block = memberBlock({\r\n    title: 'Counter',\r\n    info: 'Dispense numbers in increasing order',\r\n    useCases: [FOR_ASSIGNING_ID, FOR_BUILDING_API, FOR_STORING_DATA],\r\n    topRight: 'value',\r\n    category: stateCategory,\r\n    icon: FaListOl,\r\n    global: true,\r\n    memberPriority: STATE_PRIORITY,\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        title: 'Current value',\r\n        type: natType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n    }, {\r\n        key: 'nextValue',\r\n        type: natType,\r\n        toMotoko({name}) {\r\n            const parts = [\r\n                `let ${name}_ = ${name};`,\r\n                `${name} += 1;`,\r\n                `${name}_`,\r\n            ];\r\n            return ['do', formatCurlyBraces(parts.reduce((a, b) => formatStatement(a, b)))];\r\n        },\r\n    }],\r\n}, {\r\n    toMotoko({name}) {\r\n        return `private stable var ${name} : Nat = 0;`;\r\n    },\r\n});\r\nexport default block;\r\n","import {valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {FaSearch} from 'react-icons/fa';\r\n\r\nconst debugImportRef = importRef('mo:base/Debug');\r\n\r\nconst block = statementBlock({\r\n    title: 'Print (Debug)',\r\n    info: 'Display a value in the debug console (when deployed)',\r\n    // category: debugCategory,\r\n    icon: FaSearch,\r\n    inputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({value}) => {\r\n    return `${debugImportRef}.print(debug_show(${value}));`;\r\n});\r\nexport default block;\r\n","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = {\r\n    ...arithmeticOperatorBlock('/', (a, b) => a / b),\r\n    info: 'Divide one number by the other',\r\n};\r\nexport default block;","import {operatorCategory} from '../block-categories/categories';\r\nimport {intType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\n\r\nexport const intImportRef = importRef('mo:base/Int');\r\n\r\nconst block = {\r\n    title: '(a // b)',\r\n    info: 'Integer division (remainder is discarded)',\r\n    category: operatorCategory,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: intType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: intType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: intType,\r\n        toMotoko({left, right}) {\r\n            return `${intImportRef}.div(${left}, ${right})`;\r\n        },\r\n        // inferType({left, right}) {\r\n        //     return left.getSharedType(right);\r\n        // },\r\n    }],\r\n};\r\nexport default block;","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {nodeType, valueType} from '../block-types/types';\r\nimport {FaPlayCircle} from 'react-icons/fa';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {getFunctionReturnType} from './Function';\r\nimport {FOR_REUSABLE_LOGIC} from '../editor/useCases';\r\nimport {findNodeSearchOptions} from '../block-patterns/search-patterns';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = statementBlock({\r\n    info: 'Invoke a function in this project',\r\n    title: 'Call Function',\r\n    useCases: [FOR_REUSABLE_LOGIC],\r\n    category: functionCategory,\r\n    icon: FaPlayCircle,\r\n    computeTitle(node, editor) {\r\n        let functionNode = editor.compilers.node.getInput(node, 'functionNode');\r\n        if(!functionNode) {\r\n            return;\r\n        }\r\n        let name = editor.compilers.motoko.getInput(functionNode, 'name');\r\n        let paramNames = editor.compilers.connection.getInput(functionNode, 'params')\r\n            .map(n => editor.compilers.motoko.getInput(n, 'name'));\r\n        return name && `${name}${formatParentheses(paramNames.join(', '))}`;\r\n    },\r\n    customSearch(text, {editor}) {\r\n        return findNodeSearchOptions(text, editor, 'Function', 'functionNode');\r\n    },\r\n    inputs: [{\r\n        key: 'args',\r\n        title: 'Inputs',\r\n        type: valueType,\r\n        multi: true, // TODO: separate arg sockets\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        title: 'Result',\r\n        info: 'Call the function and output the result',\r\n        type: valueType,\r\n        inferType(_, node, compiler) {\r\n            let functionNode = compiler.editor.compilers.node.getInput(node, 'functionNode');\r\n            if(!functionNode) {\r\n                return;\r\n            }\r\n            return getFunctionReturnType(functionNode, compiler.editor);\r\n        },\r\n        toMotoko({args}, node, compiler) {\r\n            let functionNode = compiler.editor.compilers.node.getInput(node, 'functionNode');\r\n            if(!functionNode) {\r\n                return;\r\n            }\r\n            let name = compiler.getInput(functionNode, 'name');\r\n            if(!name) {\r\n                return;\r\n            }\r\n            return `${name}(${args.join(', ')})`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'functionNode',\r\n        type: nodeType.withMeta({block: 'Function'}),\r\n    }],\r\n}, ({functionNode, args}, node, compiler) => {\r\n    let name = compiler.getInput(functionNode, 'name');\r\n    if(!name) {\r\n        return;\r\n    }\r\n    return `ignore ${name}${formatParentheses(args.join(', '))};`;\r\n});\r\nexport default block;\r\n","import {nat32Type, textType} from '../block-types/types';\r\nimport {FaHashtag} from 'react-icons/fa';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\n\r\nexport const textImportRef = importRef('mo:base/Text');\r\n\r\nconst block = {\r\n    title: 'Hash (Text)',\r\n    // category: textCategory,\r\n    icon: FaHashtag,\r\n    info: 'Compute a 32-bit hash for the provided Text value',\r\n    inputs: [{\r\n        key: 'value',\r\n        type: textType,\r\n    }],\r\n    outputs: [{\r\n        key: 'hash',\r\n        type: nat32Type,\r\n        toMotoko({value}) {\r\n            return `${textImportRef}.hash(${value})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Boolean',\r\n    customSearch(text) {\r\n        for(let value of [true, false]) {\r\n            let title = String(value);\r\n            if(title.startsWith(text.toLowerCase())) {\r\n                return {\r\n                    title,\r\n                    data: {\r\n                        value,\r\n                    },\r\n                };\r\n            }\r\n        }\r\n    },\r\n}, boolType);\r\nexport default block;","import {typeCategory} from '../block-categories/categories';\r\nimport {customType, referenceType, typeType, valueType} from '../block-types/types';\r\nimport {FaPencilAlt} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Custom Type',\r\n    info: 'A special user-defined type',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    icon: FaPencilAlt,\r\n    hidden: true,////\r\n    inputs: [{\r\n        key: 'reference',\r\n        type: referenceType,\r\n    }, {\r\n        key: 'generics',\r\n        type: typeType.of(valueType),\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(customType),\r\n        inferType(args, node, compiler) {\r\n            let reference = compiler.editor.compilers.motoko.getInput(node, 'reference');\r\n            let generics = compiler.editor.compilers.type.getInput(node, 'generics');\r\n            if(!reference) {\r\n                return;\r\n            }\r\n            return customType.of(...generics).withMeta({name: reference}); ///\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {floatType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Float',\r\n    customSearch(text) {\r\n        const value = +text;\r\n        if(!isNaN(value)) {\r\n            return {\r\n                title: value,\r\n                priority: 1,\r\n                data: {\r\n                    value,\r\n                },\r\n            };\r\n        }\r\n    },\r\n}, floatType);\r\nexport default block;","import {identifierType} from '../block-types/types';\r\nimport {FaItalic} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Name',\r\n    info: identifierType.data.info,\r\n    // category: defaultCategory,\r\n    icon: FaItalic,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: identifierType,\r\n        control: true,\r\n        toMotoko({value}) {\r\n            return value;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {intType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Integer',\r\n    customSearch(text) {\r\n        const value = +text;\r\n        if(value % 1 === 0) {\r\n            return {\r\n                title: value,\r\n                priority: 2,\r\n                data: {\r\n                    value,\r\n                },\r\n            };\r\n        }\r\n    },\r\n}, intType);\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {natType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Natural Number',\r\n    customSearch(text) {\r\n        if(text.startsWith('-')) {\r\n            return;\r\n        }\r\n        const value = +text;\r\n        if(value >= 0 && value % 1 === 0) {\r\n            return {\r\n                title: value,\r\n                priority: 3,\r\n                data: {\r\n                    value,\r\n                },\r\n            };\r\n        }\r\n    },\r\n}, natType);\r\nexport default block;\r\n","import {literalCategory} from '../block-categories/categories';\r\nimport {tupleType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Pair',\r\n    info: 'An ordered pair of two values',\r\n    category: literalCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `Pair ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: valueType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: tupleType.of(valueType, valueType),\r\n        inferType({left, right}) {\r\n            return tupleType.of(left, right);\r\n        },\r\n        toMotoko({left, right}) {\r\n            return `(${left}, ${right})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {tupleType, typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Pair of Types',\r\n    info: 'An ordered pair of two types',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && editor.compilers.motoko.getTypeString(type);\r\n    },\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: typeType.of(valueType),\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(tupleType.of(valueType, valueType)),\r\n        inferType({left, right}) {\r\n            return /*typeType.of(*/tupleType.of(left, right)/*)*/;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {principalType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\n\r\nexport const principalImportRef = importRef('mo:base/Principal');\r\n\r\nconst block = literalBlock({\r\n    title: 'Principal (Address)',\r\n    // customSearch(text) {\r\n    //     if(isPrincipal(text)) {\r\n    //         return {\r\n    //             title: `${text}`,\r\n    //             data: {\r\n    //                 value: text,\r\n    //             },\r\n    //         };\r\n    //     }\r\n    // },\r\n}, principalType, value => `${principalImportRef}.fromText(${JSON.stringify(value)})`);\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {textType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Text',\r\n    customSearch(text) {\r\n        if(text.startsWith('\"') || text.startsWith('\\'')) {\r\n            text = text.slice(1);\r\n            if(text.endsWith('\"') || text.endsWith('\\'')) {\r\n                text = text.slice(-1);\r\n            }\r\n            return {\r\n                title: `\"${text}\"`,\r\n                data: {\r\n                    value: text,\r\n                },\r\n            };\r\n        }\r\n    },\r\n}, textType, JSON.stringify);\r\nexport default block;\r\n","import {literalCategory} from '../block-categories/categories';\r\nimport {tupleType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Tuple',\r\n    info: 'Create a tuple value from the provided input values',\r\n    category: literalCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `Tuple ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'inputs',\r\n        type: valueType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: tupleType,\r\n        inferType({inputs}) {\r\n            return tupleType.of(...inputs);\r\n        },\r\n        toMotoko({inputs}) {\r\n            return `(${inputs.join(', ')})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {tupleType, typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Tuple of Types',\r\n    info: 'Create a tuple value from the provided input types',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && editor.compilers.motoko.getTypeString(type);\r\n    },\r\n    inputs: [{\r\n        key: 'types',\r\n        type: typeType.of(valueType),\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(tupleType),\r\n        inferType({types}) {\r\n            return /*typeType.of(*/tupleType.of(...types/*.map(t => t.generics[0])*/)/*)*/; // Unwrap Type<?> inputs\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Type',\r\n    info: typeType.data.info,\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(valueType),\r\n        control: true,\r\n        inferType({value}) {\r\n            // return typeType.of(value);\r\n            return value;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType, intType, unitType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {formatStatementBlock} from '../editor/format/formatHelpers';\r\n\r\nexport const iterImportRef = importRef('mo:base/Iter');\r\n\r\nconst block = statementBlock({\r\n    title: 'for(min..max) {}',\r\n    info: 'Repeat for a range of integers (inclusive)',\r\n    inputs: [{\r\n        key: 'min',\r\n        type: intType,\r\n    }, {\r\n        key: 'max',\r\n        type: intType,\r\n    }, {\r\n        key: 'loop',\r\n        type: effectType.of(unitType),\r\n    }],\r\n    outputs: [{\r\n        key: 'item',\r\n        type: intType,\r\n        toMotoko(_, node) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'inclusive',\r\n        type: boolType,\r\n    }],\r\n}, ({min, max, loop, inclusive}, node) => {\r\n    return `for (${nodeIdentifierRef(node)} in ${iterImportRef}.range(${min}, ${inclusive ? max : `(${max}) - 1`})) ${formatStatementBlock()};`;\r\n});\r\nexport default block;","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType, unitType} from '../block-types/types';\r\nimport {formatParentheses, formatStatementBlock} from '../editor/format/formatHelpers';\r\n\r\nconst block = statementBlock({\r\n    title: 'while() {}',\r\n    info: 'Repeat while the condition is true',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'loop',\r\n        type: effectType.of(unitType),\r\n        optional: true,\r\n    }],\r\n}, ({condition, loop}) => {\r\n    return [\r\n        'while',\r\n        formatParentheses(condition),\r\n        formatStatementBlock(loop ?? ''),\r\n    ];\r\n});\r\nexport default block;","import {containerType} from '../block-types/types';\r\nimport {actorCategory} from '../block-categories/categories';\r\nimport compileGlobalMotoko from '../compilers/utils/compileGlobalMotoko';\r\n\r\nconst block = {\r\n    info: 'The top-level actor for the application. All member blocks reference this actor by default.',\r\n    category: actorCategory,\r\n    topLeft: 'actor',\r\n    // global: true,\r\n    hidden: true,///\r\n    inputs: [],\r\n    outputs: [{\r\n        key: 'actor',\r\n        type: containerType,\r\n        toMotoko(_, node, compiler) {\r\n            return compileGlobalMotoko(compiler.editor);\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {principalType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport {FOR_CONFIGURATION} from '../editor/useCases';\r\nimport {mainSharedRef} from '../compilers/utils/compileGlobalMotoko';\r\n\r\nconst block = {\r\n    title: 'Installer Details',\r\n    info: 'The owner of the top-level smart contract',\r\n    useCases: [FOR_CONFIGURATION],\r\n    category: paramCategory,\r\n    // global: true,\r\n    outputs: [{\r\n        key: 'caller',\r\n        type: principalType,\r\n        toMotoko(args, node, compiler) {\r\n            return `${mainSharedRef(compiler.editor)}.caller`;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {nodeType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\nimport {FOR_CONFIGURATION} from '../editor/useCases';\r\nimport {findNodeSearchOptions} from '../block-patterns/search-patterns';\r\n\r\nconst block = {\r\n    title: 'Read Config',\r\n    info: 'Get a top-level configuration value',\r\n    useCases: [FOR_CONFIGURATION],\r\n    category: paramCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    customSearch(text, {editor}) {\r\n        return findNodeSearchOptions(text, editor, 'MainParameter', 'configNode');\r\n    },\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType(args, node, compiler) {\r\n            let configNode = compiler.editor.compilers.node.getInput(node, 'configNode');\r\n            if(!configNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(configNode, 'type');\r\n        },\r\n        toMotoko(args, node, compiler) {\r\n            let configNode = compiler.editor.compilers.node.getInput(node, 'configNode');\r\n            if(!configNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(configNode, 'name');\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'configNode',\r\n        type: nodeType.withMeta({block: 'MainParameter'}),\r\n    }],\r\n};\r\nexport default block;\r\n","import {mapType, optionalType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Map)',\r\n    info: 'Find the value corresponding to a given key, returning null if nothing is found',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: optionalType.of(valueType),\r\n        inferType({map}) {\r\n            if(mapType.isSubtype(map)) {\r\n                return optionalType.of(map.generics[1]);\r\n            }\r\n        },\r\n        toMotoko({map, key}) {\r\n            return `${map}.get(${key})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {mapType, optionalType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\nimport {optionImportRef} from './OptionalOrDefault';\r\n\r\nconst block = {\r\n    title: 'Get or Default (Map)',\r\n    info: 'Find the value corresponding to a given key, returning the specified default value if nothing is found',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }, {\r\n        key: 'defaultValue',\r\n        title: 'Default',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: optionalType.of(valueType),\r\n        inferType({map}) {\r\n            if(mapType.isSubtype(map)) {\r\n                return map.generics[1];\r\n            }\r\n        },\r\n        toMotoko({map, key, defaultValue}) {\r\n            return `${optionImportRef}.get(${map}.get(${key}), ${defaultValue})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {mapType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Put (Map)',\r\n    info: 'Store a value at the given key',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({map, key, value}) => {\r\n    return `${map}.put(${key}, ${value});`;\r\n});\r\nexport default block;\r\n","import {mapType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaCompress} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Remove (Map)',\r\n    info: 'Delete the value associated with a specific key',\r\n    category: collectionCategory,\r\n    icon: FaCompress,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n}, ({map, key}) => {\r\n    return `${map}.remove(${key});`;\r\n});\r\nexport default block;\r\n","import {boolType, mapType, natType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {formatCurlyBraces, formatParentheses, formatStatementBlock} from '../editor/format/formatHelpers';\r\nimport {optionImportRef} from './OptionalOrDefault';\r\nimport {FOR_TRANSACTIONS} from '../editor/useCases';\r\n\r\nconst block = statementBlock({\r\n    title: 'Transfer (Map)',\r\n    info: 'Attempt to subtract an amount from one key and add to another',\r\n    useCases: [FOR_TRANSACTIONS],\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'from',\r\n        type: valueType,\r\n    }, {\r\n        key: 'to',\r\n        type: valueType,\r\n    }, {\r\n        key: 'amount',\r\n        type: natType,\r\n    }],\r\n    outputs: [{\r\n        key: 'success',\r\n        type: boolType,\r\n        toMotoko(args, node) {\r\n            return nodeIdentifierRef(node, 'success');\r\n        },\r\n    }],\r\n}, ({map, from, to, amount}, node) => {\r\n    const successRef = nodeIdentifierRef(node, 'success');\r\n    const amountRef = nodeIdentifierRef(node, 'amount');\r\n    const fromBalanceRef = nodeIdentifierRef(node, 'balance');\r\n    return `let ${successRef} = do ${formatStatementBlock([\r\n        `let ${fromBalanceRef} = ${optionImportRef}.get(${map}.get(${from}), 0);\\n`,\r\n        `let ${amountRef} = ${amount};\\n`,\r\n        `if ${formatParentheses(`${fromBalanceRef} >= ${amountRef}`)} ${formatCurlyBraces([\r\n            `${map}.put(${from}, ${fromBalanceRef} - ${amountRef});\\n`,\r\n            `${map}.put(${to}, ${optionImportRef}.get(${map}.get(${to}), 0) + ${amountRef});\\n`,\r\n            true,\r\n        ])}`,\r\n        `else ${formatCurlyBraces(false)}`,\r\n    ])}`;\r\n});\r\nexport default block;\r\n","import {operatorCategory} from '../block-categories/categories';\r\nimport {formatCurlyBraces, formatParentheses} from '../editor/format/formatHelpers';\r\nimport {floatType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Maximum',\r\n    info: 'Find the maximum of two numbers',\r\n    category: operatorCategory,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: floatType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: floatType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: floatType,\r\n        toMotoko({left, right}) {\r\n            return formatParentheses([\r\n                'if',\r\n                formatParentheses(`${left} > ${right}`),\r\n                formatCurlyBraces(left),\r\n                'else',\r\n                formatCurlyBraces(right),\r\n            ]);\r\n        },\r\n        // inferType({left, right}) {\r\n        //     return left.getSharedType(right);\r\n        // },\r\n    }],\r\n};\r\nexport default block;\r\n","import {operatorCategory} from '../block-categories/categories';\r\nimport {formatCurlyBraces, formatParentheses} from '../editor/format/formatHelpers';\r\nimport {floatType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Minimum',\r\n    info: 'Find the minimum of two numbers',\r\n    category: operatorCategory,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: floatType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: floatType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: floatType,\r\n        toMotoko({left, right}) {\r\n            return formatParentheses([\r\n                'if',\r\n                formatParentheses(`${left} < ${right}`),\r\n                formatCurlyBraces(left),\r\n                'else',\r\n                formatCurlyBraces(right),\r\n            ]);\r\n        },\r\n        // inferType({left, right}) {\r\n        //     return left.getSharedType(right);\r\n        // },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = {\r\n    ...arithmeticOperatorBlock('*', (a, b) => a * b),\r\n    info: 'Multiply two numbers',\r\n};\r\nexport default block;","import {\r\n    blobType,\r\n    mapType,\r\n    nat32Type,\r\n    principalType,\r\n    textType,\r\n    typeType,\r\n    unionType,\r\n    valueType,\r\n} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FOR_STORING_DATA} from '../editor/useCases';\r\n\r\nexport const hashMapImportRef = importRef('mo:base/HashMap');\r\nconst getKeyImportRef = (type) => importRef(`mo:base/${type.name}`);\r\n\r\nconst block = {\r\n    title: 'Create Map',\r\n    info: 'Construct an empty HashMap',\r\n    useCases: [FOR_STORING_DATA],\r\n    category: collectionCategory,\r\n    icon: collectionCategory.data.icon,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `new HashMap<${editor.compilers.motoko.getTypeString(type.generics[0])}, ${editor.compilers.motoko.getTypeString(type.generics[1])}>`;\r\n    },\r\n    inputs: [{\r\n        key: 'keyType',\r\n        type: unionType.of(textType, principalType, blobType, nat32Type),\r\n    }, {\r\n        key: 'valueType',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: mapType,\r\n        inferType({keyType, valueType}) {\r\n            return mapType.of(keyType, valueType);\r\n        },\r\n        toMotoko(args, node, compiler) {\r\n            let {keyType, valueType} = compiler.editor.compilers.type.getInputArgs(node);\r\n            let keyImportRef = getKeyImportRef(keyType);\r\n            let keyTypeString = compiler.getTypeString(keyType);\r\n            let valueTypeString = compiler.getTypeString(valueType);\r\n            let hashFunction = keyType === nat32Type\r\n                ? 'func (x) {x}'\r\n                : `${keyImportRef}.hash`;\r\n            return `${hashMapImportRef}.HashMap<${keyTypeString}, ${valueTypeString}>(0, ${keyImportRef}.equal, ${hashFunction})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {unaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = {\r\n    ...unaryOperatorBlock(boolType, 'not', (a) => !a),\r\n    info: 'Logically invert the value (swap true with false and vice versa)',\r\n};\r\nexport default block;\r\n","import {nullType} from '../block-types/types';\r\nimport {literalCategory} from '../block-categories/categories';\r\n\r\nconst block = {\r\n    category: literalCategory,\r\n    info: 'The default Optional value',\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: nullType,\r\n        toMotoko() {\r\n            return 'null';\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {containerType, identifierType, memberType, objectType} from '../block-types/types';\r\nimport {actorCategory} from '../block-categories/categories';\r\nimport {formatMembers, formatStatementBlock} from '../editor/format/formatHelpers';\r\nimport {visibilityControlProp} from '../block-patterns/member-patterns';\r\n\r\nconst block = {\r\n    info: objectType.data.info,\r\n    category: actorCategory,\r\n    topLeft: 'parent',\r\n    topRight: 'members',\r\n    // global: true,\r\n    hidden: true,///\r\n    computeTitle(node, editor) {\r\n        let {name} = editor.compilers.motoko.getInputArgs(node);\r\n        return name && `object ${name}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }, {\r\n        key: 'members',\r\n        type: memberType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'parent',\r\n        type: containerType,\r\n        toMotoko({visibility, name, members}) {\r\n            return [\r\n                visibility,\r\n                'object',\r\n                name,\r\n                formatStatementBlock(formatMembers(members)),\r\n            ];\r\n        },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(),\r\n    ],\r\n};\r\nexport default block;","import {optionalType, valueType} from '../block-types/types';\r\nimport {operatorCategory} from '../block-categories/categories';\r\nimport {FOR_ERROR_HANDLING} from '../editor/useCases';\r\nimport {formatOptionalParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    title: 'Optional (?a)',\r\n    info: 'Create an optional version of the input value',\r\n    useCases: [FOR_ERROR_HANDLING],\r\n    category: operatorCategory,\r\n    // topRight: 'result',\r\n    inputs: [{\r\n        key: 'input',\r\n        title: 'Value',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: optionalType,\r\n        inferType({input}) {\r\n            return optionalType.of(input);\r\n        },\r\n        toMotoko({input}) {\r\n            return `?${formatOptionalParentheses(input)}`;\r\n        },\r\n    }, {\r\n        key: 'null',\r\n        type: optionalType,\r\n        inferType({input}) {\r\n            return optionalType.of(input);\r\n        },\r\n        toMotoko({input}) {\r\n            return 'null';\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType, optionalType, valueType} from '../block-types/types';\r\nimport {decompositionCategory} from '../block-categories/categories';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {FOR_ERROR_HANDLING} from '../editor/useCases';\r\nimport {formatOptionalParentheses, formatParentheses, formatStatementBlock} from '../editor/format/formatHelpers';\r\n\r\nconst block = statementBlock({\r\n    title: 'Check Non-Null',\r\n    info: 'Run different logic depending on whether an Optional value is null',\r\n    useCases: [FOR_ERROR_HANDLING],\r\n    category: decompositionCategory,\r\n    inputs: [{\r\n        key: 'input',\r\n        type: optionalType,\r\n    }, {\r\n        key: 'valueCase',\r\n        title: 'Has value',\r\n        type: effectType,\r\n        optional: true,\r\n    }, {\r\n        key: 'nullCase',\r\n        title: 'Value is null',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'condition',\r\n        title: '!= null',\r\n        type: boolType,\r\n        toMotoko({input}, node) {\r\n            return `${formatOptionalParentheses(nodeIdentifierRef(node))} != null`;\r\n        },\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            if(optionalType.isSubtype(input)) {\r\n                return input.generics[0];\r\n            }\r\n        },\r\n        toMotoko({input}, node) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n}, ({input, valueCase, nullCase}, node) => {\r\n    if(String(input) === 'null') {\r\n        return nullCase;\r\n    }\r\n\r\n    let valuePart = valueCase ? `case (?${nodeIdentifierRef(node)}) {${valueCase}};` : '';\r\n    let nullPart = nullCase ? `case null {${nullCase}};` : '';\r\n\r\n    return [\r\n        'switch',\r\n        formatParentheses(input),\r\n        formatStatementBlock(`${valuePart}${nullPart && ' ' + nullPart}`),\r\n    ];\r\n});\r\nexport default block;","import {logicalBinaryOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = {\r\n    ...logicalBinaryOperatorBlock('or', (a, b) => a || b),\r\n    info: 'Return true if either of the input values are true',\r\n};\r\nexport default block;\r\n","import {identifierType, paramType, typeType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport {FOR_REUSABLE_LOGIC} from '../editor/useCases';\r\nimport {getUserDefinedName} from '../block-patterns/member-patterns';\r\n\r\nconst block = {\r\n    info: 'An input parameter to a class or function',\r\n    useCases: [FOR_REUSABLE_LOGIC],\r\n    topLeft: 'param',\r\n    topRight: 'value',\r\n    category: paramCategory,\r\n    computeTitle(node, editor) {\r\n        // let name = editor.compilers.motoko.getInput(node, 'name');\r\n        let name = getUserDefinedName(node, editor);\r\n        let type = editor.compilers.type.getInput(node, 'type');\r\n        return name && `${name} : ${type ? editor.compilers.motoko.getTypeString(type) : 'Any'}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'param',\r\n        type: paramType,\r\n        toMotoko({name, type}) {\r\n            return `${name} : ${type}`;\r\n        },\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n        inferType({type}) {\r\n            return type;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {referenceType, textType} from '../block-types/types';\r\nimport {FaItalic} from 'react-icons/fa';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\n\r\nconst block = {\r\n    title: 'Import Reference',\r\n    info: 'Create a reference to an externally defined module',\r\n    // category: defaultCategory,\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    icon: FaItalic,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: referenceType,\r\n        toMotoko({path}) {\r\n            return importRef(path);\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'path',\r\n        type: textType,\r\n        config: {\r\n            validation: {\r\n                minLength: 1,\r\n            },\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {identifierType, referenceType, textType} from '../block-types/types';\r\nimport {FOR_CUSTOM_LOGIC} from '../editor/useCases';\r\n\r\nconst block = {\r\n    title: 'Path (a.b)',\r\n    info: 'Refer to a child of the specified reference',\r\n    // category: defaultCategory,\r\n    useCases: [FOR_CUSTOM_LOGIC],\r\n    topRight: 'reference',\r\n    inputs: [{\r\n        key: 'parent',\r\n        type: textType,\r\n        config: {\r\n            validation: {\r\n                minLength: 1,\r\n            },\r\n        },\r\n    }],\r\n    outputs: [{\r\n        key: 'reference',\r\n        type: referenceType,\r\n        toMotoko({parent, name}) {\r\n            return `${parent}.${name}`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        config: {\r\n            validation: {\r\n                minLength: 1,\r\n            },\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {effectType, unitType, valueType} from '../block-types/types';\r\nimport {endStatementBlock} from '../block-patterns/statement-patterns';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FaCaretLeft} from 'react-icons/fa';\r\nimport {FOR_BUILDING_API} from '../editor/useCases';\r\n\r\nconst block = endStatementBlock({\r\n    info: 'End a function\\'s execution path',\r\n    useCases: [FOR_BUILDING_API],\r\n    category: functionCategory,\r\n    icon: FaCaretLeft,\r\n    inputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        optional: true,\r\n    }],\r\n    // controls: [{\r\n    //     key: 'functionNode',\r\n    //     config: {\r\n    //         controlType: NodeControlHandle,\r\n    //         controlProps: {\r\n    //             component: 'Function',\r\n    //         },\r\n    //     },\r\n    // }],\r\n}, {\r\n    inferType({value}) {\r\n        return effectType.of(value || unitType);\r\n    },\r\n    toMotoko({value}) {\r\n        return `return${value ? ' ' + value : ''};`;\r\n    },\r\n});\r\nexport default block;","import {effectType, identifierType, valueType} from '../block-types/types';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FOR_CONFIGURATION} from '../editor/useCases';\r\nimport {formatCurlyBraces} from '../editor/format/formatHelpers';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {FiAlignLeft} from 'react-icons/fi';\r\n\r\nconst block = {\r\n    info: 'Run a statement using the given value',\r\n    useCases: [FOR_CONFIGURATION],\r\n    icon: FiAlignLeft,\r\n    category: functionCategory,\r\n    topLeft: 'input',\r\n    topRight: 'statement',\r\n    inputs: [{\r\n        key: 'input',\r\n        type: valueType,\r\n    }, {\r\n        key: 'statement',\r\n        type: effectType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            return input;\r\n        },\r\n        toMotoko({name}, node) {\r\n            return name || nodeIdentifierRef(node);\r\n        },\r\n    }, {\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            return input;\r\n        },\r\n        toMotoko({name, input, statement}, node) {\r\n            name = name || nodeIdentifierRef(node);\r\n            return `do ${formatCurlyBraces(`var ${name} = ${input};${statement ? `\\n${statement}` : ''}\\n${name}`)}`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }],\r\n};\r\nexport default block;\r\n","import {decompositionCategory} from '../block-categories/categories';\r\nimport {tupleType, valueType} from '../block-types/types';\r\nimport {formatParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = {\r\n    info: 'Access the left and right elements of a pair',\r\n    category: decompositionCategory,\r\n    inputs: [{\r\n        key: 'value',\r\n        title: 'Pair',\r\n        type: tupleType.of(valueType, valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'left',\r\n        type: valueType,\r\n        inferType({value}) {\r\n            if(value) {\r\n                return value.generics[0];\r\n            }\r\n        },\r\n        toMotoko({value}) {\r\n            return `${formatParentheses(value)}.0`;\r\n        },\r\n    }, {\r\n        key: 'right',\r\n        type: valueType,\r\n        inferType({value}) {\r\n            if(value) {\r\n                return value.generics[1];\r\n            }\r\n        },\r\n        toMotoko({value}) {\r\n            return `${formatParentheses(value)}.1`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {nodeType, valueType} from '../block-types/types';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\nimport {FOR_BUILDING_API} from '../editor/useCases';\r\nimport {findNodeSearchOptions} from '../block-patterns/search-patterns';\r\n\r\nconst block = {\r\n    title: 'Read State',\r\n    info: 'Get the current value of a state',\r\n    useCases: [FOR_BUILDING_API],\r\n    category: stateCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    customSearch(text, {editor}) {\r\n        return findNodeSearchOptions(text, editor, 'State', 'stateNode');\r\n    },\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType(args, node, compiler) {\r\n            let stateNode = compiler.editor.compilers.node.getInput(node, 'stateNode');\r\n            if(!stateNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(stateNode, 'initialValue');\r\n        },\r\n        toMotoko(args, node, compiler) {\r\n            let stateNode = compiler.editor.compilers.node.getInput(node, 'stateNode');\r\n            if(!stateNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(stateNode, 'name');\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'stateNode',\r\n        type: nodeType.withMeta({block: 'State'}),\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {nodeType, valueType} from '../block-types/types';\r\nimport {stateWriteIcon} from './State';\r\nimport {FOR_STORING_DATA} from '../editor/useCases';\r\n\r\nconst block = statementBlock({\r\n    title: 'Write State',\r\n    info: 'Set the value of a state',\r\n    useCases: [FOR_STORING_DATA],\r\n    category: stateCategory,\r\n    icon: stateWriteIcon,\r\n    inputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        // optional: true,\r\n    }],\r\n    // outputs: [{\r\n    //     key: 'newValue',\r\n    //     type: 'Value',\r\n    //     toMotoko({node: stateNode, value}, node, compiler) {\r\n    //         let name = compiler.getOutput(stateNode, 'name');\r\n    //         if(!name) {\r\n    //             return;\r\n    //         }\r\n    //         return `(${name} := ${value || '()'})`;\r\n    //     },\r\n    // }],\r\n    controls: [{\r\n        key: 'stateNode',\r\n        type: nodeType.withMeta({block: 'State'}),\r\n    }],\r\n}, ({stateNode, value}, node, compiler) => {\r\n    let name = compiler.getInput(stateNode, 'name');\r\n    if(!name) {\r\n        return;\r\n    }\r\n    return `${name} := ${value};`;\r\n});\r\nexport default block;\r\n","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = arithmeticOperatorBlock('-', (a, b) => a - b);\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {textType} from '../block-types/types';\r\n\r\nconst block = {\r\n    ...binaryOperatorBlock(textType, '#', (a, b) => a || b),\r\n    title: 'Concatenate (Text)',\r\n    info: 'Add text values directly one after each other',\r\n};\r\nexport default block;\r\n","import {natType, textType} from '../block-types/types';\r\nimport {FaSitemap} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Length (Text)',\r\n    info: 'Find the number of characters in a Text value',\r\n    // category: textCategory,\r\n    icon: FaSitemap,\r\n    inputs: [{\r\n        key: 'text',\r\n        type: textType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: natType,\r\n        toMotoko({text}) {\r\n            return `${text}.size()`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {identifierType, typeType, valueType} from '../block-types/types';\r\nimport {getUserDefinedName, memberBlock, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {typeCategory} from '../block-categories/categories';\r\nimport {TYPE_PRIORITY} from '../compilers/utils/compileGlobalMotoko';\r\n\r\nconst block = memberBlock({\r\n    title: 'Named Type',\r\n    info: 'An actor-level type definition',\r\n    category: typeCategory,\r\n    topRight: 'type',\r\n    global: true,\r\n    memberPriority: TYPE_PRIORITY,\r\n    shortcuts: [{\r\n        block: 'TypeMemberReference',\r\n        nodeKey: 'typeNode',\r\n    }],\r\n    computeTitle(node, editor) {\r\n        let name = getUserDefinedName(node, editor);\r\n        let type = editor.compilers.type.getInput(node, 'typeInput');//?.generics[0];\r\n        return type && `${name || '(?)'} = ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'typeInput',\r\n        title: 'Definition',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n        inferType({name, typeInput}) {\r\n            if(!typeInput.isAbstract()) {\r\n                // return typeType.of(typeInput);\r\n                return typeInput.withMeta({name});///\r\n            }\r\n        },\r\n        // toMotoko({name}) {\r\n        //     return name;\r\n        // },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(),\r\n    ],\r\n}, {\r\n    toMotoko({visibility, name, typeInput}, node, compiler) {\r\n        const modifiers = [visibility !== 'system' && visibility].filter(m => m).join(' ');\r\n\r\n        return `${modifiers && modifiers + ' '}type ${name} = ${typeInput};`;\r\n    },\r\n});\r\nexport default block;\r\n","import {nodeType, typeType, valueType} from '../block-types/types';\r\nimport {typeCategory} from '../block-categories/categories';\r\nimport {FaAngleRight} from 'react-icons/fa';\r\nimport {findNodeSearchOptions} from '../block-patterns/search-patterns';\r\n\r\nconst block = {\r\n    title: 'Type Reference',\r\n    info: 'Reference a global named type',\r\n    category: typeCategory,\r\n    icon: FaAngleRight,\r\n    topRight: 'type',\r\n    // hidden: true,////\r\n    customSearch(text, {editor}) {\r\n        return findNodeSearchOptions(text, editor, 'TypeMember', 'typeNode');\r\n    },\r\n    computeTitle(node, editor) {\r\n        let typeNode = editor.compilers.node.getInput(node, 'typeNode');\r\n        if(!typeNode) {\r\n            return;\r\n        }\r\n        return editor.compilers.motoko.getInput(typeNode, 'name');\r\n    },\r\n    outputs: [{\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n        inferType(args, node, compiler) {\r\n            let typeNode = compiler.editor.compilers.node.getInput(node, 'typeNode');\r\n            if(!typeNode) {\r\n                return;\r\n            }\r\n            return compiler.editor.compilers.type.getInput(typeNode, 'type');\r\n        },\r\n        // toMotoko({name}) {\r\n        //     return name;\r\n        // },\r\n    }],\r\n    controls: [{\r\n        key: 'typeNode',\r\n        type: nodeType.withMeta({block: 'TypeMember'}),\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {functionType, valueType} from '../block-types/types';\r\nimport {FaRegPlayCircle} from 'react-icons/fa';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FOR_CUSTOM_LOGIC, FOR_REUSABLE_LOGIC} from '../editor/useCases';\r\nimport {formatOptionalParentheses} from '../editor/format/formatHelpers';\r\n\r\nconst block = statementBlock({\r\n    title: 'Call Value',\r\n    info: 'Invoke a callable value',\r\n    useCases: [FOR_REUSABLE_LOGIC, FOR_CUSTOM_LOGIC],\r\n    category: functionCategory,\r\n    icon: FaRegPlayCircle,\r\n    inputs: [{\r\n        key: 'callable',\r\n        type: functionType,\r\n    }, {\r\n        key: 'args',\r\n        title: 'Inputs',\r\n        type: valueType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        title: 'Result',\r\n        info: 'Call the function and output the result',\r\n        type: valueType,\r\n        inferType({callable}) {\r\n            if(functionType.isSubtype(callable)) {\r\n                return callable.generics[1];\r\n            }\r\n            return functionType;///\r\n        },\r\n        toMotoko({callable, args}, node, compiler) {\r\n            return `${formatOptionalParentheses(callable)}(${args.join(', ')})`;\r\n        },\r\n    }],\r\n}, ({callable, args}, node, compiler) => {\r\n\r\n    return `ignore ${callable}${formatOptionalParentheses(args.join(', '))};`;\r\n});\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {identifierType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport nodeIdentifierRef from '../compilers/utils/nodeIdentifierRef';\r\nimport {FOR_REUSABLE_LOGIC} from '../editor/useCases';\r\n\r\nconst block = statementBlock({\r\n    title: 'Local Variable',\r\n    info: 'Store and retrieve data from within a function',\r\n    useCases: [FOR_REUSABLE_LOGIC],\r\n    category: paramCategory,\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }, {\r\n        key: 'initialValue',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({initialValue}) {\r\n            return initialValue;\r\n        },\r\n        toMotoko({name}, node) {\r\n            return name || nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n}, ({name, initialValue}, node) => {\r\n    return `var ${name || nodeIdentifierRef(node)} = ${initialValue};`;\r\n});\r\nexport default block;","import styled from 'styled-components';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport React from 'react';\r\n\r\nconst StyledReactTooltip = styled(ReactTooltip)`\r\n    z-index: 1000;\r\n    padding: .5em 1em !important;\r\n\r\n    .multi-line {\r\n        text-align: left !important;\r\n    }\r\n`;\r\n\r\nexport default function GlobalTooltip() {\r\n    // const afterShow = (event) => {\r\n    //     console.log(event);///\r\n    // };\r\n\r\n    return (\r\n        <StyledReactTooltip\r\n            backgroundColor=\"#111\"\r\n            place=\"bottom\"\r\n            delayShow={200}\r\n            // afterShow={afterShow}\r\n            multiline={true}\r\n        />\r\n    );\r\n}\r\n","var _linearGradient;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGradient(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _linearGradient || (_linearGradient = /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"svg-block-gradient\",\n    width: 0,\n    height: 0,\n    x2: 1,\n    y2: 1\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#00EFFB\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"50%\",\n    stopColor: \"#8649E1\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#F900E3\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGradient);\nexport default __webpack_public_path__ + \"static/media/gradient.04de6742.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport {IconContext} from 'react-icons';\r\nimport {ReactComponent as Gradient} from '../../../assets/icons/gradient.svg';\r\n\r\nconst MenuContainer = styled.div`\r\n    background: #FFF;\r\n    margin-bottom: 3px;\r\n    padding: 2px;\r\n    position: relative;\r\n    background-clip: padding-box;\r\n    z-index: 10;\r\n\r\n    :before {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        height: 2px;\r\n        background: linear-gradient(90deg, #00EFFB, #8649E1, #F900E3);\r\n        z-index: -1;\r\n        margin-bottom: -2px;\r\n    }\r\n\r\n`;\r\n\r\nconst HiddenGradient = styled(Gradient)`\r\n    height: 0;\r\n    width: 0;\r\n`;\r\n\r\nexport default function TopMenu({className, children, ...others}) {\r\n    return (\r\n        <MenuContainer className={classNames('top-menu text-secondary d-flex justify-content-start align-items-center', className)} {...others}>\r\n            <HiddenGradient/>\r\n            <IconContext.Provider value={{style: {verticalAlign: 'bottom'/*, transform: 'translateY(-1px)'*/}}}>\r\n                {children}\r\n            </IconContext.Provider>\r\n        </MenuContainer>\r\n    );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport styled from 'styled-components';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\n\r\nlet ItemContainer = styled.div`\r\n\r\n`;\r\n\r\nexport default function MenuItem({variant, tooltip, className, ...others}) {\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <ItemContainer\r\n            className={classNames('menu-item noselect px-3 py-2 mb-0 d-inline-block text-center', variant && `text-${variant}`, className)}\r\n            data-tip={tooltip}\r\n            data-delay-show={100}\r\n            {...others}>\r\n        </ItemContainer>\r\n    );\r\n}","import useLocalStorage from '../utils/useLocalStorage';\r\n\r\nexport default function useButtonTitleState() {\r\n    return useLocalStorage('blocks.buttonTitles', true);\r\n}","import React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport useButtonTitleState from '../../../hooks/persistent/useButtonTitleState';\r\n\r\nlet StyledMenuItem = styled(MenuItem)`\r\n    cursor: pointer;\r\n    border-radius: 10px;\r\n    display: flex !important;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: start;\r\n    gap: 0.1rem;\r\n\r\n    &.round {\r\n        border-radius: 50% !important;\r\n        width: 48px;\r\n        height: 48px;\r\n        padding: 0 !important;\r\n    }\r\n\r\n    &:hover {\r\n        background: #FFF1;\r\n\r\n        > svg {\r\n            fill: url(\"#svg-block-gradient\");\r\n        }\r\n    }\r\n    \r\n    .very-small {\r\n        transform: translateY(3px); // Fine-tune label positions\r\n    }\r\n`;\r\n\r\nexport default function MenuButton({noMargin, children, title, className, ...others}) {\r\n    const [buttonTitles] = useButtonTitleState();\r\n    return (\r\n        <StyledMenuItem className={classNames('menu-button', {'mx-3': !noMargin}, className)} {...others}>\r\n            {children}\r\n            {!!(buttonTitles && title) && (\r\n                <span className=\"text-muted very-small\">\r\n                    {title}\r\n                </span>\r\n            )}\r\n        </StyledMenuItem>\r\n    );\r\n}","import React, {useCallback} from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport classNames from 'classnames';\r\nimport {onLeftPress} from '../../utils/eventHelpers';\r\n\r\nexport default function FileDropZone({options, onFile, onFileContent, className, children, ...others}) {\r\n\r\n    const onDrop = useCallback(files => {\r\n        if(files.length) {\r\n            const file = files[0];\r\n            onFile?.(file);\r\n            if(onFileContent) {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    onFileContent(e.target.result);\r\n                };\r\n                reader.readAsText(file);\r\n            }\r\n        }\r\n    }, [onFile, onFileContent]);\r\n\r\n    const {getRootProps, getInputProps, isDragActive, open} = useDropzone({\r\n        maxFiles: 1,\r\n        onDrop,\r\n        noClick: true,\r\n        ...options,\r\n    });\r\n\r\n    return (\r\n        <div\r\n            className={classNames(className, !options.noClick && 'clickable', isDragActive && 'dragging')}\r\n            {...(options?.noClick ? {} : onLeftPress(() => open()))}\r\n            {...others}\r\n            {...getRootProps()}>\r\n            <input {...getInputProps()}/>\r\n            {children}\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default React.createContext(null);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst Container = styled.div`\r\n    :hover {\r\n        background: #0001;\r\n    }\r\n`;\r\n\r\nexport default function MenuModalOption({name, description, className, children, ...others}) {\r\n    return (\r\n        <Container\r\n            className={classNames(className, 'clickable d-flex mt-2 px-3 py-2')} {...others}>\r\n            <div className=\"flex-grow-1\">\r\n                {name && <h4 className=\"fw-normal\">{name}</h4>}\r\n                {description && <div className=\"text-muted\">{description}</div>}\r\n            </div>\r\n            <div>\r\n                {children}\r\n            </div>\r\n        </Container>\r\n    );\r\n}","import {initializeApp} from 'firebase/app';\r\nimport {getAnalytics, isSupported} from 'firebase/analytics';\r\nimport {getFirestore} from 'firebase/firestore/lite';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: 'AIzaSyB2Knl_5Z113bHF4ncVwf37qENayLs-TUY',\r\n    authDomain: 'motoko-blocks.firebaseapp.com',\r\n    projectId: 'motoko-blocks',\r\n    storageBucket: 'motoko-blocks.appspot.com',\r\n    messagingSenderId: '225162830482',\r\n    appId: '1:225162830482:web:5f4a0c292cd509bc6c3c4b',\r\n    measurementId: 'G-2V5DTR90FF',\r\n};\r\n\r\nexport const app = initializeApp(firebaseConfig);\r\nexport const analyticsPromise = isSupported().then(supported => supported ? getAnalytics(app) : null);\r\nexport const db = getFirestore(app);\r\n","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const EDITOR_STATE_STORE = makeObservable(null);","import Compiler from './Compiler';\r\n\r\nexport default class NodeCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toEditorNode');\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        if(!result && result !== 0 /* Just in case */) {\r\n            return;\r\n        }\r\n        let id;\r\n        if(typeof result === 'object') {\r\n            id = result.id;\r\n            if(!id) {\r\n                throw new Error(`Invalid node object with keys: {${Object.keys(result).join(', ')}}`);\r\n            }\r\n        }\r\n        else {\r\n            id = result;\r\n        }\r\n        // Convert node id to string in case of number/string mismatch\r\n        id = String(id);\r\n        return this.editor.nodes.find(n => String(n.id) === id);\r\n    }\r\n}","import Compiler from './Compiler';\r\nimport {getType} from '../block-types/types';\r\n\r\nexport default class TypeCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'inferType');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n        return getType(prop.type);\r\n    }\r\n\r\n    postCompile(type, node, key) {\r\n        // if(typeof type === 'string' || typeof type === 'number' || typeof type === 'boolean' || type === null || type === undefined) {\r\n        //     return type;/////////\r\n        // }\r\n        if(type === undefined) {\r\n            return;\r\n        }\r\n        if(typeof type === 'string' || typeof type === 'number' || typeof type === 'boolean') {\r\n            // TODO: ensure type inputs passed as objects rather than strings\r\n            // console.log('String type:', type, node, key);\r\n            return type;\r\n        }\r\n        type = getType(type);\r\n        if(type.isAbstract()) {\r\n            console.warn(`[${node.name}.${key}]`, 'Abstract inferred type:', type.toTypeString());\r\n            return;\r\n        }\r\n        return type;\r\n    }\r\n}","import Compiler from './Compiler';\r\n\r\nexport default class ControlCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toControl');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        return result;\r\n    }\r\n}","import NodeCompiler from './NodeCompiler';\r\n\r\n\r\nexport default class ConnectionCompiler extends NodeCompiler {\r\n\r\n    // Same functionality as `NodeCompiler`, except defaults to the parent node rather than undefined\r\n\r\n    defaultCompile(prop, node) {\r\n        return node;\r\n    }\r\n}","import Rete from 'rete';\r\nimport MotokoCompiler from '../compilers/MotokoCompiler';\r\nimport NodeCompiler from '../compilers/NodeCompiler';\r\nimport TypeCompiler from '../compilers/TypeCompiler';\r\nimport ControlCompiler from '../compilers/ControlCompiler';\r\nimport compileGlobalMotoko from '../compilers/utils/compileGlobalMotoko';\r\nimport {logTelemetry} from '../telemetry';\r\nimport ConnectionCompiler from '../compilers/ConnectionCompiler';\r\n\r\n// Custom Rete.js node editor implementation\r\n\r\nexport default class BlocksNodeEditor extends Rete.NodeEditor {\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        //// TODO: phase out\r\n        this.version = this.id; // Preferred over Rete.js `id` property\r\n        ////\r\n\r\n        this.details = {\r\n            name: '',\r\n            description: '',\r\n            readme: '',\r\n        };\r\n        this.compilers = {\r\n            control: new ControlCompiler(this),\r\n            node: new NodeCompiler(this),\r\n            connection: new ConnectionCompiler(this),\r\n            type: new TypeCompiler(this),\r\n            motoko: new MotokoCompiler(this),\r\n        };\r\n\r\n        // Called when the editor changes state\r\n        this.bind('change');\r\n\r\n        // Called before node creation\r\n        this.bind('prenodecreate');\r\n\r\n        this.on('change', () => {\r\n            Object.values(this.compilers).forEach(compiler => compiler.clearCache());\r\n        });\r\n\r\n        // Clear all event listeners after destroy\r\n        this.on('destroy', () => {\r\n            setTimeout(() => {\r\n                for(let array of Object.values(this.events)) {\r\n                    array.length = 0;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    get projectName() {\r\n        console.warn('Deprecated');\r\n        return this.details.name;\r\n    }\r\n\r\n    set projectName(name) {\r\n        console.warn('Deprecated');\r\n        this.details.name = name;\r\n    }\r\n\r\n    // Rete.js `id` property alias\r\n    get version() {\r\n        return this.id;\r\n    }\r\n\r\n    set version(version) {\r\n        this.id = version;\r\n    }\r\n\r\n    off(event, listener) {\r\n        const events = this.events[event];\r\n        if(!events) {\r\n            return;\r\n        }\r\n        const index = events.indexOf(listener);\r\n        if(index !== -1) {\r\n            events.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    // noinspection JSCheckFunctionSignatures\r\n    toJSON() {\r\n        const language = 'motoko';\r\n        let output;\r\n        try {\r\n            // TODO: optimize / refactor?\r\n            output = compileGlobalMotoko(this);\r\n        }\r\n        catch(err) {\r\n            console.warn(`Error while compiling before save: ${err}`);\r\n            // console.warn(err);\r\n        }\r\n\r\n        let json = {\r\n            version: this.version,\r\n            name: this.details.name,\r\n            description: this.details.description,\r\n            readme: this.details.readme,\r\n            language,\r\n            output: output || null,\r\n            ...super.toJSON(),\r\n        };\r\n        delete json.id;\r\n        for(const node of Object.values(json.nodes)) {\r\n            delete node.inputs; // Remove duplicate information from Rete.js format\r\n        }\r\n        // noinspection JSValidateTypes\r\n        return json;\r\n    }\r\n\r\n    async fromJSON(json) {\r\n        if(!json) {\r\n            return false;\r\n        }\r\n\r\n        // TODO: call upgrade logic for previous editor versions\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        json = {\r\n            id: /*json.version || */this.version,\r\n            nodes: {},\r\n            ...json,\r\n        };\r\n\r\n        if(!this.beforeImport(json)) {\r\n            return false;\r\n        }\r\n\r\n        // TODO: refactor details\r\n        this.details.name = json.name || '';\r\n        this.details.description = json.description || '';\r\n        this.details.readme = json.readme || '';\r\n\r\n        let hadError = false;\r\n        try {\r\n            const nodes = {};\r\n            await Promise.all(Object.entries(json.nodes).map(async ([id, jsonNode]) => {\r\n                try {\r\n                    // Add default values if missing\r\n                    jsonNode = {\r\n                        id,\r\n                        data: {},\r\n                        position: [0, 0],\r\n                        ...jsonNode,\r\n                        name: jsonNode.type || jsonNode.name, // `type` allowed in place of `name`\r\n                    };\r\n\r\n                    const component = this.getComponent(jsonNode.name);\r\n                    const node = await component.build(Rete.Node.fromJSON(jsonNode));\r\n                    nodes[id] = node;\r\n                    this.addNode(node);\r\n                }\r\n                catch(e) {\r\n                    hadError = true;\r\n                    return this.trigger('error', e);\r\n                }\r\n            }));\r\n\r\n            Object.entries(json.nodes).forEach(([id, jsonNode]) => {\r\n                const node = nodes[id];\r\n\r\n                if(jsonNode.outputs) {\r\n                    Object.entries(jsonNode.outputs).forEach(([key, jsonOutput]) => {\r\n                        if(Array.isArray(jsonOutput)) {\r\n                            jsonOutput = {\r\n                                connections: jsonOutput,\r\n                            };\r\n                        }\r\n\r\n                        try {\r\n                            jsonOutput.connections?.forEach(jsonConnection => {\r\n                                const nodeId = jsonConnection.node;\r\n                                const data = jsonConnection.data;\r\n                                const targetOutput = node.outputs.get(key);\r\n                                const otherNode = nodes[nodeId];\r\n                                if(!otherNode) {\r\n                                    hadError = true;\r\n                                    return this.trigger('error', `Tried to connect to unknown node ${node.id}`);\r\n                                }\r\n                                const targetInput = otherNode.inputs.get(jsonConnection.input);\r\n\r\n                                if(!targetOutput || !targetInput) {\r\n                                    console.log(node.outputs, otherNode.inputs);/////\r\n                                    hadError = true;\r\n                                    return this.trigger('error', `IO not found for node '${node.id}' (${key}  ${jsonConnection.input})`);\r\n                                }\r\n\r\n                                this.connect(targetOutput, targetInput, data);\r\n                            });\r\n                        }\r\n                        catch(e) {\r\n                            hadError = true;\r\n                            return this.trigger('error', e);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        catch(e) {\r\n            this.trigger('warn', e);\r\n            hadError = true;\r\n        }\r\n        return this.afterImport() && !hadError;\r\n    }\r\n\r\n    async createNode(component, data = {}, position = null) {\r\n        let node = await component.createNode(data);\r\n        if(position) {\r\n            let {x, y} = position;\r\n            [node.position[0], node.position[1]] = [x, y];\r\n        }\r\n        this.addNode(node);\r\n        return node;\r\n    }\r\n\r\n    async createNodeAtCursor(component, data = {}) {\r\n        let {x, y} = this.view.area.mouse;\r\n        return this.createNode(component, data, {x: x - 80, y: y - 20});\r\n    }\r\n\r\n    addNode(node) {\r\n        super.addNode(node);\r\n        if(!this.silent) {\r\n            logTelemetry('node_create', {\r\n                node: String(node.id),\r\n                node_type: node.name,\r\n            });\r\n        }\r\n    }\r\n\r\n    updateNode(node) {\r\n        node.update();\r\n        setTimeout(() => {\r\n            for(const io of [...node.inputs.values(), ...node.outputs.values()]) {\r\n                for(const conn of io.connections) {\r\n                    this.view.connections.get(conn)?.update();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    removeNode(node) {\r\n        super.removeNode(node);\r\n        if(!this.silent) {\r\n            logTelemetry('node_delete', {\r\n                node: String(node.id),\r\n                node_type: node.name,\r\n            });\r\n        }\r\n    }\r\n\r\n    connect(output, input, data) {\r\n        if(output.node && output.node === input.node) {\r\n            return;\r\n        }\r\n        super.connect(output, input, data);\r\n    }\r\n}\r\n","import {capitalCase} from 'change-case';\r\n\r\nexport default function getBlockLabel(block) {\r\n    if(!block) {\r\n        return '';\r\n    }\r\n    return block.title || capitalCase(block.name);\r\n}","import {getBlock} from '../editor/blocks';\r\nimport getBlockLabel from './getBlockLabel';\r\n\r\nexport default function getNodeLabel(node, editor, simplified) {\r\n    let block = getBlock(node.name);\r\n    if(!simplified && block && block.computeTitle) {\r\n        let title = block.computeTitle(node, editor);\r\n        if(title) {\r\n            return title;\r\n        }\r\n    }\r\n    return getBlockLabel(block);\r\n}","export default function getInfoText(info) {\r\n    if(info && !info.endsWith('.')) {\r\n        info = `${info}.`;\r\n    }\r\n    return info;\r\n}","import {useContext, useState} from 'react';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../../contexts/EventsContext';\r\nimport useListener from '../../../../hooks/utils/useListener';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\nimport getInfoText from '../../../../utils/getInfoText';\r\n\r\nexport default function DynamicTitle({editor, node, block, fallback, showInfo}) {\r\n\r\n    const computeTitle = () => {\r\n        /// untested\r\n        if(editor.silent) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            return block.computeTitle(node, editor);\r\n        }\r\n        catch(err) {\r\n            console.error(`Unable to compute title for node: ${node.name}`);\r\n            console.error(err);\r\n            return '<Error>';\r\n        }\r\n    };\r\n\r\n    const [title, setTitle] = useState(computeTitle);\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => setTitle(computeTitle()));\r\n\r\n    const result = title || fallback || null;\r\n\r\n    let tooltip = result;\r\n    if(showInfo && block.info) {\r\n        // Add block info on new line\r\n        const info = getInfoText(block.info);\r\n        tooltip = result ? `${result}<br>${info}` : info;\r\n    }\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <div data-tip={tooltip}>{result}</div>\r\n    );\r\n}","import {sentenceCase} from 'change-case';\r\n\r\nexport default function getDefaultLabel(text) {\r\n    if(!text) {\r\n        return '';\r\n    }\r\n    return sentenceCase(text);\r\n}","import getDefaultLabel from './getDefaultLabel';\r\n\r\nexport default function getPropLabel(prop) {\r\n    if(!prop) {\r\n        return '';\r\n    }\r\n    return prop.title || getDefaultLabel(prop.key);\r\n}","import React from 'react';\r\n\r\n// List of functions to call when starting/ending a connection (event listener optimization)\r\nexport default React.createContext([]);\r\n","import useLocalStorage from '../utils/useLocalStorage';\r\n\r\nexport default function useLearningModeState() {\r\n    return useLocalStorage('blocks.learningMode', true);\r\n}\r\n","import React, {useCallback, useContext, useEffect, useState} from 'react';\r\nimport classNames from 'classnames';\r\nimport Rete, {Output} from 'rete';\r\nimport ConnectionAwareListContext from '../../../contexts/ConnectionAwareListContext';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\nimport useLearningModeState from '../../../hooks/persistent/useLearningModeState';\r\n\r\n// Derived from: https://github.com/retejs/react-render-plugin/blob/master/src/Socket.jsx\r\n\r\nexport function SocketHandle(props) {\r\n    const {type, propKey, socket, innerRef, io} = props;\r\n\r\n    const [relevant, setRelevant] = useState(false);\r\n    const [requested, setRequested] = useState(null);\r\n\r\n    const [learningMode] = useLearningModeState();\r\n\r\n    const connectionAwareList = useContext(ConnectionAwareListContext);\r\n\r\n    const socketType = socket.findType();\r\n    const reversed = !!socketType.data.reversed;\r\n\r\n    // Does the socket accept multiple inputs?\r\n    const multiple = io.multipleConnections && (io instanceof Rete.Input) !== reversed;\r\n\r\n    // console.log('redraw');////\r\n\r\n    // let socketRef;\r\n    const bindRef = el => {\r\n        // socketRef = el;\r\n        el && innerRef(el, type, io);\r\n    };\r\n\r\n    // Update whether the socket is requesting a connection\r\n    let timeout;\r\n    const updateRequested = useCallback(() => {\r\n        clearTimeout(timeout);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        timeout = setTimeout(() => {\r\n            let requested = !io.connections.length;\r\n            if(requested) {\r\n                const prop = socket.findProp?.();\r\n                requested = !!(prop?.input && (\r\n                    prop.request || (!prop.optional && !multiple && !io.control)\r\n                ));\r\n            }\r\n            setRequested(requested);\r\n        });\r\n    }, [io, multiple, socket]);\r\n\r\n    if(requested === null) {\r\n        updateRequested();\r\n    }\r\n\r\n    useEffect(() => {\r\n        const listener = (starting, connectionIO) => {\r\n            if(starting) {\r\n                if((io instanceof Output) === (connectionIO instanceof Output)) {\r\n                    return;\r\n                }\r\n                if(io.node && io.node === connectionIO.node) {\r\n                    return;\r\n                }\r\n                let [input, output] = (io instanceof Output) === !!socket.data.reversed\r\n                    ? [io, connectionIO] : [connectionIO, io];\r\n\r\n                let [inputType, outputType] = [input.socket.findType?.(), output.socket.findType?.()];\r\n\r\n                if(outputType && inputType?.isSubtype(outputType)) {\r\n                    setRelevant(true);\r\n                }\r\n            }\r\n            else {\r\n                setRelevant(false);\r\n            }\r\n            updateRequested();\r\n        };\r\n        connectionAwareList.push(listener);\r\n        return () => {\r\n            let index = connectionAwareList.indexOf(listener);\r\n            if(index !== -1) {\r\n                connectionAwareList.splice(index, 1);\r\n            }\r\n            else {\r\n                console.warn('Missing connection aware listener on cleanup');\r\n            }\r\n            clearTimeout(timeout);///\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [socket, io, connectionAwareList, updateRequested]);\r\n\r\n    useReactTooltip();\r\n\r\n    let tooltip = learningMode ? socket.findLabel?.() : undefined;\r\n    if(learningMode) {\r\n        const socketNoun = socket.data.reversed ? 'a \"control flow\"' : `an \"${type}\"`;\r\n        tooltip = `This is ${socketNoun} socket${socketType ? ` of type: \"${socketType.toTypeString()}\"` : '.'}<br>${tooltip}`;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={bindRef}\r\n            className={classNames(\r\n                'socket',\r\n                type,\r\n                propKey && 'key-' + propKey,\r\n                relevant && 'relevant',\r\n                multiple && 'multiple',\r\n                reversed && 'reversed',\r\n                requested && 'requested',\r\n                !multiple && io.connections.length && 'occupied',\r\n                'type-' + socketType.name,\r\n                'category-' + socketType.data.category,\r\n            )}\r\n            // title={socket.name}\r\n            data-tip={tooltip}>\r\n            <div className=\"requested-wrapper w-100 h-100\">\r\n                <div className=\"socket-color w-100 h-100\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useContext} from 'react';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\nimport getBlockLabel from '../../../../utils/getBlockLabel';\r\nimport EventsContext, {ERROR_EVENT} from '../../../../contexts/EventsContext';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\nimport classNames from 'classnames';\r\nimport useLearningModeState from '../../../../hooks/persistent/useLearningModeState';\r\n\r\nexport default function ShortcutButton({editor, node, shortcut}) {\r\n    const {block} = shortcut;\r\n    const {category} = block;\r\n\r\n    const [learningMode] = useLearningModeState();\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    const handlePress = async event => {\r\n        // Only handle mouse down (no 'touchstart') due to React SyntheticEvent related bug\r\n        if(event.button !== 0) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            let component = editor.components.get(block.name);\r\n            if(!component) {\r\n                events.emit(ERROR_EVENT, `Component not found: ${block.name}`);\r\n                return;\r\n            }\r\n            let data = {};\r\n            if(node && shortcut.nodeKey) {\r\n                data[shortcut.nodeKey] = node.id;\r\n            }\r\n            let newNode = await editor.createNodeAtCursor(component, data);\r\n\r\n            // Start dragging node\r\n            let nodeView = editor.view.nodes.get(newNode);\r\n            nodeView._drag.down(event);\r\n\r\n            // Add shortcut-defined connections\r\n            if(shortcut.connections) {\r\n                for(let connection of shortcut.connections) {\r\n                    let {from, to, fromOutput} = connection;\r\n\r\n                    let fromIO = fromOutput ? node.outputs.get(from) : node.inputs.get(from);\r\n                    let toIO = (fromOutput ? newNode.inputs.get(to) : newNode.outputs.get(to));\r\n                    let [output, input] = fromOutput ? [fromIO, toIO] : [toIO, fromIO];\r\n                    if(output && input) {\r\n                        editor.connect(output, input);\r\n                    }\r\n                    else {\r\n                        console.warn('Could not connect', output, 'to', input);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch(err) {\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    };\r\n\r\n    useReactTooltip();\r\n\r\n    const label = getBlockLabel(block);\r\n\r\n    return (\r\n        <div\r\n            ref={bindNodeInput}\r\n            className={classNames('btn node-shortcut-button px-1 pt-0 pb-1', `shortcut-block-${block.name}`)}\r\n            data-tip={learningMode && block.info ? `${label} : ${block.info}` : label}\r\n            data-delay-show={100}\r\n            style={{\r\n                // background: 'none',\r\n                color: category.data.color,\r\n                borderColor: category.data.color,\r\n                cursor: 'grab',\r\n                // fontSize: '1em',\r\n            }}\r\n            /*{...onLeftPress(handlePress)}*/\r\n            onMouseDown={handlePress}\r\n            onClick={handlePress}\r\n        >\r\n            {block.icon\r\n                ? React.createElement(block.icon)\r\n                : getBlockLabel(block)}\r\n        </div>\r\n    );\r\n}","import {SocketHandle} from '../../sockets/SocketHandle';\r\nimport {Control} from 'rete-react-render-plugin';\r\nimport classNames from 'classnames';\r\nimport {paramCase} from 'change-case';\r\nimport getPropLabel from '../../../../utils/getPropLabel';\r\nimport React from 'react';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\nimport useLearningModeState from '../../../../hooks/persistent/useLearningModeState';\r\nimport getInfoText from '../../../../utils/getInfoText';\r\n\r\nexport default function PropField({prop, node, hideLeft, hideRight, bindSocket, bindControl}) {\r\n\r\n    const [learningMode] = useLearningModeState();\r\n\r\n    const advanced = !!node.data['editor:advanced'];\r\n\r\n    const input = node.inputs.get(prop.key);\r\n    const output = node.outputs.get(prop.key);\r\n    const control = node.controls.get(prop.key) || (input?.showControl() && input.control);\r\n\r\n    useReactTooltip();\r\n\r\n    if(prop.advanced && !advanced) {\r\n        if(\r\n            (!input || !input.connections.length) &&\r\n            (!output || !output.connections.length) &&\r\n            (!control || control.getValue() === control.getDefaultValue())\r\n        ) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    const leftSocket = input && !hideLeft && (\r\n        <SocketHandle\r\n            type=\"input\"\r\n            socket={input.socket}\r\n            propKey={prop.key}\r\n            io={input}\r\n            innerRef={bindSocket}\r\n        />\r\n    );\r\n    const rightSocket = output && !hideRight && (\r\n        <SocketHandle\r\n            type=\"output\"\r\n            propKey={prop.key}\r\n            socket={output.socket}\r\n            io={output}\r\n            innerRef={bindSocket}\r\n        />\r\n    );\r\n    const controlField = control && (\r\n        <Control\r\n            className={input ? 'input-control' : 'control'}\r\n            control={control}\r\n            innerRef={bindControl}\r\n        />\r\n    );\r\n\r\n    const tooltip = learningMode ? getInfoText(prop.info) : null;\r\n    const tooltipDelay = 100;\r\n\r\n    return (\r\n        <div\r\n            className={classNames('prop', 'key-' + paramCase(prop.key), !advanced && prop.advanced && 'advanced')}\r\n            data-tip={tooltip}\r\n            data-delay-show={tooltipDelay}>\r\n            <div className=\"input\">\r\n                {leftSocket}\r\n                {controlField || (leftSocket && (\r\n                    <div className=\"input-title\">\r\n                        {getPropLabel(prop)}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <div className=\"output\">\r\n                {!input && (rightSocket && (\r\n                    <div className=\"output-title\">\r\n                        {getPropLabel(prop)}\r\n                    </div>\r\n                ))}\r\n                {rightSocket}\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport getNodeLabel from '../../../../utils/getNodeLabel';\r\nimport DynamicTitle from '../parts/DynamicTitle';\r\nimport getPropLabel from '../../../../utils/getPropLabel';\r\nimport classNames from 'classnames';\r\nimport {SocketHandle} from '../../sockets/SocketHandle';\r\nimport {ButtonGroup} from 'react-bootstrap';\r\nimport ShortcutButton from '../parts/ShortcutButton';\r\nimport PropField from '../parts/PropField';\r\nimport useLearningModeState from '../../../../hooks/persistent/useLearningModeState';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\nimport getInfoText from '../../../../utils/getInfoText';\r\n\r\nexport default function DefaultNodeView({block, nodeHandle}) {\r\n    const [learningMode] = useLearningModeState();\r\n\r\n    const {editor, node, bindSocket, bindControl} = nodeHandle.props;\r\n    const {selected} = nodeHandle.state;\r\n\r\n    // Properties for the top left/right corners\r\n    const topLeft = block.topLeft && node.inputs.get(block.topLeft);\r\n    const topRight = block.topRight && node.outputs.get(block.topRight);\r\n\r\n    let title = getNodeLabel(node, editor, true);\r\n    if(block.computeTitle) {\r\n        title = <DynamicTitle editor={editor} node={node} block={block} fallback={title} showInfo={learningMode}/>;\r\n    }\r\n\r\n    const getBindControl = prop => (ref, ...args) => {\r\n        const result = bindControl(ref, ...args);\r\n        if(ref) {\r\n            // Custom hover text\r\n            ref.title = getPropLabel(prop);\r\n        }\r\n        return result;\r\n    };\r\n\r\n    const filterProp = prop => {\r\n        if(prop.hidden) {\r\n            return false;\r\n        }\r\n        return prop.control || ((!topLeft || prop.key !== block.topLeft) && (!topRight || prop.key !== block.topRight));\r\n    };\r\n\r\n    const width = 32 * (node.data['editor:width'] || block.width || 6) - 3;\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <div style={{width}} className={classNames('node', `node-id-${node.id}`, selected, block.className)}>\r\n            <div className=\"header d-flex\">\r\n                {topLeft && (\r\n                    <div>\r\n                        <SocketHandle\r\n                            type=\"input\"\r\n                            propKey={block.topLeft}\r\n                            socket={topLeft.socket}\r\n                            io={topLeft}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                )}\r\n                <div\r\n                    className=\"title d-inline-block flex-grow-1 d-flex text-nowrap overflow-hidden\"\r\n                    style={{color: block.category.data.color}}\r\n                    data-tip={!block.computeTitle && learningMode && block.info ? getInfoText(block.info) : undefined}>\r\n                    {block.icon && (\r\n                        // TODO: globally improve react-icons render logic\r\n                        <span className=\"d-inline-block pe-1\" style={{transform: 'translateY(-.2em)'}}>\r\n                            {React.createElement(block.icon)}\r\n                        </span>\r\n                    )}\r\n                    {title}\r\n                </div>\r\n                {topRight && (\r\n                    <div>\r\n                        <SocketHandle\r\n                            type=\"output\"\r\n                            propKey={block.topRight}\r\n                            socket={topRight.socket}\r\n                            io={topRight}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {block.shortcuts.length > 0 && (\r\n                <ButtonGroup className=\"px-4 py-1 w-100\" style={{background: '#0002'}}>\r\n                    {block.shortcuts.map((shortcut, i) => (\r\n                        <ShortcutButton key={i} editor={editor} node={node} shortcut={shortcut}/>\r\n                    ))}\r\n                </ButtonGroup>\r\n            )}\r\n            {Object.values(block.props)\r\n                .filter(filterProp)\r\n                .map(prop => (\r\n                    <PropField\r\n                        key={prop.key}\r\n                        prop={prop}\r\n                        node={node}\r\n                        hideLeft={prop.key === block.topLeft}\r\n                        hideRight={prop.key === block.topRight}\r\n                        bindSocket={bindSocket}\r\n                        bindControl={getBindControl(prop)}\r\n                    />\r\n                ))}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport {Node} from 'rete-react-render-plugin';\r\nimport {getBlock} from '../../../editor/blocks';\r\nimport DefaultNodeView from './views/DefaultNodeView';\r\n\r\nexport default class NodeHandle extends Node {\r\n    render() {\r\n        const {node} = this.props;\r\n\r\n        try {\r\n            const block = getBlock(node.name);\r\n            const NodeView = block.component || DefaultNodeView;\r\n            return <NodeView block={block} nodeHandle={this}/>;\r\n        }\r\n        catch(err) {\r\n            console.error(err);\r\n            return (\r\n                <span className=\"h4 mb-0 bg-dark\">{'<Error>'}</span>\r\n            );\r\n        }\r\n    }\r\n}","import React, {useCallback, useMemo} from 'react';\r\nimport {isMobile} from 'react-device-detect';\r\nimport {onLeftClick} from '../../../utils/eventHelpers';\r\n\r\nexport default function ContextMenu({x, y, touch, style: styleProp, handleCloseMenu, children, ...others}) {\r\n\r\n    const style = useMemo(() => ({\r\n        zIndex: 500,\r\n        position: 'absolute',\r\n        left: isMobile ? 150 : x,\r\n        top: isMobile ? 150 : y,\r\n        boxShadow: isMobile && '0 2px 10px #000E',\r\n        pointerEvents: 'all',\r\n        ...styleProp,\r\n    }), [x, y, styleProp]);\r\n\r\n    const bindScreen = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        const listener = event => event.stopPropagation();\r\n        el.addEventListener('mousedown', listener);\r\n        el.addEventListener('touchstart', listener);\r\n        el.addEventListener('pointermove', listener);\r\n        el.addEventListener('mousemove', listener);\r\n        el.addEventListener('wheel', listener);\r\n    }, []);\r\n\r\n    const bindContainer = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        const moveIntoWindow = () => {\r\n            let offset = el.getBoundingClientRect().bottom - window.innerHeight;\r\n            if(offset > 0) {\r\n                el.style.top = `${y - offset}px`;\r\n            }\r\n        };\r\n        moveIntoWindow();\r\n        el.onresize = moveIntoWindow;\r\n    }, [y]);\r\n\r\n    return (\r\n        <div\r\n            className=\"context-menu-screen\"\r\n            style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                bottom: 0,\r\n                right: 0,\r\n                pointerEvents: 'none',/*touch ? 'none' : 'all'*/\r\n            }}\r\n            ref={bindScreen}\r\n            onKeyDown={e => e.keyCode === 27 /* escape */ && handleCloseMenu()}\r\n            {...onLeftClick(handleCloseMenu)}\r\n            {...others}>\r\n            <div className=\"context-menu-container\" style={style} ref={bindContainer}>\r\n                <div className=\"context-menu\">\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport const MenuContext = React.createContext(null);\r\n","export default function MenuIcon({children, color}) {\r\n    return (\r\n        <span className=\"context-menu-icon\" style={{color}}>{children}</span>\r\n    );\r\n}","import classNames from 'classnames';\r\nimport MenuIcon from './MenuIcon';\r\nimport {onLeftClick} from '../../../utils/eventHelpers';\r\n\r\nexport default function MenuAction({icon, color, selected, onAction, children, style, className, ...others}) {\r\n    return (\r\n        <div\r\n            className={classNames(className, 'context-menu-action', selected && 'selected')}\r\n            style={{color, userSelect: 'none', ...style}}\r\n            {...onLeftClick(event => onAction?.(event))}\r\n            {...others}>\r\n            {icon && <MenuIcon>{icon}</MenuIcon>}\r\n            {children}\r\n        </div>\r\n    );\r\n}","export default function jsonCopy(value) {\r\n    return JSON.parse(JSON.stringify(value));\r\n}","import React, {useContext} from 'react';\r\nimport MenuAction from '../MenuAction';\r\nimport {MenuContext} from '../../contexts/MenuContext';\r\nimport jsonCopy from '../../../../utils/jsonCopy';\r\n\r\nconst cloneSelected = async (editor) => {\r\n\r\n    const newNodeMap = {};\r\n\r\n    let results = await Promise.all(editor.selected.list.map(async node => {\r\n        const component = editor.getComponent(node.name);\r\n        const newNode = await component.createNode(jsonCopy(node.data));\r\n\r\n        newNode.meta = jsonCopy(node.meta);\r\n        [newNode.position[0], newNode.position[1]] = [node.position[0] + 25, node.position[1] + 25];\r\n\r\n        editor.addNode(newNode);\r\n\r\n        newNodeMap[node.id] = newNode;\r\n\r\n        return {\r\n            original: node,\r\n            clone: newNode,\r\n        };\r\n    }));\r\n\r\n    results.forEach(({original}) => {\r\n        // original.inputs.forEach((input) => {\r\n        //     input.connections.forEach((connection) => {\r\n        //         const newInputNode = newNodeMap[connection.input.node.id];\r\n        //         const newOutputNode = newNodeMap[connection.output.node.id];\r\n        //         if(!newInputNode || !newOutputNode) {\r\n        //             return;\r\n        //         }\r\n        //         const input = newInputNode.inputs.get(connection.input.key);\r\n        //         const output = newOutputNode.outputs.get(connection.output.key);\r\n        //         if(!input || !output) {\r\n        //             return;\r\n        //         }\r\n        //         editor.connect(output, input);\r\n        //     });\r\n        // });\r\n\r\n        editor.selected.remove(original);\r\n        original.update();\r\n    });\r\n\r\n    // TODO: select after clone (capture mouse click)\r\n    // results.forEach(({clone}) => {\r\n    //     editor.selected.add(clone);\r\n    //     clone.update();\r\n    // });\r\n};\r\n\r\nexport default function SelectionMenu() {\r\n\r\n    const {editor} = useContext(MenuContext);\r\n\r\n    return (\r\n        <>\r\n            <MenuAction onAction={() => cloneSelected(editor)}>Clone</MenuAction>\r\n            <MenuAction onAction={() => editor.selected.each(node => editor.removeNode(node))}>Delete</MenuAction>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport MenuAction from './MenuAction';\r\nimport {FaRegStickyNote} from 'react-icons/fa';\r\nimport getBlockLabel from '../../../utils/getBlockLabel';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\nimport useLearningModeState from '../../../hooks/persistent/useLearningModeState';\r\nimport getInfoText from '../../../utils/getInfoText';\r\n\r\n\r\nexport default function MenuComponent({component, specialTitle, ...others}) {\r\n    const block = component.block;\r\n    const category = block?.category;\r\n    const [learningMode] = useLearningModeState();\r\n\r\n    if(block?.info) {\r\n        let tooltip = getInfoText(block.info);\r\n        if(learningMode && block.useCases?.length) {\r\n            tooltip += `<br>Use cases: ${block.useCases.join(', ')}`;\r\n        }\r\n        others = {\r\n            'data-tip': tooltip,\r\n            'data-place': 'right',\r\n            ...others,\r\n        };\r\n    }\r\n\r\n    useReactTooltip();\r\n\r\n    const title = getBlockLabel(block) || component.name;\r\n\r\n    return (\r\n        <MenuAction\r\n            icon={React.createElement(block?.icon || category?.data.icon || FaRegStickyNote)}\r\n            color={category?.data.color}\r\n            className={`component-${component.name}`}\r\n            {...others}>\r\n            {specialTitle !== undefined ? <>{specialTitle} <span style={{opacity: .5}}>({title})</span></> : title}\r\n        </MenuAction>\r\n    );\r\n}","import {useCallback} from 'react';\r\nimport {isMobile} from 'react-device-detect';\r\nimport {onLeftClick} from '../../../utils/eventHelpers';\r\n\r\nexport default function MenuSearch({value, onChange, onAction, onKeyDown, children, ...others}) {\r\n\r\n    const bindInput = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        el.focus();\r\n        // el.select();\r\n    }, [{}/* Force redraw in order to refocus */]); /* eslint-disable-line react-hooks/exhaustive-deps */\r\n\r\n    const handleKeyDown = (onKeyDown || onAction) && (event => {\r\n        if(onKeyDown) {\r\n            onKeyDown(event);\r\n        }\r\n        if(onAction && event.key === 'Enter') {\r\n            onAction();\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div {...onLeftClick(event => event.stopPropagation())}>\r\n            <input\r\n                type=\"text\"\r\n                className=\"context-menu-search\"\r\n                autoFocus\r\n                ref={bindInput}\r\n                autoComplete=\"blocks-search\"\r\n                value={value || ''}\r\n                onChange={onChange && (event => onChange(event.target.value))}\r\n                onKeyDown={handleKeyDown}\r\n                {...others}/>\r\n            <div className=\"context-menu-search-area\" style={{maxHeight: isMobile ? '15rem' : '25rem'}}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useCallback, useContext, useState} from 'react';\r\nimport MenuComponent from '../MenuComponent';\r\nimport {MenuContext} from '../../contexts/MenuContext';\r\nimport MenuSearch from '../MenuSearch';\r\nimport useEditorComponents from '../../hooks/useEditorComponents';\r\n\r\nfunction deepCopy(obj) {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nexport async function createNode(component, {data, meta, position: {x, y} = {}}) {\r\n    const node = await component.createNode(data ? deepCopy(data) : {});\r\n    if(meta) {\r\n        node.meta = Object.assign(deepCopy(meta), node.meta);\r\n    }\r\n    [node.position[0], node.position[1]] = [x, y];\r\n    return node;\r\n}\r\n\r\nfunction findRelevantComponents(input, output, components) {\r\n    if(!input && !output) {\r\n        return components;\r\n    }\r\n    let [inputType, outputType] = [input?.socket.findType?.(), output?.socket.findType?.()];\r\n    if(inputType?.data.reversed || outputType?.data.reversed) {\r\n        [inputType, outputType] = [outputType, inputType];\r\n    }\r\n    return components.filter(c =>\r\n        (!inputType || c.block.outputs.some((prop) =>\r\n            !prop.hidden && !prop.advanced/*****/ && (inputType.isSubtype(prop.type) || (prop.inferType && prop.type.isSubtype(inputType))))) &&\r\n        (!outputType || c.block.inputs.some((prop) =>\r\n            !prop.hidden && !prop.advanced/*****/ && ((prop.inferType && outputType.isSubtype(prop.type)) || prop.type.isSubtype(outputType)))));\r\n}\r\n\r\nexport default function PlacementMenu() {\r\n    let [searchText, setSearchText] = useState('');\r\n    let [index, setIndex] = useState(0);\r\n\r\n    const menu = useContext(MenuContext);\r\n    const {editor, mouse, context} = menu;\r\n\r\n    let components = useEditorComponents(editor, c => [-(c.block?.category.data.priority || 0), c.block?.category.root.name || '', c.data.title || c.name]);\r\n    if(context) {\r\n        components = findRelevantComponents(context.input, context.output, components);\r\n    }\r\n    else {\r\n        components = components.filter(c => c.block.global);\r\n        searchText = '';\r\n    }\r\n\r\n    const options = [];\r\n    // Add custom search results from relevant components\r\n    components.forEach(component => {\r\n        try {\r\n            const block = component.block;\r\n            if(searchText && block.customSearch) {\r\n                const custom = block.customSearch(searchText, menu);\r\n                if(custom) {\r\n                    (Array.isArray(custom) ? custom : [custom]).forEach(option => {\r\n                        option.component = component;\r\n                        options.push(option);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        catch(e) {\r\n            console.warn(`Error while adding custom search result for ${component.name}`);\r\n            console.warn(e);\r\n        }\r\n    });\r\n    options.sort((a, b) => (b.priority || 0) - (a.priority || 0));\r\n\r\n    // Filter components by search text\r\n    if(searchText) {\r\n        const lower = searchText.toLowerCase();\r\n        components = components.filter(c => c.keywords?.some(k => k.toLowerCase().startsWith(lower)) || c.name.toLowerCase().startsWith(lower));\r\n    }\r\n    options.push(...components.map(component => ({component})));\r\n\r\n    index = Math.min(options.length - 1, index);\r\n\r\n    // Arrow keys pressed\r\n    const handleSearchKeyDown = (event) => {\r\n        if(event.keyCode === 38 /* Up Arrow */) {\r\n            setIndex(Math.max(0, index - 1));\r\n        }\r\n        if(event.keyCode === 40 /* Down Arrow */) {\r\n            setIndex(index + 1);\r\n        }\r\n    };\r\n\r\n    // Enter key pressed\r\n    const handleSearchAction = async () => {\r\n        if(options.length) {\r\n            await handleCreateOption(options[index]);\r\n        }\r\n    };\r\n\r\n    // Create node from component\r\n    const handleCreateOption = useCallback(async ({component, data, meta}) => {\r\n        setSearchText('');\r\n        editor.trigger('hidecontextmenu');\r\n\r\n        const position = context?.input ? {\r\n            x: mouse.x - 180, // TODO: compute width of module\r\n            y: mouse.y,\r\n        } : mouse;\r\n\r\n        const node = await createNode(component, {data, meta, position});\r\n        editor.addNode(node);\r\n\r\n        if(context) {\r\n            try {\r\n                const {input, output} = context;\r\n                if(input) {\r\n                    const output = [...node.outputs.values()].find(output => input.socket.compatibleWith(output.socket));\r\n                    if(output) {\r\n                        editor.connect(output, input);\r\n                    }\r\n                }\r\n                if(output) {\r\n                    const input = [...node.inputs.values()].find(input => input.socket.compatibleWith(output.socket));\r\n                    if(input) {\r\n                        editor.connect(output, input);\r\n                    }\r\n                }\r\n            }\r\n            catch(err) {\r\n                console.error('Unable to connect relevant input/output');\r\n                console.error(err);\r\n            }\r\n        }\r\n    }, [editor, mouse, context]);\r\n\r\n    const menuItems = options.map((option, i) => (\r\n        <MenuComponent\r\n            key={`${option.title}${option.component.name}${i}`}\r\n            component={option.component}\r\n            specialTitle={option.title}\r\n            selected={index === i}\r\n            onAction={() => handleCreateOption(option)}\r\n        />\r\n    ));\r\n\r\n    return context ? (\r\n        <MenuSearch\r\n            value={searchText}\r\n            onChange={setSearchText}\r\n            onKeyDown={handleSearchKeyDown}\r\n            onAction={handleSearchAction}>\r\n            {menuItems}\r\n        </MenuSearch>\r\n    ) : (\r\n        <>\r\n            {/* Experimental global placement header */}\r\n            <div className=\"noselect p-2 text-light\" style={{opacity: .5, background: '#FFF2'}}>Place anywhere:</div>\r\n            {menuItems}\r\n        </>\r\n    );\r\n}","import {useMemo} from 'react';\r\n\r\nexport default function useEditorComponents(editor, sortFn) {\r\n    const hash = [...editor.components].map(c => c.name).join('##');\r\n\r\n    return useMemo(() => {\r\n        return [...editor.components.values()]\r\n            .filter(c => c && 'block' in c && !c.block?.hidden && !c.block?.deprecated)// TODO: refactor?\r\n            .map(v => [sortFn(v), v])\r\n            .sort(([a], [b]) => {\r\n                if(Array.isArray(a)) {\r\n                    for(let i = 0; i < a.length; i++) {\r\n                        let compare = typeof a[i] === 'number'\r\n                            ? a[i] - b[i]\r\n                            : a[i].localeCompare(b[i]);\r\n                        if(compare !== 0) {\r\n                            return compare;\r\n                        }\r\n                    }\r\n                    return 0;\r\n                }\r\n                else {\r\n                    return a.localeCompare(b);\r\n                }\r\n            })\r\n            .map(([, v]) => v);\r\n    }, [hash]); /* eslint-disable-line react-hooks/exhaustive-deps */\r\n}","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const CONTEXT_MENU_STORE = makeObservable(null);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ContextMenu from './components/ContextMenu';\r\nimport {MenuContext} from './contexts/MenuContext';\r\nimport SelectionMenu from './components/menus/SelectionMenu';\r\nimport PlacementMenu from './components/menus/PlacementMenu';\r\nimport Rete from 'rete';\r\nimport {CONTEXT_MENU_STORE} from '../../observables/contextMenuStore';\r\n\r\n// Adapted from https://github.com/michael-braun/rete-react-contextmenu-plugin\r\n\r\nfunction install(editor, config = {}) {\r\n    editor.bind('hidecontextmenu');\r\n    editor.bind('showcontextmenu');\r\n\r\n    let [offsetX, offsetY] = config.offset ? [config.offset.x, config.offset.y] : [-10, -10];\r\n\r\n    let menu = null;\r\n\r\n    const hideContextMenu = () => {\r\n        CONTEXT_MENU_STORE.set(null);\r\n        if(menu) {\r\n            menu.style.display = 'none';\r\n        }\r\n    };\r\n\r\n    editor.on(['hidecontextmenu', 'contextmenu', 'click'], hideContextMenu);\r\n\r\n    editor.on('contextmenu', ({e, node, context, touch}) => {\r\n        e.preventDefault?.();\r\n        // if(e.button === 2) {\r\n        //     return;///\r\n        // }\r\n        e.stopPropagation?.();\r\n\r\n        if(!context && e.ctrlKey) {\r\n            context = {};////\r\n        }\r\n\r\n        if(!editor.trigger('showcontextmenu', {e, node, context, touch})) {\r\n            return;\r\n        }\r\n\r\n        // Select node under cursor\r\n        if(node) {\r\n            if(!editor.selected.contains(node)) {\r\n                editor.selectNode(node);\r\n            }\r\n        }\r\n        else {\r\n            // editor.selected.clear();\r\n        }\r\n\r\n        const [x, y] = [e.clientX, e.clientY];\r\n\r\n        if(!menu) {\r\n            menu = document.createElement('div');\r\n            editor.view.container.appendChild(menu);\r\n        }\r\n        const menuContext = {editor, mouse, node, context};\r\n        CONTEXT_MENU_STORE.set(menuContext);\r\n\r\n        menu.style.display = 'block';\r\n        ReactDOM.render((\r\n            <ContextMenu\r\n                x={x + offsetX}\r\n                y={node ? y - 50 : y + offsetY} // TODO: magic number\r\n                touch={touch}\r\n                handleCloseMenu={() => editor.trigger('hidecontextmenu')}>\r\n                <MenuContext.Provider value={menuContext}>\r\n                    {node ? (\r\n                        <SelectionMenu/>\r\n                    ) : (\r\n                        <PlacementMenu/>\r\n                    )}\r\n                </MenuContext.Provider>\r\n            </ContextMenu>\r\n        ), menu);\r\n    });\r\n\r\n    editor.on('destroy', () => {\r\n        editor.trigger('hidecontextmenu');\r\n        if(menu) {\r\n            menu.remove();\r\n            menu = null;\r\n        }\r\n    });\r\n\r\n    let mouse;\r\n    let mouseEvent;\r\n    let connectionMouseMoved = false;\r\n    let removingConnection = false;\r\n\r\n    editor.view.container.addEventListener('pointermove', e => mouseEvent = e);\r\n\r\n    editor.on('mousemove', m => {\r\n        mouse = m;\r\n        connectionMouseMoved = true;\r\n    });\r\n\r\n    editor.on('connectionpick', io => {\r\n        connectionMouseMoved = false;\r\n        let prevConnections = [...io.connections];\r\n        setTimeout(() => {\r\n            if(io.connections.length < prevConnections.length) {\r\n                // Connection is being removed\r\n                removingConnection = true;\r\n            }\r\n        });\r\n    });\r\n\r\n    editor.on('connectiondrop', io => {\r\n        if(!connectionMouseMoved) {\r\n            return;\r\n        }\r\n        if(removingConnection) {\r\n            removingConnection = false;\r\n            return;\r\n        }\r\n        let prevConnections = [...io.connections];\r\n        setTimeout(() => {\r\n            // Prevent activating if connections changed\r\n            if(io.connections.length !== prevConnections.length || io.connections.some((conn, i) =>\r\n                (conn.input !== prevConnections[i].input) || (conn.output !== prevConnections[i].output))) {\r\n                return;\r\n            }\r\n            editor.trigger('contextmenu', {\r\n                e: mouseEvent,\r\n                context: {\r\n                    input: io instanceof Rete.Input ? io : null,\r\n                    output: io instanceof Rete.Output ? io : null,\r\n                },\r\n            });\r\n        });\r\n    });\r\n\r\n    // // Mobile long press\r\n    // const getPosition = event => {\r\n    //     const touch = event.touches[0];\r\n    //     return {\r\n    //         x: touch.pageX,\r\n    //         y: touch.pageY,\r\n    //     };\r\n    // };\r\n    // let start;\r\n    // let move;\r\n    // let longPressTimeout;\r\n    // let clickTimeout;\r\n    // editor.view.container.addEventListener('touchstart', event => {\r\n    //     // console.log('START')////\r\n    //     start = getPosition(event);\r\n    //     move = undefined;\r\n    //     longPressTimeout = setTimeout(() => {\r\n    //         // console.log('TIMEOUT')////\r\n    //         const moveThreshold = 25;\r\n    //         if(!move || !(Math.abs(start.x - move.x) > moveThreshold || Math.abs(start.y - move.y) > moveThreshold)) {\r\n    //             vibrate(50);\r\n    //             editor.trigger('contextmenu', {e: event});\r\n    //         }\r\n    //     }, 500);\r\n    // });\r\n    // editor.view.container.addEventListener('touchmove', event => {\r\n    //     // console.log('MOVE')////\r\n    //     move = getPosition(event);\r\n    // });\r\n    // editor.view.container.addEventListener('touchend', event => {\r\n    //     event.preventDefault();\r\n    //     event.stopPropagation();\r\n    //     // console.log('END')////\r\n    //     clearTimeout(longPressTimeout);\r\n    //     clearTimeout(clickTimeout);\r\n    //     clickTimeout = setTimeout(() => clickTimeout = null, 300);\r\n    // });\r\n\r\n    // Mobile long press\r\n    // let start;\r\n    // let move;\r\n    // let longPressTimeout;\r\n    // let clickTimeout;\r\n    // editor.view.container.addEventListener('touchstart', event => {\r\n    //     // console.log('START')////\r\n    //     start = getPosition(event);\r\n    //     move = undefined;\r\n    //     longPressTimeout = setTimeout(() => {\r\n    //         // console.log('TIMEOUT')////\r\n    //         const moveThreshold = 20;\r\n    //         if(!move || !(Math.abs(start.x - move.x) > moveThreshold || Math.abs(start.y - move.y) > moveThreshold)) {\r\n    //             vibrate(50);\r\n    //             editor.trigger('contextmenu', {e: event});\r\n    //         }\r\n    //     }, 500);\r\n    // });\r\n    // editor.view.container.addEventListener('touchmove', event => {\r\n    //     // console.log('MOVE')////\r\n    //     move = getPosition(event);\r\n    // });\r\n    // editor.view.container.addEventListener('touchend', event => {\r\n    //     event.preventDefault();\r\n    //     event.stopPropagation();\r\n    //     // console.log('END')////\r\n    //     clearTimeout(longPressTimeout);\r\n    //     clearTimeout(clickTimeout);\r\n    //     clickTimeout = setTimeout(() => clickTimeout = null, 300);\r\n    // });\r\n\r\n    // Hide context menu on mouse down\r\n    editor.view.container.addEventListener('mousedown', e => {\r\n        if(CONTEXT_MENU_STORE.get()) {\r\n            hideContextMenu();\r\n        }\r\n    });\r\n\r\n    const getPosition = event => {\r\n        const touch = event.changedTouches?.[0];\r\n        return touch ? {\r\n            x: touch.pageX,\r\n            y: touch.pageY,\r\n        } : {};\r\n    };\r\n\r\n    // TODO: hide context menu and start dragging on `touchstart`\r\n\r\n    let touchStart; // `true` during a touch event\r\n    let touchNode; // selected context menu node\r\n    let touchTimeout;\r\n    editor.view.container.addEventListener('touchstart', e => {\r\n        if(CONTEXT_MENU_STORE.get()) {\r\n            hideContextMenu();\r\n        }\r\n        else {\r\n            touchStart = getPosition(e);\r\n            clearTimeout(touchTimeout);\r\n            touchTimeout = setTimeout(() => {\r\n                touchStart = null;\r\n            }, 300);\r\n        }\r\n    });\r\n    // editor.view.container.addEventListener('touchmove', e => touchReady = false);\r\n    editor.view.container.addEventListener('touchend', e => {\r\n        // setTimeout to allow 'click' listener to access `touchReady`\r\n        setTimeout(() => {\r\n            if(touchStart) {\r\n                console.log(1223);///\r\n                const {x, y} = getPosition(e);\r\n                if(Math.abs(x - touchStart.x) + Math.abs(y - touchStart.y) < 20) {\r\n                    touchStart = null;\r\n                    editor.trigger('contextmenu', {e, node: touchNode, touch: true});\r\n                    touchNode = null;\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // // Open touch placement menu when clicking empty space\r\n    // editor.on('click', ({e}) => {\r\n    //     if(touchStart) {\r\n    //         editor.trigger('contextmenu', {e});\r\n    //     }\r\n    // });\r\n\r\n    // Use selected node for touch context menu\r\n    editor.on('selectnode', ({node}) => touchNode = node);\r\n\r\n    // // Prevent node translation if newly selected\r\n    // editor.on('nodetranslate', ({node}) => {\r\n    //     if(nonTranslateNode === node) {\r\n    //         return false;\r\n    //     }\r\n    // });\r\n}\r\n\r\nconst ContextMenuPlugin = {\r\n    name: 'blocks-contextmenu',\r\n    install,\r\n};\r\nexport default ContextMenuPlugin;\r\n","function install(editor, config = {}) {\r\n\r\n    // let currentIO = null;\r\n    //\r\n    // editor.on('connectionpick', (io) => {\r\n    //     currentIO = io;\r\n    // });\r\n    // editor.on('connectiondrop', (io) => {\r\n    //     currentIO = null;\r\n    // });\r\n\r\n    const onKeyDown = (event) => {\r\n        if(event.code === 'Escape') {\r\n            // TODO: implement drop connection without context menu\r\n\r\n            // if(currentIO) {\r\n            //     editor.trigger('connectiondrop', currentIO);\r\n            // }\r\n            // setTimeout(() => editor.trigger('hidecontextmenu'));\r\n        }\r\n    };\r\n\r\n    document.addEventListener('keydown', onKeyDown);\r\n    editor.on('destroy', () => document.removeEventListener('keydown', onKeyDown));\r\n}\r\n\r\nconst ConnectionDropPlugin = {\r\n    name: 'connection-drop',\r\n    install,\r\n};\r\nexport default ConnectionDropPlugin;","function install(editor, config = {}) {\r\n\r\n    const {minDistance = 500, opacityFalloff = 200} = config;\r\n\r\n    // Fade out distant connections\r\n    editor.on(['renderconnection', 'updateconnection', 'zoom'], () => {\r\n        setTimeout(() => {\r\n            for(let pathElement of editor.view.container.querySelectorAll('.connection .main-path')) {\r\n                let bounds = pathElement.getBoundingClientRect();\r\n                let distance = bounds.width;\r\n                pathElement.style.opacity = 1 / (1 + Math.sqrt(Math.max(distance - minDistance, 0) / opacityFalloff));\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nconst ConnectionOpacityPlugin = {\r\n    name: 'connection-opacity',\r\n    install,\r\n};\r\nexport default ConnectionOpacityPlugin;","import Rete from 'rete';\r\n\r\nfunction sortConnections(io) {\r\n    let key = io instanceof Rete.Input ? 'output' : 'input';\r\n    io.connections.sort((a, b) => {\r\n        let aPos = a[key].node.position;\r\n        let bPos = b[key].node.position;\r\n        return (aPos[1] - bPos[1]) || (aPos[0] - bPos[0]);\r\n    });\r\n}\r\n\r\nfunction install(editor, config = {}) {\r\n    editor.on('connectioncreated', connection => {\r\n        sortConnections(connection.input);\r\n        sortConnections(connection.output);\r\n    });\r\n    editor.on('nodedragged', (node) => {\r\n        for(let [ioMap, key] of [[node.inputs, 'output'], [node.outputs, 'input']]) {\r\n            for(let io of ioMap.values()) {\r\n                for(let connection of io.connections) {\r\n                    sortConnections(connection[key]);\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nconst PositionSortPlugin = {\r\n    name: 'position-sort',\r\n    install,\r\n};\r\nexport default PositionSortPlugin;","\r\nfunction install(editor, config = {}) {\r\n\r\n    // TODO: implement properly\r\n\r\n    // if(config.editorButton !== undefined) {\r\n    //     let drag = editor.view.area._drag;\r\n    //     drag.button = config.editorButton;\r\n    // }\r\n}\r\n\r\nconst DragButtonPlugin = {\r\n    name: 'drag-button',\r\n    install,\r\n};\r\nexport default DragButtonPlugin;","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const CREATE_NODE_STORE = makeObservable(null);","export class UndoRedoHistory {\r\n    constructor(maxLength, delay = 500) {\r\n        this.maxLength = maxLength;\r\n        this.delay = delay;\r\n\r\n        this.undoHistory = [];\r\n        this.redoHistory = [];\r\n\r\n        this.current = undefined;\r\n        this._timeout = undefined;\r\n    }\r\n\r\n    clear() {\r\n        this.undoHistory.length = 0;\r\n        this.redoHistory.length = 0;\r\n        this._resetCurrent();\r\n    }\r\n\r\n    _resetCurrent() {\r\n        this.current = undefined;\r\n        clearTimeout(this._timeout);\r\n        this._timeout = undefined;\r\n    }\r\n\r\n    _applyCurrent() {\r\n        this.redoHistory.length = 0;\r\n        this.undoHistory.push(this.current);\r\n        while(this.undoHistory.length > this.maxLength) {\r\n            this.undoHistory.shift();\r\n        }\r\n        // console.log('Current:', this.current);////\r\n    }\r\n\r\n    add(state) {\r\n        this.current = state;\r\n        clearTimeout(this._timeout);\r\n        this._timeout = setTimeout(() => {\r\n            this._applyCurrent();\r\n        }, this.delay);\r\n    }\r\n\r\n    undo() {\r\n        if(this.undoHistory.length) {\r\n            const state = this.undoHistory.pop();\r\n            this.redoHistory.push(state);\r\n            return state;\r\n        }\r\n    }\r\n\r\n    redo() {\r\n        if(this.redoHistory.length) {\r\n            const state = this.redoHistory.pop();\r\n            this.undoHistory.push(state);\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nfunction install(editor, {history} = {}) {\r\n    editor.bind('history');\r\n    editor.bind('undo');\r\n    editor.bind('redo');\r\n\r\n    if(!history || typeof history === 'number') {\r\n        history = new UndoRedoHistory(history);\r\n    }\r\n\r\n    editor.on('history', (state) => {\r\n        history.add(state);\r\n    });\r\n    editor.on('undo', () => {\r\n        // const state = history.undo();\r\n        // editor.fromJSON(state);\r\n    });\r\n    editor.on('redo', () => {\r\n        // const state = history.redo();\r\n        // editor.fromJSON(state);\r\n    });\r\n\r\n    const onKeyDown = (event) => {\r\n        const key = event.key;\r\n\r\n        if(event.ctrlKey || event.metaKey) {\r\n            if(key === 'z') {\r\n                editor.trigger(event.shiftKey ? 'redo' : 'undo');\r\n            }\r\n            if(key === 'y') {\r\n                editor.trigger('redo');\r\n            }\r\n        }\r\n    };\r\n    document.addEventListener('keydown', onKeyDown);\r\n    editor.on('destroy', () => document.removeEventListener('keydown', onKeyDown));\r\n}\r\n\r\nconst HistoryPlugin = {\r\n    name: 'history',\r\n    install,\r\n};\r\nexport default HistoryPlugin;","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const EDITOR_SELECTION_STORE = makeObservable([]);","// noinspection JSCheckFunctionSignatures\r\n\r\nimport BlocksNodeEditor from './BlocksNodeEditor';\r\nimport ReactRenderPlugin from 'rete-react-render-plugin';\r\nimport NodeHandle from '../components/rete/nodes/NodeHandle';\r\nimport ConnectionPlugin from 'rete-connection-plugin';\r\nimport AutoArrangePlugin from 'rete-auto-arrange-plugin';\r\nimport AreaPlugin from 'rete-area-plugin';\r\nimport ContextMenuPlugin from '../plugins/rete-blocks-contextmenu-plugin';\r\nimport ConnectionDropPlugin from '../plugins/rete-connection-drop-plugin';\r\nimport ConnectionOpacityPlugin from '../plugins/rete-connection-opacity-plugin';\r\nimport PositionSortPlugin from '../plugins/rete-position-sort-plugin';\r\nimport DragButtonPlugin from '../plugins/rete-drag-button-plugin';\r\nimport {CREATE_NODE_STORE} from '../observables/createNodeStore';\r\nimport HistoryPlugin from '../plugins/rete-blocks-history-plugin';\r\nimport {EDITOR_SELECTION_STORE} from '../observables/editorSelectionStore';\r\n\r\n\r\nexport const EDITOR_NAME = process.env.REACT_APP_EDITOR_NAME;\r\nexport const EDITOR_VERSION = process.env.REACT_APP_EDITOR_VERSION;\r\n\r\nfunction findCategory(socket) {\r\n    return socket.type?./*findType?.()*/data.category ?? socket.data.category ?? 'none';\r\n}\r\n\r\nexport default function createEditor(container, {history} = {}) {\r\n\r\n    const editor = new BlocksNodeEditor(EDITOR_NAME + '@' + EDITOR_VERSION, container);\r\n    editor.use(ReactRenderPlugin, {\r\n        component: NodeHandle,\r\n    });\r\n    editor.use(HistoryPlugin, {history});\r\n    editor.use(ConnectionPlugin);\r\n    // editor.use(SelectionPlugin, {\r\n    //     enabled: true,\r\n    // });\r\n    editor.use(AutoArrangePlugin);\r\n    editor.use(AreaPlugin, {\r\n        background: (() => {\r\n            const background = document.createElement('div');\r\n            background.classList.add('grid');\r\n            background.style.pointerEvents = 'none';\r\n            if(!window.chrome) {\r\n                editor.on('zoom', ({zoom}) => {\r\n                    // Fix flickering grid on non-Chrome browsers\r\n                    background.classList.toggle('far', zoom <= 1);\r\n                    background.classList.toggle('d-none', zoom <= .5);\r\n                });\r\n            }\r\n            editor.on('destroy', () => background.remove());\r\n            return background;\r\n        })(),\r\n        snap: {size: 16, dynamic: true},\r\n    });\r\n    editor.use(ContextMenuPlugin);\r\n    editor.use(ConnectionDropPlugin);\r\n    editor.use(ConnectionOpacityPlugin);\r\n    editor.use(PositionSortPlugin);\r\n    editor.use(DragButtonPlugin, {editorButton: 2});\r\n\r\n    // Notify selection changed\r\n    const updateSelection = () => setTimeout(() => {\r\n        const previous = EDITOR_SELECTION_STORE.get();\r\n        const current = editor.selected.list;\r\n        if(previous.length !== current.length || previous.some((x, i) => x !== current[i])) {\r\n            EDITOR_SELECTION_STORE.set([...current]);\r\n        }\r\n    });\r\n\r\n    let mouseMoved = false;\r\n    editor.view.container.addEventListener('mousedown', (e) => {\r\n        mouseMoved = false;\r\n    });\r\n    editor.on('mousemove', (e) => {\r\n        mouseMoved = true;\r\n    });\r\n    editor.on('click', ({e}) => {\r\n        // Deselect nodes when clicking background\r\n        if(!mouseMoved) {\r\n            editor.selected.clear();\r\n            editor.nodes.forEach(node => node.update());\r\n        }\r\n        updateSelection();\r\n    });\r\n\r\n    editor.on('zoom', ({source}) => source !== 'dblclick'); // Prevent double-click zoom\r\n    editor.on('nodeselect', node => !editor.selected.contains(node)); // Allow dragging multiple nodes\r\n    editor.on('nodeselected', () => updateSelection());\r\n    editor.on('renderconnection', ({el, connection}) => {\r\n        const category = findCategory((connection.input.socket.data.reversed ? connection.input : connection.output).socket);\r\n        el.querySelector('.connection').classList.add(\r\n            `socket-output-category-${category}`,\r\n        );\r\n    });\r\n\r\n    editor.on('nodecreate', node => {\r\n        // Ensure unique node ID\r\n        while(editor.nodes.some(other => node !== other && node.id === other.id)) {\r\n            // noinspection JSValidateTypes\r\n            node.id = Math.random().toString(36).slice(2, 8);\r\n        }\r\n    });\r\n    editor.on('nodecreated', node => {\r\n        CREATE_NODE_STORE.set(node);\r\n    });\r\n\r\n    return editor;\r\n}","export const getTutorialNode = (editor, id) => {\r\n    return editor.nodes.find(node => node.id === id);\r\n};","import {getTutorialNode} from '../utils/getTutorialNode';\r\n\r\nexport const createNodeStep = (name, id) => {\r\n    return {\r\n        isComplete(progress) {\r\n            return getTutorialNode(progress.editor, id);\r\n        },\r\n        setupNode(node, progress) {\r\n            if(node.name === name && !getTutorialNode(progress.editor, id)) {\r\n                node.id = id;\r\n            }\r\n        },\r\n    };\r\n};","import {css, keyframes} from 'styled-components';\r\n\r\nexport const highlightStyle = css`\r\n    box-shadow: 0 0 1.5rem #FFF !important;\r\n`;\r\n\r\nconst animation = keyframes`\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.1);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n`;\r\nexport const animationStyle = css`\r\n    animation: ${animation} 1.5s ease-out infinite;\r\n`;\r\n\r\n\r\nexport function getNodeSelector(id, key) {\r\n    const selector = `.node-id-${id}`;\r\n    return key ? `${selector} .prop.key-${key}` : selector;\r\n}\r\n\r\nexport function highlightNode(id, key) {\r\n    return css`\r\n        ${getNodeSelector(id)} {\r\n            ${highlightStyle}\r\n        }\r\n\r\n        ${(key || undefined) && css`\r\n            ${getNodeSelector(id, key)} {\r\n                //box-shadow: 0 0 .5rem #FFF !important;\r\n                background: #FFF2 !important;\r\n\r\n                input, select {\r\n                    &:not(:focus) {\r\n                        ${animationStyle}\r\n                    }\r\n                }\r\n            }\r\n        `}\r\n    `;\r\n}\r\n\r\nexport function highlightNodeSocket(id, key) {\r\n    return css`\r\n        ${highlightNode(id)}\r\n        ${getNodeSelector(id)} .socket.key-${key} {\r\n            ${animationStyle}\r\n        }\r\n    `;\r\n}\r\n\r\nexport function highlightNodeShortcut(id, blockName) {\r\n    return css`\r\n        ${getNodeSelector(id)} .node-shortcut-button.shortcut-block-${blockName} {\r\n            border: 2px solid white !important;\r\n            ${highlightStyle}\r\n            ${animationStyle}\r\n        }\r\n    `;\r\n}\r\n\r\nexport function highlightContextMenuComponent(blockName) {\r\n    return css`\r\n        .context-menu .component-${blockName} {\r\n            box-shadow: 0 0 .5rem #FFFA !important;\r\n            border: 1px solid white;\r\n\r\n            background: inherit !important;\r\n\r\n            ${animationStyle}\r\n        }\r\n    `;\r\n}\r\n","import {makeLocalStorageObservable} from '../utils/useLocalStorage';\r\nimport useObservableState from '../utils/useObservableState';\r\n\r\n// TODO: move to `src/observables`?\r\nexport const OUTPUT_PANEL_STATE = makeLocalStorageObservable('blocks.outputPanel', null);\r\n\r\nexport default function useOutputPanelState() {\r\n    return useObservableState(OUTPUT_PANEL_STATE);\r\n}\r\n","export default function capitalize(text) {\r\n    if(!text) {\r\n        return '';\r\n    }\r\n    return text.charAt(0).toUpperCase() + text.substring(1);\r\n}","import {isMobile} from 'react-device-detect';\r\n\r\n\r\nexport const TUTORIAL_LEFT_CLICK = !isMobile ? 'click' : 'tap';\r\nexport const TUTORIAL_CONTEXT_MENU_CLICK = !isMobile ? 'right click' : 'tap';\r\nexport const TUTORIAL_CLICK_DRAG = !isMobile ? 'click and drag' : 'tap and then drag';\r\n","import getEmbedConfig from './getEmbedConfig';\r\n\r\nexport default function isMenuHidden() {\r\n    return getEmbedConfig('menu') === 'hidden';\r\n}","import {CONTEXT_MENU_STORE} from '../../observables/contextMenuStore';\r\nimport {createNodeStep} from '../steps/createNodeStep';\r\nimport {css} from 'styled-components';\r\nimport {getTutorialNode} from '../utils/getTutorialNode';\r\nimport {\r\n    animationStyle,\r\n    highlightContextMenuComponent,\r\n    highlightNode,\r\n    highlightNodeShortcut,\r\n    highlightNodeSocket,\r\n    highlightStyle,\r\n} from '../utils/tutorialStyles';\r\nimport {EDITOR_STATE_STORE} from '../../observables/editorStateStore';\r\nimport {OUTPUT_PANEL_STATE} from '../../hooks/persistent/useOutputPanelState';\r\nimport {EDITOR_SELECTION_STORE} from '../../observables/editorSelectionStore';\r\nimport capitalize from '../../utils/capitalize';\r\nimport {TUTORIAL_CLICK_DRAG, TUTORIAL_LEFT_CLICK, TUTORIAL_CONTEXT_MENU_CLICK} from '../utils/tutorialText';\r\nimport isOutputPanelHidden from '../../utils/isOutputPanelHidden';\r\n\r\n// Custom ID for the tutorial blocks\r\nconst functionNodeId = 'helloFunction';\r\nconst returnNodeId = 'helloReturn';\r\nconst textNodeId = 'helloText';\r\n\r\n// TODO: automatic lookup\r\nconst getFunctionNode = editor => getTutorialNode(editor, functionNodeId);\r\nconst getReturnNode = editor => getTutorialNode(editor, returnNodeId);\r\nconst getTextNode = editor => getTutorialNode(editor, textNodeId);\r\n\r\n// Global style when tutorial is active\r\nconst style = css`\r\n\r\n`;\r\n\r\nexport const helloWorldTutorial = {\r\n    id: 'hello-world',\r\n    name: 'Hello, World!',\r\n    description: 'Create a simple Blocks smart contract.',\r\n    style,\r\n    setupVariables(progress) {\r\n        // Update tutorial based on these observables\r\n        return {\r\n            contextMenu: CONTEXT_MENU_STORE,\r\n            editorState: EDITOR_STATE_STORE,\r\n            editorSelection: EDITOR_SELECTION_STORE,\r\n            outputPanel: OUTPUT_PANEL_STATE,\r\n        };\r\n    },\r\n    steps: [{\r\n        ...createNodeStep('Function', functionNodeId),\r\n        title: 'Create a function',\r\n        style: css`\r\n            ${highlightContextMenuComponent('Function')}\r\n        `,\r\n        render(progress, {contextMenu}) {\r\n            if(!contextMenu) {\r\n                return `${capitalize(TUTORIAL_CONTEXT_MENU_CLICK)} somewhere in the editor space.`;\r\n            }\r\n            if(contextMenu.node) {\r\n                return 'Make sure to {right-click} on empty space.';\r\n            }\r\n            return <>Select the <code>Function</code> block.</>;\r\n        },\r\n    }, {\r\n        title: 'Clear the selection',\r\n        info: 'Left-click somewhere in the editor space.',\r\n        isComplete(progress, {editorSelection}) {\r\n            return !editorSelection?.length || getReturnNode(progress.editor);\r\n        },\r\n    }, {\r\n        title: 'Name the function',\r\n        // info: 'Type something into the \"Name\" field.',\r\n        style: css`\r\n            ${highlightNode(functionNodeId, 'name')}\r\n        `,\r\n        render() {\r\n            return (\r\n                <>\r\n                    <div>Type something into the <code>Name</code> field.</div>\r\n                    <hr/>\r\n                    <small>For example: <code>hello</code></small>\r\n                </>\r\n            );\r\n        },\r\n        isComplete(progress) {\r\n            const node = getFunctionNode(progress.editor);\r\n            return node.data.name;\r\n        },\r\n    }, {\r\n        ...createNodeStep('Return', returnNodeId),\r\n        title: 'Add a Return statement',\r\n        info: `${capitalize(TUTORIAL_CLICK_DRAG)} the outlined button.`,\r\n        style: css`\r\n            ${highlightNodeShortcut(functionNodeId, 'Return')}\r\n            ${highlightContextMenuComponent('Return') /* Highlight context menu for adventurous users */}\r\n            ${highlightNode(returnNodeId) /* Highlight return node if already exists */}\r\n        `,\r\n        render() {\r\n            return <small>This is a shortcut for adding a <code>Return</code> statement.</small>;\r\n        },\r\n    }, {\r\n        title: 'Connect the Return statement',\r\n        info: 'Connect the two indicated sockets.',\r\n        style: css`\r\n            ${highlightNodeSocket(functionNodeId, 'body')}\r\n            ${highlightNodeSocket(returnNodeId, 'statement')}\r\n        `,\r\n        isComplete(progress) {\r\n            const node = getFunctionNode(progress.editor);\r\n            const connections = node.outputs.get('body').connections;\r\n            if(connections.some(conn => conn.input.node.id === returnNodeId)) {\r\n                return true;\r\n            }\r\n            // Clear connections (TODO: move to side effect function)\r\n            connections.forEach(conn => progress.editor.removeConnection(conn));\r\n            return false;\r\n        },\r\n    }, {\r\n        ...createNodeStep('LiteralText', textNodeId),\r\n        title: 'Return a text value',\r\n        style: css`\r\n            ${highlightContextMenuComponent('LiteralText')}\r\n            ${highlightNodeSocket(returnNodeId, 'value')}\r\n            ${highlightNode(textNodeId) /* Highlight text node if already exists */}\r\n        `,\r\n        render(progress, {contextMenu}) {\r\n            if(!contextMenu) {\r\n                return <>{capitalize(TUTORIAL_CLICK_DRAG)} from the <code>Value</code> socket.</>;\r\n            }\r\n            if(!contextMenu.context) {\r\n                return <>Make sure to drag from the <code>Value</code> socket on the <code>Return</code> block.</>;\r\n            }\r\n            return <>Type <code>text</code> into the search bar and click on the outlined result.</>;\r\n        },\r\n    }, {\r\n        title: 'Connect the Text block',\r\n        info: 'Connect the two indicated sockets.',\r\n        style: css`\r\n            ${highlightNodeSocket(returnNodeId, 'value')}\r\n            ${highlightNodeSocket(textNodeId, 'value')}\r\n        `,\r\n        isComplete(progress) {\r\n            const node = getReturnNode(progress.editor);\r\n            const connections = node.inputs.get('value').connections;\r\n            if(connections.some(conn => conn.output.node.id === textNodeId)) {\r\n                return true;\r\n            }\r\n            // Clear connections (TODO: move to side effect function)\r\n            connections.forEach(conn => progress.editor.removeConnection(conn));\r\n            return false;\r\n        },\r\n    }, {\r\n        title: 'Define the Text content',\r\n        style: css`\r\n            ${highlightNode(textNodeId, 'value')}\r\n        `,\r\n        render() {\r\n            return (\r\n                <>\r\n                    <div>Type something into the <code>Value</code> field.</div>\r\n                    <hr/>\r\n                    <small>For example: <code>Hello world!</code></small>\r\n                </>\r\n            );\r\n        },\r\n        isComplete(progress) {\r\n            const node = getTextNode(progress.editor);\r\n            return node.data.value;\r\n        },\r\n    }, {\r\n        title: 'View the smart contract',\r\n        info: `${capitalize(TUTORIAL_LEFT_CLICK)} the \"Compile\" button at the bottom right of the page.`,\r\n        style: css`\r\n            .compile-button {\r\n                border: 1px solid white;\r\n                ${highlightStyle}\r\n                ${animationStyle}\r\n            }\r\n        `,\r\n        render(progress) {\r\n            const functionNode = getFunctionNode(progress.editor);\r\n            const textNode = getTextNode(progress.editor);\r\n            return (\r\n                <small>\r\n                    Your function is named <code>{functionNode.data.name}</code>{' '}\r\n                    with a return value of <code>\"{textNode.data.value}\"</code>.\r\n                </small>\r\n            );\r\n        },\r\n        isComplete(progress, {outputPanel}) {\r\n            // Skip if output panel is unavailable\r\n            return isOutputPanelHidden() || outputPanel;\r\n        },\r\n    }],\r\n};","import isMenuHidden from './isMenuHidden';\r\n\r\nexport default function isOutputPanelHidden() {\r\n    return isMenuHidden(); // TODO: allow toggling \"Compile\" button separately from editor menu\r\n}\r\n","import {helloWorldTutorial} from './definitions/helloWorldTutorial';\r\n\r\nexport const TUTORIALS = [\r\n    helloWorldTutorial,\r\n];\r\n","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const EDITOR_STORE = makeObservable(null);","import {makeLocalStorageObservable} from '../utils/useLocalStorage';\r\nimport {useCallback, useMemo} from 'react';\r\nimport {TUTORIALS} from '../../tutorials/tutorials';\r\nimport useNodeEditor from '../useNodeEditor';\r\nimport getEmbedConfig from '../../utils/getEmbedConfig';\r\nimport useObservableState from '../utils/useObservableState';\r\nimport {logTelemetry} from '../../telemetry';\r\n\r\nconst defaultTutorial = getEmbedConfig('tutorial');\r\nconst defaultState = defaultTutorial ? {tutorial: defaultTutorial} : null;\r\n\r\nexport const TUTORIAL_PROGRESS_STORE = makeLocalStorageObservable('blocks.tutorialProgress', defaultState);\r\n\r\nexport default function useTutorialProgressState() {\r\n    const [state, setState] = useObservableState(TUTORIAL_PROGRESS_STORE);\r\n\r\n    const editor = useNodeEditor();\r\n\r\n    const progress = useMemo(() => {\r\n        if(!state) {\r\n            return null;\r\n        }\r\n        const tutorial = TUTORIALS.find(t => t.id === state.tutorial);\r\n        if(!tutorial) {\r\n            return null;\r\n        }\r\n        // const stepIndex = Math.min(state.stepIndex || 0, tutorial.steps.length - 1);\r\n        return Object.freeze({\r\n            ...state,\r\n            editor,\r\n            tutorial,\r\n            // stepIndex,\r\n            // step: tutorial.steps[stepIndex],\r\n        });\r\n    }, [editor, state]);\r\n\r\n    const setProgress = useCallback(progress => {\r\n        if(!state && progress) {\r\n            setTimeout(() => logTelemetry('tutorial_start'));\r\n        }\r\n        else if(state && !progress) {\r\n            logTelemetry('tutorial_end');\r\n        }\r\n\r\n        setState(progress ? {\r\n            ...progress,\r\n            editor: undefined,\r\n            tutorial: progress.tutorial?.id,\r\n            // step: undefined,\r\n        } : null);\r\n    }, [state, setState]);\r\n\r\n    return [progress, setProgress];\r\n}\r\n","import useObservableState from './utils/useObservableState';\r\nimport {EDITOR_STORE} from '../observables/editorStore';\r\n\r\nexport default function useNodeEditor() {\r\n    const [editor] = useObservableState(EDITOR_STORE);\r\n    return editor;\r\n}\r\n","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const TUTORIAL_STEP_STORE = makeObservable(null);","import {makeLocalStorageObservable} from '../utils/useLocalStorage';\r\nimport useObservableState from '../utils/useObservableState';\r\n\r\nexport const TELEMETRY_STORE = makeLocalStorageObservable('blocks.telemetry', null);\r\n\r\nexport default function useTelemetryState() {\r\n    return useObservableState(TELEMETRY_STORE);\r\n}\r\n","import {logEvent} from 'firebase/analytics';\r\nimport {analyticsPromise} from './setupFirebase';\r\nimport {EDITOR_STATE_STORE} from './observables/editorStateStore';\r\nimport {EDITOR_VERSION} from './editor/createEditor';\r\nimport {TUTORIAL_PROGRESS_STORE} from './hooks/persistent/useTutorialProgressState';\r\nimport isEmbeddedMode from './utils/isEmbeddedMode';\r\nimport {TUTORIAL_STEP_STORE} from './observables/tutorialStepStore';\r\nimport {TELEMETRY_STORE} from './hooks/persistent/useTelemetryState';\r\nimport {THEME_STORE} from './hooks/persistent/useThemeState';\r\nimport {isMobile} from 'react-device-detect';\r\n\r\nanalyticsPromise.then(analytics => {\r\n    if(analytics) {\r\n        // Update GDPR opt-in/out\r\n        analytics.app.automaticDataCollectionEnabled = TELEMETRY_STORE.get();\r\n        TELEMETRY_STORE.subscribe(telemetry => {\r\n            logEvent(analytics, telemetry ? 'telemetry_enable' : 'telemetry_disable');\r\n            analytics.app.automaticDataCollectionEnabled = !!telemetry;\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * Optionally send anonymized usage data to help us improve the Blocks Editor (it's genuinely super helpful).\r\n */\r\nexport function logTelemetry(id, options) {\r\n    analyticsPromise.then(analytics => {\r\n        if(analytics) {\r\n            try {\r\n                if(TELEMETRY_STORE.get()) {\r\n                    const tutorial = TUTORIAL_PROGRESS_STORE.get()?.tutorial;\r\n\r\n                    logEvent(analytics, id, {\r\n                        mobile: isMobile,\r\n                        theme: THEME_STORE.get(),\r\n                        editor_version: EDITOR_VERSION,\r\n                        editor_mode: isEmbeddedMode() ? 'embedded' : undefined,\r\n                        project: EDITOR_STATE_STORE.get()?.name,\r\n                        tutorial,\r\n                        tutorial_step: TUTORIAL_STEP_STORE.get()?.title,\r\n                        ...options || {},\r\n                    });\r\n                }\r\n            }\r\n            catch(err) {\r\n                console.warn('Telemetry error');\r\n                console.warn(err);\r\n            }\r\n        }\r\n    });\r\n}","import makeObservable from '../utils/makeObservable';\r\nimport getQueryConfig from '../utils/getQueryConfig';\r\nimport {logTelemetry} from '../telemetry';\r\n\r\nexport const EDITOR_MENU_STORE = makeObservable(getQueryConfig('menu', null));\r\n\r\nEDITOR_MENU_STORE.callAndSubscribe((menu, previous) => {\r\n    // Skip if loading without menu\r\n    if(!menu && !previous) {\r\n        return;\r\n    }\r\n    logTelemetry(menu ? 'menu_open' : 'menu_close', {interaction: menu || previous});\r\n})","import useObservableState from '../utils/useObservableState';\r\nimport {EDITOR_MENU_STORE} from '../../observables/editorMenuStore';\r\n\r\nexport default function useEditorMenuState() {\r\n    return useObservableState(EDITOR_MENU_STORE);\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport {FiX} from 'react-icons/fi';\r\nimport useEditorMenuState from '../../hooks/persistent/useEditorMenuState';\r\nimport {onLeftClick} from '../../utils/eventHelpers';\r\n\r\nconst TitleContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n`;\r\n\r\nexport default function MenuModal({title, className, children, ...others}) {\r\n    const [, setOpenMenu] = useEditorMenuState();\r\n\r\n    return (\r\n        <div className={classNames('p-3', className)} {...others}>\r\n            {title && (\r\n                <>\r\n                    <TitleContainer>\r\n                        <h3 className=\"fw-light mb-0\">{title}</h3>\r\n                        <div\r\n                            className=\"clickable p-2 mb-1\"\r\n                            {...onLeftClick(() => setOpenMenu(null))}>\r\n                            <FiX size={18}/>\r\n                        </div>\r\n                    </TitleContainer>\r\n                    <hr/>\r\n                </>\r\n            )}\r\n            {children}\r\n        </div>\r\n    );\r\n}","import React, {useContext} from 'react';\r\nimport EventsContext, {PROJECT_LOAD_EVENT} from '../../contexts/EventsContext';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport {getExampleProjects} from '../../examples/examples';\r\nimport FileDropZone from '../common/FileDropZone';\r\nimport {DROP_ZONE_EXTENSIONS} from './Editor';\r\nimport LoadFileContext from '../../contexts/LoadFileContext';\r\nimport MenuModalOption from '../common/MenuModalOption';\r\nimport {onLeftClick} from '../../utils/eventHelpers';\r\nimport MenuModal from '../common/MenuModal';\r\nimport {isMobile} from 'react-device-detect';\r\n\r\n\r\nconst StyledFileDropZone = styled(FileDropZone)`\r\n    padding: 2rem 0;\r\n    border: 2px #0005 dashed;\r\n\r\n    &.dragging, &:hover {\r\n        background: #0002;\r\n    }\r\n`;\r\n\r\nexport default function LoadProjectModal({className, ...others}) {\r\n\r\n    const events = useContext(EventsContext);\r\n    const loadFile = useContext(LoadFileContext);\r\n\r\n    const examples = getExampleProjects();\r\n\r\n    return (\r\n        <MenuModal title={isMobile && 'Open an example:'} className={classNames(className)} {...others}>\r\n            {!isMobile && (\r\n                <StyledFileDropZone\r\n                    className={classNames('clickable text-center text-muted rounded-3')}\r\n                    options={{accept: DROP_ZONE_EXTENSIONS.join(',')}}\r\n                    onFileContent={loadFile}>\r\n                    <h5>Import a .blocks file . . .</h5>\r\n                </StyledFileDropZone>\r\n            )}\r\n            {examples.map((example, i) => (\r\n                <MenuModalOption\r\n                    key={i}\r\n                    name={example.name}\r\n                    description={example.description || '(No description provided)'}\r\n                    {...onLeftClick(() => events.emit(PROJECT_LOAD_EVENT, example))}>\r\n                </MenuModalOption>\r\n            ))}\r\n        </MenuModal>\r\n    );\r\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDownload(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20,15L20,19C20,19.549 19.549,20 19,20C19,20 5,20 5,20C4.451,20 4,19.549 4,19C4,19 4,15 4,15C4,14.448 3.552,14 3,14C2.448,14 2,14.448 2,15L2,19C2,20.646 3.354,22 5,22L19,22C20.646,22 22,20.646 22,19L22,15C22,14.448 21.552,14 21,14C20.448,14 20,14.448 20,15Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11,12.586L7.707,9.293C7.317,8.903 6.683,8.903 6.293,9.293C5.903,9.683 5.903,10.317 6.293,10.707L11.293,15.707C11.413,15.827 11.556,15.91 11.708,15.957L11.711,15.958C11.795,15.983 11.884,15.998 11.976,16L12,16L12.024,16C12.116,15.998 12.205,15.983 12.289,15.958L12.292,15.957C12.444,15.91 12.587,15.827 12.707,15.707L17.707,10.707C18.097,10.317 18.097,9.683 17.707,9.293C17.317,8.903 16.683,8.903 16.293,9.293L13,12.586L13,3C13,2.448 12.552,2 12,2C11.448,2 11,2.448 11,3L11,12.586Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownload);\nexport default __webpack_public_path__ + \"static/media/download.9a79f24e.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFilePlus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21,8L21,7.988C20.998,7.807 20.947,7.637 20.861,7.492C20.819,7.42 20.767,7.353 20.707,7.293L14.707,1.293C14.647,1.233 14.58,1.181 14.508,1.139C14.362,1.053 14.193,1.002 14.012,1L14,1L6,1C4.354,1 3,2.354 3,4L3,20C3,21.646 4.354,23 6,23L18,23C19.646,23 21,21.646 21,20L21,8ZM13,3L6,3C5.451,3 5,3.451 5,4C5,4 5,20 5,20C5,20.549 5.451,21 6,21C6,21 18,21 18,21C18.549,21 19,20.549 19,20L19,9L14,9C13.448,9 13,8.552 13,8L13,3ZM11,14L9,14C8.448,14 8,14.448 8,15C8,15.552 8.448,16 9,16L11,16L11,18C11,18.552 11.448,19 12,19C12.552,19 13,18.552 13,18L13,16L15,16C15.552,16 16,15.552 16,15C16,14.448 15.552,14 15,14L13,14L13,12C13,11.448 12.552,11 12,11C11.448,11 11,11.448 11,12L11,14ZM15,7L17.586,7L15,4.414L15,7Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFilePlus);\nexport default __webpack_public_path__ + \"static/media/file-plus.c3f75220.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolder(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5L1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8C21,8 21,19 21,19Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolder);\nexport default __webpack_public_path__ + \"static/media/folder.fe3b16f3.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolderWide(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 30 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard1\",\n    transform: \"matrix(1.25,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 24,\n    height: 24,\n    style: {\n      fill: \"none\"\n    }\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.8,0,0,1,2.4,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5C1,5 1,19 1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8L21,19Z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolderWide);\nexport default __webpack_public_path__ + \"static/media/folder-wide.231dfb87.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolderOpen(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 30 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard1\",\n    transform: \"matrix(1.25,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 24,\n    height: 24,\n    style: {\n      fill: \"none\"\n    }\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.8,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.8,21.747C5.825,21.769 5.851,21.789 5.878,21.809C6.059,21.941 6.27,22.003 6.479,22L6.527,21.998C6.572,21.995 6.617,21.99 6.661,21.981C6.772,21.993 6.885,22 7,22L23,22C23.32,22 23.621,21.847 23.809,21.588L29.597,13.621C29.818,13.317 29.85,12.914 29.679,12.579C29.509,12.244 29.164,12.033 28.788,12.033L25.939,12.033L26,8C26,6.354 24.646,5 23,5L14.535,5C14.535,5 12.832,2.445 12.832,2.445C12.647,2.167 12.334,2 12,2L7,2C5.354,2 4,3.354 4,5C4,5 4,19 4,19C4,20.22 4.745,21.28 5.8,21.747ZM8.428,20L12.763,14.033L26.826,14.033C26.826,14.033 22.49,20 22.49,20L8.428,20ZM23.939,12.033C23.961,10.57 24,7.993 24,7.987C23.993,7.444 23.544,7 23,7L14,7C13.666,7 13.353,6.833 13.168,6.555C13.168,6.555 11.465,4 11.465,4C11.465,4 7,4 7,4C6.451,4 6,4.451 6,5L6,19C6,19.238 6.085,19.457 6.225,19.629L11.445,12.445L11.445,12.445C11.627,12.196 11.922,12.033 12.254,12.033L23.939,12.033Z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolderOpen);\nexport default __webpack_public_path__ + \"static/media/folder-open.81301dea.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSave(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,22C20.646,22 22,20.646 22,19L22,8C22,7.735 21.895,7.48 21.707,7.293L16.707,2.293C16.52,2.105 16.265,2 16,2L5,2C3.354,2 2,3.354 2,5L2,19C2,20.646 3.354,22 5,22L19,22ZM8,4L8,7L15,7C15.552,7 16,7.448 16,8C16,8.552 15.552,9 15,9L7,9C6.448,9 6,8.552 6,8L6,4L5,4C4.451,4 4,4.451 4,5C4,5 4,19 4,19C4,19.549 4.451,20 5,20L6,20L6,13C6,12.448 6.448,12 7,12L17,12C17.552,12 18,12.448 18,13L18,20L19,20C19.549,20 20,19.549 20,19C20,19 20,8.414 20,8.414C20,8.414 15.586,4 15.586,4L8,4ZM8,20L16,20L16,14C16,14 8,14 8,14L8,20Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSave);\nexport default __webpack_public_path__ + \"static/media/save.5b65bc79.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCrosshair(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,1C5.929,1 1,5.929 1,12C1,18.071 5.929,23 12,23C18.071,23 23,18.071 23,12C23,12 23,11.964 23,11.964C22.998,11.52 22.971,11.076 22.916,10.634C22.823,9.889 22.654,9.153 22.411,8.442C22.144,7.662 21.789,6.913 21.354,6.213C20.907,5.492 20.377,4.823 19.777,4.223C19.177,3.623 18.508,3.093 17.787,2.646C17.087,2.211 16.338,1.856 15.558,1.589C14.836,1.342 14.089,1.171 13.331,1.08C12.89,1.027 12.445,1.001 12,1ZM13,3.055L13,6C13,6.552 12.552,7 12,7C11.448,7 11,6.552 11,6L11,3.055C6.831,3.516 3.517,6.831 3.055,11L6,11C6.552,11 7,11.448 7,12C7,12.552 6.552,13 6,13L3.055,13C3.516,17.169 6.831,20.483 11,20.945L11,18C11,17.448 11.448,17 12,17C12.552,17 13,17.448 13,18L13,20.945C17.169,20.484 20.483,17.169 20.945,13L18,13C17.448,13 17,12.552 17,12C17,11.448 17.448,11 18,11L20.945,11C20.484,6.831 17.169,3.517 13,3.055Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCrosshair);\nexport default __webpack_public_path__ + \"static/media/crosshair.dd422401.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLearning(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.045,9.517L4.045,18.022C4.045,18.137 4.065,18.249 4.101,18.352L4.104,18.36C4.141,18.463 4.195,18.562 4.268,18.652C5.445,20.102 7.827,22.949 12,22.949C16.173,22.949 18.555,20.102 19.732,18.652C19.805,18.562 19.859,18.463 19.896,18.36L19.899,18.352C19.935,18.249 19.955,18.137 19.955,18.022L19.955,14.524C19.955,13.972 19.507,13.524 18.955,13.524C18.403,13.524 17.955,13.972 17.955,14.524L17.955,17.667C16.949,18.898 15.117,20.949 12,20.949C8.883,20.949 7.051,18.898 6.045,17.667L6.045,10.569L11.535,13.454C11.826,13.607 12.174,13.607 12.465,13.454L21.017,8.959L21.017,14.524C21.017,15.076 21.465,15.524 22.017,15.524C22.569,15.524 23.017,15.076 23.017,14.524L23.017,7.366C23.017,7.356 23.017,7.345 23.016,7.335C23.017,7.325 23.017,7.314 23.017,7.304C23.017,6.932 22.811,6.592 22.482,6.419L12.465,1.154C12.174,1.001 11.826,1.001 11.535,1.154L1.518,6.419C1.189,6.592 0.983,6.932 0.983,7.304C0.983,7.675 1.189,8.016 1.518,8.189L4.045,9.517ZM12,3.169L19.867,7.304C19.867,7.304 12,11.439 12,11.439C12,11.439 4.133,7.304 4.133,7.304L12,3.169Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLearning);\nexport default __webpack_public_path__ + \"static/media/learning.17e086e5.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,8C9.792,8 8,9.792 8,12C8,14.208 9.792,16 12,16C14.208,16 16,14.208 16,12C16,9.792 14.208,8 12,8ZM12,10C13.104,10 14,10.896 14,12C14,13.104 13.104,14 12,14C10.896,14 10,13.104 10,12C10,10.896 10.896,10 12,10Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20.913,15L21,15L21.077,14.999C22.688,14.958 24,13.62 24,12C24,10.354 22.646,9 21,9C21.018,9 21.035,9 21.052,9.001L20.997,9L20.831,9C20.615,8.998 20.416,8.889 20.298,8.713C20.284,8.646 20.263,8.58 20.235,8.516C20.128,8.274 20.179,7.989 20.365,7.799C20.177,7.992 20.415,7.749 20.415,7.749L20.417,7.748C20.98,7.185 21.297,6.421 21.297,5.625C21.297,4.829 20.98,4.065 20.417,3.503C19.855,2.94 19.091,2.623 18.295,2.623C17.499,2.623 16.735,2.94 16.172,3.503L16.171,3.505L16.171,3.505L16.114,3.562C15.925,3.742 15.644,3.791 15.404,3.685C15.4,3.684 15.397,3.682 15.394,3.681C15.156,3.579 15.001,3.345 15,3.086C15.001,3.352 15,3.249 15,3.003L15,3L15,3C15,1.354 13.646,-0 12,0C10.354,0 9,1.354 9,3L9,3.005L9,3.005L9,3.166C8.999,3.413 8.847,3.621 8.625,3.724L8.587,3.737L8.587,3.741C8.363,3.842 8.331,3.847 8.516,3.765C8.274,3.872 7.99,3.821 7.8,3.636L7.749,3.585L7.747,3.583L7.747,3.583C7.185,3.02 6.421,2.703 5.625,2.703C4.829,2.703 4.065,3.02 3.503,3.583C2.94,4.145 2.623,4.909 2.623,5.705C2.623,6.501 2.94,7.265 3.503,7.827L3.505,7.829L3.505,7.829L3.505,7.829L3.539,7.862L3.564,7.883L3.555,7.879C3.741,8.069 3.792,8.354 3.685,8.596C3.677,8.616 3.669,8.635 3.661,8.655C3.57,8.903 3.335,9.072 3.071,9.08L3.071,9.08C3.058,9.08 3.045,9.081 3.033,9.082L3.016,9.083L3,9.084L3,9.08C1.354,9.08 -0,10.434 0,12.08C0,13.726 1.354,15.08 3,15.08L3.167,15.08C3.425,15.081 3.659,15.236 3.761,15.474C3.762,15.477 3.764,15.48 3.765,15.484C3.872,15.726 3.821,16.01 3.636,16.2L3.584,16.252L3.586,16.255L3.585,16.256L3.583,16.252C3.02,16.815 2.703,17.579 2.703,18.375C2.703,19.171 3.02,19.935 3.583,20.497C4.145,21.06 4.909,21.377 5.705,21.377C6.501,21.377 7.265,21.06 7.828,20.497C7.64,20.684 7.885,20.439 7.885,20.439C8.074,20.258 8.356,20.209 8.596,20.315C8.616,20.323 8.635,20.331 8.655,20.339C8.903,20.43 9.072,20.664 9.08,20.929L9.08,20.998L9.08,21L9.08,21C9.08,22.646 10.434,24 12.08,24C13.726,24 15.08,22.646 15.08,21C15.08,21.022 15.079,21.044 15.078,21.066L15.08,20.996L15.08,20.834C15.081,20.575 15.236,20.341 15.474,20.239C15.477,20.238 15.48,20.236 15.484,20.235C15.726,20.128 16.011,20.179 16.201,20.365C16.221,20.385 16.242,20.404 16.264,20.422L16.252,20.417C16.815,20.98 17.579,21.297 18.375,21.297C19.171,21.297 19.935,20.98 20.497,20.417C21.06,19.855 21.377,19.091 21.377,18.295C21.377,17.499 21.06,16.735 20.497,16.173L20.498,16.174L20.496,16.172L20.438,16.114C20.258,15.922 20.21,15.642 20.315,15.404C20.316,15.4 20.318,15.397 20.319,15.394C20.421,15.156 20.655,15.001 20.913,15ZM13.002,3.156C13.001,3.135 13,3.115 13,3.094C13.004,4.147 13.635,5.101 14.602,5.517C15.589,5.951 16.748,5.739 17.519,4.985L17.504,4.991L17.514,4.983C17.527,4.972 17.539,4.962 17.552,4.951L17.585,4.919L17.585,4.919L17.585,4.919L17.588,4.917C17.775,4.729 18.03,4.623 18.295,4.623C18.56,4.623 18.815,4.729 19.003,4.917C19.003,4.917 19.003,4.917 19.003,4.917C19.191,5.105 19.297,5.36 19.297,5.625C19.297,5.89 19.191,6.145 19.003,6.333L18.944,6.392C18.944,6.392 18.654,6.688 18.935,6.401C18.179,7.174 17.969,8.335 18.405,9.324C18.554,9.66 18.558,9.762 18.401,9.394C18.816,10.363 19.772,10.996 20.826,11L21,11C21.549,11 22,11.451 22,12C22,12.549 21.549,13 21,13L21,13L20.997,13L20.912,13L20.875,13.001L20.906,13C19.853,13.004 18.899,13.635 18.483,14.602L18.483,14.602C18.049,15.589 18.261,16.748 19.015,17.519L19.73,17.82L19.025,17.529C19.025,17.529 19.271,17.775 19.083,17.588C19.271,17.775 19.377,18.03 19.377,18.295C19.377,18.56 19.271,18.815 19.083,19.003C19.083,19.003 19.083,19.003 19.083,19.003C18.895,19.191 18.64,19.297 18.375,19.297C18.119,19.297 17.873,19.198 17.688,19.023L17.609,18.945L17.603,18.939L17.599,18.935L17.57,18.907C16.799,18.175 15.657,17.975 14.682,18.403C13.715,18.819 13.084,19.773 13.08,20.826L13.08,21C13.08,21.549 12.629,22 12.08,22C11.531,22 11.08,21.549 11.08,21L11.075,21.005C11.078,20.975 11.08,20.945 11.08,20.915L11.08,20.913L11.08,20.896L11.08,20.887L11.079,20.872L11.079,20.862C11.044,19.794 10.367,18.848 9.368,18.47C8.393,18.053 7.246,18.266 6.481,19.015L6.471,19.025C6.471,19.025 6.414,19.082 6.414,19.082C6.414,19.082 6.127,19.369 6.412,19.083C6.225,19.271 5.97,19.377 5.705,19.377C5.44,19.377 5.185,19.271 4.998,19.083C4.997,19.083 4.997,19.083 4.997,19.082C4.809,18.895 4.703,18.64 4.703,18.375C4.703,18.11 4.809,17.855 4.997,17.667L4.985,17.672C5.009,17.652 5.032,17.631 5.055,17.609L5.055,17.609L5.055,17.609L5.065,17.599C5.819,16.828 6.031,15.669 5.597,14.682C5.181,13.715 4.227,13.084 3.174,13.08L3.174,13.081L3.133,13.08C3.083,13.08 3.039,13.089 3,13.106L3,13.08C2.451,13.08 2,12.629 2,12.08C2,11.531 2.451,11.08 3,11.08L3.082,11.08L3.09,11.08L3.09,11.08L3.113,11.08C4.191,11.055 5.149,10.374 5.53,9.368C5.942,8.406 5.739,7.277 5.015,6.512L4.985,6.481L4.985,6.481L4.976,6.472L4.917,6.413C4.729,6.225 4.623,5.97 4.623,5.705C4.623,5.44 4.729,5.185 4.917,4.998C4.917,4.997 4.917,4.997 4.918,4.997C5.105,4.809 5.36,4.703 5.625,4.703C5.89,4.703 6.145,4.809 6.332,4.997L7.04,5.29L6.335,4.999C6.335,4.999 6.588,5.248 6.401,5.065C7.166,5.813 8.312,6.027 9.295,5.607L9.299,5.606L9.331,5.595L9.333,5.595L9.331,5.595C9.352,5.588 9.373,5.58 9.394,5.571C10.368,5.153 10.996,4.233 11,3.174L11,3.174L11,3.166L11,3.005L11,3L11,3C11,2.451 11.451,2 12,2C12.549,2 13,2.451 13,3L14,4C14,4 13,3.003 13,3.003C13,3.003 13,3.076 13,3.088L13.002,3.156ZM15.075,21.098L15.074,21.108L15.075,21.098ZM16.96,20.71L16.822,20.647L16.804,20.645L16.96,20.71ZM4.446,17.895L4.428,17.897L4.29,17.96L4.446,17.895ZM4.29,17.96L4.264,17.896L4.263,17.896L4.29,17.96ZM4.27,8.18L4.132,8.117L4.117,8.116L4.27,8.18ZM9.293,5.608C9.174,5.655 9.071,5.649 9.071,5.649C9.146,5.644 9.221,5.63 9.293,5.608Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.4e7600e7.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgShare(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.15,6.088L8.841,9.186C8.116,8.454 7.111,8 6,8C3.792,8 2,9.792 2,12C2,14.208 3.792,16 6,16C7.111,16 8.117,15.546 8.842,14.814L14.151,17.908C14.053,18.255 14,18.621 14,19C14,21.208 15.792,23 18,23C20.208,23 22,21.208 22,19C22,16.792 20.208,15 18,15C16.891,15 15.887,15.452 15.162,16.182L9.85,13.087C9.948,12.741 10,12.377 10,12C10,11.623 9.948,11.258 9.85,10.912L15.159,7.814C15.884,8.546 16.889,9 18,9C20.208,9 22,7.208 22,5C22,2.792 20.208,1 18,1C15.792,1 14,2.792 14,5C14,5.377 14.052,5.742 14.15,6.088ZM16.216,18.095C16.078,18.367 16,18.674 16,19C16,20.104 16.896,21 18,21C19.104,21 20,20.104 20,19C20,17.896 19.104,17 18,17C17.307,17 16.696,17.353 16.337,17.89C16.321,17.925 16.304,17.959 16.284,17.993C16.263,18.029 16.241,18.063 16.216,18.095ZM7.702,10.949C7.349,10.38 6.719,10 6,10C4.896,10 4,10.896 4,12C4,13.104 4.896,14 6,14C6.719,14 7.349,13.62 7.702,13.05C7.709,13.036 7.718,13.021 7.726,13.007C7.735,12.991 7.744,12.977 7.753,12.962C7.911,12.676 8,12.349 8,12C8,11.651 7.911,11.324 7.753,11.038C7.744,11.024 7.735,11.009 7.726,10.994C7.718,10.979 7.71,10.964 7.702,10.949ZM16.298,6.051C16.651,6.62 17.281,7 18,7C19.104,7 20,6.104 20,5C20,3.896 19.104,3 18,3C16.896,3 16,3.896 16,5C16,5.349 16.089,5.676 16.247,5.962C16.256,5.976 16.265,5.991 16.274,6.006C16.282,6.021 16.29,6.036 16.298,6.051Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgShare);\nexport default __webpack_public_path__ + \"static/media/share.ab764b8f.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMenu(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3,19L21,19C21.552,19 22,18.552 22,18C22,17.448 21.552,17 21,17L3,17C2.448,17 2,17.448 2,18C2,18.552 2.448,19 3,19ZM3,13L21,13C21.552,13 22,12.552 22,12C22,11.448 21.552,11 21,11L3,11C2.448,11 2,11.448 2,12C2,12.552 2.448,13 3,13ZM3,7L21,7C21.552,7 22,6.552 22,6C22,5.448 21.552,5 21,5L3,5C2.448,5 2,5.448 2,6C2,6.552 2.448,7 3,7Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMenu);\nexport default __webpack_public_path__ + \"static/media/menu.2ef22e5f.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport {ReactComponent as Download} from '../../assets/icons/download.svg';\r\nimport {ReactComponent as FilePlus} from '../../assets/icons/file-plus.svg';\r\nimport {ReactComponent as Folder} from '../../assets/icons/folder.svg';\r\nimport {ReactComponent as FolderWide} from '../../assets/icons/folder-wide.svg';\r\nimport {ReactComponent as FolderOpen} from '../../assets/icons/folder-open.svg';\r\nimport {ReactComponent as Save} from '../../assets/icons/save.svg';\r\nimport {ReactComponent as Crosshair} from '../../assets/icons/crosshair.svg';\r\nimport {ReactComponent as Learning} from '../../assets/icons/learning.svg';\r\nimport {ReactComponent as Settings} from '../../assets/icons/settings.svg';\r\nimport {ReactComponent as Share} from '../../assets/icons/share.svg';\r\nimport {ReactComponent as Menu} from '../../assets/icons/menu.svg';\r\nimport {FaGithub} from 'react-icons/fa';\r\n\r\n\r\nconst defaultIconSize = 24;\r\nconst defaultFill = '#557080';\r\n\r\nconst createIcon = (SvgComponent, widthRatio = 1, ...defaults) => ({fill, size, ...others}) => {\r\n    return (\r\n        <SvgComponent\r\n            fill={fill || defaultFill}\r\n            width={(size || defaultIconSize) * widthRatio}\r\n            height={size || defaultIconSize}\r\n            {...defaults}\r\n            {...others}\r\n        />\r\n    );\r\n};\r\n\r\nexport const DownloadIcon = createIcon(Download);\r\nexport const FilePlusIcon = createIcon(FilePlus);\r\nexport const FolderIcon = createIcon(Folder);\r\nexport const FolderWideIcon = createIcon(FolderWide, 30 / 24); // TODO: we can probably automate this\r\nexport const FolderOpenIcon = createIcon(FolderOpen, 30 / 24);\r\nexport const SaveIcon = createIcon(Save);\r\nexport const CrosshairIcon = createIcon(Crosshair);\r\nexport const LearningIcon = createIcon(Learning);\r\nexport const SettingsIcon = createIcon(Settings);\r\nexport const SocialIcon = createIcon(Share);\r\nexport const MenuIcon = createIcon(Menu);\r\nexport const GithubIcon = createIcon(FaGithub, 1);\r\n","import React from 'react';\r\nimport styled, {css} from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport {isMobile} from 'react-device-detect';\r\nimport isMenuHidden from '../../../utils/isMenuHidden';\r\n\r\nlet ContainerDiv = styled.div`\r\n    position: absolute;\r\n\r\n    ${props => props.bottom && css`\r\n        bottom: 0;\r\n    `};\r\n\r\n    ${props => props.top && css`\r\n        top: 0;\r\n        margin-top: ${isMenuHidden() ? 0 : isMobile ? 125 : 75}px;\r\n    `};\r\n\r\n    ${props => props.left && css`\r\n        left: 0;\r\n    `};\r\n\r\n    ${props => props.right && css`\r\n        right: 0;\r\n    `};\r\n\r\n    z-index: 100;\r\n`;\r\n\r\nexport default function FloatingMenu({className, children, ...others}) {\r\n    return (\r\n        <ContainerDiv className={classNames('floating-menu p-4 d-flex flex-row align-items-center justify-content-center', className)} {...others}>\r\n            {children}\r\n        </ContainerDiv>\r\n    );\r\n}","import useLocalStorage from '../utils/useLocalStorage';\r\n\r\nexport default function useThemePartsState() {\r\n    return useLocalStorage('blocks.themeParts', {});\r\n}\r\n","import useLocalStorage from '../utils/useLocalStorage';\r\n\r\nexport default function useAutosaveState() {\r\n    return useLocalStorage('blocks.autosave', true);\r\n}\r\n","import {getBlock} from './blocks';\r\n\r\n/* eslint-disable quote-props */\r\nconst shortcutKeys = {\r\n    'c': 'Comment',\r\n    'd': 'CommentRegion',\r\n\r\n    // Arithmetic\r\n    '-': 'Subtract',\r\n    '=': 'Add',\r\n    '8': 'Multiply',\r\n    '/': 'Divide',\r\n\r\n    // Boolean logic\r\n    '7': 'And',\r\n    '\\\\': 'Or',\r\n    '1': 'Not',\r\n\r\n    // Control flow\r\n    'r': 'Return',\r\n\r\n    // Literal values\r\n    ',': 'LiteralTuple',\r\n    '.': 'LiteralIdentifier',\r\n    '\\'': 'LiteralText',///\r\n    'x': 'CodeValue',\r\n    'b': 'LiteralBool',\r\n    'n': 'LiteralNat',\r\n    'i': 'LiteralInt',\r\n    'f': 'LiteralFloat',\r\n    // 's': 'LiteralText',\r\n    'a': 'NewArray',\r\n    'm': 'NewHashMap',\r\n\r\n    // Optionals\r\n    'o': 'Optional',\r\n    'u': 'OptionalUnwrap',\r\n};\r\n\r\nexport const SHORTCUT_KEYS = new Map(Object.entries(shortcutKeys).map(([k, v]) => [k, getBlock(v)]));\r\n","import styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {SHORTCUT_KEYS} from '../../editor/shortcutKeys';\r\nimport getBlockLabel from '../../utils/getBlockLabel';\r\n\r\nconst BlockShortcutContainer = styled.div`\r\n    padding: .5rem 1rem;\r\n    background: #0001;\r\n    max-height: 20rem;\r\n    overflow-y: auto;\r\n    border-radius: 0.25rem;\r\n`;\r\n\r\nconst ShortcutContainer = styled.div`\r\n    font-weight: 500;\r\n\r\n    :hover {\r\n        background: #0001;\r\n    }\r\n`;\r\n\r\nconst KeyContainer = styled.code`\r\n    background: #0001;\r\n    padding: .25rem .5rem;\r\n    border-radius: .5rem;\r\n    white-space: nowrap;\r\n`;\r\n\r\nfunction KeyboardShortcut({binding, className, children, ...others}) {\r\n    return (\r\n        <ShortcutContainer className=\"p-1 d-flex align-items-center\">\r\n            <label className=\"mb-0 flex-grow-1\">{children}</label>\r\n            {(Array.isArray(binding) ? binding : [binding]).map((key, i) => (\r\n                <label key={`${key}${i}`} className=\"ms-1\">\r\n                    {/*{i > 0 && <span>+</span>}*/}\r\n                    <KeyContainer className={classNames(className, 'text-info')} {...others}>\r\n                        {key}\r\n                    </KeyContainer>\r\n                </label>\r\n            ))}\r\n        </ShortcutContainer>\r\n    );\r\n}\r\n\r\nexport default function KeyBindingDetail() {\r\n    return (\r\n        <BlockShortcutContainer>\r\n            <KeyboardShortcut binding={['left mouse']}>\r\n                Select & Drag\r\n            </KeyboardShortcut>\r\n            <KeyboardShortcut binding={['right mouse']}>\r\n                Context Menu\r\n            </KeyboardShortcut>\r\n            <KeyboardShortcut binding={['ctrl', 'right mouse']}>\r\n                Context Menu (+)\r\n            </KeyboardShortcut>\r\n            <KeyboardShortcut binding={'delete'}>\r\n                Delete Selected Blocks\r\n            </KeyboardShortcut>\r\n            <KeyboardShortcut binding={['ctrl', 'left mouse']}>\r\n                Remove Connection\r\n            </KeyboardShortcut>\r\n            {[...SHORTCUT_KEYS.keys()].sort().map(key => (\r\n                <KeyboardShortcut key={key} binding={key}>\r\n                    <span className=\"text-muted\">{getBlockLabel(SHORTCUT_KEYS.get(key))}</span>\r\n                </KeyboardShortcut>\r\n            ))}\r\n        </BlockShortcutContainer>\r\n    );\r\n}","import React from 'react';\r\nimport useThemeState from '../../hooks/persistent/useThemeState';\r\nimport useThemes from '../../hooks/useThemes';\r\nimport useLearningModeState from '../../hooks/persistent/useLearningModeState';\r\nimport {sentenceCase} from 'change-case';\r\nimport useThemePartsState from '../../hooks/persistent/useThemePartsState';\r\nimport styled from 'styled-components';\r\nimport useAutosaveState from '../../hooks/persistent/useAutosaveState';\r\nimport MenuModal from '../common/MenuModal';\r\nimport KeyBindingDetail from './KeyBindingDetail';\r\nimport useTelemetryState from '../../hooks/persistent/useTelemetryState';\r\nimport useButtonTitleState from '../../hooks/persistent/useButtonTitleState';\r\nimport classNames from 'classnames';\r\n\r\nconst settingInputs = {\r\n    select({value, options, onChange}) {\r\n        return (\r\n            <select className=\"form-control ml-5 w-auto\" onChange={onChange} value={value}>\r\n                {options.map((option, i) => (\r\n                        <option key={i} value={option.value}>{option.label ?? option.value}</option>\r\n                    ),\r\n                )}\r\n            </select>\r\n        );\r\n    },\r\n    toggle({value, onChange}) {\r\n        return (\r\n            <input type=\"checkbox\" checked={!!value} onChange={onChange}/>\r\n        );\r\n    },\r\n};\r\n\r\nconst NestedContainer = styled.div`\r\n    background: #0001;\r\n`;\r\n\r\n/**\r\n * Creates a UI element for a given setting.\r\n */\r\nfunction Setting({name, description, note, type, extras, props}) {\r\n\r\n    const SettingInput = settingInputs[type];\r\n\r\n    return (\r\n        <>\r\n            <div className=\"w-100 py-1 px-3 d-flex flex-column align-items-start justify-content-center\">\r\n                <div className=\"w-100 d-flex flex-row align-items-center justify-content-between\">\r\n                    <span className=\"flex-grow-1\" style={{fontWeight: 500}}>{name}</span>\r\n                    {SettingInput && <SettingInput {...props}/>}\r\n                </div>\r\n                <div className=\"d-flex small text-muted align-content-between w-100\">\r\n                    <div className=\"flex-grow-1\">{description}</div>\r\n                    {!!note && <div>{note}</div>}\r\n                </div>\r\n            </div>\r\n            {extras && !!extras.length && (\r\n                <NestedContainer className=\"ps-3 py-1 rounded-3\">\r\n                    {extras.map((extra, i) => <Setting key={i} {...extra}/>)}\r\n                </NestedContainer>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default function SettingsModal() {\r\n    const [theme, setTheme] = useThemeState();\r\n    const [themeParts, setThemeParts] = useThemePartsState();\r\n    const [autosave, setAutosave] = useAutosaveState();\r\n    const [learningMode, setLearningMode] = useLearningModeState();\r\n    const [telemetry, setTelemetry] = useTelemetryState();\r\n    const [buttonTitles, setButtonTitles] = useButtonTitleState();\r\n    // const [telemetryChanged, setTelemetryChanged] = useState(false);\r\n\r\n    const themes = useThemes();\r\n\r\n    // Define the content for each option.\r\n    const settings = [{\r\n        name: 'Theme',\r\n        description: 'The color scheme used in the editor.',\r\n        type: 'select',\r\n        props: {\r\n            label: theme.name,\r\n            value: theme.id,\r\n            options: themes.map(theme => ({value: theme.id, label: theme.name})),\r\n            onChange(e) {\r\n                setTheme(e.target.value);\r\n            },\r\n        },\r\n        extras: theme.parts.map(part => ({\r\n            name: sentenceCase(part),\r\n            type: 'toggle',\r\n            props: {\r\n                value: !!themeParts[part],\r\n                onChange() {\r\n                    setThemeParts({...themeParts, [part]: !themeParts[part]});\r\n                },\r\n            },\r\n        })),\r\n    }, {\r\n        name: 'Auto-save changes',\r\n        description: 'Automatically sync changes while using the editor.',\r\n        type: 'toggle',\r\n        props: {\r\n            value: autosave,\r\n            onChange() {\r\n                setAutosave(!autosave);\r\n            },\r\n        },\r\n    }, {\r\n        name: 'Learning Mode',\r\n        description: 'Show more details in mouse-over tooltips.',\r\n        type: 'toggle',\r\n        props: {\r\n            value: learningMode,\r\n            onChange() {\r\n                setLearningMode(!learningMode);\r\n            },\r\n        },\r\n    }, {\r\n        name: 'Display button names',\r\n        description: 'Show the title of each button in the top menu.',\r\n        type: 'toggle',\r\n        hideMobile: true,\r\n        props: {\r\n            value: buttonTitles,\r\n            onChange() {\r\n                setButtonTitles(!buttonTitles)\r\n            }\r\n        }\r\n    }, {\r\n        name: 'Send anonymized usage statistics',\r\n        description: 'Help us improve the Blocks Editor.',\r\n        type: 'toggle',\r\n        props: {\r\n            value: telemetry,\r\n            onChange() {\r\n                setTelemetry(!telemetry);\r\n                // setTelemetryChanged(true);\r\n            },\r\n        },\r\n        // note: telemetry\r\n        //     ? <FaRegSmileBeam className=\"text-success\" title=\"Thank you!\"/>\r\n        //     : telemetry !== null && <FaRegSadCry title=\":(\"/>,\r\n    }];\r\n\r\n    return (\r\n        <MenuModal title=\"Settings\">\r\n            {settings.map((setting, i) => (\r\n                <div key={i}>\r\n                    <Setting className={classNames('d-md-block', {'d-none': setting.hideMobile})} {...setting}/>\r\n                    <hr/>\r\n                </div>\r\n            ))}\r\n            <h4 className=\"mt-4 mb-3 fw-normal\">Keyboard Shortcuts</h4>\r\n            {/*<hr/>*/}\r\n            <KeyBindingDetail/>\r\n            <div className=\"h5 fw-normal mt-4 mb-0 w-100\">\r\n                <a href=\"https://github.com/Blocks-Editor/blocks\" target=\"_blank\" rel=\"noreferrer\" className=\"p-2 rounded text-muted small w-100\">\r\n                    Blocks is currently in open beta.\r\n                </a>\r\n            </div>\r\n\r\n        </MenuModal>\r\n    );\r\n}","import React from 'react';\r\nimport {TUTORIALS} from '../../tutorials/tutorials';\r\nimport MenuModal from '../common/MenuModal';\r\nimport MenuModalOption from '../common/MenuModalOption';\r\nimport useTutorialProgressState from '../../hooks/persistent/useTutorialProgressState';\r\nimport {FiX} from 'react-icons/fi';\r\nimport classNames from 'classnames';\r\nimport {onLeftClick} from '../../utils/eventHelpers';\r\n\r\nconst tutorials = TUTORIALS;\r\n\r\nexport default function TutorialsModal() {\r\n    const [progress, setProgress] = useTutorialProgressState();\r\n\r\n    const currentTutorial = progress?.tutorial;\r\n\r\n    return (\r\n        <MenuModal title=\"Tutorials\">\r\n            {tutorials.map((tutorial, i) => {\r\n                const selected = currentTutorial === tutorial;\r\n                return (\r\n                    <MenuModalOption\r\n                        key={i}\r\n                        name={tutorial.name}\r\n                        description={tutorial.description || '(No description provided)'}\r\n                        className={classNames(selected && 'text-info')}\r\n                        style={{\r\n                            transition: 'border-left-width .2s ease-out',\r\n                            borderStyle: 'solid',\r\n                            borderColor: 'transparent',\r\n                            borderWidth: `4px ${selected ? 8 : 4}px`,\r\n                            borderLeftColor: 'var(--bs-info)',\r\n                        }} // TODO: refactor to styled-components\r\n                        {...onLeftClick(() => setProgress(selected ? null : {tutorial}))}>\r\n                        {selected && <span className=\"h5 mb-0 text-muted\"><FiX/></span>}\r\n                    </MenuModalOption>\r\n                );\r\n            })}\r\n        </MenuModal>\r\n    );\r\n}","import {useEffect} from 'react';\r\n\r\nexport default function useTimeout(...args) {\r\n    useEffect(() => {\r\n        const id = setTimeout(...args);\r\n        return () => clearTimeout(id);\r\n    });\r\n}\r\n","import React, {useState} from 'react';\r\nimport MenuModal from '../common/MenuModal';\r\nimport {SocialIcon} from 'react-social-icons';\r\nimport styled from 'styled-components';\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard/lib/Component';\r\nimport {FiClipboard} from 'react-icons/fi';\r\nimport classNames from 'classnames';\r\nimport {logTelemetry} from '../../telemetry';\r\nimport {onAnyClick} from '../../utils/eventHelpers';\r\n\r\nconst socials = [\r\n    ['GitHub', 'https://github.com/Blocks-Editor/blocks'],\r\n    ['Twitter', 'https://twitter.com/BlocksEditor'],\r\n    ['Discord', 'https://discord.gg/jDDWtKwWQf'],\r\n    // ...(isMobile ? [\r\n    // ['Instagram', 'https://www.instagram.com/blocks_editor'],\r\n    // ] : []),\r\n    // ['Facebook', 'https://www.facebook.com/BlocksEditor'],\r\n    // ['Reddit', 'https://www.reddit.com/r/BlocksEditor'],\r\n    // ['LinkedIn', 'https://www.linkedin.com/showcase/blocks-editor'],\r\n    // ['Telegram', 'https://t.me/BlocksEditor'],\r\n    // ['YouTube', 'https://www.youtube.com/channel/UCuk-YEcSQ6-dYN-2Kvcvt-w'],\r\n    ['Medium', 'https://blocks-editor.medium.com'],\r\n];\r\n\r\nconst wallets = [\r\n    ['ICP', '184d1794cba6d6384e8487c702436eee7614aeb17cbfc94fcfa328b3f7bf7f75'],\r\n    ['ETH', '0xE977fa3a79fC45eB7c2C628d7D7De65483Cd0751'],\r\n    ['BTC', '3QpW3YxLBEvBpNn8PP53kvHXRktvKafu4w'],\r\n    ['USDT', '0x5274c12Fe17E00276D2cd1FB0aeb5eb9868E006f'],\r\n    ['USDC', '0x0b00230c684cCf1220bDD82970240F5e5E9b3f1C'],\r\n];\r\n\r\n// noinspection CssRedundantUnit (IE compatibility)\r\nconst SocialContainer = styled.div`\r\n    flex: 1 1 0px;\r\n    //width: 0;\r\n    font-size: 11px;\r\n    font-weight: 500;\r\n`;\r\n\r\nconst StyledSocialIcon = styled(SocialIcon)`\r\n    transition: transform .1s ease-out;\r\n\r\n    // Funky edge rendering due to slightly different radii\r\n    //border-radius: 50%;\r\n    //box-shadow: 0 2px 8px #000A;\r\n\r\n    &:hover {\r\n        transform: scale(1.1);\r\n        transition: transform .05s ease-out;\r\n        //box-shadow: 0 4px 12px #000A;\r\n    }\r\n`;\r\n\r\n\r\nexport default function SocialModal() {\r\n    const [copied, setCopied] = useState(null);\r\n\r\n    return (\r\n        <MenuModal title=\"Join our Community:\" {...onAnyClick(() => setCopied(null))}>\r\n            <div className=\"text-center d-flex flex-wrap justify-content-between\">\r\n                {socials.map(([label, url]) => (\r\n                    <SocialContainer key={url} className=\"mx-2 my-3\">\r\n                        <StyledSocialIcon\r\n                            url={url} target=\"_blank\" rel=\"noreferrer\" {...onAnyClick(() => {\r\n                            logTelemetry('social_visit', {\r\n                                interaction: label,\r\n                            });\r\n                        })}/>\r\n                        <div className=\"mt-2 opacity-75 noselect\">{label}</div>\r\n                    </SocialContainer>\r\n                ))}\r\n            </div>\r\n            <hr/>\r\n            <h4 className=\"mt-4 mb-3 fw-normal\">Support the Project!</h4>\r\n            <div>\r\n                <p className=\"text-secondary\">\r\n                    Blocks is a 100% open-source IC community project.\r\n                    Please donate to help keep the application running.\r\n                </p>\r\n                {wallets.map(([label, address]) => {\r\n                    let inputElement;\r\n                    const handleSelect = () => {\r\n                        logTelemetry('donation_select', {\r\n                            interaction: label,\r\n                        });\r\n                        inputElement?.select();\r\n                    };\r\n                    return (\r\n                        <div key={label + address} className=\"d-flex align-items-center my-2\">\r\n                            <div className=\"text-end me-3\" style={{width: '4rem', fontWeight: 500}}>\r\n                                {label}\r\n                            </div>\r\n                            <input\r\n                                ref={el => inputElement = el}\r\n                                type=\"text\"\r\n                                className=\"form-control form-control-sm font-monospace w-100 small\"\r\n                                readOnly\r\n                                value={address}\r\n                                onFocus={handleSelect}\r\n                            />\r\n                            <CopyToClipboard\r\n                                text={address}\r\n                                onCopy={() => {\r\n                                    setCopied(address);\r\n                                    handleSelect();\r\n                                }}>\r\n                                <div\r\n                                    className=\"clickable h5 text-secondary ps-2 pb-1 m-0 d-flex\"\r\n                                    {...onAnyClick(event => event.stopPropagation())}\r\n                                    title=\"Copy wallet address\">\r\n                                    <FiClipboard className={classNames(copied === address && 'text-primary')}/>\r\n                                </div>\r\n                            </CopyToClipboard>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </MenuModal>\r\n    );\r\n}","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const MOBILE_MENU_STORE = makeObservable(false);","import React from 'react';\r\nimport styled, {css} from 'styled-components';\r\nimport {MOBILE_MENU_STORE} from '../../../observables/mobileMenuStore';\r\nimport classNames from 'classnames';\r\nimport useObservableState from '../../../hooks/utils/useObservableState';\r\nimport {FiX} from 'react-icons/fi';\r\nimport {onLeftClick} from '../../../utils/eventHelpers';\r\n\r\nconst MenuContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100vh;\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 60%;\r\n    transition: 0.4s;\r\n    z-index: 1000;\r\n    //padding-top: 95px;\r\n    opacity: .95;\r\n    transform: translateX(100%);\r\n    background: linear-gradient(90deg, #00131C, #022030) !important;\r\n    backdrop-filter: blur(10px);\r\n    gap: 0.5rem;\r\n\r\n    ${props => props.open && css`\r\n        transform: translateX(0);\r\n    `}\r\n\r\n    ${props => props.fullscreen && css`\r\n        width: 100%;\r\n    `}\r\n`;\r\n\r\nexport default function MobileMenu({children, className, ...others}) {\r\n    const [isOpen, setOpen] = useObservableState(MOBILE_MENU_STORE);\r\n\r\n    const fullscreen = window.innerWidth < 576;\r\n\r\n    return (\r\n        <MenuContainer\r\n            open={isOpen}\r\n            fullscreen={fullscreen}\r\n            className={classNames('px-4 text-light', className)}>\r\n            <div\r\n                className=\"clickable w-100 p-4 d-flex flex-row align-items-center justify-content-end\"\r\n                {...onLeftClick(() => setOpen(false))}>\r\n                <FiX size=\"24px\"/>\r\n            </div>\r\n            {children}\r\n        </MenuContainer>\r\n    );\r\n\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\n\r\nlet StyledMobileMenuItem = styled.div`\r\n    background: #FFFFFF11;\r\n    \r\n    > svg {\r\n        fill: url(\"#svg-block-gradient\");\r\n    }\r\n`;\r\n\r\nexport default function MobileMenuButton({children, className, ...others}) {\r\n    return (\r\n        <StyledMobileMenuItem className={classNames('mobile-menu-button m-1 px-3 py-3 rounded clickable d-flex flex-row align-items-center justify-content-start', className)} {...others}>\r\n            {children}\r\n        </StyledMobileMenuItem>\r\n    );\r\n}","import TopMenu from '../common/menus/TopMenu';\r\nimport MenuButton from '../common/menus/MenuButton';\r\nimport React, {useContext, useState} from 'react';\r\nimport MenuItem from '../common/menus/MenuItem';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport EventsContext, {\r\n    EDITOR_CHANGE_EVENT,\r\n    EDITOR_SAVE_EVENT,\r\n    PROJECT_CLEAR_EVENT,\r\n    PROJECT_EXPORT_EVENT,\r\n    PROJECT_LOAD_EVENT,\r\n} from '../../contexts/EventsContext';\r\nimport useListener from '../../hooks/utils/useListener';\r\nimport LoadProjectModal from './LoadProjectModal';\r\nimport {Modal} from 'react-bootstrap';\r\nimport {\r\n    CrosshairIcon,\r\n    DownloadIcon,\r\n    FilePlusIcon,\r\n    FolderOpenIcon,\r\n    FolderWideIcon,\r\n    LearningIcon,\r\n    MenuIcon,\r\n    SaveIcon,\r\n    SettingsIcon,\r\n    SocialIcon,\r\n} from '../common/Icon';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport AreaPlugin from 'rete-area-plugin';\r\nimport FloatingMenu from '../common/menus/FloatingMenu';\r\nimport SettingsModal from './SettingsModal';\r\nimport useOutputPanelState from '../../hooks/persistent/useOutputPanelState';\r\nimport useAutosaveState from '../../hooks/persistent/useAutosaveState';\r\nimport TutorialsModal from './TutorialsModal';\r\nimport useTutorialProgressState from '../../hooks/persistent/useTutorialProgressState';\r\nimport useEditorMenuState from '../../hooks/persistent/useEditorMenuState';\r\nimport useTimeout from '../../hooks/utils/useTimeout';\r\nimport SocialModal from './SocialModal';\r\nimport {onLeftClick, onLeftPress} from '../../utils/eventHelpers';\r\nimport {isMobile} from 'react-device-detect';\r\nimport {MOBILE_MENU_STORE} from '../../observables/mobileMenuStore';\r\nimport MobileMenu from '../common/menus/MobileMenu';\r\nimport MobileMenuButton from '../common/menus/MobileMenuButton';\r\nimport vibrate from '../../utils/vibrate';\r\n\r\nconst BlocksLogo = styled.img`\r\n    -webkit-user-drag: none;\r\n    user-select: none;\r\n    height: 40px;\r\n`;\r\n\r\nconst ProjectNameInput = styled.input`\r\n    border: 1px solid transparent !important;\r\n    border-radius: .5em;\r\n    font-weight: 500;\r\n    vertical-align: top;\r\n    padding: .25em .5em .1em;\r\n    position: relative;\r\n    background-clip: padding-box;\r\n    width: 100%;\r\n    max-width: 200px;\r\n    transition: border-color 0.1s;\r\n\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: linear-gradient(30deg, #00EFFB, #8649E1, #F900E3);\r\n        margin: -2px;\r\n        z-index: -1;\r\n        opacity: 0;\r\n    }\r\n\r\n    :focus {\r\n        outline: none;\r\n\r\n        &::before {\r\n            opacity: 1;\r\n        }\r\n    }\r\n`;\r\n\r\n// TODO: define animated icons in their own files\r\nconst saveAnimation = keyframes`\r\n    30% {\r\n        transform: scale(.6);\r\n    }\r\n`;\r\nconst StyledSaveIcon = styled(SaveIcon)`\r\n    &.animating {\r\n        animation: ${saveAnimation} .7s ease-out;\r\n    }\r\n`;\r\n\r\n// const zoomAnimation = keyframes`\r\n//     from {\r\n//         transform: rotate(0);\r\n//     }\r\n//     to {\r\n//         transform: rotate(360deg);\r\n//     }\r\n// `;\r\nconst StyledZoomIcon = styled(CrosshairIcon)`\r\n    &.animating {\r\n        animation: ${saveAnimation} .7s ease-out;\r\n    }\r\n`;\r\n\r\nconst StyledLearningIcon = styled(LearningIcon)`\r\n    transition: .2s transform ease-out;\r\n\r\n    &.enabled {\r\n        //stroke: var(--bs-primary) !important;\r\n        //transform: scale(1.3) !important;\r\n        //box-shadow: 0 0 12px inset #0003;\r\n        //border-radius: 50%;\r\n        //outline: 2px solid var(--bs-primary);\r\n    }\r\n`;\r\n\r\nconst StyledSocialIcon = styled(SocialIcon)`\r\n    // Temporary\r\n    .menu-item:hover & {\r\n        color: #FFF8;\r\n    }\r\n`;\r\n\r\nconst LogoContainer = styled(MenuItem)`\r\n    padding: 0.6rem 0 0.6rem 1rem !important;\r\n`;\r\n\r\nconst BetaMark = styled.a`\r\n    font-size: 0.7rem;\r\n    padding: 0.1rem 0 0 0.5rem;\r\n`;\r\n\r\nexport default function EditorMenu({editor}) {\r\n    const [name, setName] = useState('');\r\n    const [saveAnimating, setSaveAnimating] = useState(false);\r\n    const [zoomAnimating, setZoomAnimating] = useState(false);\r\n    const [openMenu, setOpenMenu] = useEditorMenuState();\r\n    const [outputPanel, setOutputPanel] = useOutputPanelState();\r\n    const [autosave] = useAutosaveState();\r\n    const [progress] = useTutorialProgressState();\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_SAVE_EVENT, () => {\r\n        setSaveAnimating(true);\r\n    });\r\n\r\n    useListener(events, PROJECT_LOAD_EVENT, project => {\r\n        setName(project.name);\r\n        setOpenMenu(false);\r\n    });\r\n\r\n    /// Temp, until project.details refactor\r\n    useTimeout(() => {\r\n        setName(editor.details.name);\r\n    });\r\n\r\n    // TODO refactor\r\n    const updateName = (name) => {\r\n        setName(name);\r\n        editor.details.name = name;\r\n        events.emit(EDITOR_CHANGE_EVENT, editor);\r\n    };\r\n\r\n    const saveAction = () => events.emit(EDITOR_SAVE_EVENT, editor);\r\n    const exportAction = () => events.emit(PROJECT_EXPORT_EVENT, editor.toJSON());\r\n    const newAction = () => events.emit(PROJECT_CLEAR_EVENT);\r\n    const loadAction = () => setOpenMenu('load');\r\n    const tutorialAction = () => setOpenMenu('tutorials');\r\n    const settingsAction = () => setOpenMenu('settings');\r\n    const socialAction = () => setOpenMenu('social');\r\n    // const githubAction = () => window.open('https://github.com/Blocks-Editor/blocks');\r\n\r\n    // Fix load menu always opening the \"import a .blocks file\" dialog on mobile\r\n    const onClickMenuButton = isMobile ? onLeftClick : onLeftPress;\r\n\r\n    // Close mobile menu when any option is selected\r\n    const onClickMobileMenuButton = (call) => onClickMenuButton(() => {\r\n        MOBILE_MENU_STORE.set(false);\r\n        call();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <TopMenu>\r\n                <LogoContainer className=\"d-inline-flex flex-row\">\r\n                    <a href=\"https://blocks-editor.github.io/\" target=\"_blank\" rel=\"noreferrer\">\r\n                        <BlocksLogo\r\n                            className=\"d-none d-sm-block d-lg-none d-xl-block\"\r\n                            src={`${process.env.PUBLIC_URL}/img/logo-gradient.png`}\r\n                            alt=\"Blocks logo\"\r\n                            draggable=\"false\"\r\n                        />\r\n                        <BlocksLogo\r\n                            className=\"d-block d-sm-none d-lg-block d-xl-none\"\r\n                            src={`${process.env.PUBLIC_URL}/img/icon-gradient.png`}\r\n                            alt=\"Blocks icon\"\r\n                            draggable=\"false\"\r\n                        />\r\n                    </a>\r\n                    <BetaMark\r\n                        href=\"https://github.com/Blocks-Editor/blocks\"\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                        className=\"small text-muted text-decoration-none text-uppercase\">\r\n                        Beta\r\n                    </BetaMark>\r\n                </LogoContainer>\r\n                <div className=\"w-100 px-3 py-2 py-sm-0 d-flex flex-row\">\r\n                    <ProjectNameInput\r\n                        type=\"text\"\r\n                        placeholder=\"Unnamed Project\"\r\n                        className=\"d-inline-block mt-2 mt-sm-1 mb-2 mb-sm-1\"\r\n                        value={name || ''}\r\n                        onChange={e => updateName(e.target.value)}\r\n                        onKeyDown={e => e.key === 'Enter' && events.emit(EDITOR_SAVE_EVENT, editor)}\r\n                    />\r\n                    <div className=\"d-flex d-lg-none flex-row justify-content-end align-items-center flex-grow-1\">\r\n                        <MenuButton\r\n                            className=\"px-0\"\r\n                            tooltip=\"Menu\"\r\n                            noMargin\r\n                            {...onClickMenuButton(() => MOBILE_MENU_STORE.set(true))}\r\n                        >\r\n                            <MenuIcon/>\r\n                        </MenuButton>\r\n                    </div>\r\n                    <div className=\"w-100 d-none d-lg-flex flex-row justify-content-start align-items-center flex-grow-1\">\r\n                        {!autosave && (\r\n                            <MenuButton\r\n                                tooltip=\"Save Changes\"\r\n                                title=\"Save\"\r\n                                {...onClickMenuButton(saveAction)}>\r\n                                <StyledSaveIcon\r\n                                    className={classNames(saveAnimating && 'animating')}\r\n                                    onAnimationEnd={() => setSaveAnimating(false)}\r\n                                />\r\n                            </MenuButton>\r\n                        )}\r\n                        <MenuButton\r\n                            tooltip=\"Export to File\"\r\n                            title=\"Export\"\r\n                            {...onClickMenuButton(exportAction)}>\r\n                            <DownloadIcon/>\r\n                        </MenuButton>\r\n                        <MenuButton\r\n                            tooltip=\"New Project\"\r\n                            title=\"New\"\r\n                            {...onClickMenuButton(newAction)}>\r\n                            <FilePlusIcon/>\r\n                        </MenuButton>\r\n                        <MenuButton\r\n                            tooltip=\"Load Project\"\r\n                            title=\"Load\"\r\n                            {...onClickMenuButton(loadAction)}>\r\n                            {openMenu === 'load' ? <FolderOpenIcon/> : <FolderWideIcon/>}\r\n                        </MenuButton>\r\n                        <MenuButton\r\n                            tooltip=\"Tutorials\"\r\n                            title=\"Tutorials\"\r\n                            {...onClickMenuButton(tutorialAction)}>\r\n                            <StyledLearningIcon className={classNames(!!progress && 'enabled')}/>\r\n                        </MenuButton>\r\n                        <MenuButton\r\n                            tooltip=\"Options\"\r\n                            title=\"Options\"\r\n                            {...onClickMenuButton(settingsAction)}>\r\n                            <SettingsIcon/>\r\n                        </MenuButton>\r\n                        <MenuButton\r\n                            tooltip=\"Social\"\r\n                            title=\"Social\"\r\n                            {...onClickMenuButton(socialAction)}>\r\n                            <StyledSocialIcon/>\r\n                        </MenuButton>\r\n                        {/*<div className=\"float-end\">*/}\r\n                        {/*    <MenuButton*/}\r\n                        {/*        tooltip=\"GitHub\"*/}\r\n                        {/*        title=\"GitHub\"*/}\r\n                        {/*        {...onClickMenuButton(githubAction)}>*/}\r\n                        {/*        <GithubIcon/>*/}\r\n                        {/*    </MenuButton>*/}\r\n                        {/*</div>*/}\r\n                    </div>\r\n                </div>\r\n            </TopMenu>\r\n            <MobileMenu>\r\n                {!autosave && (\r\n                    <MobileMenuButton {...onClickMobileMenuButton(saveAction)}>\r\n                        <StyledSaveIcon\r\n                            className={classNames(saveAnimating && 'animating')}\r\n                            onAnimationEnd={() => setSaveAnimating(false)}\r\n                        />\r\n                        <span className=\"px-3 pt-1\">Save Changes</span>\r\n                    </MobileMenuButton>\r\n                )}\r\n                <MobileMenuButton {...onClickMobileMenuButton(exportAction)}>\r\n                    <DownloadIcon/>\r\n                    <span className=\"px-3 pt-1\">Export to File</span>\r\n                </MobileMenuButton>\r\n                <MobileMenuButton {...onClickMobileMenuButton(newAction)}>\r\n                    <FilePlusIcon/>\r\n                    <span className=\"px-3 pt-1\">New Project</span>\r\n                </MobileMenuButton>\r\n                <MobileMenuButton {...onClickMobileMenuButton(loadAction)}>\r\n                    {openMenu === 'load' ? <FolderOpenIcon/> : <FolderWideIcon/>}\r\n                    <span className=\"px-3 pt-1\">Load Project</span>\r\n                </MobileMenuButton>\r\n                <hr/>\r\n                <MobileMenuButton {...onClickMobileMenuButton(tutorialAction)}>\r\n                    <StyledLearningIcon className={classNames(!!progress && 'enabled')}/>\r\n                    <span className=\"px-3 pt-1\">Tutorials</span>\r\n                </MobileMenuButton>\r\n                <MobileMenuButton {...onClickMobileMenuButton(settingsAction)}>\r\n                    <SettingsIcon/>\r\n                    <span className=\"px-3 pt-1\">Options</span>\r\n                </MobileMenuButton>\r\n                <MobileMenuButton {...onClickMobileMenuButton(socialAction)}>\r\n                    <StyledSocialIcon/>\r\n                    <span className=\"px-3 pt-1\">Social</span>\r\n                </MobileMenuButton>\r\n                {/*<MobileMenuButton {...onClickMobileMenuButton(githubAction)}>*/}\r\n                {/*    <GithubIcon/>*/}\r\n                {/*    <span className=\"px-3 pt-1\">GitHub</span>*/}\r\n                {/*</MobileMenuButton>*/}\r\n            </MobileMenu>\r\n            <FloatingMenu bottom left>\r\n                <MenuButton\r\n                    className=\"round d-flex align-items-center justify-content-center\"\r\n                    tooltip=\"Reset Viewport\"\r\n                    {...onClickMenuButton(() => {\r\n                        AreaPlugin.zoomAt(editor);\r\n                        setZoomAnimating(true);\r\n                        vibrate(50);\r\n                    })}>\r\n                    <StyledZoomIcon\r\n                        className={classNames(zoomAnimating && 'animating')}\r\n                        onAnimationEnd={() => setZoomAnimating(false)}\r\n                    />\r\n                </MenuButton>\r\n            </FloatingMenu>\r\n            <FloatingMenu bottom right>\r\n                <MenuButton\r\n                    className=\"compile-button text-uppercase h4 text-muted\"\r\n                    tooltip=\"Compile to Motoko\"\r\n                    {...onClickMenuButton(() => setOutputPanel(!outputPanel))}>\r\n                    <small>Compile</small>\r\n                </MenuButton>\r\n            </FloatingMenu>\r\n            <Modal\r\n                show={openMenu}\r\n                onShow={() => ReactTooltip.hide()}\r\n                onHide={() => setOpenMenu(null)}>\r\n                <Modal.Body className=\"bg-light rounded-1\">\r\n                    {openMenu === 'load' && (\r\n                        <LoadProjectModal/>\r\n                    )}\r\n                    {openMenu === 'tutorials' && (\r\n                        <TutorialsModal/>\r\n                    )}\r\n                    {openMenu === 'settings' && (\r\n                        <SettingsModal/>\r\n                    )}\r\n                    {openMenu === 'social' && (\r\n                        <SocialModal/>\r\n                    )}\r\n                </Modal.Body>\r\n            </Modal>\r\n        </>\r\n    );\r\n}","export default function vibrate(duration) {\r\n    try {\r\n        window.navigator?.vibrate(duration);\r\n    }\r\n    catch(err) {\r\n        console.error(err);\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default function ExternalLink({href, children, ...others}) {\r\n    return (\r\n        <a\r\n            href={href}\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            style={{textDecoration: 'none'}}\r\n            {...others}>\r\n            {children}\r\n        </a>\r\n    );\r\n}","import React, {useContext, useState} from 'react';\r\nimport classNames from 'classnames';\r\nimport styled, {css} from 'styled-components';\r\nimport {FiClipboard, FiMaximize2, FiMinimize2, FiX} from 'react-icons/fi';\r\nimport {FaLink, FaPlay} from 'react-icons/fa';\r\nimport CodeEditor from '../monaco/CodeEditor';\r\nimport compileGlobalMotoko from '../../compilers/utils/compileGlobalMotoko';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT, ERROR_EVENT} from '../../contexts/EventsContext';\r\nimport useOutputPanelState from '../../hooks/persistent/useOutputPanelState';\r\nimport useFullscreenPanelState from '../../hooks/persistent/useFullscreenPanelState';\r\nimport useListener from '../../hooks/utils/useListener';\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard/lib/Component';\r\nimport ExternalLink from '../common/ExternalLink';\r\nimport useReactTooltip from '../../hooks/useReactTooltip';\r\nimport {isMobile} from 'react-device-detect';\r\nimport {onLeftClick} from '../../utils/eventHelpers';\r\n\r\nconst OutputContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    top: ${isMobile ? 0 : 66}px; // Magic temporary evil number\r\n    height: calc(100% - ${isMobile ? 0 : 66}px); // Magic temporary evil number; prevents scrollbar\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 40%;\r\n    transition: 0.4s;\r\n    z-index: 100;\r\n    //padding-top: 95px;\r\n    opacity: .98;\r\n\r\n    ${props => props.closed && css`\r\n        transform: translateX(100%);\r\n    `}\r\n\r\n    ${props => props.fullscreen && css`\r\n        width: 100%;\r\n    `}\r\n`;\r\n\r\nconst ClipboardButton = styled.div`\r\n    opacity: 0.7;\r\n\r\n    &:hover {\r\n        opacity: 1;\r\n    }\r\n`;\r\n\r\nconst playgroundOrigin = process.env.REACT_APP_MOTOKO_PLAYGROUND_ORIGIN;\r\nconst playgroundKey = 'blocks';\r\n\r\nconst outputPanelId = 'output';\r\n\r\nexport default function OutputPanel({editor}) {\r\n\r\n    const [panel, setPanel] = useOutputPanelState();\r\n    const [fullscreen, setFullscreen] = useFullscreenPanelState();\r\n    const [output, setOutput] = useState('');\r\n    const [copied, setCopied] = useState(false);\r\n    // const [playgroundPromise, setPlaygroundPromise] = useState(null);\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    const closed = !panel;\r\n\r\n    // Generate output source code\r\n    const getOutput = () => compileGlobalMotoko(editor);\r\n\r\n    // Show an error message\r\n    // const handleError = err => events.emit(ERROR_EVENT, err);\r\n\r\n    const handleOpenPlayground = () => {\r\n        // let promise = playgroundPromise;\r\n        // if(!promise) {\r\n        //     promise = createMotokoPlaygroundShareLink(output, handleError)\r\n        //         .then(url => {\r\n        //             window.open(url, '_blank');\r\n        //         })\r\n        //         .catch(handleError)\r\n        //         .then(() => setPlaygroundPromise(null));\r\n        //     setPlaygroundPromise(promise);\r\n        // }\r\n\r\n        try {\r\n            const playgroundWindow = window.open(`${playgroundOrigin}?post=${playgroundKey}&tag=_`, 'motokoPlayground');\r\n\r\n            // Interval index used as acknowledge key\r\n            const ack = setInterval(() => {\r\n                playgroundWindow.postMessage(`${playgroundKey}${JSON.stringify({\r\n                    type: 'workplace',\r\n                    acknowledge: ack,\r\n                    deploy: true,\r\n                    actions: [{\r\n                        type: 'loadProject',\r\n                        payload: {\r\n                            files: {\r\n                                'Main.mo': compileGlobalMotoko(editor),\r\n                            },\r\n                        },\r\n                    }],\r\n                })}`, playgroundOrigin);\r\n            }, 500);\r\n\r\n            const responseListener = ({source, origin, data}) => {\r\n                if(source === playgroundWindow && origin === playgroundOrigin && typeof data === 'string' && data.startsWith(playgroundKey)) {\r\n                    try {\r\n                        const message = JSON.parse(data.substring(playgroundKey.length));\r\n                        if(message.acknowledge === ack) {\r\n                            clearInterval(ack);\r\n                            window.removeEventListener('message', responseListener);\r\n                        }\r\n                    }\r\n                    catch(err) {\r\n                        events.emit(err);\r\n                    }\r\n                }\r\n            };\r\n            window.addEventListener('message', responseListener, false);\r\n        }\r\n        catch(err) {\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    };\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => {\r\n        setOutput(closed ? '' : getOutput());\r\n        setCopied(false);\r\n    });\r\n\r\n    useReactTooltip();\r\n\r\n    // Regenerate output after opening panel\r\n    if(!closed && !output) {\r\n        setOutput(getOutput());\r\n    }\r\n\r\n    return (\r\n        <OutputContainer\r\n            className={classNames('output-panel px-3 pt-3', closed && 'd-none d-sm-block')}\r\n            closed={closed}\r\n            fullscreen={isMobile || fullscreen === outputPanelId}>\r\n            <div className={classNames('d-flex align-items-center mb-2', !isMobile && 'justify-content-between')}>\r\n                <div className=\"clickable px-2 pb-2\" {...onLeftClick(() => setPanel(null))}>\r\n                    <FiX size={18}/>\r\n                </div>\r\n                <h3 className=\"mx-3 mb-0 noselect\">Compiled Output</h3>\r\n                {!isMobile && (\r\n                    <div\r\n                        className=\"clickable px-2 pb-2\"\r\n                        {...onLeftClick(() => setFullscreen(fullscreen === outputPanelId ? false : outputPanelId))}>\r\n                        {fullscreen === outputPanelId\r\n                            ? <FiMinimize2 size={18}/> // TODO: horizontally flip icons and swap positions with close button?\r\n                            : <FiMaximize2 size={18}/>\r\n                        }\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className=\"flex-grow-1\">\r\n                <CodeEditor value={output} readOnly/>\r\n            </div>\r\n            <div className=\"bottom-bar d-flex flex-row align-items-center justify-content-around py-2\">\r\n                {/*<CopyToClipboard text={output} onCopy={() => setCopied(true)}>*/}\r\n                {/*    <ClipboardButton className=\"clickable d-flex flex-row align-items-center justify-content-center py-2 px-3\">*/}\r\n                {/*        <small>{copied ? 'Copied!' : 'Copy to Clipboard'}</small>*/}\r\n                {/*        <FiClipboard className=\"ms-2\"/>*/}\r\n                {/*    </ClipboardButton>*/}\r\n                {/*</CopyToClipboard>*/}\r\n                <ExternalLink\r\n                    // className=\"flex-grow-1\"\r\n                    href=\"https://smartcontracts.org/docs/language-guide/basic-concepts.html\">\r\n                    <div\r\n                        className=\"btn btn-outline-secondary d-flex justify-content-center\"\r\n                        data-tip=\"Learn more about the Motoko programming language.\">\r\n                        <FaLink className=\"mt-1 me-2\"/>\r\n                        {isMobile ? 'Docs' : 'Documentation'}\r\n                    </div>\r\n                </ExternalLink>\r\n                <CopyToClipboard text={output} onCopy={() => setCopied(true)}>\r\n                    <ClipboardButton\r\n                        className=\"clickable d-flex justify-content-center py-2 px-4\"\r\n                        data-tip=\"Copy to Clipboard\"\r\n                        data-delay-show={100}>\r\n                        <FiClipboard className=\"h5 mb-0\"/>\r\n                        {copied && <small className=\"ms-2\">Copied!</small>}\r\n                    </ClipboardButton>\r\n                </CopyToClipboard>\r\n                {/*<ExternalLink className=\"flex-grow-1\" href=\"https://m7sm4-2iaaa-aaaab-qabra-cai.raw.ic0.app/?tag=_\">*/}\r\n                <div\r\n                    className=\"btn btn-outline-success d-flex justify-content-center\"\r\n                    data-tip=\"Run and deploy your smart contract on Motoko Playground.\"\r\n                    {...onLeftClick(handleOpenPlayground)}>\r\n                    {/*{playgroundPromise ? (*/}\r\n                    {/*    <FaSpinner className=\"mt-1 me-2\"/>*/}\r\n                    {/*) : (*/}\r\n                    <FaPlay className=\"mt-1 me-2\"/>\r\n                    {/*)}*/}\r\n                    Build & Run\r\n                </div>\r\n                {/*</ExternalLink>*/}\r\n            </div>\r\n        </OutputContainer>\r\n    );\r\n}","import useLocalStorage from '../utils/useLocalStorage';\r\n\r\nexport default function useFullscreenPanelState() {\r\n    return useLocalStorage('blocks.fullscreenPanel', false);\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport default function TextControlHandle({control, bindInput, validation: {minLength, maxLength}}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    let invalid = !control.validate(value);\r\n\r\n    return (\r\n        <input\r\n            type=\"text\"\r\n            className={classNames('w-100', invalid && 'invalid')}\r\n            autoComplete=\"blocks-app\"\r\n            autoCorrect=\"off\"\r\n            ref={bindInput}\r\n            value={value || ''}\r\n            placeholder={control.name}\r\n            minLength={minLength}\r\n            maxLength={maxLength}\r\n            onChange={event => setValue(event.target.value || undefined)}\r\n        />\r\n    );\r\n}\r\n","import {anyType, getType, TYPE_MAP} from '../../../block-types/types';\r\nimport React, {useContext} from 'react';\r\nimport EventsContext, {ERROR_EVENT} from '../../../contexts/EventsContext';\r\nimport classNames from 'classnames';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\nimport getDefaultLabel from '../../../utils/getDefaultLabel';\r\n\r\nexport default function TypeSelect({value, constraintType, abstract, invalid, onChange, ...others}) {\r\n\r\n    constraintType = constraintType || anyType;\r\n\r\n    const types = [...TYPE_MAP.values()]\r\n        .filter(type => (abstract || !type.data.abstract) && constraintType.isSubtype(type));\r\n\r\n    let events = useContext(EventsContext);\r\n\r\n    if(value) {\r\n        try {\r\n            value = getType(value);\r\n        }\r\n        catch(err) {\r\n            onChange(value = undefined);///\r\n            // console.error(err);\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    }\r\n\r\n    invalid = invalid || !value || !types.some(t => t.isSubtype(value));\r\n\r\n    // if(invalid && types.length) {\r\n    //     let firstType = types[0];\r\n    //     if(firstType) {\r\n    //         onChange(value = firstType);\r\n    //     }\r\n    //     // value = constraintType;\r\n    // }\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <>\r\n            <select\r\n                className={classNames(invalid && 'invalid')}\r\n                value={value?.name}\r\n                onChange={event => onChange(getType({name: event.target.value}))}\r\n                {...others}>\r\n                {invalid && <option label=\"(Type)\" value={value?.name}/>}\r\n                {types.map(type => (\r\n                    <option key={type.name} label={type.name} value={type.name}/>\r\n                ))}\r\n            </select>\r\n            <div className=\"ps-2\">\r\n                {value?.generics?.map((type, i) => (\r\n                    <TypeSelect\r\n                        key={i}\r\n                        value={type}\r\n                        constraintType={value.data.baseType.generics[i]}\r\n                        abstract={abstract}\r\n                        data-tip={getDefaultLabel(value.data.genericNames?.[i])}\r\n                        onChange={t => {\r\n                            let generics = [...value.generics];\r\n                            generics.splice(i, 1, t);\r\n                            onChange(getType({\r\n                                ...value.toJSON(),\r\n                                generics,\r\n                            }));\r\n                        }}/>\r\n                ))}\r\n            </div>\r\n        </>\r\n    );\r\n}","import * as Rete from 'rete';\r\nimport TextControlHandle from '../../components/rete/controls/TextControlHandle';\r\nimport EventEmitter from 'events';\r\nimport {bindNodeInput} from '../../utils/bindNodeInput';\r\nimport TypeControlHandle from '../../components/rete/controls/TypeControlHandle';\r\nimport NodeControlHandle from '../../components/rete/controls/NodeControlHandle';\r\nimport CheckboxControlHandle from '../../components/rete/controls/CheckboxControlHandle';\r\nimport NumberControlHandle from '../../components/rete/controls/NumberControlHandle';\r\n\r\n// TODO: static assertions\r\nconst controlTypes = {\r\n    text: TextControlHandle,\r\n    number: NumberControlHandle,\r\n    checkbox: CheckboxControlHandle,\r\n    node: NodeControlHandle,\r\n    type: TypeControlHandle,\r\n};\r\n\r\nexport default class BaseControl extends Rete.Control {\r\n    constructor(editor, key, name, config = {}) {\r\n        super(key);\r\n\r\n        this.name = name;\r\n        this.config = config;\r\n        this.editor = editor;\r\n        this.render = 'react';\r\n        this.component = (typeof config.controlType === 'string' ? controlTypes[config.controlType] : config.controlType) || TextControlHandle;\r\n        this.props = {\r\n            ...config.controlProps,\r\n            validation: config.validation || {},\r\n            control: this,\r\n            editor,\r\n            bindInput: bindNodeInput,\r\n        };\r\n\r\n        this.events = new EventEmitter();\r\n    }\r\n\r\n    validate(value) {\r\n        if(value === undefined && !this.config.optional) {\r\n            return false;\r\n        }\r\n        if(value !== null && value !== undefined) {\r\n            let validation = this.config.validation;\r\n            if(validation) {\r\n                if('custom' in validation && !validation.custom(value)) {\r\n                    return false;\r\n                }\r\n                if('minLength' in validation && value.length < validation.minLength) {\r\n                    return false;\r\n                }\r\n                if('maxLength' in validation && value.length > validation.maxLength) {\r\n                    return false;\r\n                }\r\n                if('min' in validation && value < validation.min) {\r\n                    return false;\r\n                }\r\n                if('max' in validation && value > validation.max) {\r\n                    return false;\r\n                }\r\n                if('step' in validation && value - (validation.min || 0) % validation.step !== 0) {\r\n                    return false;\r\n                }\r\n                if('pattern' in validation && !validation.pattern.test(value)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    getDefaultValue() {\r\n        // return this.config.defaultValue;\r\n    }\r\n\r\n    getValue() {\r\n        let value = this.getData(this.key);\r\n        return value === undefined ? this.getDefaultValue() : value;\r\n    }\r\n\r\n    setValue(value) {\r\n        if(this.getData(this.key) === value) {\r\n            return;\r\n        }\r\n\r\n        this.putData(this.key, value);\r\n        this.events.emit('update', value);\r\n\r\n        this.config.onChange?.(this);////\r\n    }\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\n\r\n\r\nexport default function NumberControlHandle({control, bindInput, validation: {min, max, step}}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    return (\r\n        <input\r\n            type=\"number\"\r\n            style={{width: '8em'}}\r\n            ref={bindInput}\r\n            min={min}\r\n            max={max}\r\n            step={step}\r\n            value={value || 0}\r\n            onChange={event => setValue(+event.target.value || event.target.value)}\r\n        />\r\n    );\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\n\r\n\r\nexport default function CheckboxControlHandle({control, bindInput}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    return (\r\n        <label ref={bindInput}>\r\n            <input\r\n                type=\"checkbox\"\r\n                checked={!!value}\r\n                onChange={event => setValue(event.target.checked)}\r\n            />\r\n            <span className=\"input-title my-0\" style={{verticalAlign: 'top'}}>{control.name}</span>\r\n        </label>\r\n    );\r\n}\r\n","import React, {useContext, useState} from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../contexts/EventsContext';\r\nimport useListener from '../../../hooks/utils/useListener';\r\nimport getNodeLabel from '../../../utils/getNodeLabel';\r\nimport classNames from 'classnames';\r\nimport {getBlock} from '../../../editor/blocks';\r\n\r\n\r\nexport default function NodeControlHandle({editor, control, bindInput}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    let [nodes, setNodes] = useState(() => [...editor.nodes]);\r\n\r\n    let events = useContext(EventsContext);\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => setNodes([...editor.nodes]));\r\n\r\n    let blockName = control.config.type?.meta.block;///\r\n    let blockFilter = blockName && (Array.isArray(blockName) ? blockName : [blockName]).map(block => {\r\n        let name = typeof block === 'string' ? block : block.name;\r\n        getBlock(name); // Ensure block exists\r\n        return name;\r\n    });\r\n\r\n    if(blockFilter) {\r\n        nodes = nodes.filter(n => !blockFilter || blockFilter.includes(n.name));\r\n    }\r\n\r\n    let invalid = !value || !nodes.some(n => String(n.id) === String(value) && (!blockFilter || blockFilter.includes(n.name)));\r\n\r\n    // TODO: cleanly prevent number -> string id conversion\r\n    return (\r\n        <select\r\n            ref={bindInput}\r\n            className={classNames(invalid && 'invalid')}\r\n            style={{maxWidth: '100%'}}\r\n            value={value}\r\n            onChange={event => setValue(event.target.value || undefined)}>\r\n            <option key={-1} label={'(Select a Node)'} value={undefined}/>\r\n            {nodes.map(node => (\r\n                <option key={node.id} label={getNodeLabel(node, editor)} value={node.id}/>\r\n            ))}\r\n        </select>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport useControlValue from '../../../hooks/useControlValue';\r\nimport TypeSelect from '../../common/inputs/TypeSelect';\r\nimport {typeType} from '../../../block-types/types';\r\n\r\n\r\nexport default function TypeControlHandle({abstract, control, bindInput}) {\r\n    let [value, setValue] = useControlValue(control);\r\n\r\n    let constraintType = control.config.type;\r\n    if(typeType.isSubtype(constraintType)) {\r\n        constraintType = constraintType.generics[0];\r\n    }\r\n\r\n    let invalid = !control.validate(value);\r\n\r\n    // if(typeType.isSubtype(value)) {\r\n    //     value = value?.generics[0];\r\n    // }\r\n\r\n    return (\r\n        <div ref={bindInput}>\r\n            <TypeSelect\r\n                value={value}\r\n                constraintType={constraintType}\r\n                abstract={abstract}\r\n                invalid={invalid}\r\n                onChange={setValue/*type => setValue(typeType.of(type))*/}>\r\n            </TypeSelect>\r\n        </div>\r\n    );\r\n}\r\n","import BaseControl from './BaseControl';\r\n\r\nexport default class PropControl extends BaseControl {\r\n    constructor(editor, prop, name) {\r\n        super(editor, prop.key, name, {\r\n            ...prop.type?.data || {},\r\n            ...prop.config || {},\r\n            prop,\r\n            type: prop.type,\r\n            optional: prop.optional,\r\n        });\r\n    }\r\n\r\n    getDefaultValue() {\r\n        // let value = super.getDefaultValue();\r\n        // return value !== undefined ? value : this.config.type?.getDefaultValue();\r\n\r\n        if('controlDefault' in this.config) {\r\n            return this.config.controlDefault;\r\n        }\r\n\r\n        return this.config.type?.getDefaultValue();\r\n    }\r\n\r\n    getValue() {\r\n        let value = super.getValue();\r\n        if(this.config.type?.fromJSON) {\r\n            value = this.config.type.fromJSON(value, this);\r\n        }\r\n        return value;\r\n    }\r\n}","import {getType} from '../block-types/types';\r\n\r\nexport default function flattenUniqueTypes(type, array = []) {\r\n    type = getType(type);\r\n    if(!array.includes(type)) {\r\n        array.push(type);\r\n    }\r\n    for(const generic of type.generics) {\r\n        flattenUniqueTypes(generic, array);\r\n    }\r\n    return array;\r\n}\r\n","import Rete from 'rete';\r\nimport {getType} from '../../block-types/types';\r\nimport flattenUniqueTypes from '../../utils/flattenUniqueTypes';\r\n\r\nexport default class PropSocket extends Rete.Socket {\r\n    constructor(title, prop) {\r\n        const type = getType(prop.type);\r\n        super(title, {...type.data, type});\r\n\r\n        this.prop = prop;\r\n    }\r\n\r\n    findProp() {\r\n        return this.prop;\r\n    }\r\n\r\n    findLabel() {\r\n        const type = this.findType();\r\n        // const label = getPropLabel(this.prop);\r\n\r\n        // let text = this.prop.info ? `${label} : ${getInfoText(this.prop.info)}` : label;\r\n        let text = '';\r\n        for(const relevant of flattenUniqueTypes(type)) {\r\n            if(!relevant.data.abstract) {\r\n                const info = relevant.meta.info || relevant.data.info;\r\n                if(info) {\r\n                    if(text) {\r\n                        text += '<br>';\r\n                    }\r\n                    text += `${relevant.toTypeString()} : ${info}`;\r\n                }\r\n            }\r\n        }\r\n        return text;\r\n    }\r\n\r\n    findType() {\r\n        return this.data.type;\r\n    }\r\n\r\n    compatibleWith(other) {\r\n        if(!('findType' in other)) {\r\n            return false;\r\n        }\r\n        let type = this.findType();\r\n        let otherType = other.findType();\r\n\r\n        return type.isSubtype(otherType) || otherType.isSubtype(type);\r\n    }\r\n}","import PropSocket from './PropSocket';\r\nimport {typeType} from '../../block-types/types';\r\n\r\nexport default class PropOutputSocket extends PropSocket {\r\n    constructor(node, title, prop, typeCompiler) {\r\n        super(title, prop/*.type*/);\r\n\r\n        this.nodeId = node.id;\r\n        this.nodeName = node.name;\r\n        // this.prop = prop;\r\n        this.typeCompiler = typeCompiler;\r\n\r\n        this._isTypeOfType = typeType.isSubtype(this.prop.type);\r\n    }\r\n\r\n    findType() {\r\n        if(this.typeCompiler.editor.silent) {\r\n            return super.findType();\r\n        }\r\n\r\n        try {\r\n            let type = this.typeCompiler.getOutput(this.nodeId, this.prop.key);\r\n            if(type) {\r\n                if(this._isTypeOfType) {\r\n                    if(typeType.isSubtype(type)) {\r\n                        console.warn('Type of Type of Type (Intentional?)');\r\n                    }\r\n                    type = typeType.of(type);\r\n                }\r\n                return type || super.findType();\r\n            }\r\n        }\r\n        catch(err) {\r\n            console.warn(`Error on socket [${this.nodeName}.${this.prop.key}]:`, err);///\r\n        }\r\n        return super.findType();\r\n    }\r\n\r\n    // compatibleWith(other) {\r\n    //     if(!('findType' in other)) {\r\n    //         return;\r\n    //     }\r\n    //     let reversed = !!this.data.reversed;\r\n    //     if(reversed === !other.data.reversed) {\r\n    //         return false;\r\n    //     }\r\n    //     let self = this;\r\n    //     if(!reversed) {\r\n    //         [self, other] = [other, self];\r\n    //     }\r\n    //     let selfType = self.findType();\r\n    //     let otherType = other.findType();\r\n    //\r\n    //     console.log(selfType, otherType);\r\n    //\r\n    //     return selfType && selfType.isSubtype(otherType);\r\n    // }\r\n}","import Rete from 'rete';\r\nimport PropControl from '../controls/PropControl';\r\nimport PropSocket from '../sockets/PropSocket';\r\nimport PropOutputSocket from '../sockets/PropOutputSocket';\r\nimport {sentenceCase} from 'change-case';\r\nimport getPropLabel from '../../utils/getPropLabel';\r\n\r\nexport default class BlockComponent extends Rete.Component {\r\n\r\n    constructor(block) {\r\n        super(block.name);\r\n\r\n        this.block = block;\r\n        this.keywords = [\r\n            ...sentenceCase(block.name).toLowerCase().split(' ').filter(s => s),\r\n            ...block.title?.split(' ').filter(s => s) || [],\r\n            ...block.keywords || [],\r\n        ];\r\n    }\r\n\r\n    getEditorNode(node) {\r\n        return this.editor.nodes.find(n => n.id === node.id);\r\n    }\r\n\r\n    getControls(node) {\r\n        return this.getEditorNode(node).controls;\r\n    }\r\n\r\n    async builder(node) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        this.editor.trigger('prenodecreate', node, this);\r\n\r\n        const addProp = (prop, isPropOutput) => {\r\n            let title = getPropLabel(prop);\r\n            let socket = isPropOutput ? new PropOutputSocket(node, title, prop, this.editor.compilers.type) : new PropSocket(title, prop);\r\n            if(!!prop.type.data.reversed === isPropOutput) {\r\n                return addPropInput(prop, socket, isPropOutput);\r\n            }\r\n            else {\r\n                return addPropOutput(prop, socket, isPropOutput);\r\n            }\r\n        };\r\n\r\n        const addPropInput = (prop, socket, isOutput) => {\r\n            let title = getPropLabel(prop);\r\n            let input = new Rete.Input(prop.key, title, socket, prop.type.data.reversed || !!prop.multi);\r\n            if(shouldPropHaveControl(prop, socket, isOutput)) {\r\n                input.addControl(new PropControl(this.editor, prop, title));\r\n            }\r\n            node.addInput(input);\r\n            return input;\r\n        };\r\n\r\n        const addPropOutput = (prop, socket, isOutput) => {\r\n            let title = getPropLabel(prop);\r\n            let output = new Rete.Output(prop.key, title, socket, !prop.type.data.reversed || !!prop.multi);\r\n            node.addOutput(output);\r\n            if(shouldPropHaveControl(prop, socket, isOutput)) {\r\n                node.addControl(new PropControl(this.editor, prop, title));\r\n            }\r\n            return output;\r\n        };\r\n\r\n        const shouldPropHaveControl = (prop, socket, isOutput) => {\r\n            return prop.control || (!!socket.data.reversed === isOutput && socket.data.controlType && !prop.multi);\r\n        };\r\n\r\n        for(let prop of this.block.inputs) {\r\n            addProp(prop, false);\r\n        }\r\n        for(let prop of this.block.outputs) {\r\n            addProp(prop, true);\r\n        }\r\n\r\n        for(let prop of this.block.controls) {\r\n            let title = getPropLabel(prop);\r\n            node.addControl(new PropControl(this.editor, prop, title));\r\n        }\r\n\r\n        // // Advanced mode control if relevant\r\n        // if(this.block.props.find(prop => prop.advanced)) {\r\n        //     node.addControl(new BaseControl(this.editor, 'editor:advanced', 'Advanced', {\r\n        //         controlType: CheckboxControlHandle,\r\n        //     }));\r\n        // }\r\n    }\r\n}\r\n","import React, {useContext} from 'react';\r\nimport AreaPlugin from 'rete-area-plugin';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT, EDITOR_SAVE_EVENT, ERROR_EVENT} from '../../contexts/EventsContext';\r\nimport BlockComponent from '../../editor/components/BlockComponent';\r\nimport {BLOCK_MAP} from '../../editor/blocks';\r\nimport useListener from '../../hooks/utils/useListener';\r\nimport {SHORTCUT_KEYS} from '../../editor/shortcutKeys';\r\nimport ConnectionAwareListContext from '../../contexts/ConnectionAwareListContext';\r\nimport useAutosaveState from '../../hooks/persistent/useAutosaveState';\r\nimport createEditor from '../../editor/createEditor';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport useTimeout from '../../hooks/utils/useTimeout';\r\n\r\nconst inputTags = ['input', 'textarea'];\r\n\r\n\r\nexport default function EditorWrapper({observable, onSetup, onChange, onSave, history}) {\r\n    const [autosave] = useAutosaveState();\r\n\r\n    const events = useContext(EventsContext);\r\n    const connectionAwareList = useContext(ConnectionAwareListContext);\r\n\r\n    let editor;\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, (_editor) => {\r\n        if(_editor === editor) {\r\n            editor.trigger('change');\r\n            onChange?.(editor);\r\n            if(autosave) {\r\n                events.emit(EDITOR_SAVE_EVENT, editor);\r\n            }\r\n        }\r\n    });\r\n    useListener(events, EDITOR_SAVE_EVENT, (_editor) => {\r\n        if(_editor === editor) {\r\n            onSave?.(editor.toJSON(), editor);\r\n        }\r\n    });\r\n\r\n    const bindElement = (element) => {\r\n        if(editor) {\r\n            editor.silent = true;\r\n            editor.clear();\r\n            editor.components.clear();\r\n            editor.destroy();\r\n            editor = null;\r\n        }\r\n        if(!element) {\r\n            return;\r\n        }\r\n\r\n        // Remove previous containers\r\n        while(element.firstChild) {\r\n            element.removeChild(element.firstChild);\r\n        }\r\n        const container = document.createElement('div');\r\n        container.style.height = '100%';\r\n        element.appendChild(container);\r\n\r\n        editor = createEditor(container, {\r\n            history,\r\n        });\r\n\r\n        window.EDITOR = editor; // Browser debugging\r\n\r\n        const onKeyDown = (event) => {\r\n            const key = event.key;\r\n\r\n            if(event.ctrlKey || event.metaKey) {\r\n                // if(key === 'q') {\r\n                //     editor.trigger('arrange');\r\n                // }\r\n                if(key === 's') {\r\n                    event.preventDefault();\r\n                    events.emit(EDITOR_SAVE_EVENT, editor);\r\n                    console.log('Saved successfully');\r\n                }\r\n                if(key === 'z') {\r\n                    editor.trigger(event.shiftKey ? 'redo' : 'undo');\r\n                }\r\n                if(key === 'y') {\r\n                    editor.trigger('redo');\r\n                }\r\n            }\r\n            else if(!document.activeElement || !inputTags.includes(document.activeElement.nodeName.toLowerCase())) {\r\n                if(key === 'Delete') {\r\n                    editor.selected.each(n => editor.removeNode(n));\r\n                    ReactTooltip.hide();\r\n                }\r\n                else {\r\n                    const block = SHORTCUT_KEYS.get(key);\r\n                    if(block) {\r\n                        editor.createNodeAtCursor(editor.getComponent(block.name))\r\n                            .catch(err => events.emit('error', err));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        document.addEventListener('keydown', onKeyDown);\r\n        editor.on('destroy', () => document.removeEventListener('keydown', onKeyDown));\r\n\r\n        for(const block of BLOCK_MAP.values()) {\r\n            const node = new BlockComponent(block);\r\n            editor.register(node);\r\n        }\r\n\r\n        let timeout;\r\n        editor.on(['nodecreated', 'noderemoved', 'nodedragged', 'connectioncreated', 'connectionremoved'], async () => {\r\n            if(!editor.silent) {\r\n                // Debounce change events\r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(() => {\r\n                    events.emit(EDITOR_CHANGE_EVENT, editor);\r\n                });\r\n            }\r\n        });\r\n        editor.on('error', err => events.emit(ERROR_EVENT, err));\r\n\r\n        // TODO: dry with rete-blocks-contextmenu-plugin\r\n        const handleConnectionEnd = (startIO, endIO) => {\r\n            currentIO = null;\r\n            for(const listener of connectionAwareList) {\r\n                listener(false, startIO, endIO);\r\n            }\r\n        };\r\n        let currentIO = null;\r\n        let connectionMouseMoved = false;\r\n        editor.on('mousemove', () => {\r\n            connectionMouseMoved = true;\r\n        });\r\n        editor.on('connectionpick', io => {\r\n            // noinspection JSUnresolvedVariable\r\n            if(window.event.button !== 0) {\r\n                return; // Rete.js hotfix\r\n            }\r\n\r\n            // Remove connection on ctrl+click\r\n            const connection = io.connections[0];\r\n            // noinspection JSDeprecatedSymbols, JSUnresolvedVariable\r\n            if(window.event.ctrlKey) {\r\n                if(connection) {\r\n                    editor.removeConnection(connection);\r\n                }\r\n                return false;\r\n            }\r\n\r\n            connectionMouseMoved = false;\r\n            if(currentIO) {\r\n                handleConnectionEnd(currentIO, io);\r\n                return;\r\n            }\r\n            const prevConnections = [...io.connections];\r\n            setTimeout(() => {\r\n                if(io.connections.length < prevConnections.length) {\r\n                    // Connection is being removed\r\n                    const connection = prevConnections.find(c => !io.connections.includes(c));\r\n                    currentIO = (io === connection.input ? connection.output : connection.input);\r\n                }\r\n                else {\r\n                    currentIO = io;\r\n                }\r\n                for(const listener of connectionAwareList) {\r\n                    listener(true, currentIO);\r\n                }\r\n            });\r\n        });\r\n        editor.on('connectiondrop', io => {\r\n            if(!connectionMouseMoved) {\r\n                return;\r\n            }\r\n            const prevConnections = [...io.connections];\r\n            setTimeout(() => {\r\n                // Prevent activating if connections changed\r\n                if(io.connections.length !== prevConnections.length || io.connections.some((conn, i) =>\r\n                    (conn.input !== prevConnections[i].input) || (conn.output !== prevConnections[i].output))) {\r\n                    return;\r\n                }\r\n                handleConnectionEnd(io);\r\n            });\r\n        });\r\n        editor.on(['nodecreated', 'noderemoved', 'connectionremoved'], () => {\r\n            handleConnectionEnd();\r\n        });\r\n\r\n        // const onMouseUp = event => {\r\n        //     if(currentIO) {\r\n        //         handleConnectionEnd(currentIO);\r\n        //     }\r\n        // };\r\n        // document.addEventListener('mouseup', onMouseUp);\r\n        // editor.on('destroy', () => document.removeEventListener('mouseup', onMouseUp));\r\n    };\r\n\r\n    async function loadState(state) {\r\n        if(!state) {\r\n            return false;\r\n        }\r\n        const result = await editor.fromJSON(state);\r\n        if(result) {\r\n            editor.view.resize();\r\n            AreaPlugin.zoomAt(editor);\r\n            editor.nodes.forEach(node => node.update()); // Redraw nodes\r\n            // TODO: remove setTimeout() workaround\r\n            setTimeout(() => events.emit(EDITOR_CHANGE_EVENT, editor));\r\n            // events.emit(EDITOR_CHANGE_EVENT, editor);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    useTimeout(() => (async () => {\r\n        await onSetup?.(loadState, editor);\r\n        observable.set(editor);\r\n    })().catch(err => events.emit(ERROR_EVENT, err)));\r\n\r\n    return (\r\n        <div className=\"h-100\" ref={bindElement}/>\r\n    );\r\n}","import {useMemo} from 'react';\r\nimport useObjectObservable from './utils/useObjectObservable';\r\n\r\nexport default function useTutorialVariables(progress) {\r\n\r\n    const variables = useMemo(() => progress.tutorial.setupVariables(progress), [progress]);\r\n\r\n    return useObjectObservable(variables);\r\n}\r\n","import {useEffect, useState} from 'react';\r\n\r\n// Use an object {K: V} constructed from {K: Observable<V>}\r\nexport default function useObjectObservable(object) {\r\n    let [result, setResult] = useState({});\r\n\r\n    // const unsubscribe = useMemo(() => {\r\n    //     const callbacks = [];\r\n    //     for(const [key, observable] of Object.entries(object)) {\r\n    //         result[key] = observable.get();\r\n    //         callbacks.push(observable.subscribe(value => {\r\n    //             if(value !== result[key]) {\r\n    //                 result[key] = value;\r\n    //                 setResult({...result});\r\n    //             }\r\n    //         }));\r\n    //     }\r\n    //     return () => callbacks.forEach(callback => callback());\r\n    //     // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    // }, [object /* result */]);\r\n    //\r\n    // useEffect(() => unsubscribe, [unsubscribe]);\r\n\r\n    useEffect(() => {\r\n        const callbacks = [];\r\n        for(const [key, observable] of Object.entries(object)) {\r\n            result[key] = observable.get();\r\n            callbacks.push(observable.subscribe(value => {\r\n                if(value !== result[key]) {\r\n                    result[key] = value;\r\n                    setResult({...result});\r\n                }\r\n            }));\r\n        }\r\n        return () => callbacks.forEach(callback => callback());\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [object]);\r\n\r\n    return result;\r\n}\r\n","import {Button, ButtonGroup, Card} from 'react-bootstrap';\r\nimport React, {useCallback} from 'react';\r\nimport useTutorialProgressState from '../../hooks/persistent/useTutorialProgressState';\r\nimport useFamiliarityState, {FAMILIAR, LEARNING} from '../../hooks/persistent/useFamiliarityState';\r\nimport styled, {createGlobalStyle} from 'styled-components';\r\nimport {helloWorldTutorial} from '../../tutorials/definitions/helloWorldTutorial';\r\nimport getTutorialStep from '../../tutorials/utils/getTutorialStep';\r\nimport useTutorialVariables from '../../hooks/useTutorialVariables';\r\nimport useReactTooltip from '../../hooks/useReactTooltip';\r\nimport useListener from '../../hooks/utils/useListener';\r\nimport {FiSmile, FiX} from 'react-icons/fi';\r\nimport {LearningIcon} from '../common/Icon';\r\nimport {TUTORIAL_STEP_STORE} from '../../observables/tutorialStepStore';\r\nimport {onLeftClick} from '../../utils/eventHelpers';\r\n\r\nconst StyledLearningIcon = styled(LearningIcon)`\r\n    width: 24px;\r\n    fill: #FFF;\r\n`;\r\n\r\nconst StyledCard = styled(Card)`\r\n    opacity: .9;\r\n    box-shadow: 0 2px 12px #0005;\r\n    border: none;\r\n    max-width: 30rem;\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n`;\r\n\r\nconst StyledCardHeader = styled(Card.Header)`\r\n    //background: #8649E1\r\n`;\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    ${props => props.tutorialCss}\r\n    ${props => props.stepCss}\r\n`;\r\n\r\nfunction HelperCard({title, icon, iconTooltip, hideCloseButton, children, ...others}) {\r\n    const [, setProgress] = useTutorialProgressState();\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <StyledCard {...others}>\r\n            {(icon || title) && (\r\n                <StyledCardHeader className=\"helper-card-header bg-info py-3\">\r\n                    <h4 className=\"mb-0 d-flex align-items-center justify-content-start text-white\">\r\n                        <span className=\"me-3 mb-1\" data-tip={iconTooltip} data-place=\"top\" data-delay-show={0}>\r\n                            {icon || <StyledLearningIcon/>}\r\n                        </span>\r\n                        {title && <span className=\"me-3 flex-grow-1\">{title}</span>}\r\n                        {!hideCloseButton && (\r\n                            <span className=\"float-end\">\r\n                            <FiX className=\"clickable text-white\" {...onLeftClick(() => setProgress(null))}/>\r\n                        </span>\r\n                        )}\r\n                    </h4>\r\n                </StyledCardHeader>\r\n            )}\r\n            <Card.Body className=\"helper-card-body\">\r\n                {children}\r\n            </Card.Body>\r\n        </StyledCard>\r\n    );\r\n}\r\n\r\nfunction TutorialProgressCard({progress, onComplete}) {\r\n    const variables = useTutorialVariables(progress);\r\n\r\n    const {tutorial, editor} = progress;\r\n\r\n    const step = getTutorialStep(progress, variables);\r\n\r\n    TUTORIAL_STEP_STORE.set(step);\r\n\r\n    // Allow tutorials to intercept node creation\r\n    useListener(editor, 'prenodecreate', (node) => {\r\n        if(!editor.silent && step) {\r\n            if(step.setupNode) {\r\n                step.setupNode(node, progress, variables);\r\n            }\r\n        }\r\n    });\r\n\r\n    if(!step) {\r\n        // Tutorial completed\r\n        return (\r\n            <HelperCard\r\n                title=\"Congratulations!\"\r\n                icon={<FiSmile/>}>\r\n                You completed our \"{tutorial.name}\" tutorial.\r\n                <hr/>\r\n                <ButtonGroup className=\"d-flex\">\r\n                    <Button variant=\"success\" {...onLeftClick(() => onComplete())}>Close</Button>\r\n                </ButtonGroup>\r\n            </HelperCard>\r\n        );\r\n    }\r\n\r\n    // Custom JSX from tutorial step\r\n    const rendered = step.render?.(progress, variables);\r\n\r\n    // Tutorial in progress\r\n    return (\r\n        <HelperCard\r\n            title={step.title || tutorial.name}\r\n            iconTooltip={`${tutorial.name} (${tutorial.description})`}>\r\n            {step.info}\r\n            {rendered && step.info && <hr/>}\r\n            {rendered}\r\n            {(tutorial.style || step.style) && (\r\n                <GlobalStyle tutorialCss={tutorial.style} stepCss={step.style}/>\r\n            )}\r\n        </HelperCard>\r\n    );\r\n}\r\n\r\nexport default function TutorialCard() {\r\n    const [progress, setProgress] = useTutorialProgressState();\r\n    const [familiarity, setFamiliarity] = useFamiliarityState();\r\n\r\n    // Temp: browser debug\r\n    window.resetTutorial = () => {\r\n        setProgress(null);\r\n        setFamiliarity(null);\r\n    };\r\n\r\n    const onAccept = useCallback(() => {\r\n        setProgress({\r\n            tutorial: helloWorldTutorial,\r\n        });\r\n        setFamiliarity(LEARNING);\r\n    }, [setFamiliarity, setProgress]);\r\n\r\n    const onDecline = useCallback(() => {\r\n        setFamiliarity(FAMILIAR);\r\n    }, [setFamiliarity]);\r\n\r\n    const onComplete = useCallback(() => {\r\n        setProgress(null);\r\n    }, [setProgress]);\r\n\r\n    if(progress) {\r\n        return (\r\n            <TutorialProgressCard progress={progress} onComplete={onComplete}/>\r\n        );\r\n    }\r\n    if(!familiarity) {\r\n        return (\r\n            <HelperCard title=\"New to Blocks?\" hideCloseButton={true}>\r\n                <ButtonGroup className=\"d-flex\">\r\n                    <Button variant=\"success\" {...onLeftClick(onAccept)}>Start Tutorial</Button>\r\n                    <Button variant=\"\" className=\"text-muted\" {...onLeftClick(onDecline)}>Skip</Button>\r\n                </ButtonGroup>\r\n            </HelperCard>\r\n        );\r\n    }\r\n    return null;\r\n}\r\n","export default function getTutorialStep(progress, variables) {\r\n    const {tutorial/*, step, stepIndex*/} = progress;\r\n\r\n    // let i = step.checkpoint ? stepIndex : 0;\r\n    let i = 0;///\r\n    while(i < tutorial.steps.length) {\r\n        const step = tutorial.steps[i];\r\n        if(!step.isComplete?.(progress, variables)) {\r\n            break;\r\n        }\r\n        i++;\r\n    }\r\n    return i === tutorial.steps.length ? null : tutorial.steps[i];\r\n}\r\n","import useLocalStorage from '../utils/useLocalStorage';\r\nimport getQueryConfig from '../../utils/getQueryConfig';\r\nimport isEmbeddedMode from '../../utils/isEmbeddedMode';\r\n\r\nexport const LEARNING = 'learning';\r\nexport const FAMILIAR = 'familiar';\r\n\r\nexport default function useFamiliarityState() {\r\n    let familiarityConfig = getQueryConfig('familiarity', isEmbeddedMode() ? 'familiar' : null);\r\n    if(familiarityConfig === 'none') {\r\n        familiarityConfig = null;\r\n    }\r\n\r\n    return useLocalStorage('blocks.familiarity', familiarityConfig);\r\n}\r\n","import React, {useContext} from 'react';\r\nimport EventsContext, {ERROR_EVENT, PROJECT_LOAD_EVENT} from '../../contexts/EventsContext';\r\nimport classNames from 'classnames';\r\nimport styled from 'styled-components';\r\nimport EditorMenu from './EditorMenu';\r\nimport FileDropZone from '../common/FileDropZone';\r\nimport OutputPanel from './OutputPanel';\r\nimport EditorWrapper from '../rete/EditorWrapper';\r\nimport useObservableState from '../../hooks/utils/useObservableState';\r\nimport LoadBlocksFileContext from '../../contexts/LoadFileContext';\r\nimport {logTelemetry} from '../../telemetry';\r\nimport FloatingMenu from '../common/menus/FloatingMenu';\r\nimport TutorialCard from './TutorialCard';\r\nimport isMenuHidden from '../../utils/isMenuHidden';\r\n\r\nexport const DROP_ZONE_EXTENSIONS = ['.blocks', '.blocks.json'];\r\n\r\nconst EditorContainer = styled.div`\r\n    width: 100%;\r\n    height: 100vh;\r\n`;\r\n\r\nfunction EditorControls({observable}) {\r\n    const [editor] = useObservableState(observable);\r\n\r\n    if(!editor) {\r\n        return null;\r\n    }\r\n    return (\r\n        <>\r\n            {!isMenuHidden() && (\r\n                <EditorMenu editor={editor}/>\r\n            )}\r\n            <FloatingMenu top left>\r\n                <TutorialCard/>\r\n            </FloatingMenu>\r\n            <OutputPanel editor={editor}/>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default function Editor({observable, onSetup, onChange, onSave, history, className, ...others}) {\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    const loadBlocksFile = content => {\r\n        logTelemetry('project_import');\r\n\r\n        try {\r\n            const project = JSON.parse(content);\r\n            events.emit(PROJECT_LOAD_EVENT, project);\r\n        }\r\n        catch(err) {\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <LoadBlocksFileContext.Provider value={loadBlocksFile}>\r\n            <FileDropZone\r\n                options={{noClick: true, accept: DROP_ZONE_EXTENSIONS.join(',')}}\r\n                onFileContent={loadBlocksFile}>\r\n                <EditorContainer\r\n                    className={classNames('node-editor d-flex flex-grow-1 flex-column', className)}\r\n                    {...others}>\r\n                    <EditorControls observable={observable}/>\r\n                    <EditorWrapper\r\n                        observable={observable}\r\n                        onSetup={onSetup}\r\n                        onChange={onChange}\r\n                        onSave={onSave}\r\n                        history={history}\r\n                    />\r\n                </EditorContainer>\r\n            </FileDropZone>\r\n        </LoadBlocksFileContext.Provider>\r\n    );\r\n}\r\n","// Regex-based parser for Motoko (short-term solution for reverse code generation)\r\n\r\nconst indentCount = 4;\r\nconst indentString = ' '.repeat(indentCount);\r\n\r\nexport default function parseMotoko(input) {\r\n    const lines = (input || '')\r\n        .replace(/\\t/g, indentString)\r\n        .replace(/\\r/g, '')\r\n        .replace(/;\\n/g, '\\n') // Remove semicolons at end of lines\r\n        .split('\\n')\r\n        .map((line, i) => {\r\n            let indent = 0;\r\n            while(line.startsWith(indentString)) {\r\n                indent++;\r\n                line = line.substring(indentCount);\r\n            }\r\n            return [indent, line.trim(), i];\r\n        })\r\n        .filter(([, line]) => !!line.trim());\r\n\r\n    const result = {\r\n        imports: [],\r\n        params: [],\r\n        types: [],\r\n        states: [],\r\n        functions: [],\r\n    };\r\n    parse(lines, result);\r\n    return result;\r\n}\r\n\r\nfunction parse(lines, result) {\r\n    for(let i = 0; i < lines.length; i++) {\r\n        const [indent, line] = lines[i];\r\n        if(line.startsWith('//')) {\r\n            continue;\r\n        }\r\n        if(line.startsWith('import')) {\r\n            const parts = line.split(' ');\r\n            result.imports.push({\r\n                name: parts[parts.length - 2],\r\n                path: parts[parts.length - 1].slice(1, -1),\r\n            });\r\n            continue;\r\n        }\r\n\r\n        const subLines = [];\r\n        for(let j = i + 1; j < lines.length; j++) {\r\n            const [subIndent, subLine] = lines[j];\r\n            if(subIndent > indent) {\r\n                subLines.push([subIndent - 1, subLine]);\r\n            }\r\n            else {\r\n                i = j - 1;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(line.includes('actor class')) {\r\n            parseActorClass(line, subLines, result);\r\n        }\r\n\r\n        if(line.includes('type ')) {\r\n            parseType(line, subLines, result);\r\n        }\r\n\r\n        if(line.includes('var ') || line.includes('let ')) {\r\n            parseState(line, subLines, result);\r\n        }\r\n\r\n        if(line.includes('func ')) {\r\n            parseFunction(line, subLines, result);\r\n        }\r\n    }\r\n}\r\n\r\nfunction parseActorClass(line, subLines, result) {\r\n\r\n    const paramRegex = /([a-zA-Z_][a-zA-Z0-9_]*) *: *([^,)]+)/g;\r\n    let paramResult;\r\n    while((paramResult = paramRegex.exec(line)) !== null) {\r\n        const [, name, type] = paramResult;\r\n        // console.log([match,id,value]);\r\n        result.params.push({\r\n            name,\r\n            type: type.trim(),\r\n        });\r\n    }\r\n\r\n    parse(subLines, result);\r\n}\r\n\r\nfunction parseType(line, lines, result) {\r\n    if(lines.length) {\r\n        throw new Error(`Unable to parse multi-line type definition: ${line}`);\r\n    }\r\n    const typeResult = /type +([a-zA-Z_][a-zA-Z0-9_]*) =(.+)/.exec(line);\r\n    if(!typeResult) {\r\n        throw new Error(`Unable to parse state definition: ${line}`);\r\n    }\r\n    const [, name, type] = typeResult;\r\n\r\n    result.types.push({\r\n        name,\r\n        type: type?.trim(),\r\n        visibility: getVisibility(line),\r\n    });\r\n}\r\n\r\nfunction parseState(line, lines, result) {\r\n    if(lines.length) {\r\n        throw new Error(`Unable to parse multi-line state definition: ${line}`);\r\n    }\r\n    const stateResult = /(let|var) +([a-zA-Z_][a-zA-Z0-9_]*) +(:[^=]*)?=(.+)/.exec(line);\r\n    if(!stateResult) {\r\n        throw new Error(`Unable to parse state definition: ${line}`);\r\n    }\r\n    const [, kind, name, type, initialValue] = stateResult;\r\n\r\n    const parts = line.split(' ').map(s => s.trim()).filter(s => s);\r\n    result.states.push({\r\n        name,\r\n        type: type?.trim(),\r\n        initialValue: initialValue.trim(),\r\n        visibility: getVisibility(line),\r\n        stable: parts.includes('stable'),\r\n        readonly: kind === 'let',\r\n    });\r\n}\r\n\r\nfunction parseFunction(line, lines, result) {\r\n    if(!lines.length) {\r\n        throw new Error(`Unable to parse single-line function definition: ${line}`);\r\n    }\r\n\r\n    const nameResult = /func +([a-zA-Z_][a-zA-Z0-9_]*)/.exec(line);\r\n    if(!nameResult) {\r\n        throw new Error(`Unable to parse function definition: ${line}`);\r\n    }\r\n    const [, name] = nameResult;\r\n    const typeResult = /: *([^){=]+) {$/.exec(line);\r\n    const returnType = typeResult ? typeResult[1].trim() : 'Unit';\r\n\r\n    const params = [];\r\n    const paramRegex = /([a-zA-Z_][a-zA-Z0-9_]*) *: *([^,)]+)/g;\r\n    let paramResult;\r\n    while((paramResult = paramRegex.exec(line)) !== null) {\r\n        const [, name, type] = paramResult;\r\n        // console.log([match,id,value]);\r\n        params.push({\r\n            name,\r\n            type: type.trim(),\r\n        });\r\n    }\r\n\r\n    const parts = line.split(' ').map(s => s.trim()).filter(s => s);\r\n    result.functions.push({\r\n        name,\r\n        params,\r\n        returnType: returnType,\r\n        visibility: getVisibility(line),\r\n        shared: parts.includes('shared'),\r\n        query: parts.includes('query'),\r\n        body: lines.map(([indent, line]) => `${indentString.repeat(indent)}${line}`).join('\\n'),\r\n    });\r\n}\r\n\r\nfunction getVisibility(line) {\r\n    return line.includes('public ') ? 'public' : line.includes('private ') ? 'private' : 'system';\r\n}","import {asyncType, customType, optionalType, TYPE_MAP, unitType} from '../block-types/types';\r\n\r\nexport default function generateBlocksFromParseResult(result) {\r\n    const json = {\r\n        name: '(Generated)',\r\n        nodes: {},\r\n    };\r\n\r\n    result.imports.forEach(({name, path}, i) => {\r\n\r\n    });\r\n    result.params.forEach(({name, type}, i) => {\r\n        json.nodes[`main_param_${name}`] = {\r\n            type: 'MainParameter',\r\n            position: [i * 300, -300],\r\n            data: {\r\n                name,\r\n                type: parseType(type),\r\n            },\r\n        };\r\n    });\r\n    result.types.forEach(({name, type, visibility}, i) => {\r\n        json.nodes[`type_${name}`] = {\r\n            type: 'TypeMember',\r\n            position: [-500, i * 300],\r\n            data: {\r\n                name,\r\n                typeInput: parseType(type),\r\n                visibility,\r\n            },\r\n        };\r\n    });\r\n    result.states.forEach(({name, type, initialValue, visibility, stable, readonly}, i) => {\r\n        const x = -1000;\r\n        const y = i * 300;\r\n        json.nodes[`state_${name}`] = {\r\n            type: 'State',\r\n            position: [x, y],\r\n            data: {\r\n                name,\r\n                visibility,\r\n                stable,\r\n                readonly,\r\n                // 'editor:advanced': true,\r\n            },\r\n        };\r\n        json.nodes[`initial_${name}`] = {\r\n            type: 'CodeValue',\r\n            position: [x - 500, y],\r\n            data: {\r\n                type: parseType(type),\r\n                expression: initialValue,\r\n            },\r\n            outputs: {\r\n                result: [{\r\n                    node: `state_${name}`,\r\n                    input: 'initialValue',\r\n                }],\r\n            },\r\n        };\r\n    });\r\n\r\n    const showFunction = ({name: funcName, params, returnType, visibility, shared, query, body}, i) => {\r\n        returnType = parseType(returnType);\r\n        if(visibility === 'public' && asyncType.isSubtype(returnType)) {\r\n            returnType = returnType.generics[0];\r\n        }\r\n\r\n        const x = functionX;\r\n        const y = i * 350;\r\n        json.nodes[`func_${funcName}`] = {\r\n            type: 'Function',\r\n            position: [x, y],\r\n            data: {\r\n                name: funcName,\r\n                visibility,\r\n                shared,\r\n                query,\r\n                // 'editor:advanced': true,\r\n            },\r\n            outputs: {\r\n                body: [{\r\n                    node: `body_${funcName}`,\r\n                    input: 'before',\r\n                }],\r\n                params: params.map(({name}) => ({\r\n                    node: `param_${funcName}_${name}`,\r\n                    input: 'param',\r\n                })),\r\n            },\r\n        };\r\n        params.forEach(({name, type}, i) => {\r\n            json.nodes[`param_${funcName}_${name}`] = {\r\n                type: 'Parameter',\r\n                position: [x + 250, y + 20 + Math.max(0, (2 - params.length) * 60) + i * 120],\r\n                data: {\r\n                    name,\r\n                    type: parseType(type),\r\n                },\r\n            };\r\n        });\r\n        json.nodes[`body_${funcName}`] = {\r\n            type: 'CodeStatement',\r\n            position: [x + 500, y],\r\n            data: {\r\n                type: returnType,\r\n                expression: body,\r\n            },\r\n        };\r\n    };\r\n\r\n    let functionX = 0;\r\n    result.functions.filter(({visibility}) => visibility !== 'public').forEach(showFunction);\r\n    functionX += 1500;\r\n    result.functions.filter(({visibility}) => visibility === 'public').forEach(showFunction);\r\n\r\n    return json;\r\n}\r\n\r\nfunction parseType(type) {\r\n    type = type.trim();\r\n\r\n    if(type === '()') {\r\n        return unitType;\r\n    }\r\n    if(type.startsWith('async ')) {\r\n        return asyncType.of(parseType(type.substring('async '.length)));\r\n    }\r\n    if(type.startsWith('?')) {\r\n        return optionalType.of(parseType(type.substring(1)));\r\n    }\r\n    return TYPE_MAP.get(type) || customType;\r\n}","import Editor from './Editor';\r\nimport React, {useCallback, useContext} from 'react';\r\nimport useListener from '../../hooks/utils/useListener';\r\nimport EventsContext, {\r\n    PROJECT_CLEAR_EVENT,\r\n    PROJECT_EXPORT_EVENT,\r\n    PROJECT_LOAD_EVENT,\r\n} from '../../contexts/EventsContext';\r\nimport FileSaver from 'file-saver';\r\nimport {pascalCase} from 'change-case';\r\nimport useRedraw from '../../hooks/utils/useRedraw';\r\nimport isEmbeddedMode from '../../utils/isEmbeddedMode';\r\nimport {EDITOR_STORE} from '../../observables/editorStore';\r\nimport {EDITOR_STATE_STORE} from '../../observables/editorStateStore';\r\nimport {UndoRedoHistory} from '../../plugins/rete-blocks-history-plugin';\r\nimport {logTelemetry} from '../../telemetry';\r\nimport parseMotoko from '../../parsers/parseMotoko';\r\nimport generateBlocksFromParseResult from '../../parsers/generateBlocksFromParseResult';\r\n\r\n\r\nconst STORAGE_EDITOR_STATE = 'blocks.editorState';\r\n\r\nconst DEFAULT_STATE = require('../../examples/files/DefaultProject.json');\r\n\r\nconst embedded = isEmbeddedMode();\r\nconst storage = embedded ? {} : localStorage; // TODO: convert to `useLocalStorage()`\r\n\r\nconst history = new UndoRedoHistory(50);\r\n\r\nlet nextEditorState;\r\n\r\nexport default function EditorPage() {\r\n    const redraw = useRedraw();\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    // Temporary global Motoko parser\r\n    window.LOAD_MOTOKO = (input) => {\r\n        const result = parseMotoko(input);\r\n        console.log(result);\r\n        const state = generateBlocksFromParseResult(result);\r\n        events.emit(PROJECT_LOAD_EVENT, state);\r\n        return state;\r\n    };\r\n\r\n    useListener(events, PROJECT_CLEAR_EVENT, () => {\r\n        logTelemetry('project_clear');\r\n        // TODO: confirmation modal\r\n        // delete storage[STORAGE_EDITOR_STATE];\r\n        nextEditorState = DEFAULT_STATE;\r\n        redraw();\r\n    });\r\n\r\n    useListener(events, PROJECT_LOAD_EVENT, state => {\r\n        logTelemetry('project_load', {project: state.name || ''});\r\n        // storage[STORAGE_EDITOR_STATE] = JSON.stringify(state);\r\n        nextEditorState = state;///\r\n        redraw();\r\n    });\r\n\r\n    useListener(events, PROJECT_EXPORT_EVENT, state => {\r\n        logTelemetry('project_export', {project: state.name || ''});\r\n        const data = JSON.stringify(state);\r\n        FileSaver.saveAs(new Blob([data]), `${pascalCase(state.name || 'project')}.blocks`);\r\n    });\r\n\r\n    useListener(window, 'message', ({source, data}) => {\r\n        if(embedded && source === window.parent) {\r\n            if(typeof data === 'string' && data.startsWith('{')) {\r\n                if(process.env.NODE_ENV === 'development') {\r\n                    console.log('Received message:', data);\r\n                }\r\n                data = JSON.parse(data);\r\n                if(data?.type === 'load') {\r\n                    nextEditorState = data.state ? JSON.parse(JSON.stringify(data.state)) : DEFAULT_STATE;\r\n                    redraw();\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    const sendMessage = (message) => {\r\n        if(embedded) {\r\n            if(process.env.NODE_ENV === 'development') {\r\n                console.log('Sending message:', message);\r\n            }\r\n            const targetOrigin = '*'; // TODO: restrict target origin?\r\n            window.parent.postMessage(message, targetOrigin);\r\n        }\r\n    };\r\n\r\n    const onEditorSetup = useCallback(async (loadState, editor) => {\r\n        const stateString = nextEditorState ? JSON.stringify(nextEditorState) : storage[STORAGE_EDITOR_STATE];\r\n        nextEditorState = null;\r\n\r\n        let state;\r\n        if(stateString) {\r\n            state = JSON.parse(stateString);\r\n        }\r\n        else if(!embedded) {\r\n            state = DEFAULT_STATE;\r\n        }\r\n\r\n        if(state && !await loadState(state)) {\r\n            console.warn('Load error');\r\n        }\r\n    }, []);\r\n\r\n    // let previousState = {};\r\n    const onEditorChange = useCallback((editor) => {\r\n        const state = editor.toJSON();\r\n        // const patch = compare(previousState, state);\r\n        // previousState = state;\r\n        // console.log('Patch:', patch);///\r\n\r\n        editor.trigger('history', state);\r\n\r\n        EDITOR_STATE_STORE.set(state);\r\n        // UNSAVED_CHANGES_STORE.set(true);\r\n    }, []);\r\n\r\n    const onEditorSave = useCallback((state, editor) => {\r\n        // console.log('Saving:', state);\r\n        storage[STORAGE_EDITOR_STATE] = JSON.stringify(state);\r\n        sendMessage({\r\n            type: 'save',\r\n            state: state,\r\n        });\r\n        // UNSAVED_CHANGES_STORE.set(false);\r\n    }, []);\r\n\r\n    return (\r\n        <Editor\r\n            observable={EDITOR_STORE}\r\n            onSetup={onEditorSetup}\r\n            onChange={onEditorChange}\r\n            onSave={onEditorSave}\r\n            history={history}\r\n        />\r\n    );\r\n}\r\n","import {useState} from 'react';\r\n\r\nexport default function useRedraw() {\r\n    const redraw = useState({})[1];\r\n    return () => redraw({});\r\n}\r\n","import React from 'react';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport EditorPage from './editor/EditorPage';\r\n// import {Layout, Model} from 'flexlayout-react';\r\n// import 'flexlayout-react/style/dark.scss';\r\n\r\n// const editorLayoutStorageKey = 'blocks.editorLayout';\r\n\r\n// const defaultConfig = {\r\n//     global: {},\r\n//     borders: [],\r\n//     layout: {\r\n//         type: 'row',\r\n//         weight: 100,\r\n//         children: [{\r\n//             type: 'tabset',\r\n//             weight: 50,\r\n//             children: [{\r\n//                 type: 'tab',\r\n//                 name: 'Editor',\r\n//                 component: 'editor',\r\n//                 config: {},\r\n//             }],\r\n//         }],\r\n//     },\r\n// };\r\n\r\n// TODO: rewrite for a different layout library\r\n\r\nexport default function TabLayout() {\r\n    // const model = Model.fromJson(defaultConfig);\r\n    //\r\n    // const factory = node => {\r\n    //     const component = node.getComponent();\r\n    //     const props = node.getConfig() || {};\r\n    //     if(component === 'editor') {\r\n    //         return <EditorPage {...props}/>;\r\n    //     }\r\n    // };\r\n    //\r\n    // return (\r\n    //     <Layout model={model} factory={factory}/>\r\n    // );\r\n\r\n    return (\r\n        <EditorPage/>\r\n    );\r\n}\r\n","import useThemeState from '../../hooks/persistent/useThemeState';\r\nimport {useEffect} from 'react';\r\nimport {ThemeProvider} from 'styled-components';\r\nimport useThemePartsState from '../../hooks/persistent/useThemePartsState';\r\n\r\nexport default function GlobalTheme({children}) {\r\n\r\n    const [theme] = useThemeState();\r\n    const [themeParts] = useThemePartsState();\r\n\r\n    const classNames = [`theme-${theme.id}`, ...theme.parts\r\n        .filter(part => themeParts[part])\r\n        .map(part => `theme-part-${part}`)];\r\n\r\n    useEffect(() => {\r\n        document.body.classList.add(...classNames);\r\n        return () => document.body.classList.remove(...classNames);\r\n    });\r\n\r\n    return (\r\n        <ThemeProvider theme={theme.styledComponents}>\r\n            {children}\r\n        </ThemeProvider>\r\n    );\r\n}","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const KEY_DOWN_STORE = makeObservable(null);","import makeObservable from '../utils/makeObservable';\r\n\r\nexport const KEY_UP_STORE = makeObservable(null);","import useListener from '../../hooks/utils/useListener';\r\nimport {KEY_DOWN_STORE} from '../../observables/keyDownStore';\r\nimport {KEY_UP_STORE} from '../../observables/keyUpStore';\r\n\r\n// Misc. global observable state manager\r\n\r\nexport default function GlobalObservables() {\r\n\r\n    useListener(document, 'keydown', event => {\r\n        KEY_DOWN_STORE.set(event.key);\r\n    });\r\n    useListener(document, 'keyup', event => {\r\n        KEY_UP_STORE.set(event.key);\r\n    });\r\n\r\n    return null;\r\n}","import React, {useContext, useEffect} from 'react';\r\nimport {toast, ToastContainer} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport EventsContext, {ERROR_EVENT} from '../contexts/EventsContext';\r\nimport useListener from '../hooks/utils/useListener';\r\nimport GlobalTooltip from './global/GlobalTooltip';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport TabLayout from './TabLayout';\r\nimport GlobalTheme from './global/GlobalTheme';\r\nimport GlobalObservables from './global/GlobalObservables';\r\nimport {isSafari} from 'react-device-detect';\r\nimport isEmbeddedMode from '../utils/isEmbeddedMode';\r\n\r\n\r\nexport default function App() {\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, ERROR_EVENT, err => {\r\n        toast(err, {\r\n            type: 'error',\r\n            // closeOnClick: true,\r\n        });\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Check user agent on load\r\n        const storageFlag = 'blocks.safariWarning';\r\n\r\n        // Temporarily disable Safari warning for embedded content\r\n        if(isSafari && !sessionStorage[storageFlag] && !isEmbeddedMode()) {\r\n            toast('If you\\'re experiencing performance issues, we recommend using Blocks in Google Chrome or Mozilla Firefox.', {\r\n                autoClose: false,\r\n                onClose() {\r\n                    sessionStorage[storageFlag] = 'true';\r\n                },\r\n            });\r\n        }\r\n    });\r\n\r\n    return (\r\n        <React.StrictMode>\r\n            <GlobalObservables/>\r\n            <GlobalTooltip/>\r\n            <BrowserRouter>\r\n                <GlobalTheme>\r\n                    <ToastContainer style={{marginTop: '5rem'}} position=\"top-right\"/>\r\n                    {/*<div className=\"d-block d-sm-none w-100 h-100\">*/}\r\n                    {/*    <MobilePage/>*/}\r\n                    {/*</div>*/}\r\n                    {/*<div className=\"d-none d-sm-block w-100 h-100\">*/}\r\n                    <TabLayout/>\r\n                    {/*</div>*/}\r\n                </GlobalTheme>\r\n            </BrowserRouter>\r\n        </React.StrictMode>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.scss';\r\nimport App from './components/App';\r\nimport './setupFirebase';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App/>\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n);\r\n\r\n// reportWebVitals((...args) => {\r\n//     console.log('WebVitals:', ...args);\r\n// });\r\n","import React from 'react';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport styled from 'styled-components';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\nimport useControlValue from '../../../../hooks/useControlValue';\r\nimport {onAnyRelease} from '../../../../utils/eventHelpers';\r\n\r\nconst Container = styled.div`\r\n    cursor: pointer;\r\n    color: black;\r\n    background: ${({selected}) => selected ? '#fffa' : '#fff8'};\r\n`;\r\n\r\nconst StyledTextArea = styled(TextareaAutosize)`\r\n    font-weight: 500;\r\n    resize: horizontal;\r\n    background: #fff8;\r\n`;\r\n\r\nexport default function CommentNodeView({block, nodeHandle}) {\r\n    const {/*editor,*/ node/*, bindControl*/} = nodeHandle.props;\r\n    const {selected} = nodeHandle.state;\r\n\r\n    let textArea;\r\n\r\n    const [text, setText] = useControlValue(node.controls.get('text'));\r\n    const [width, setWidth] = useControlValue(node.controls.get('widthPixels'));\r\n\r\n    return (\r\n        <Container\r\n            className=\"pt-2 ps-2 pe-4 rounded-3\"\r\n            selected={selected}\r\n            {...onAnyRelease(() => textArea && setWidth(textArea.offsetWidth))}>\r\n            <StyledTextArea\r\n                style={{width: width || 300}}\r\n                rows={1}\r\n                maxRows={100}\r\n                ref={el => bindNodeInput(el) & (textArea = el)}\r\n                value={text || ''}\r\n                placeholder=\"Comment\"\r\n                onChange={e => setText(e.target.value)}\r\n            />\r\n        </Container>\r\n    );\r\n}\r\n","import {floatType, textType} from '../block-types/types';\r\nimport {commentCategory} from '../block-categories/categories';\r\nimport CommentNodeView from '../components/rete/nodes/views/CommentNodeView';\r\nimport {FOR_DOCUMENTATION} from '../editor/useCases';\r\n\r\nconst block = {\r\n    info: 'A text comment',\r\n    useCases: [FOR_DOCUMENTATION],\r\n    category: commentCategory,\r\n    global: true,\r\n    component: CommentNodeView,\r\n    controls: [{\r\n        key: 'text',\r\n        type: textType,\r\n    }, {\r\n        key: 'widthPixels',\r\n        type: floatType,\r\n    }],\r\n};\r\nexport default block;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport useControlValue from '../../../../hooks/useControlValue';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\nimport {onAnyRelease} from '../../../../utils/eventHelpers';\r\n\r\nconst Container = styled.div`\r\n    cursor: pointer;\r\n    border: 2px solid ${({selected}) => selected ? '#fffa' : '#fff8'};\r\n`;\r\n\r\nconst ResizeArea = styled.div`\r\n    user-select: none;\r\n    cursor: default;\r\n    background: #fff1;\r\n    resize: both;\r\n    overflow: hidden;\r\n`;\r\n\r\nexport default function RegionNodeView({block, nodeHandle}) {\r\n    const {node} = nodeHandle.props;\r\n    const {selected} = nodeHandle.state;\r\n\r\n    const [width, setWidth] = useControlValue(node.controls.get('widthPixels'));\r\n    const [height, setHeight] = useControlValue(node.controls.get('heightPixels'));\r\n\r\n    const bindContainer = (element) => {\r\n        if(!element) {\r\n            return;\r\n        }\r\n        // Render behind other nodes\r\n        element.parentElement.style.zIndex = String(-1);\r\n    };\r\n\r\n    return (\r\n        <Container ref={bindContainer} className=\"p-2 rounded-3\" selected={selected}>\r\n            <ResizeArea\r\n                ref={bindNodeInput}\r\n                style={{width: width || 300, height: height || 100}}\r\n                {...onAnyRelease(event => setWidth(event.target.clientWidth) & setHeight(event.target.clientHeight))}\r\n            />\r\n        </Container>\r\n    );\r\n}\r\n","import {floatType, textType} from '../block-types/types';\r\nimport {commentCategory} from '../block-categories/categories';\r\nimport CommentRegionNodeView from '../components/rete/nodes/views/RegionNodeView';\r\nimport {FaSquareFull} from 'react-icons/fa';\r\nimport {FOR_ORGANIZATION} from '../editor/useCases';\r\n\r\nconst block = {\r\n    title: 'Region',\r\n    info: 'A background region',\r\n    useCases: [FOR_ORGANIZATION],\r\n    category: commentCategory,\r\n    icon: FaSquareFull,\r\n    global: true,\r\n    component: CommentRegionNodeView,\r\n    controls: [{\r\n        key: 'text',\r\n        type: textType,\r\n    }, {\r\n        key: 'widthPixels',\r\n        type: floatType,\r\n    }, {\r\n        key: 'heightPixels',\r\n        type: floatType,\r\n    }],\r\n};\r\nexport default block;\r\n"],"sourceRoot":""}