{"version":3,"sources":["components/rete/controls/NumberControlHandle.js","components/common/inputs/TypeSelect.js","block-types/types.js","components/rete/controls/TypeControlHandle.js","components/rete/controls/NodeControlHandle.js","components/rete/controls/CheckboxControlHandle.js","block-categories/categories.js","contexts/EventsContext.js","compilers/MotokoCompiler.js","block-patterns/operator-patterns.js","block-patterns/statement-patterns.js","hooks/useListener.js","hooks/useControlState.js","blocks/State.js","components/rete/controls/SelectControlHandle.js","block-patterns/member-patterns.js","block-patterns/control-patterns.js","hooks/useReactTooltip.js","editor/blocks.js","blocks/NewArray.js","block-patterns/literal-patterns.js","compilers/Compiler.js","utils/bindNodeInput.js","utils/getBlockLabel.js","components/rete/controls/TextControlHandle.js","utils/getDefaultLabel.js","utils/getNodeLabel.js","block-patterns/code-patterns.js","config/configureMonaco.js","components/monaco/CodeEditor.js","components/rete/controls/CodeControlHandle.js","components/common/Loading.js","components/rete/controls/OutputControlHandle.js","block-patterns/compile-patterns.js","editor sync","blocks/Function.js","examples/examples.js","blocks sync /.js$","blocks/Actor.js","blocks/ActorClass.js","blocks/Add.js","blocks/And.js","blocks/ArrayAppend.js","blocks/ArrayAppended.js","blocks/ArrayFilter.js","blocks/ArrayGet.js","blocks/ArrayMap.js","blocks/ArrayPrepend.js","blocks/ArrayPut.js","blocks/Await.js","blocks/CodeType.js","blocks/CodeValue.js","blocks/CollectionGet.js","blocks/CollectionPut.js","blocks/CollectionSize.js","blocks/CompareEqual.js","blocks/CompareGreater.js","blocks/CompareGreaterEqual.js","blocks/CompareLess.js","blocks/CompareLessEqual.js","blocks/CompareNotEqual.js","blocks/CompileMotoko.js","blocks/CompileType.js","blocks/Conditional.js","blocks/ConditionalValue.js","blocks/Divide.js","blocks/DivideInt.js","blocks/FunctionCall.js","blocks/GlobalFunction.js","blocks/LiteralBool.js","blocks/LiteralCustomType.js","blocks/LiteralFloat.js","blocks/LiteralIdentifier.js","blocks/LiteralInt.js","blocks/LiteralNat.js","blocks/LiteralPair.js","blocks/LiteralPairType.js","blocks/LiteralText.js","blocks/LiteralTuple.js","blocks/LiteralTupleType.js","blocks/LiteralType.js","blocks/LoopWhile.js","blocks/MapGet.js","blocks/MapPut.js","blocks/MapRemove.js","blocks/Multiply.js","blocks/NewTextHashMap.js","blocks/Not.js","blocks/Null.js","blocks/Optional.js","blocks/OptionalUnwrap.js","blocks/Or.js","blocks/Parameter.js","blocks/Query.js","blocks/ReferenceImport.js","blocks/Return.js","blocks/StateRead.js","blocks/StateUpdate.js","blocks/Subtract.js","blocks/TextConcat.js","blocks/TextSize.js","blocks/TypeMember.js","blocks/TypeMemberReference.js","blocks/Variable.js","plugins/rete-blocks-contextmenu-plugin/components/ContextMenu.js","plugins/rete-blocks-contextmenu-plugin/contexts/MenuContext.js","plugins/rete-blocks-contextmenu-plugin/components/MenuIcon.js","plugins/rete-blocks-contextmenu-plugin/components/MenuAction.js","utils/jsonCopy.js","plugins/rete-blocks-contextmenu-plugin/components/menus/SelectionMenu.js","plugins/rete-blocks-contextmenu-plugin/components/MenuComponent.js","plugins/rete-blocks-contextmenu-plugin/components/MenuSearch.js","plugins/rete-blocks-contextmenu-plugin/components/menus/PlacementMenu.js","plugins/rete-blocks-contextmenu-plugin/hooks/useEditorComponents.js","plugins/rete-blocks-contextmenu-plugin/index.js","contexts/ConnectionAwareListContext.js","components/rete/sockets/SocketHandle.js","components/rete/nodes/parts/DynamicTitle.js","utils/getPropLabel.js","components/rete/nodes/parts/ShortcutButton.js","components/rete/nodes/parts/PropField.js","components/rete/nodes/NodeHandle.js","editor/controls/BaseControl.js","editor/controls/PropControl.js","editor/components/BaseComponent.js","editor/sockets/TypeSocket.js","editor/sockets/PropOutputSocket.js","editor/components/BlockComponent.js","compilers/NodeCompiler.js","compilers/TypeCompiler.js","compilers/ControlCompiler.js","editor/BlocksNodeEditor.js","plugins/rete-vertical-sort-plugin/index.js","plugins/rete-connection-drop-plugin/index.js","plugins/rete-connection-opacity-plugin/index.js","plugins/rete-drag-button-plugin/index.js","assets/icons/gradient.svg","components/common/menus/TopMenu.js","components/common/menus/MenuItem.js","components/common/menus/MenuButton.js","components/common/FileDropZone.js","components/rete/LoadProjectMenu.js","assets/icons/download.svg","assets/icons/file-plus.svg","assets/icons/folder.svg","assets/icons/folder-wide.svg","assets/icons/folder-open.svg","assets/icons/save.svg","components/common/Icon.js","components/rete/EditorMenu.js","editor/shortcutKeys.js","components/rete/Editor.js","components/pages/editor/EditorPage.js","utils/isEmbedded.js","hooks/useRedraw.js","components/GlobalTooltip.js","reportWebVitals.js","components/App.js","index.js","components/rete/nodes/views/CommentNodeView.js","blocks/Comment.js","components/rete/nodes/views/RegionNodeView.js","blocks/CommentRegion.js"],"names":["NumberControlHandle","control","bindInput","validation","min","max","step","useControlState","value","setValue","type","style","width","ref","onChange","event","target","TypeSelect","constraintType","abstract","invalid","others","anyType","types","TYPE_MAP","values","filter","data","isSubtype","events","useContext","EventsContext","getType","err","undefined","emit","ERROR_EVENT","some","t","useReactTooltip","className","classNames","name","label","map","generics","i","baseType","getDefaultLabel","genericNames","splice","toJSON","Type","parent","meta","this","otherMeta","buildType","Object","assign","isAbstract","defaultValue","other","length","every","equals","alwaysSubtype","arbitraryGenerics","getSharedType","toTypeString","call","g","join","Map","window","createType","category","reversed","anyReversedType","typeType","controlType","config","validate","nodeType","editor","useState","nodes","setNodes","useListener","EDITOR_CHANGE_EVENT","blockName","block","blockFilter","Array","isArray","getBlock","n","includes","String","id","maxWidth","node","getNodeLabel","JSON","stringify","valueType","customType","referenceType","identifierType","TextControlHandle","pattern","defaultInput","prop","nodeIdentifierRef","key","effectType","toMotoko","memberType","singleOutput","actorType","paramType","boolType","checked","verticalAlign","textType","minLength","maxLength","floatType","intType","natType","principalType","tupleType","unitType","of","Error","optionalType","nullType","collectionType","arrayType","item","mutableArrayType","mapType","asyncType","set","getGenericType","parentData","parentMeta","arguments","has","get","a","b","Category","root","CATEGORY_MAP","createCategory","getCategory","defaultCategory","stateCategory","color","icon","FaDatabase","priority","functionCategory","FaCubes","paramCategory","FaLongArrowAltRight","typeCategory","FaTextHeight","collectionCategory","FaTh","compilerCategory","FaCode","expressionCategory","FaEject","operatorCategory","FaFilter","actorCategory","FaFont","effectCategory","FaStream","literalCategory","FaPlusCircle","decompositionCategory","FaNetworkWired","commentCategory","FaCommentAlt","EDITOR_SAVE_EVENT","PROJECT_EXPORT_EVENT","PROJECT_LOAD_EVENT","PROJECT_CLEAR_EVENT","EventEmitter","setMaxListeners","on","console","error","EVENTS","React","createContext","importRef","resolveImportRefs","code","imports","replace","match","path","substring","lastIndexOf","hasOwnProperty","entries","MotokoCompiler","log","getTypeString","result","r","postCompile","s","warn","Compiler","unaryOperatorBlock","symbol","evaluate","topRight","title","inputs","outputs","input","binaryOperatorBlock","inputType","resultType","left","right","arithmeticOperatorBlock","args","numberComparisonOperatorBlock","defaultType","statementBlock","compileFn","beforeProp","inferType","compiler","getInput","props","after","topLeft","optional","endStatementBlock","statementProp","listener","options","useEffect","domTarget","addEventListener","removeEventListener","off","getValue","updateVisualValue","notifyEditorChange","stateReadIcon","FaAngleRight","stateWriteIcon","FaAngleDoubleRight","memberBlock","info","global","computeTitle","computeMemberName","compilers","motoko","shortcuts","nodeKey","initialValue","controls","stable","modifiers","m","SelectControlHandle","findLabel","option","visibilityControlProp","controlProps","charAt","toUpperCase","memberProp","timeout","deps","clearTimeout","setTimeout","ReactTooltip","rebuild","require","context","fs","base","scanSubDirectories","regularExpression","files","readDirectory","directory","readdirSync","forEach","file","fullPath","resolve","statSync","isDirectory","test","Module","keys","__dirname","allBlocks","blockNames","Set","blockContext","addProps","propList","basename","default","output","push","add","BLOCK_MAP","arrayImportRef","getOutput","mutable","multi","itemType","items","literalBlock","stringifier","UndefinedInputError","compileKey","Rete","Node","find","getNode","_output","connections","c","_compileConnection","_input","_control","_prop","getInputArgs","defaultCompile","trigger","cached","defineProperty","connection","from","to","bindNodeInput","stopPropagation","getBlockLabel","capitalCase","autoComplete","autoCorrect","placeholder","text","sentenceCase","simplified","replaceRegex","parseCodeBlockInputs","expression","replaceAll","configureMonaco","monaco","languages","register","setLanguageConfiguration","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","accessmodifiers","typeKeywords","operators","symbols","escapes","tokenizer","cases","include","token","bracket","next","comment","string","whitespace","CodeEditor","theme","defaultLanguage","beforeMount","newValue","tabSize","minimap","enabled","wordWrap","scrollBeyondLastLine","fontSize","CodeControlHandle","height","Loading","promise","loading","children","status","setStatus","setResult","Promise","then","catch","OutputControlHandle","tooltipRef","query","findValue","valuePromise","setValuePromise","copied","setCopied","showTooltip","show","readOnly","Button","size","variant","onClick","compileBlock","compilerKey","displayFn","queryFor","inputKey","webpackEmptyContext","req","e","module","exports","defaultReturnType","getFunctionReturnType","visibility","params","body","returnType","fromOutput","hasCaller","returnString","examples","getExampleProjects","webpackContext","webpackContextResolve","__webpack_require__","o","members","FaRegCaretSquareRight","array","hidden","FaLayerGroup","typeString","_","index","fromType","toType","fromTypeString","FaRegCaretSquareLeft","collection","FaSitemap","condition","trueCase","falseCase","falsePart","intImportRef","FaPlayCircle","functionNode","paramNames","withMeta","FiGlobe","FaPencilAlt","reference","FaItalic","loop","FaCompress","hashMapImportRef","textImportRef","valueTypeString","valueCase","nullCase","valuePart","nullPart","getQueryReturnType","FaCaretLeft","stateNode","typeInput","typeNode","ContextMenu","x","y","styleProp","handleCloseMenu","useMemo","position","top","bindScreen","useCallback","el","bindContainer","moveIntoWindow","offset","getBoundingClientRect","bottom","innerHeight","onresize","pointerEvents","onKeyDown","keyCode","onMouseDown","MenuContext","MenuIcon","MenuAction","selected","onAction","userSelect","button","jsonCopy","parse","cloneSelected","newNodeMap","all","list","component","getComponent","createNode","newNode","addNode","original","clone","remove","update","SelectionMenu","each","removeNode","MenuComponent","endsWith","createElement","FaRegStickyNote","MenuSearch","focus","handleKeyDown","autoFocus","deepCopy","obj","PlacementMenu","searchText","setSearchText","setIndex","mouse","components","sortFn","hash","deprecated","v","sort","compare","localeCompare","useEditorComponents","socket","findType","outputType","findRelevantComponents","Math","lower","toLowerCase","k","startsWith","handleCreateNode","compatibleWith","connect","menuItems","ContextMenuPlugin","install","bind","mouseEvent","offsetX","offsetY","menu","display","preventDefault","contains","selectNode","clientX","clientY","document","view","container","appendChild","ReactDOM","render","Provider","connectionMouseMoved","removingConnection","io","prevConnections","conn","Input","Output","SocketHandle","innerRef","relevant","setRelevant","connectionAwareList","ConnectionAwareListContext","starting","connectionIO","indexOf","socketType","multiple","multipleConnections","paramCase","DynamicTitle","fallback","silent","setTitle","getPropLabel","ShortcutButton","shortcut","createNodeAtCursor","_drag","down","fromIO","toIO","background","borderColor","cursor","PropField","hideLeft","hideRight","bindSocket","bindControl","showControl","leftSocket","rightSocket","controlField","NodeHandle","state","Component","nodeHandle","getBindControl","transform","ButtonGroup","BaseControl","custom","getData","getDefaultValue","putData","PropControl","BaseComponent","getEditorNode","TypeSocket","otherType","Socket","PropOutputSocket","nodeId","nodeName","typeCompiler","_isTypeOfType","BlockComponent","split","addProp","isPropOutput","addPropInput","addPropOutput","isOutput","shouldPropHaveControl","addControl","addInput","addOutput","NodeCompiler","TypeCompiler","ControlCompiler","BlocksNodeEditor","projectName","projectDescription","json","description","version","beforeImport","hadError","jsonNode","build","fromJSON","jsonConnection","targetOutput","otherNode","targetInput","afterImport","area","NodeEditor","sortConnections","VerticalSortPlugin","ioMap","ConnectionDropPlugin","ConnectionOpacityPlugin","minDistance","opacityFalloff","querySelectorAll","pathElement","distance","opacity","sqrt","_linearGradient","DragButtonPlugin","_extends","source","prototype","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgGradient","_ref","svgRef","titleId","x2","y2","stopColor","ForwardRef","MenuContainer","styled","div","StyledGradient","Gradient","TopMenu","ItemContainer","MenuItem","tooltip","MenuItemStyled","IconStyled","svg","MenuButton","focusable","FileDropZone","onFile","onFileContent","onDrop","reader","FileReader","onload","readAsText","useDropzone","maxFiles","getRootProps","getInputProps","isDragActive","LoadProjectItemContainer","FileDropZoneStyled","LoadProjectMenu","onLoadFileContent","example","_g","SvgDownload","viewBox","xmlns","xmlnsXlink","xmlSpace","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","d","_path","SvgFilePlus","SvgFolder","SvgFolderWide","fill","SvgFolderOpen","SvgSave","defaultFill","createIcon","SvgComponent","widthRatio","DownloadIcon","Download","FilePlusIcon","FilePlus","FolderWideIcon","Folder","FolderWide","FolderOpenIcon","FolderOpen","SaveIcon","Save","ProjectNameInput","saveAnimation","keyframes","StyledSaveIcon","zoomAnimation","StyledZoomIcon","FiCrosshair","EditorMenu","getEditor","setName","saveAnimating","setSaveAnimating","zoomAnimating","setZoomAnimating","loadMenuOpen","setLoadMenuOpen","project","src","process","alt","updateName","onAnimationEnd","AreaPlugin","zoomAt","Modal","onShow","hide","onHide","Body","SHORTCUT_KEYS","INPUT_TAGS","EditorContainer","Editor","hideMenu","onSetup","onSave","_editor","loadFileContent","content","noClick","element","clear","destroy","EDITOR_NAME","use","ReactRenderPlugin","ConnectionPlugin","AutoArrangePlugin","classList","chrome","zoom","toggle","snap","dynamic","editorButton","mouseMoved","findCategory","querySelector","createEditor","EDITOR","ctrlKey","metaKey","activeElement","loadState","handleConnectionEnd","startIO","endIO","currentIO","resize","nextEditorState","STORAGE_EDITOR_STATE","DEFAULT_STATE","embedded","self","isEmbedded","storage","localStorage","EditorPage","redraw","useRedraw","menuParam","location","search","FileSaver","saveAs","Blob","pascalCase","onEditorSetup","stateString","message","postMessage","ReactTooltipStyled","GlobalTooltip","backgroundColor","place","delayShow","onPerfEntry","App","toast","StrictMode","getElementById","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Container","StyledTextArea","TextareaAutosize","setText","setWidth","rows","maxRows","onMouseUp","clientWidth","ResizeArea","FaSquareFull","setHeight","parentElement","zIndex","clientHeight"],"mappings":"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","file":"static/js/main.8d3fdedc.chunk.js","sourcesContent":["import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\n\r\n\r\nexport default function NumberControlHandle({control, bindInput, validation: {min, max, step}}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    return (\r\n        <input\r\n            type=\"number\"\r\n            style={{width: '4em'}}\r\n            ref={bindInput}\r\n            min={min}\r\n            max={max}\r\n            step={step}\r\n            value={value || 0}\r\n            onChange={event => setValue(+event.target.value || event.target.value)}\r\n        />\r\n    );\r\n}\r\n","import {anyType, getType, TYPE_MAP} from '../../../block-types/types';\r\nimport React, {useContext} from 'react';\r\nimport EventsContext, {ERROR_EVENT} from '../../../contexts/EventsContext';\r\nimport classNames from 'classnames';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\nimport getDefaultLabel from '../../../utils/getDefaultLabel';\r\n\r\nexport default function TypeSelect({value, constraintType, abstract, invalid, onChange, ...others}) {\r\n\r\n    constraintType = constraintType || anyType;\r\n\r\n    const types = [...TYPE_MAP.values()]\r\n        .filter(type => (abstract || !type.data.abstract) && constraintType.isSubtype(type));\r\n\r\n    let events = useContext(EventsContext);\r\n\r\n    if(value) {\r\n        try {\r\n            value = getType(value);\r\n        }\r\n        catch(err) {\r\n            onChange(value = undefined);///\r\n            // console.error(err);\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    }\r\n\r\n    invalid = invalid || !value || !types.some(t => t.isSubtype(value));\r\n\r\n    // if(invalid && types.length) {\r\n    //     let firstType = types[0];\r\n    //     if(firstType) {\r\n    //         onChange(value = firstType);\r\n    //     }\r\n    //     // value = constraintType;\r\n    // }\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <>\r\n            <select\r\n                className={classNames(invalid && 'invalid')}\r\n                value={value?.name}\r\n                onChange={event => onChange(getType(event.target.value))}\r\n                {...others}>\r\n                {invalid && <option label=\"(Type)\" value={value?.name}/>}\r\n                {types.map(type => (\r\n                    <option key={type.name} label={type.name} value={type.name}/>\r\n                ))}\r\n            </select>\r\n            <div className=\"ps-2\">\r\n                {value?.generics?.map((type, i) => (\r\n                    <TypeSelect\r\n                        key={i}\r\n                        value={type}\r\n                        constraintType={value.data.baseType.generics[i]}\r\n                        abstract={abstract}\r\n                        data-tip={getDefaultLabel(value.data.genericNames?.[i])}\r\n                        onChange={t => {\r\n                            let generics = [...value.generics];\r\n                            generics.splice(i, 1, t);\r\n                            onChange(getType({\r\n                                ...value.toJSON(),\r\n                                generics,\r\n                            }));\r\n                        }}/>\r\n                ))}\r\n            </div>\r\n        </>\r\n    );\r\n}","import TextControlHandle from '../components/rete/controls/TextControlHandle';\r\nimport CheckboxControlHandle from '../components/rete/controls/CheckboxControlHandle';\r\nimport NumberControlHandle from '../components/rete/controls/NumberControlHandle';\r\nimport TypeControlHandle from '../components/rete/controls/TypeControlHandle';\r\nimport NodeControlHandle from '../components/rete/controls/NodeControlHandle';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\n\r\nclass Type {\r\n    constructor(name, parent, generics, data = {}, meta = {}) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.generics = generics.map(type => getType(type));\r\n        this.data = data;\r\n        this.meta = meta;\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            generics: this.generics.map(t => t.toJSON()),\r\n        };\r\n    }\r\n\r\n    of(...generics) {\r\n        return getType(this, generics);\r\n    }\r\n\r\n    withMeta(meta) {\r\n        let {name, ...otherMeta} = meta;\r\n        let type = buildType(name || this.name, this, this.generics);\r\n        Object.assign(type.meta, otherMeta);\r\n        return type;\r\n    }\r\n\r\n    isAbstract() {\r\n        return this.data.abstract || this.generics.some(type => type.isAbstract());\r\n    }\r\n\r\n    getDefaultValue() {\r\n        let value = this.data.defaultValue;\r\n        return typeof value === 'function' ? value(this) : value;\r\n    }\r\n\r\n    equals(other) {\r\n        return this.name === other.name && this.generics.length === other.generics.length && this.generics.every((t, i) => t.equals(other.generics[i]));\r\n    }\r\n\r\n    // TODO: rename to something like `isAssignableFrom`\r\n    isSubtype(other) {\r\n        if(!other) {\r\n            return false;\r\n        }\r\n        if(this.data.alwaysSubtype === other) {\r\n            return true;///\r\n        }\r\n        if(this.data.arbitraryGenerics && other.parent && this.name === other.parent.name) {\r\n            // e.g. `Tuple : Tuple<A, B, C>`\r\n            return true;\r\n        }\r\n        if(this.name === other.name) {\r\n            return this.generics.length === other.generics.length && this.generics.every((t, i) => t.isSubtype(other.generics[i]));\r\n        }\r\n        return !!other.parent && this.isSubtype(other.parent);\r\n    }\r\n\r\n    getSharedType(other) {\r\n        if(!other) {\r\n            return;\r\n        }\r\n        if(this === other) {\r\n            return this;\r\n        }\r\n        if(this.isSubtype(other)) {\r\n            return this;\r\n        }\r\n        if(other.isSubtype(this)) {\r\n            return other;\r\n        }\r\n        if(this.parent) {\r\n            return this.parent.getSharedType(other);\r\n        }\r\n    }\r\n\r\n    toTypeString() {\r\n        return this.data.toTypeString?.call(this) ?? this.name + (this.generics.length ? '<' + this.generics.map(g => g.toTypeString()).join(', ') + '>' : '');\r\n    }\r\n\r\n    toString() {\r\n        return `Type(${this.toTypeString()})`;\r\n    }\r\n}\r\n\r\nexport const TYPE_MAP = new Map();\r\n\r\nwindow.TYPE_MAP = TYPE_MAP; // Browser debug\r\n\r\nexport const anyType = createType('Any', {\r\n    abstract: true,\r\n    category: 'default',\r\n    reversed: false,\r\n});\r\nexport const anyReversedType = createType('AnyReversed', {\r\n    abstract: true,\r\n    category: 'default',\r\n    // parent: anyType,\r\n    reversed: true,\r\n});\r\n\r\nexport const typeType = createType('Type', {\r\n    parent: anyType,\r\n    category: 'types',\r\n    controlType: TypeControlHandle,\r\n    defaultValue: type => type.generics[0],\r\n    generics: [anyType],\r\n});\r\nexport const nodeType = createType('Node', {\r\n    parent: anyType,\r\n    category: 'nodes',\r\n    controlType: NodeControlHandle,\r\n    toTypeString() {\r\n        return this.meta.block ? `Node{block=${JSON.stringify(this.meta.block)}}` : 'Node';\r\n    },\r\n});\r\n\r\n// High-level type categories\r\nexport const valueType = createType('Value', {\r\n    abstract: true,\r\n    parent: anyType,\r\n    category: 'values',\r\n});\r\nexport const customType = createType('Custom', {\r\n    // abstract: true, // TEMP\r\n    parent: valueType,\r\n    arbitraryGenerics: true,\r\n    // toMotoko() {\r\n    //     console.log(this)///\r\n    //     return this.meta.motoko || '$Custom$';\r\n    // },\r\n});\r\nexport const referenceType = createType('Reference', {\r\n    parent: anyType,\r\n    category: 'references',\r\n});\r\nexport const identifierType = createType('Identifier', {\r\n    parent: referenceType,\r\n    controlType: TextControlHandle,\r\n    // defaultValue: '',\r\n    validation: {\r\n        pattern: /^[a-zA-Z][a-zA-Z0-9_]*$/,\r\n    },\r\n    defaultInput(prop, node) {\r\n        // Create placeholder identifier\r\n        return nodeIdentifierRef(node, prop.key);\r\n    },\r\n});\r\nexport const effectType = createType('Effect', {\r\n    parent: anyReversedType,\r\n    category: 'effects',\r\n    generics: [valueType],\r\n    toMotoko([value]) {\r\n        return value;\r\n    },\r\n});\r\nexport const memberType = createType('Member', {\r\n    parent: anyReversedType,\r\n    singleOutput: true,\r\n    category: 'members',\r\n});\r\nexport const actorType = createType('Actor', {\r\n    parent: anyReversedType,\r\n    singleOutput: true,\r\n    category: 'actors',\r\n});\r\nexport const moduleType = createType('Module', {\r\n    parent: anyReversedType,\r\n    singleOutput: true,\r\n    category: 'modules',\r\n});\r\nexport const paramType = createType('Param', {\r\n    parent: anyReversedType,\r\n    category: 'parameters',\r\n});\r\n\r\n// Value types\r\nexport const boolType = createType('Bool', {\r\n    parent: valueType,\r\n    controlType: CheckboxControlHandle,\r\n    defaultValue: false,\r\n});\r\nexport const charType = createType('Char', {\r\n    parent: valueType,\r\n    controlType: TextControlHandle,\r\n    validation: {\r\n        minLength: 1,\r\n        maxLength: 1,\r\n    },\r\n});\r\nexport const textType = createType('Text', {\r\n    parent: valueType,\r\n    controlType: TextControlHandle,\r\n    defaultValue: '',\r\n});\r\nexport const floatType = createType('Float', {\r\n    parent: valueType,\r\n    controlType: NumberControlHandle,\r\n    defaultValue: 0,\r\n});\r\nexport const intType = createType('Int', {\r\n    parent: floatType,\r\n    category: 'integers',\r\n    controlType: NumberControlHandle,\r\n    validation: {\r\n        step: 1,\r\n    },\r\n});\r\nexport const natType = createType('Nat', {\r\n    parent: floatType,\r\n    category: 'naturals',\r\n    validation: {\r\n        step: 1,\r\n        min: 0,\r\n    },\r\n});\r\nexport const blobType = createType('Blob', {\r\n    parent: valueType,\r\n});\r\nexport const principalType = createType('Principal', {\r\n    parent: valueType,\r\n    category: 'principals',\r\n});\r\nexport const errorType = createType('Error', {\r\n    parent: valueType,\r\n});\r\nexport const tupleType = createType('Tuple', {\r\n    abstract: true,\r\n    arbitraryGenerics: true,\r\n    parent: valueType,\r\n    category: 'tuples',\r\n    // controlType: ,\r\n    toTypeString() {\r\n        return this === tupleType ? this.name : `(${this.generics.map(t => t.toTypeString()).join(', ')})`;\r\n    },\r\n});\r\n// export const unitType = createType('Unit', {\r\n//     parent: tupleType,\r\n// });\r\nexport const unitType = createType('Unit', tupleType.of());\r\nif(tupleType === unitType) throw new Error(); // TODO: move to tests\r\nexport const objectType = createType('Object', {\r\n    abstract: true,\r\n    arbitraryGenerics: true,\r\n    parent: valueType,\r\n    category: 'objects',\r\n    // controlType: ,\r\n    toTypeString() {\r\n        return `(${this.generics.map((t, i) => `${this.genericNames[i]}: ${t.toTypeString()}`).join(', ')})`;\r\n    },\r\n});\r\nexport const functionType = createType('Function', {\r\n    parent: valueType,\r\n    generics: [valueType, valueType],\r\n    genericNames: ['input', 'output'],\r\n    category: 'functions',\r\n    toTypeString() {\r\n        return `${this.generics[0].toTypeString()} -> ${this.generics[1].toTypeString()}`;\r\n    },\r\n});\r\nexport const optionalType = createType('Optional', {\r\n    parent: valueType,\r\n    generics: [valueType],\r\n    category: 'optionals',\r\n    toMotoko([value]) {\r\n        return `?${value}`;\r\n    },\r\n});\r\nexport const nullType = createType('Null', {\r\n    parent: valueType,\r\n    alwaysSubtype: optionalType,\r\n});\r\nexport const collectionType = createType('Collection', {\r\n    abstract: true,\r\n    parent: valueType,\r\n    category: 'collections',\r\n});\r\nexport const arrayType = createType('Array', {\r\n    parent: collectionType,\r\n    generics: [valueType],\r\n    genericNames: ['item'],\r\n    toMotoko([item]) {\r\n        return `[${item}]`;\r\n    },\r\n});\r\nexport const mutableArrayType = createType('MutableArray', {\r\n    parent: arrayType,\r\n    generics: [valueType],\r\n    genericNames: ['item'],\r\n    toMotoko([item]) {\r\n        return `[var ${item}]`;\r\n    },\r\n});\r\nexport const mapType = createType('Map', {\r\n    parent: collectionType,\r\n    generics: [valueType, valueType],\r\n    genericNames: ['key', 'value'],\r\n    toMotoko([key, value]) {\r\n        return `HashMap.HashMap<${key}, ${value}>`;\r\n    },\r\n});\r\nexport const asyncType = createType('Async', {\r\n    parent: valueType,\r\n    generics: [valueType],\r\n    category: 'futures',\r\n    toMotoko([value]) {\r\n        return `async ${value}`;\r\n    },\r\n});\r\n// export const andType = createType('And', {\r\n//     parent: valueType,\r\n//     generics: [valueType, valueType],\r\n//     toMotoko([a, b]) {\r\n//         return `(${a} and ${b})`;\r\n//     },\r\n// });\r\n\r\n// // Fixed-size int values\r\n// export const int64Type = createType('Int64', {\r\n//     parent: intType,\r\n//     validation: getIntValidation(64),\r\n// });\r\n// export const int32Type = createType('Int32', {\r\n//     parent: int64Type,\r\n//     validation: getIntValidation(32),\r\n// });\r\n// export const int16Type = createType('Int16', {\r\n//     parent: int32Type,\r\n//     validation: getIntValidation(16),\r\n// });\r\n// export const int8Type = createType('Int8', {\r\n//     parent: int16Type,\r\n//     validation: getIntValidation(8),\r\n// });\r\n//\r\n// // Fixed-size nat values\r\n// export const nat64Type = createType('Nat64', {\r\n//     parent: natType,\r\n//     validation: getNatValidation(64),\r\n// });\r\n// export const nat32Type = createType('Nat32', {\r\n//     parent: nat64Type,\r\n//     validation: getNatValidation(32),\r\n// });\r\n// export const nat16Type = createType('Nat16', {\r\n//     parent: nat32Type,\r\n//     validation: getNatValidation(16),\r\n// });\r\n// export const nat8Type = createType('Nat8', {\r\n//     parent: nat16Type,\r\n//     validation: getNatValidation(8),\r\n// });\r\n\r\n// function getNatValidation(n) {\r\n//     return {\r\n//         ...natType.data.validation,\r\n//         max: 2 ** n - 1,\r\n//     };\r\n// }\r\n//\r\n// function getIntValidation(n) {\r\n//     let x = 2 ** (n - 1);\r\n//     return {\r\n//         ...intType.data.validation,\r\n//         min: -x,\r\n//         max: x - 1,\r\n//     };\r\n// }\r\n\r\n// Create a global type\r\nfunction createType(name, data) {\r\n    let type;\r\n    if(data instanceof Type) {\r\n        type = data;\r\n        type.name = name;\r\n    }\r\n    else {\r\n        let {parent} = data;\r\n        let {generics = [], meta = {}, ...other} = data;\r\n        type = buildType(name, parent, generics, other, meta);\r\n        type.data.baseType = type;///\r\n    }\r\n    TYPE_MAP.set(name, type);\r\n    return type;\r\n}\r\n\r\n// Get or create a generic version of the given type\r\nfunction getGenericType(parent, generics) {\r\n    if(typeof parent === 'string') {\r\n        parent = getType(parent);\r\n    }\r\n    if((!generics || !generics.length || generics === parent.generics) && !parent.data.arbitraryGenerics) {\r\n        return getType(parent);\r\n    }\r\n    let type = buildType(parent.name, parent, generics);\r\n    if(!parent.isSubtype(type)) {\r\n        throw new Error(`Generics not assignable to ${parent.toTypeString()} from ${type.toTypeString()}`);\r\n    }\r\n    return type;\r\n}\r\n\r\n// Instantiate a new type\r\nfunction buildType(name, parent, generics, data = {}, meta = {}) {\r\n    // Special cases for data inheritance\r\n    let {\r\n        abstract,\r\n        arbitraryGenerics,\r\n        ...parentData\r\n    } = parent ? parent.data : {};\r\n    let parentMeta = parent ? parent.meta : {};\r\n    return new Type(\r\n        name,\r\n        parent || null,\r\n        generics || (parent ? parent.generics : []),\r\n        {...parentData, ...data},\r\n        {...parentMeta, ...meta},\r\n    );\r\n}\r\n\r\n// Get or create a type\r\nexport function getType(name, generics) {\r\n    if(arguments.length > 1) {\r\n        return getGenericType(name, generics);\r\n    }\r\n    if(name instanceof Type) {\r\n        return name;\r\n    }\r\n    if(typeof name === 'object') {\r\n        return getGenericType(name.name, (name.generics || []).map(t => getType(t)));\r\n    }\r\n    if(!name) {\r\n        throw new Error(`Invalid type: ${name}`);\r\n    }\r\n    if(!TYPE_MAP.has(name)) {\r\n        throw new Error(`Unknown type: ${name}`);\r\n    }\r\n    return TYPE_MAP.get(name);\r\n}\r\n\r\nexport function getSharedType(...types) {\r\n    let a = types[0];\r\n    for(let i = 1; i < types.length; i++) {\r\n        let b = types[i];\r\n        if(!a) {\r\n            a = b;\r\n        }\r\n        else if(b) {\r\n            a = a.getSharedType(b);\r\n        }\r\n    }\r\n    return a;\r\n}","import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\nimport TypeSelect from '../../common/inputs/TypeSelect';\r\n\r\n\r\nexport default function TypeControlHandle({abstract, control, bindInput}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    let constraintType = control.config.type.generics[0];\r\n\r\n    let invalid = !control.validate(value);\r\n\r\n    // if(typeType.isSubtype(value)) {\r\n    //     value = value?.generics[0];\r\n    // }\r\n\r\n    return (\r\n        <div ref={bindInput}>\r\n            <TypeSelect\r\n                value={value}\r\n                constraintType={constraintType}\r\n                abstract={abstract}\r\n                invalid={invalid}\r\n                onChange={setValue/*type => setValue(typeType.of(type))*/}>\r\n            </TypeSelect>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useContext, useState} from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../contexts/EventsContext';\r\nimport useListener from '../../../hooks/useListener';\r\nimport getNodeLabel from '../../../utils/getNodeLabel';\r\nimport classNames from 'classnames';\r\nimport {getBlock} from '../../../editor/blocks';\r\n\r\n\r\nexport default function NodeControlHandle({editor, control, bindInput}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    let [nodes, setNodes] = useState(() => [...editor.nodes]);\r\n\r\n    let events = useContext(EventsContext);\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => setNodes([...editor.nodes]));\r\n\r\n    let blockName = control.config.type?.meta.block;///\r\n    let blockFilter = blockName && (Array.isArray(blockName) ? blockName : [blockName]).map(block => {\r\n        let name = typeof block === 'string' ? block : block.name;\r\n        getBlock(name); // Ensure block exists\r\n        return name;\r\n    });\r\n\r\n    if(blockFilter) {\r\n        nodes = nodes.filter(n => !blockFilter || blockFilter.includes(n.name));\r\n    }\r\n\r\n    let invalid = !value || !nodes.some(n => String(n.id) === String(value) && (!blockFilter || blockFilter.includes(n.name)));\r\n\r\n    // TODO: cleanly prevent number -> string id conversion\r\n    return (\r\n        <select\r\n            ref={bindInput}\r\n            className={classNames(invalid && 'invalid')}\r\n            style={{maxWidth: '100%'}}\r\n            value={value}\r\n            onChange={event => setValue(event.target.value || undefined)}>\r\n            <option key={-1} label={'(Select a Node)'} value={undefined}/>\r\n            {nodes.map(node => (\r\n                <option key={node.id} label={getNodeLabel(node, editor)} value={node.id}/>\r\n            ))}\r\n        </select>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\n\r\n\r\nexport default function CheckboxControlHandle({control, bindInput}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    return (\r\n        <label ref={bindInput}>\r\n            <input\r\n                type=\"checkbox\"\r\n                checked={!!value}\r\n                onChange={event => setValue(event.target.checked)}\r\n            />\r\n            <span className=\"input-title my-0\" style={{verticalAlign: 'top'}}>{control.name}</span>\r\n        </label>\r\n    );\r\n}\r\n","import {\r\n    FaCode,\r\n    FaCommentAlt,\r\n    FaCubes,\r\n    FaDatabase,\r\n    FaEject,\r\n    FaFilter,\r\n    FaFont,\r\n    FaLongArrowAltRight,\r\n    FaNetworkWired,\r\n    FaPlusCircle,\r\n    FaStream,\r\n    FaTextHeight,\r\n    FaTh,\r\n} from 'react-icons/fa';\r\n\r\nclass Category {\r\n    constructor(name, parent, data = {}) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.root = parent ? parent.root : this;\r\n        this.data = data;\r\n    }\r\n}\r\n\r\nconst CATEGORY_MAP = new Map();\r\n\r\nfunction createCategory(data) {\r\n    let {name, parent, ...other} = data;\r\n    let category = new Category(name, parent, parent ? {...parent.data, ...other} : other);\r\n    CATEGORY_MAP.set(category.name, category);\r\n    return category;\r\n}\r\n\r\nexport function getCategory(name) {\r\n    if(name instanceof Category) {\r\n        return name;\r\n    }\r\n    if(!CATEGORY_MAP.has(name)) {\r\n        throw new Error(`Could not find category with name: ${name}`);\r\n    }\r\n    return CATEGORY_MAP.get(name);\r\n}\r\n\r\n\r\nexport const defaultCategory = createCategory('Default', {});\r\nexport const stateCategory = createCategory({\r\n    name: 'State',\r\n    color: '#3fd',\r\n    icon: FaDatabase,\r\n    priority: 10,\r\n});\r\nexport const functionCategory = createCategory({\r\n    name: 'Function',\r\n    color: '#fd3',\r\n    icon: FaCubes,\r\n    priority: 20,\r\n});\r\nexport const paramCategory = createCategory({\r\n    name: 'Param',\r\n    color: '#a8f',\r\n    icon: FaLongArrowAltRight,\r\n    priority: 3,\r\n});\r\nexport const typeCategory = createCategory({\r\n    name: 'Type',\r\n    color: '#2af',\r\n    icon: FaTextHeight,\r\n});\r\nexport const collectionCategory = createCategory({\r\n    name: 'Collection',\r\n    color: '#1c8',\r\n    icon: FaTh,\r\n});\r\nexport const compilerCategory = createCategory({\r\n    name: 'Compiler',\r\n    color: '#f5a',\r\n    icon: FaCode,\r\n});\r\nexport const expressionCategory = createCategory({\r\n    name: 'Expression',\r\n    color: '#aaa',\r\n    icon: FaEject,\r\n});\r\nexport const operatorCategory = createCategory({\r\n    name: 'Operator',\r\n    // color: '#57f',\r\n    icon: FaFilter,\r\n});\r\nexport const actorCategory = createCategory({\r\n    name: 'Actor',\r\n    color: '#fa8',\r\n    icon: FaFont,\r\n});\r\nexport const effectCategory = createCategory({\r\n    name: 'Effect',\r\n    // color: '#57f',\r\n    icon: FaStream,\r\n    priority: 5,\r\n});\r\nexport const literalCategory = createCategory({\r\n    name: 'Literal',\r\n    // color: '#8fa',\r\n    icon: FaPlusCircle,\r\n});\r\nexport const decompositionCategory = createCategory({\r\n    name: 'Decomposition',\r\n    // color: '#ccc',\r\n    icon: FaNetworkWired,\r\n});\r\nexport const commentCategory = createCategory({\r\n    name: 'Comment',\r\n    // color: '#ccc',\r\n    icon: FaCommentAlt,\r\n});\r\n","import React from 'react';\r\nimport EventEmitter from 'events';\r\n\r\nexport const EDITOR_CHANGE_EVENT = 'editor-change';\r\nexport const EDITOR_SAVE_EVENT = 'editor-save';\r\nexport const PROJECT_EXPORT_EVENT = 'project-export';\r\nexport const PROJECT_LOAD_EVENT = 'project-load';\r\nexport const PROJECT_CLEAR_EVENT = 'project-clear';\r\nexport const ERROR_EVENT = 'error';\r\n\r\n// TODO: fix HMR memory leak\r\n\r\nconst events = new EventEmitter();\r\nevents.setMaxListeners(1000);\r\nevents.on(ERROR_EVENT, console.error);\r\n\r\n// Browser debug\r\nwindow.EVENTS = events;\r\n\r\nexport default React.createContext(events);\r\n","import Compiler from './Compiler';\r\nimport {identifierType, typeType} from '../block-types/types';\r\n\r\nexport function nodeIdentifierRef(node, key) {\r\n    // TODO: ensure `id` is a valid identifier\r\n    let id = typeof node === 'number' || typeof node === 'string' ? String(node) : node.id;\r\n    return `node__${id}${key ? '_' + key : ''}`;\r\n}\r\n\r\nexport function importRef(name) {\r\n    return `$import$\"${name}\"`;\r\n}\r\n\r\nexport function resolveImportRefs(code) {\r\n    if(!code) {\r\n        return code;\r\n    }\r\n    code = String(code);\r\n\r\n    const imports = {};\r\n    code = code.replace(/\\$import\\$\"([^\"]*)\"/g, (match, path) => {\r\n        const id = path.includes('/') ? path.substring(path.lastIndexOf('/') + 1) : path;\r\n        if(imports.hasOwnProperty(id) && imports[id] !== path) {\r\n            throw new Error(`Conflicting import paths: \"${path}\" != \"${imports[id]}\"`);\r\n        }\r\n        imports[id] = path;\r\n        return id;\r\n    });\r\n    for(const [id, path] of Object.entries(imports)) {\r\n        code = `import ${id} \"${path}\"; ${code}`;\r\n    }\r\n    return code;\r\n}\r\n\r\nexport default class MotokoCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toMotoko');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n        // TODO: refactor these special cases\r\n\r\n        if(identifierType.isSubtype(prop.type)) {\r\n            console.log(node.name)///\r\n            return nodeIdentifierRef(node, prop.key);\r\n        }\r\n\r\n        if(typeType.isSubtype(prop.type)) {\r\n            let type = prop.type.generics[0];\r\n            if(type && !type.isAbstract()) {\r\n                return this.getTypeString();\r\n            }\r\n        }\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        if(typeof result === 'string' || typeof result === 'number' || typeof result === 'boolean' || result === null) {\r\n            return result;\r\n        }\r\n        if(result === undefined) {\r\n            return;\r\n        }\r\n        if(Array.isArray(result)) {\r\n            return result.map(r => this.postCompile(r, node, key)).filter(s => s).join(' ');\r\n        }\r\n        console.warn('Unexpected Motoko expression:', result);\r\n        return String(result);\r\n    }\r\n}","import {boolType, floatType, getType} from '../block-types/types';\r\nimport {operatorCategory} from '../block-categories/categories';\r\n\r\nexport function unaryOperatorBlock(type, symbol, evaluate) {\r\n    type = getType(type);\r\n    return {\r\n        topRight: 'result',\r\n        title: `(${symbol} a)`,\r\n        category: operatorCategory,\r\n        inputs: [{\r\n            key: 'input',\r\n            title: 'a',\r\n            type,\r\n        }],\r\n        outputs: [{\r\n            key: 'result',\r\n            type,\r\n            toMotoko({input}) {\r\n                return `${symbol}(${input})`;\r\n            },\r\n            // inferType({input}) {\r\n            //     return input;\r\n            // },\r\n        }],\r\n    };\r\n}\r\n\r\nexport function binaryOperatorBlock(type, symbol, evaluate) {\r\n    let [inputType, resultType] = Array.isArray(type) ? type : [type, type];\r\n\r\n    inputType = getType(inputType);\r\n    resultType = getType(resultType);\r\n\r\n    return {\r\n        title: `(a ${symbol} b)`,\r\n        category: operatorCategory,\r\n        topRight: 'result',\r\n        inputs: [{\r\n            key: 'left',\r\n            title: 'a',\r\n            type: inputType,\r\n        }, {\r\n            key: 'right',\r\n            title: 'b',\r\n            type: inputType,\r\n        }],\r\n        outputs: [{\r\n            key: 'result',\r\n            type: resultType,\r\n            toMotoko({left, right}) {\r\n                return `(${left} ${symbol} ${right})`;\r\n            },\r\n            // inferType({left, right}) {\r\n            //     return left.getSharedType(right);\r\n            // },\r\n        }],\r\n    };\r\n}\r\n\r\nexport function arithmeticOperatorBlock(...args) {\r\n    return binaryOperatorBlock(floatType, ...args);\r\n}\r\n\r\nexport function numberComparisonOperatorBlock(...args) {\r\n    return binaryOperatorBlock([floatType, boolType], ...args);\r\n}","import {effectType, getSharedType, unitType} from '../block-types/types';\r\nimport {effectCategory} from '../block-categories/categories';\r\n\r\nconst defaultType = effectType.of(unitType);\r\n\r\nexport function statementBlock(block, compileFn) {\r\n    const beforeProp = {\r\n        key: 'before',\r\n        type: effectType,\r\n        inferType(/*{after}*/args, node, compiler) {\r\n            // return after || defaultType;\r\n\r\n            let block = compiler.getBlock(node);\r\n            return getSharedType(...block.inputs\r\n                .filter(prop => effectType.isSubtype(prop.type))\r\n                .map(prop => compiler.getInput(node, prop.key))) || defaultType;\r\n        },\r\n        toMotoko(props, ...args) {\r\n            let result = compileFn(props, ...args);\r\n            if(result === undefined) {\r\n                return;\r\n            }\r\n            let {after} = props;\r\n            return `${result}${after ? ' ' + after : ''}`;\r\n        },\r\n    };\r\n    // for(let [key, fn] of Object.entries(compileObject)) {\r\n    //     beforeProp[key] = typeof fn === 'function' ? function(props, ...args) {\r\n    //         let result = fn(props, ...args);\r\n    //         if(result === undefined) {\r\n    //             return;\r\n    //         }\r\n    //         let {after} = props;\r\n    //         return `${result}${after ? ' ' + after : ''}`;\r\n    //     } : fn;\r\n    // }\r\n\r\n    return {\r\n        category: effectCategory,\r\n        topLeft: 'before',\r\n        topRight: 'after',\r\n        ...block,\r\n        inputs: [\r\n            ...block.inputs || [], {\r\n                key: 'after',\r\n                type: effectType,\r\n                optional: true,\r\n                // multi: true,\r\n            },\r\n        ],\r\n        outputs: [\r\n            ...block.outputs || [],\r\n            beforeProp,\r\n        ],\r\n    };\r\n}\r\n\r\nexport function endStatementBlock(block, statementProp) {\r\n    return {\r\n        category: effectCategory,\r\n        topLeft: 'statement',\r\n        ...block,\r\n        outputs: [...block.outputs || [], {\r\n            key: 'statement',\r\n            type: effectType,\r\n            ...statementProp,\r\n        }],\r\n    };\r\n}\r\n","import {useEffect} from 'react';\r\n\r\nexport default function useListener(target, event, listener, options) {\r\n    useEffect(() => {\r\n        if(!target) {\r\n            return;\r\n        }\r\n        let domTarget = 'addEventListener' in target;\r\n        if(domTarget) {\r\n            target.addEventListener(event, listener, options);\r\n        }\r\n        else {\r\n            target.on(event, listener, options);\r\n        }\r\n        return () => {\r\n            if(domTarget) {\r\n                target.removeEventListener(event, listener);\r\n            }\r\n            else {\r\n                target.off(event, listener);\r\n            }\r\n        };\r\n    });\r\n    return listener;\r\n}","import {useContext, useState} from 'react';\r\nimport useListener from './useListener';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../contexts/EventsContext';\r\n\r\nexport default function useControlState(control) {\r\n    let value = control.getValue();\r\n    let [, updateVisualValue] = useState(value); // updateVisualValue(..): redraw component if value changed\r\n\r\n    let events = useContext(EventsContext);\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => {\r\n        updateVisualValue(control.getValue());\r\n        control.notifyEditorChange?.();\r\n    });\r\n\r\n    useListener(control.events, 'update', () => events.emit(EDITOR_CHANGE_EVENT, control, value));\r\n\r\n    return [\r\n        value,\r\n        value => control.setValue(value),\r\n    ];\r\n}\r\n","import {boolType, unitType, valueType} from '../block-types/types';\r\nimport {computeMemberName, memberBlock} from '../block-patterns/member-patterns';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {FaAngleDoubleRight, FaAngleRight} from 'react-icons/fa';\r\n\r\nexport const stateReadIcon = FaAngleRight;\r\nexport const stateWriteIcon = FaAngleDoubleRight;\r\n\r\nconst block = memberBlock({\r\n    info: 'A persistent smart contract variable',\r\n    topRight: 'value',\r\n    category: stateCategory,\r\n    global: true,\r\n    computeTitle(node, editor) {\r\n        let name = computeMemberName(node, editor);\r\n        // let name = editor.compilers.motoko.getInput(node, 'name');\r\n        let type = editor.compilers.type.getInput(node, 'initialValue') || unitType;\r\n        return name && `${name} : ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'StateRead',\r\n        nodeKey: 'stateNode',\r\n    }, {\r\n        block: 'StateUpdate',\r\n        nodeKey: 'stateNode',\r\n    }],\r\n    inputs: [{\r\n        //     key: 'type',\r\n        //     type: 'Type',\r\n        // }, {\r\n        key: 'initialValue',\r\n        type: valueType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n        inferType({initialValue}) {\r\n            return initialValue;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'stable',\r\n        type: boolType,\r\n        // }, {\r\n        //     key: 'readonly',\r\n        //     type: 'Bool',\r\n    }],\r\n}, {\r\n    toMotoko({stable, name, initialValue}, node, compiler) {\r\n        let readonly = false;/// TODO: infer and/or adjust shortcuts\r\n        let modifiers = [!!stable && 'stable'].filter(m => m).join(' '); //TODO: combine into single control\r\n        let type = compiler.editor.compilers.type.getInput(node, 'initialValue');\r\n\r\n        initialValue = initialValue || '()';\r\n\r\n        return `${modifiers && modifiers + ' '}${readonly ? 'let' : 'var'} ${name}${type ? ` : ${compiler.getTypeString(type)}` : ''} = ${initialValue};`;\r\n    },\r\n});\r\nexport default block;\r\n","import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport default function SelectControlHandle({control, bindInput, options, findLabel}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    if(value === undefined && !options.includes(value)) {\r\n        value = options[0];\r\n        setValue(value);\r\n    }\r\n\r\n    let invalid = !control.validate(value) || !options.includes(value);\r\n\r\n    return (\r\n        <select\r\n            className={classNames(invalid && 'invalid')}\r\n            ref={bindInput}\r\n            value={value}\r\n            onChange={event => setValue(event.target.value || undefined)}>\r\n            {options.map((option, i) => (\r\n                <option key={i} label={findLabel?.(option, i) ?? option} value={option}/>\r\n            ))}\r\n        </select>\r\n    );\r\n}\r\n","import {identifierType, memberType} from '../block-types/types';\r\nimport {stringSelectProp} from './control-patterns';\r\n\r\n\r\nexport function computeMemberName(node, editor) {\r\n    return editor.compilers.motoko.getInput(node, 'name');\r\n\r\n    // let name = editor.compilers.motoko.getInput(node, 'name');\r\n    // if(!name) {\r\n    //     return;\r\n    // }\r\n    // if(!parentNode) {\r\n    //     return name;\r\n    // }\r\n    // let actorName = editor.compilers.motoko.getInput(parentNode, 'name');\r\n    // return actorName?`${actorName}.${name}`:name;\r\n}\r\n\r\nexport function visibilityControlProp() {\r\n    return stringSelectProp({\r\n        key: 'visibility',\r\n        // optional: true,\r\n    }, ['public', 'private', 'system']);\r\n}\r\n\r\nexport function memberBlock(block, memberProp) {\r\n    return {\r\n        topLeft: 'member',\r\n        ...block,\r\n        inputs: [\r\n            {\r\n                key: 'name',\r\n                type: identifierType,\r\n            },\r\n            ...block.inputs || [],\r\n        ],\r\n        outputs: [\r\n            {\r\n                key: 'member',\r\n                type: memberType,\r\n                ...memberProp,\r\n            },\r\n            ...block.outputs || [],\r\n        ],\r\n    };\r\n}","import SelectControlHandle from '../components/rete/controls/SelectControlHandle';\r\n\r\nexport function stringSelectProp(prop, options) {\r\n    return {\r\n        ...prop,\r\n        config: {\r\n            ...prop.config || {},\r\n            controlType: SelectControlHandle,\r\n            controlProps: {\r\n                options: prop.optional ? [undefined, ...options] : options,\r\n                findLabel: (option) => option ? option.charAt(0).toUpperCase() + option.substring(1) : '--',\r\n            },\r\n        },\r\n    };\r\n}","import {useEffect} from 'react';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nlet timeout;\r\n\r\n// Rebuild react-tooltip\r\nexport default function useReactTooltip(deps = []) {\r\n    useEffect(() => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => ReactTooltip.rebuild());\r\n    }, deps); /* eslint-disable-line react-hooks/exhaustive-deps */\r\n    return ReactTooltip;\r\n}\r\n","import {basename} from 'path';\r\nimport {getType} from '../block-types/types';\r\nimport {defaultCategory, getCategory} from '../block-categories/categories';\r\n\r\n// Temp: `/utils/jest/requireContextTransform`\r\n// noinspection JSUnresolvedVariable\r\nif(typeof require.context === 'undefined') {\r\n    const fs = require('fs');\r\n    const path = require('path');\r\n\r\n    // noinspection JSUndefinedPropertyAssignment\r\n    require.context = (base = '.', scanSubDirectories = false, regularExpression = /\\.js$/) => {\r\n        const files = {};\r\n\r\n        const readDirectory = (directory) => {\r\n            fs.readdirSync(directory).forEach((file) => {\r\n                const fullPath = path.resolve(directory, file);\r\n                if(fs.statSync(fullPath).isDirectory()) {\r\n                    if(scanSubDirectories) {\r\n                        readDirectory(fullPath);\r\n                    }\r\n                }\r\n                else if(regularExpression.test(fullPath)) {\r\n                    files[fullPath] = true;\r\n                }\r\n            });\r\n        };\r\n\r\n        const Module = (file) => {\r\n            return require(file);\r\n        };\r\n        Module.keys = () => Object.keys(files);\r\n\r\n        readDirectory(path.resolve(__dirname, base));\r\n        return Module;\r\n    };\r\n}\r\n\r\nconst allBlocks = [];\r\nconst blockNames = new Set();\r\n\r\n// noinspection JSUnresolvedFunction\r\nconst blockContext = require.context('../blocks', true, /\\.js$/);\r\nblockContext.keys().forEach(path => {\r\n    let name = basename(path, '.js');\r\n    let block = blockContext(path).default;\r\n    block = {...block}; // HMR fix\r\n    if(block) {\r\n        block.name = name;\r\n        if(blockNames.has(name)) {\r\n            console.error(`Duplicate block name: ${name}`);\r\n            return;\r\n        }\r\n        block.category = block.category ? getCategory(block.category) : defaultCategory;\r\n        block.props = block.props || {};\r\n        for(let [key, prop] of Object.entries(block.props)) {\r\n            if(prop.key && prop.key !== key) {\r\n                throw new Error(`Prop key mismatch: ${key} != ${prop.key}`);\r\n            }\r\n            prop.key = key;\r\n        }\r\n\r\n        // `outputs` prioritized over `inputs`\r\n        addProps(block, block.outputs, 'output');\r\n        addProps(block, block.inputs, 'input');\r\n        addProps(block, block.controls, 'control');\r\n\r\n        // Rearrange block inputs/outputs/controls\r\n        block.inputs = [];\r\n        block.outputs = [];\r\n        block.controls = [];\r\n\r\n        for(let [key, prop] of Object.entries(block.props)) {\r\n            prop.key = key;\r\n            // `output` prioritized over `input`\r\n            if(prop.output) {\r\n                if(!block.outputs.includes(prop)) {\r\n                    block.outputs.push(prop);\r\n                }\r\n            }\r\n            else if(prop.input) {\r\n                if(!block.inputs.includes(prop)) {\r\n                    block.inputs.push(prop);\r\n                }\r\n            }\r\n            else if(prop.control) {\r\n                if(!block.controls.includes(prop)) {\r\n                    block.controls.push(prop);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Type deserialization\r\n        for(let prop of Object.values(block.props)) {\r\n            if(!prop.type && (prop.input || prop.output) && prop.control) {\r\n                console.log(prop);///\r\n                throw new Error(`Type not found for ${block.name} : ${prop.key}`);\r\n            }\r\n            if(prop.type) {\r\n                prop.type = getType(prop.type);\r\n            }\r\n        }\r\n\r\n        blockNames.add(block.name);\r\n        allBlocks.push(block);\r\n    }\r\n});\r\n\r\nfunction addProps(block, propList, type) {\r\n    if(propList) {\r\n        for(let prop of propList) {\r\n            if(prop.key && block.props[prop.key] === prop) {\r\n                continue;\r\n            }\r\n            if(block.props.hasOwnProperty(prop.key)) {\r\n                throw new Error(`Duplicate prop in ${block.name}: ${prop.key}`);\r\n            }\r\n            prop[type] = prop[type] || true;\r\n            block.props[prop.key] = prop;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const BLOCK_MAP = new Map(allBlocks.map(block => [block.name, block]));\r\n\r\nwindow.BLOCK_MAP = BLOCK_MAP; // Browser debugging\r\n\r\n// Post-initialization\r\nfor(let block of BLOCK_MAP.values()) {\r\n    if(block.shortcuts) {\r\n        block.shortcuts.forEach(s => {\r\n            if(!s.block) {\r\n                throw new Error(`Shortcut in ${block.name} requires a \\`block\\` attribute`);\r\n            }\r\n            s.block = getBlock(s.block);\r\n        });\r\n    }\r\n    else {\r\n        block.shortcuts = [];\r\n    }\r\n}\r\n\r\nexport function getBlock(name) {\r\n    if(!name) {\r\n        throw new Error(`Block cannot be ${name}`);\r\n    }\r\n    if(typeof name === 'string') {\r\n        if(!BLOCK_MAP.has(name)) {\r\n            throw new Error(`Block does not exist: ${name}`);\r\n        }\r\n        return BLOCK_MAP.get(name);\r\n    }\r\n    return name;\r\n}","import {arrayType, boolType, mutableArrayType, typeType, valueType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {collectionCategory} from '../block-categories/categories';\r\n\r\nexport const arrayImportRef = importRef('mo:base/Array');\r\n\r\nconst block = {\r\n    title: 'Create Array',\r\n    category: collectionCategory,\r\n    icon: collectionCategory.data.icon,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');\r\n        let mutable = editor.compilers.motoko.getOutput(node, 'mutable'); // TODO: control compiler?\r\n        return type && `new Array [ ${mutable ? 'var ' : ''}${editor.compilers.motoko.getTypeString(type.generics[0])} ]`;\r\n    },\r\n    inputs: [{\r\n        key: 'itemType',\r\n        type: typeType.of(valueType),\r\n    }, {\r\n        key: 'items',\r\n        type: valueType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: arrayType,\r\n        inferType({itemType}, node, compiler) {\r\n            let mutable = compiler.editor.compilers.motoko.getInput(node, 'mutable'); // TODO: simplify\r\n            return (mutable ? mutableArrayType : arrayType).of(itemType);\r\n        },\r\n        toMotoko({mutable, items}) {\r\n            return `[${mutable ? (items.length ? 'var ' : 'var') : ''}${items.join(', ')}]`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'mutable',\r\n        type: boolType,\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalCategory} from '../block-categories/categories';\r\n\r\nexport function literalBlock(block, type, stringifier) {\r\n    return {\r\n        category: literalCategory,\r\n        topRight: 'value',\r\n        ...block,\r\n        outputs: [...block.outputs || [], {\r\n            key: 'value',\r\n            type,\r\n            control: true,\r\n            toMotoko({value}) {\r\n                if(value === undefined) {\r\n                    return;\r\n                }\r\n                return String(stringifier ? stringifier(value) : value);\r\n            },\r\n        }],\r\n    };\r\n}","import {getBlock} from '../editor/blocks';\r\nimport Rete from 'rete';\r\nimport {getType} from '../block-types/types';\r\n\r\nexport class UndefinedInputError extends Error {\r\n    constructor(block, key) {\r\n        super(`${block.name}.${key}`);\r\n    }\r\n}\r\n\r\nexport default class Compiler {\r\n    constructor(editor, compileKey) {\r\n        this.editor = editor;\r\n        this.compileKey = compileKey;\r\n    }\r\n\r\n    // Default output value if `[compileKey]` does not exist on block property\r\n    defaultCompile(prop, node) {\r\n    }\r\n\r\n    // Post-process results from either `prop[compileKey]` or `defaultCompile(..)`\r\n    postCompile(result, node, key) {\r\n        return result;\r\n    }\r\n\r\n    getNode(node) {\r\n        if(node instanceof Rete.Node) {\r\n            return node;\r\n        }\r\n        if(!node) {\r\n            throw new Error(`Node cannot be ${JSON.stringify(node)}`);\r\n        }\r\n        let id = String(typeof node === 'string' || typeof node === 'number' ? node : node.id);\r\n        node = this.editor.nodes.find(node => String(node.id) === id);\r\n        if(!node) {\r\n            throw new Error(`Node does not exist: ${id}`);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    getBlock(node) {\r\n        node = this.getNode(node);\r\n        return getBlock(node.name);\r\n    }\r\n\r\n    getInput(node, key) {\r\n        node = this.getNode(node);\r\n        let block = this.getBlock(node);\r\n        if(!block.props.hasOwnProperty(key)) {\r\n            throw new Error(`Prop not found on ${node.name}: ${key}`);\r\n        }\r\n        let prop = block.props[key];\r\n        if(prop.input) {\r\n            if(!prop.type.data.reversed) {\r\n                let input = this._input(node, key);\r\n                if(prop.multi) {\r\n                    return input.connections.map(c => this._compileConnection(c, c.input, c.output, 'outputs'));\r\n                }\r\n                if(input.connections.length) {\r\n                    let c = input.connections[0];\r\n                    return this._compileConnection(c, c.input, c.output, 'outputs');\r\n                }\r\n                if(input.control) {\r\n                    return input.control.getValue();\r\n                }\r\n            }\r\n            else {\r\n                let output = this._output(node, key);\r\n                if(prop.multi) {\r\n                    return output.connections.map(c => this._compileConnection(c, c.output, c.input, 'inputs'));\r\n                }\r\n                if(output.connections.length) {\r\n                    let c = output.connections[0];\r\n                    return this._compileConnection(c, c.output, c.input, 'inputs');\r\n                }\r\n            }\r\n        }\r\n\r\n        if(prop.control) {\r\n            let control = this._control(node, prop.key);\r\n            return this.postCompile(control.getValue(), node, key);\r\n        }\r\n    }\r\n\r\n    getOutput(node, key) {\r\n        node = this.getNode(node);\r\n        let prop = this._prop(node, key);\r\n        try {\r\n            let args = this.getInputArgs(node);\r\n            if(!args) {\r\n                return;\r\n            }\r\n            let result;\r\n            if(prop[this.compileKey]) {\r\n                result = prop[this.compileKey](args, node, this);\r\n            }\r\n            else {\r\n                result = this.defaultCompile(prop, node);\r\n            }\r\n            return this.postCompile(result, node, key);\r\n        }\r\n        catch(err) {\r\n            if(err instanceof UndefinedInputError) {\r\n                return;\r\n            }\r\n            console.error(`[${node.name}.${key}]`, err);\r\n            this.editor.trigger('warn', `[${node.name}.${key}] ${err}`);\r\n        }\r\n    }\r\n\r\n    getInputArgs(node) {\r\n        node = this.getNode(node);\r\n        let block = this.getBlock(node);\r\n        // if(block.__inputArgs?.[this.compileKey]) {\r\n        //     for(let key in block.__inputCache[this.compileKey]) {\r\n        //         delete block.__inputCache[this.compileKey][key];\r\n        //     }// TODO: proper cache invalidation\r\n        //     return block.__inputArgs[this.compileKey];\r\n        // }\r\n        let args = {};\r\n        for(let prop of Object.values(block.props)) {\r\n            if(prop.input || prop.control) {\r\n                // let value = this.getInput(node, prop.key);\r\n                // if(value === undefined && !prop.optional) {\r\n                //     this.editor.trigger('warn', `Missing input on ${block.name}: ${prop.key}`);\r\n                //     return;\r\n                // }\r\n                // args[prop.key] = value;\r\n\r\n                let cached = false;\r\n                let cachedValue;\r\n\r\n                Object.defineProperty(args, prop.key, {\r\n                    get: () => {\r\n                        // let cache = block.__inputCache[this.compileKey];\r\n                        // if(cache.hasOwnProperty(prop.key)) {\r\n                        //     return cache[prop.key];\r\n                        // }\r\n                        if(cached) {\r\n                            return cachedValue;\r\n                        }\r\n                        let value = this.getInput(node, prop.key);\r\n                        if(value === undefined && !prop.optional) {\r\n                            value = prop.type?.data.defaultInput?.(prop, node);\r\n                            if(value === undefined && !prop.optional) {\r\n                                throw new UndefinedInputError(block, prop.key);\r\n                            }\r\n                        }\r\n                        // cache[prop.key] = value;\r\n                        cached = true;\r\n                        return value;\r\n                    },\r\n                });\r\n            }\r\n        }\r\n        if(process.env.NODE_ENV !== 'production') {\r\n            // Throw error on missing key\r\n            let target = args;\r\n            args = new Proxy({}, {\r\n                get: (_, key) => {\r\n                    if(!target.hasOwnProperty(key)) {\r\n                        throw new Error(`Unknown input: ${block.name}.${key}`);\r\n                    }\r\n                    return target[key];\r\n                },\r\n            });\r\n        }\r\n        // TODO: refactor caching\r\n        // [block.__inputArgs || (block.__inputArgs = {})][this.compileKey] = args;\r\n        // [block.__inputCache || (block.__inputCache = {})][this.compileKey] = {};\r\n        // this.editor.on('process', ()=>{\r\n        //     for(let key in block.__inputCache) {\r\n        //         delete block.__inputCache[key];\r\n        //     }\r\n        // })///\r\n        return args;\r\n    }\r\n\r\n    // getControl(node, key) {\r\n    //     node = this.getNode(node);\r\n    //     return this._control(node, key).getValue();\r\n    // }\r\n\r\n    getTypeString(type) {\r\n        // console.log('/////', type);///\r\n        type = getType(type);\r\n        return type?.data[this.compileKey]?.(type.generics.map(t => this.getTypeString(t)), this) || type.toTypeString();\r\n    }\r\n\r\n    inferType(node, key) {\r\n        return this.editor.compilers.type.getInput(node, key);\r\n    }\r\n\r\n    _compileConnection(connection, from, to) {\r\n        // let prop = this._prop(to.node, to.key);\r\n        // if(!prop[this.compileKey]) {\r\n        //     throw new Error(`Cannot compile property of ${from.node.name} with key: ${prop.key}`);\r\n        // }\r\n        return this.getOutput(to.node, to.key);\r\n    }\r\n\r\n    _prop(node, key) {\r\n        let block = this.getBlock(node);\r\n        if(!block.props.hasOwnProperty(key)) {\r\n            throw new Error(`Prop does not exist in ${node.name}: ${key}`);\r\n        }\r\n        return block.props[key];\r\n    }\r\n\r\n    _input(node, key) {\r\n        if(!node.inputs.has(key)) {\r\n            throw new Error(`Input not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.inputs.get(key);\r\n    }\r\n\r\n    _output(node, key) {\r\n        if(!node.outputs.has(key)) {\r\n            throw new Error(`Output not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.outputs.get(key);\r\n    }\r\n\r\n    _control(node, key) {\r\n        if(!node.controls.has(key)) {\r\n            throw new Error(`Control not found on ${node.name}: ${key}`);\r\n        }\r\n        return node.controls.get(key);\r\n    }\r\n}","// Enable selecting input fields without dragging node\r\nexport const bindNodeInput = ref => ref && ref.addEventListener('pointerdown', event => event.stopPropagation());\r\n","import {capitalCase} from 'change-case';\r\n\r\nexport default function getBlockLabel(block) {\r\n    if(!block) {\r\n        return '';\r\n    }\r\n    return block.title || capitalCase(block.name);\r\n}","import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport default function TextControlHandle({control, bindInput, validation: {minLength, maxLength}}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    let invalid = !control.validate(value);\r\n\r\n    return (\r\n        <input\r\n            type=\"text\"\r\n            className={classNames('w-100', invalid && 'invalid')}\r\n            autoComplete=\"blocks-app\"\r\n            autoCorrect=\"off\"\r\n            ref={bindInput}\r\n            value={value || ''}\r\n            placeholder={control.name}\r\n            minLength={minLength}\r\n            maxLength={maxLength}\r\n            onChange={event => setValue(event.target.value || undefined)}\r\n        />\r\n    );\r\n}\r\n","import {sentenceCase} from 'change-case';\r\n\r\nexport default function getDefaultLabel(text) {\r\n    if(!text) {\r\n        return '';\r\n    }\r\n    return sentenceCase(text);\r\n}","import {getBlock} from '../editor/blocks';\r\nimport getBlockLabel from './getBlockLabel';\r\n\r\nexport default function getNodeLabel(node, editor, simplified) {\r\n    let block = getBlock(node.name);\r\n    if(!simplified && block && block.computeTitle) {\r\n        let title = block.computeTitle(node, editor);\r\n        if(title) {\r\n            return title;\r\n        }\r\n    }\r\n    return getBlockLabel(block);\r\n}","let replaceRegex = /{([0-9]+)}/g;\r\n\r\nexport function parseCodeBlockInputs(inputs, expression) {\r\n    return (expression || '').replaceAll(replaceRegex, (match, i) => {\r\n        i = +i;\r\n        return i >= 0 && i < inputs.length ? inputs[i] : match;\r\n    });\r\n}\r\n","// Derived from: https://github.com/dfinity/motoko-playground/blob/main/src/config/monacoConfig.js\r\n\r\nexport const configureMonaco = (monaco) => {\r\n    monaco.languages.register({ id: \"motoko\" });\r\n    monaco.languages.setLanguageConfiguration(\"motoko\", {\r\n        comments: {\r\n            lineComment: \"//\",\r\n            blockComment: [\"/*\", \"*/\"],\r\n        },\r\n        brackets: [\r\n            [\"{\", \"}\"],\r\n            [\"[\", \"]\"],\r\n            [\"(\", \")\"],\r\n        ],\r\n        autoClosingPairs: [\r\n            { open: \"{\", close: \"}\" },\r\n            { open: \"[\", close: \"]\" },\r\n            { open: \"(\", close: \")\" },\r\n            { open: '\"', close: '\"' },\r\n            { open: \"<\", close: \">\" },\r\n        ],\r\n    });\r\n    monaco.languages.setMonarchTokensProvider(\"motoko\", {\r\n        defaultToken: \"\",\r\n        tokenPostfix: \".mo\",\r\n        // prettier-ignore\r\n        keywords: [\r\n            'actor','and','async','assert','await','break','case','catch','class',\r\n            'continue','debug','else','false','for','func','if','in','import',\r\n            'module','not','null','object','or','label','let','loop','private',\r\n            'public','return','shared','try','throw','debug_show','query','switch',\r\n            'true','type','var','while','stable','flexible','system',\r\n        ],\r\n        accessmodifiers: [\"public\", \"private\", \"shared\"],\r\n        // prettier-ignore\r\n        typeKeywords: [\r\n            'Any','None','Null','Bool','Int','Int8','Int16','Int32','Int64','Nat',\r\n            'Nat8','Nat16','Nat32','Nat64','Word8','Word16','Word32','Word64','Float',\r\n            'Char','Text','Blob','Error','Principal',\r\n        ],\r\n        // prettier-ignore\r\n        operators: [\r\n            '=','<','>',':','<:','?','+','-','*','/','%','**','&','|','^','<<','>>',\r\n            '#','==','!=','>=','<=',':=','+=','-=','*=','/=','%=','**=','&=','|=',\r\n            '^=','<<=','>>=','#=','->',\r\n        ],\r\n        symbols: /[=(){}[\\].,:;@#_&\\-<>`?!+*\\\\/]/,\r\n        // C# style strings\r\n        escapes:\r\n            /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\r\n        tokenizer: {\r\n            root: [\r\n                // identifiers and keywords\r\n                [\r\n                    /[a-zA-Z_$][\\w$]*/,\r\n                    {\r\n                        cases: {\r\n                            \"@typeKeywords\": \"keyword.type\",\r\n                            \"@keywords\": \"keyword\",\r\n                            \"@default\": \"identifier\",\r\n                        },\r\n                    },\r\n                ],\r\n                // whitespace\r\n                { include: \"@whitespace\" },\r\n\r\n                // delimiters and operators\r\n                [/[{}()[\\]]/, \"@brackets\"],\r\n                [/[<>](?!@symbols)/, \"@brackets\"],\r\n                [/@symbols/, { cases: { \"@operators\": \"operator\", \"@default\": \"\" } }],\r\n                // numbers\r\n                [/\\d*\\.\\d+([eE][-+]?\\d+)?/, \"number.float\"],\r\n                [/0[xX][0-9a-fA-F_]+/, \"number.hex\"],\r\n                [/[0-9_]+/, \"number\"],\r\n\r\n                // delimiter: after number because of .\\d floats\r\n                [/[;,.]/, \"delimiter\"],\r\n\r\n                // strings\r\n                [/\"([^\"\\\\]|\\\\.)*$/, \"string.invalid\"], // non-teminated string\r\n                [/\"/, { token: \"string.quote\", bracket: \"@open\", next: \"@string\" }],\r\n\r\n                // characters\r\n                [/'[^\\\\']'/, \"string\"],\r\n                [/(')(@escapes)(')/, [\"string\", \"string.escape\", \"string\"]],\r\n                [/'/, \"string.invalid\"],\r\n            ],\r\n\r\n            comment: [\r\n                [/[^/*]+/, \"comment\"],\r\n                [/\\/\\*/, \"comment\", \"@push\"], // nested comment\r\n                [\"\\\\*/\", \"comment\", \"@pop\"],\r\n                [/[/*]/, \"comment\"],\r\n            ],\r\n\r\n            string: [\r\n                [/[^\\\\\"]+/, \"string\"],\r\n                [/@escapes/, \"string.escape\"],\r\n                [/\\\\./, \"string.escape.invalid\"],\r\n                [/\"/, { token: \"string.quote\", bracket: \"@close\", next: \"@pop\" }],\r\n            ],\r\n\r\n            whitespace: [\r\n                [/[ \\t\\r\\n]+/, \"white\"],\r\n                [/\\/\\*/, \"comment\", \"@comment\"],\r\n                [/\\/\\/.*$/, \"comment\"],\r\n            ],\r\n        },\r\n    });\r\n};","import MonacoEditor from \"@monaco-editor/react\";\r\nimport {configureMonaco} from '../../config/configureMonaco';\r\n\r\nexport default function CodeEditor({value, onChange, ...others}) {\r\n\r\n    // const monaco = useMonaco();\r\n\r\n    const onEditorChange = (newValue) => {\r\n        onChange?.(newValue);\r\n    };\r\n\r\n    return (\r\n        <MonacoEditor\r\n            // width=\"30vh\"\r\n            // height=\"40vh\"\r\n            theme=\"vs-dark\"\r\n            defaultLanguage=\"motoko\"\r\n            beforeMount={configureMonaco}\r\n            value={value}\r\n            // path={fileName}\r\n            onChange={onEditorChange}\r\n            options={{\r\n                tabSize: 2,\r\n                minimap: {enabled: false},\r\n                wordWrap: 'off',\r\n                // wrappingIndent: 'indent',\r\n                scrollBeyondLastLine: false,\r\n                fontSize: 16,\r\n            }}\r\n            {...others}\r\n        />\r\n    );\r\n}","import React from 'react';\r\nimport useControlState from '../../../hooks/useControlState';\r\nimport CodeEditor from '../../monaco/CodeEditor';\r\n\r\n\r\nexport default function CodeControlHandle({control, bindInput}) {\r\n    let [value, setValue] = useControlState(control);\r\n\r\n    return (\r\n        <div ref={bindInput} style={{height: 150}}>\r\n            <CodeEditor value={value} onChange={setValue}/>\r\n        </div>\r\n    );\r\n}\r\n","import {useContext, useEffect, useState} from 'react';\r\nimport EventsContext, {ERROR_EVENT} from '../../contexts/EventsContext';\r\n\r\nexport default function Loading({promise, loading, error, children}) {\r\n    let [status, setStatus] = useState('loading');\r\n    let [result, setResult] = useState();\r\n\r\n    let events = useContext(EventsContext);\r\n\r\n    useEffect(() => {\r\n        Promise.resolve(promise)\r\n            .then(result => {\r\n                setStatus('success');\r\n                setResult(result);\r\n            })\r\n            .catch(err => {\r\n                setStatus('error');\r\n                setResult(err);\r\n                if(!error) {\r\n                    events.emit(ERROR_EVENT, err);\r\n                }\r\n            });\r\n    }, [promise, error, events]);\r\n\r\n    if(status === 'loading') {\r\n        return loading?.() ?? null;\r\n    }\r\n    if(status === 'error') {\r\n        return error?.(result) ?? null;\r\n    }\r\n    return children?.(result) ?? null;\r\n}","import React, {useContext, useState} from 'react';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../contexts/EventsContext';\r\nimport useListener from '../../../hooks/useListener';\r\nimport Loading from '../../common/Loading';\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard/lib/Component';\r\nimport {FaCopy} from 'react-icons/fa';\r\nimport {Button} from 'react-bootstrap';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\n\r\nexport default function OutputControlHandle({control, bindInput, query}) {\r\n\r\n    const findValue = async () => {\r\n        try {\r\n            return await query(control, control.getNode(), control.editor);\r\n        }\r\n        catch(err) {\r\n            console.warn(err);\r\n            return `<${err}>`;\r\n        }\r\n    };\r\n\r\n    const [valuePromise, setValuePromise] = useState(findValue);\r\n    const [copied, setCopied] = useState();\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => {\r\n        setValuePromise(findValue());\r\n    });\r\n\r\n    let tooltipRef;\r\n    const showTooltip = () => {\r\n        setCopied(true);\r\n        ReactTooltip.show(tooltipRef);\r\n        setTimeout(() => /*ReactTooltip.hide(tooltipRef)&*/setCopied(false), 1000);\r\n    };\r\n\r\n    useReactTooltip();\r\n\r\n    // TODO: \"Copy to Clipboard\" tooltip\r\n\r\n    return (\r\n        <Loading promise={valuePromise}>\r\n            {value => (value ?? null) && (\r\n                <div className=\"d-flex\">\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"w-100 small\"\r\n                        readOnly\r\n                        ref={bindInput}\r\n                        value={value || ''}\r\n                    />\r\n                    <CopyToClipboard text={value} /* onCopy={() => setCopied(true)} */ >\r\n                        <Button\r\n                            ref={bindInput}\r\n                            size=\"sm\"\r\n                            variant=\"outline-light\"\r\n                            data-tip={copied ? undefined : 'Copy to Clipboard'}\r\n                            onClick={showTooltip}>\r\n                            <span ref={ref => tooltipRef = ref} data-tip=\"Copied!\"/>\r\n                            <FaCopy/>\r\n                        </Button>\r\n                    </CopyToClipboard>\r\n                </div>\r\n            )}\r\n        </Loading>\r\n    );\r\n}\r\n","import {anyReversedType, anyType} from '../block-types/types';\r\nimport OutputControlHandle from '../components/rete/controls/OutputControlHandle';\r\nimport {compilerCategory} from '../block-categories/categories';\r\nimport {resolveImportRefs} from '../compilers/MotokoCompiler';\r\n\r\nexport function compileBlock(title, compilerKey, displayFn) {\r\n    function queryFor(inputKey) {\r\n        return (control, node, editor) => {\r\n            let value = editor.compilers[compilerKey].getInput(node, inputKey);\r\n            let string = displayFn ? displayFn(value) : value;\r\n            return resolveImportRefs(string);\r\n        };\r\n    }\r\n\r\n    return {\r\n        title,\r\n        category: compilerCategory,\r\n        icon: compilerCategory.data.icon,\r\n        topLeft: 'input',\r\n        topRight: 'reversed',\r\n        inputs: [{\r\n            key: 'input',\r\n            title: 'Input',\r\n            type: anyType,\r\n        }, {\r\n            key: 'reversed',\r\n            title: 'Input',\r\n            type: anyReversedType,\r\n        }],\r\n        controls: [{\r\n            key: 'reversedDisplay',\r\n            title: 'Display',\r\n            config: {\r\n                controlType: OutputControlHandle,\r\n                controlProps: {\r\n                    query: queryFor('reversed'),\r\n                },\r\n            },\r\n        }, {\r\n            key: 'display',\r\n            config: {\r\n                controlType: OutputControlHandle,\r\n                controlProps: {\r\n                    query: queryFor('input'),\r\n                },\r\n            },\r\n        }],\r\n    };\r\n}\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 67;","import {asyncType, boolType, effectType, paramType, principalType, unitType} from '../block-types/types';\r\nimport {computeMemberName, memberBlock, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\n\r\nconst defaultReturnType = unitType;\r\n\r\nexport function getFunctionReturnType(node, editor) {\r\n    let type = editor.compilers.type.getInput(node, 'body')?.generics[0] || defaultReturnType;\r\n    let query = editor.compilers.control.getInput(node, 'query');\r\n    let visibility = editor.compilers.control.getInput(node, 'visibility');\r\n    if(query || visibility === 'public') {\r\n        type = asyncType.of(type);\r\n    }\r\n    return type;\r\n}\r\n\r\nconst block = memberBlock({\r\n    info: 'Evaluate based on given input parameters',\r\n    category: functionCategory,\r\n    topRight: 'body',\r\n    global: true,\r\n    computeTitle(node, editor) {\r\n        let name = computeMemberName(node, editor);\r\n        // return name;/////\r\n        let {params, body} = editor.compilers.motoko.getInputArgs(node);\r\n        let returnType = getFunctionReturnType(node, editor);\r\n        if(!name && !params.length && !body) {\r\n            return;\r\n        }\r\n        return `${name || ''}(${params.join(', ')})${returnType ? ' : ' + editor.compilers.motoko.getTypeString(returnType) : ''}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'FunctionCall',\r\n        nodeKey: 'functionNode',\r\n    }, {\r\n        block: 'Return',\r\n        connections: [{\r\n            fromOutput: true,\r\n            from: 'body',\r\n            to: 'statement',\r\n        }],\r\n    }],\r\n    inputs: [{\r\n        key: 'params',\r\n        type: paramType,\r\n        multi: true,\r\n    }, {\r\n        key: 'body',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        //     key: 'reference',\r\n        //     type: referenceType,\r\n        //     toMotoko({name}) {\r\n        //         return name;\r\n        //     },\r\n        // }, {\r\n        key: 'caller',\r\n        type: principalType,\r\n        toMotoko(args, node, compiler) {\r\n            return `${nodeIdentifierRef(node)}.caller`;\r\n        },\r\n    }],\r\n    controls: [/*{\r\n        key: 'shared',\r\n        type: boolType,\r\n    },*/ /*stringSelectProp({\r\n        key: 'asyncKind',\r\n        optional: true,\r\n    }, ['async', 'query']),*/\r\n        visibilityControlProp(), {\r\n            key: 'query',\r\n            type: boolType,\r\n        }],\r\n}, {\r\n    toMotoko({name, visibility, query, params, body}, node, compiler) {\r\n        let hasCaller = node.outputs.get('caller').connections.length;\r\n\r\n        let shared = !!hasCaller;\r\n        let modifiers = [visibility !== 'system' && visibility, shared && 'shared'].filter(m => m).join(' ');\r\n\r\n        let returnType = getFunctionReturnType(node, compiler.editor);\r\n        let returnString = compiler.getTypeString(returnType);\r\n        return [\r\n            modifiers,\r\n            hasCaller ? nodeIdentifierRef(node) : '',\r\n            query ? 'query' : '',\r\n            `func ${name || ''}(${params.join(', ')})${returnString !== '()' ? ` : ${returnString}` : ''}`,\r\n            `{ ${body || ''} };`,\r\n        ];\r\n    },\r\n});\r\nexport default block;\r\n","const examples = [\r\n    require('./files/Echo.blocks.json'),\r\n    require('./files/Counter.blocks.json'),\r\n    require('./files/Calculator.blocks.json'),\r\n    require('./files/WhoAmI.blocks.json'),\r\n    require('./files/PhoneBook.blocks.json'),\r\n    require('./files/ToDoList.blocks.json'),\r\n];\r\n\r\nmodule.exports = {\r\n    getExampleProjects() {\r\n        return examples;\r\n    },\r\n};","var map = {\n\t\"./Actor.js\": 108,\n\t\"./ActorClass.js\": 109,\n\t\"./Add.js\": 110,\n\t\"./And.js\": 111,\n\t\"./ArrayAppend.js\": 112,\n\t\"./ArrayAppended.js\": 113,\n\t\"./ArrayFilter.js\": 114,\n\t\"./ArrayGet.js\": 115,\n\t\"./ArrayMap.js\": 116,\n\t\"./ArrayPrepend.js\": 117,\n\t\"./ArrayPut.js\": 118,\n\t\"./Await.js\": 119,\n\t\"./CodeType.js\": 120,\n\t\"./CodeValue.js\": 121,\n\t\"./CollectionGet.js\": 122,\n\t\"./CollectionPut.js\": 123,\n\t\"./CollectionSize.js\": 124,\n\t\"./Comment.js\": 190,\n\t\"./CommentRegion.js\": 191,\n\t\"./CompareEqual.js\": 128,\n\t\"./CompareGreater.js\": 129,\n\t\"./CompareGreaterEqual.js\": 130,\n\t\"./CompareLess.js\": 131,\n\t\"./CompareLessEqual.js\": 132,\n\t\"./CompareNotEqual.js\": 133,\n\t\"./CompileMotoko.js\": 134,\n\t\"./CompileType.js\": 137,\n\t\"./Conditional.js\": 138,\n\t\"./ConditionalValue.js\": 139,\n\t\"./Divide.js\": 140,\n\t\"./DivideInt.js\": 141,\n\t\"./Function.js\": 69,\n\t\"./FunctionCall.js\": 142,\n\t\"./GlobalFunction.js\": 143,\n\t\"./LiteralBool.js\": 144,\n\t\"./LiteralCustomType.js\": 145,\n\t\"./LiteralFloat.js\": 146,\n\t\"./LiteralIdentifier.js\": 147,\n\t\"./LiteralInt.js\": 148,\n\t\"./LiteralNat.js\": 149,\n\t\"./LiteralPair.js\": 150,\n\t\"./LiteralPairType.js\": 151,\n\t\"./LiteralText.js\": 152,\n\t\"./LiteralTuple.js\": 153,\n\t\"./LiteralTupleType.js\": 154,\n\t\"./LiteralType.js\": 155,\n\t\"./LoopWhile.js\": 156,\n\t\"./MapGet.js\": 157,\n\t\"./MapPut.js\": 158,\n\t\"./MapRemove.js\": 159,\n\t\"./Multiply.js\": 160,\n\t\"./NewArray.js\": 36,\n\t\"./NewTextHashMap.js\": 161,\n\t\"./Not.js\": 162,\n\t\"./Null.js\": 163,\n\t\"./Optional.js\": 164,\n\t\"./OptionalUnwrap.js\": 165,\n\t\"./Or.js\": 166,\n\t\"./Parameter.js\": 167,\n\t\"./Query.js\": 168,\n\t\"./ReferenceImport.js\": 169,\n\t\"./Return.js\": 170,\n\t\"./State.js\": 29,\n\t\"./StateRead.js\": 171,\n\t\"./StateUpdate.js\": 172,\n\t\"./Subtract.js\": 173,\n\t\"./TextConcat.js\": 174,\n\t\"./TextSize.js\": 175,\n\t\"./TypeMember.js\": 176,\n\t\"./TypeMemberReference.js\": 177,\n\t\"./Variable.js\": 178\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 107;","import {actorType, identifierType, memberType} from '../block-types/types';\nimport {actorCategory} from '../block-categories/categories';\n\nconst block = {\n    info: 'An actor which can be deployed as a smart contract',\n    category: actorCategory,\n    topLeft: 'actor',\n    topRight: 'members',\n    global: true,\n    computeTitle(node, editor) {\n        let {name} = editor.compilers.motoko.getInputArgs(node);\n        return name && `actor ${name}`;\n    },\n    inputs: [{\n        key: 'name',\n        type: identifierType,\n        optional: true,\n    }, {\n        key: 'members',\n        type: memberType,\n        multi: true,\n    }],\n    outputs: [{\n        key: 'actor',\n        type: actorType,\n        toMotoko({name, members}) {\n            return `actor${name ? ' ' + name : ''} { ${members.join(' ')} };`;\n        },\n    }],\n};\nexport default block;","import {actorType, identifierType, memberType, paramType, principalType} from '../block-types/types';\nimport {actorCategory} from '../block-categories/categories';\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\n\n// TODO: subclasses\nlet thisName = 'this';\n\nconst block = {\n    info: 'An object-oriented class of actors',\n    category: actorCategory,\n    topLeft: 'actor',\n    topRight: 'members',\n    global: true,\n    computeTitle(node, editor) {\n        let {name, params} = editor.compilers.motoko.getInputArgs(node);\n        if(!name) {\n            return;\n        }\n        return `actor class ${name}(${params.join(', ')})`;\n    },\n    inputs: [{\n        key: 'name',\n        type: identifierType,\n        optional: true,\n    }, {\n        key: 'members',\n        type: memberType,\n        multi: true,\n    }, {\n        key: 'params',\n        type: paramType,\n        multi: true,\n    }],\n    outputs: [{\n        key: 'actor',\n        type: actorType,\n        toMotoko({name, params, members}, node, compiler) {\n            let hasCaller = node.outputs.get('caller').connections.length;\n\n            return `${hasCaller ? `shared (${nodeIdentifierRef(node)})` : ''}actor class${name ? ' ' + name : ''}(${params.join(', ')}) = ${thisName} { ${members.join(' ')} };`;\n        },\n        // }, {\n        //     key: 'this',\n        //     type: valueType,\n        //     toMotoko({}) {\n        //         return thisName;\n        //     },\n    }, {\n        key: 'caller',\n        type: principalType,\n        toMotoko(args, node, compiler) {\n            return `${nodeIdentifierRef(node)}.caller`;\n        },\n    }],\n};\nexport default block;","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = arithmeticOperatorBlock('+', (a, b) => a + b);\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock(boolType, 'and', (a, b) => a && b);\r\nexport default block;","import {arrayType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {FaRegCaretSquareRight} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Append (Array)',\r\n    category: collectionCategory,\r\n    icon: FaRegCaretSquareRight,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, value}) => {\r\n    return `${array} := ${arrayImportRef}.append(${array}, [${value}]);`;\r\n});\r\nexport default block;\r\n","import {arrayType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\nimport {arrayImportRef} from './NewArray';\r\n\r\nconst block = {\r\n    title: 'Appended (Array)',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    topRight: 'result',\r\n    hidden: true,///\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko({array, item}) {\r\n            return `${arrayImportRef}.append(${array}, ${item});`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, boolType, effectType, unitType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaLayerGroup} from 'react-icons/fa';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\nimport {arrayImportRef} from './NewArray';\r\n\r\nconst block = {\r\n    title: 'Filter Items (Array)',\r\n    category: collectionCategory,\r\n    icon: FaLayerGroup,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'body',\r\n        title: 'Filter',\r\n        type: effectType.of(boolType),\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: arrayType,\r\n        inferType({array}) {\r\n            return array;\r\n        },\r\n        toMotoko({array, body}, node, compiler) {\r\n            let type = array?.generics[0] || unitType;\r\n            let typeString = compiler.getTypeString(type);\r\n\r\n            return `${arrayImportRef}.filter<${typeString}>(${array}, func (${nodeIdentifierRef(node)} : ${typeString}) : Bool { ${body} })`;\r\n        },\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko(_, node, compiler) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, natType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Array)',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'index',\r\n        type: natType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko({array, index}) {\r\n            return `${array}[${index}]`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, effectType, unitType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaLayerGroup} from 'react-icons/fa';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\nimport {arrayImportRef} from './NewArray';\r\n\r\nconst block = {\r\n    title: 'Replace Items (Array)',\r\n    category: collectionCategory,\r\n    icon: FaLayerGroup,\r\n    topRight: 'body',\r\n    inputs: [{\r\n        key: 'array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'body',\r\n        title: 'Replace',\r\n        type: effectType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: arrayType,\r\n        inferType({body}) {\r\n            if(effectType.isSubtype(body)) {\r\n                return arrayType.of(body.generics[0]);\r\n            }\r\n        },\r\n        toMotoko({array, body}, node, compiler) {\r\n            let fromType = array?.generics[0] || unitType;\r\n            let toType = compiler.editor.compilers.type.getInput(node, 'body') || unitType;\r\n\r\n            let fromTypeString = compiler.getTypeString(fromType);\r\n            let toTypeString = compiler.getTypeString(toType);\r\n\r\n            return `${arrayImportRef}.map<${fromTypeString}, ${toTypeString}>(${array}, func (${nodeIdentifierRef(node)} : ${fromTypeString}) : ${toTypeString} { ${body} })`;\r\n        },\r\n    }, {\r\n        key: 'item',\r\n        type: valueType,\r\n        inferType({array}) {\r\n            if(arrayType.isSubtype(array)) {\r\n                return array.generics[0];\r\n            }\r\n        },\r\n        toMotoko(_, node, compiler) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arrayType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {arrayImportRef} from './NewArray';\r\nimport {FaRegCaretSquareLeft} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Prepend (Array)',\r\n    category: collectionCategory,\r\n    icon: FaRegCaretSquareLeft,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array',\r\n        type: arrayType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, value}) => {\r\n    return `${array} := ${arrayImportRef}.append([${value}], ${array});`;\r\n});\r\nexport default block;\r\n","import {mutableArrayType, natType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Put (Array)',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'array',\r\n        title: 'Array (mutable)',\r\n        type: mutableArrayType,\r\n    }, {\r\n        key: 'index',\r\n        type: natType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({array, index, value}) => {\r\n    return `${array}.put(${index}, ${value});`;\r\n});\r\nexport default block;\r\n","import {valueType} from '../block-types/types';\nimport {operatorCategory} from '../block-categories/categories';\n\nconst block = {\n    title: '(await a)',\n    info: 'Wait for an asynchronous value',\n    category: operatorCategory,\n    topRight: 'result',\n    inputs: [{\n        key: 'input',\n        // type: asyncType,\n        type: valueType,//// Temporary\n    }],\n    outputs: [{\n        key: 'result',\n        type: valueType,\n        inferType({input}) {\n            return input.generics[0];\n        },\n        toMotoko({input}) {\n            return `(await ${input})`;\n        },\n    }],\n};\nexport default block;\n","import {parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {customType, typeType, valueType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport CodeControlHandle from '../components/rete/controls/CodeControlHandle';\r\n\r\nconst block = {\r\n    title: `{ Type }`,\r\n    info: `Compile an arbitrary type`,\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    // topLeft: 'inputs',\r\n    topRight: 'result',\r\n    width: 14,\r\n    inputs: [{\r\n        key: 'inputs',\r\n        type: typeType,\r\n        multi: true,\r\n    }, {\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: typeType.of(valueType),\r\n        inferType({type}) {\r\n            return type || customType; // TODO: distinct customType\r\n        },\r\n        toMotoko({inputs, expression}) {\r\n            return parseCodeBlockInputs(inputs, expression);\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'expression',\r\n        config: {\r\n            controlType: CodeControlHandle,\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {parseCodeBlockInputs} from '../block-patterns/code-patterns';\r\nimport {anyType, typeType, valueType} from '../block-types/types';\r\nimport {expressionCategory} from '../block-categories/categories';\r\nimport CodeControlHandle from '../components/rete/controls/CodeControlHandle';\r\n\r\nconst block = {\r\n    title: `{ Expression }`,\r\n    info: `Compile an arbitrary expression`,\r\n    category: expressionCategory,\r\n    icon: expressionCategory.data.icon,\r\n    // topLeft: 'inputs',\r\n    topRight: 'result',\r\n    width: 14,\r\n    inputs: [{\r\n        key: 'inputs',\r\n        type: anyType,\r\n        multi: true,\r\n    }, {\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({type}) {\r\n            // return parseInputs(inputs, typeCode);\r\n            return type;\r\n        },\r\n        toMotoko({inputs, expression}) {\r\n            return `do { ${parseCodeBlockInputs(inputs, expression)} }`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'expression',\r\n        config: {\r\n            controlType: CodeControlHandle,\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {collectionType, mapType, optionalType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Collection)',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    hidden: true,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: collectionType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: optionalType.of(valueType),\r\n        inferType({collection}) {\r\n            if(mapType.isSubtype(collection)) {\r\n                return optionalType.of(collection.generics[1]);\r\n            }\r\n        },\r\n        toMotoko({collection, key}) {\r\n            return `${collection}.get(${key})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Put (Collection)',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    hidden: true,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: collectionCategory,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({collection, key, value}) => {\r\n    return `${collection}.put(${key}, ${value});`;\r\n});\r\nexport default block;\r\n","import {mapType, natType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaSitemap} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Size (Collection)',\r\n    category: collectionCategory,\r\n    icon: FaSitemap,\r\n    inputs: [{\r\n        key: 'collection',\r\n        type: mapType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: natType,\r\n        toMotoko({map}) {\r\n            return `${map}.size()`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType, valueType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock([valueType, boolType], '==', (a, b) => a === b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('>', (a, b) => a > b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('>=', (a, b) => a >= b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('<', (a, b) => a < b);\r\nexport default block;\r\n","import {numberComparisonOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = numberComparisonOperatorBlock('<=', (a, b) => a <= b);\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType, valueType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock([valueType, boolType], '!=', (a, b) => a !== b);\r\nexport default block;\r\n","import {compileBlock} from '../block-patterns/compile-patterns';\n\nconst block = compileBlock('Motoko', 'motoko');\nexport default block;\n","import {compileBlock} from '../block-patterns/compile-patterns';\n\nconst block = compileBlock('Type', 'type', type => type?.toTypeString());\nexport default block;\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType} from '../block-types/types';\r\n\r\nconst block = statementBlock({\r\n    title: 'if() then {} else {}',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'trueCase',\r\n        title: 'True',\r\n        type: effectType,\r\n        optional: true,\r\n    }, {\r\n        key: 'falseCase',\r\n        title: 'False',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n}, ({condition, trueCase, falseCase}) => {\r\n    if(String(condition) === 'true') {\r\n        return trueCase;\r\n    }\r\n    if(String(condition) === 'false') {\r\n        return falseCase;\r\n    }\r\n\r\n    let falsePart = falseCase ? ` else { ${falseCase} }` : '';\r\n    return `if (${condition}) { ${trueCase || ''} }${falsePart};`;\r\n});\r\nexport default block;","import {boolType, valueType} from '../block-types/types';\r\nimport {decompositionCategory} from '../block-categories/categories';\r\n\r\nconst block = {\r\n    title: 'Map Bool',\r\n    category: decompositionCategory,\r\n    topLeft: 'condition',\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'trueCase',\r\n        type: valueType,\r\n    }, {\r\n        key: 'falseCase',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: valueType,\r\n        inferType({trueCase, falseCase}) {\r\n            return trueCase.getSharedType(falseCase);\r\n        },\r\n        toMotoko({condition, trueCase, falseCase}) {\r\n            if(condition === true) {\r\n                return trueCase;\r\n            }\r\n            else if(condition === false) {\r\n                return falseCase;\r\n            }\r\n            return `(if (${condition}) { ${trueCase} } else { ${falseCase} })`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = arithmeticOperatorBlock('/', (a, b) => a / b);\r\nexport default block;","import {operatorCategory} from '../block-categories/categories';\r\nimport {intType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\n\r\nexport const intImportRef = importRef('mo:base/Int');\r\n\r\nconst block = {\r\n    title: `(a // b)`,\r\n    category: operatorCategory,\r\n    topRight: 'result',\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: intType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: intType,\r\n    }],\r\n    outputs: [{\r\n        key: 'result',\r\n        type: intType,\r\n        toMotoko({left, right}) {\r\n            return `${intImportRef}.div(${left}, ${right})`;\r\n        },\r\n        // inferType({left, right}) {\r\n        //     return left.getSharedType(right);\r\n        // },\r\n    }],\r\n};\r\nexport default block;","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {nodeType, valueType} from '../block-types/types';\r\nimport {FaPlayCircle} from 'react-icons/fa';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {getFunctionReturnType} from './Function';\r\n\r\nconst block = statementBlock({\r\n    info: 'Invoke a function in this project',\r\n    title: 'Call Function',\r\n    category: functionCategory,\r\n    icon: FaPlayCircle,\r\n    computeTitle(node, editor) {\r\n        let functionNode = editor.compilers.node.getInput(node, 'functionNode');\r\n        if(!functionNode) {\r\n            return;\r\n        }\r\n        let name = editor.compilers.motoko.getInput(functionNode, 'name');\r\n        let paramNames = editor.compilers.node.getInput(functionNode, 'params')\r\n            .map(n => editor.compilers.motoko.getInput(n, 'name'));\r\n        return name && `${name}(${paramNames.join(', ')})`;\r\n    },\r\n    inputs: [{\r\n        key: 'args',\r\n        type: valueType,\r\n        multi: true, // TODO: separate arg sockets\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType(_, node, compiler) {\r\n            let functionNode = compiler.editor.compilers.node.getInput(node, 'functionNode');\r\n            if(!functionNode) {\r\n                return;\r\n            }\r\n            return getFunctionReturnType(functionNode, compiler.editor);\r\n        },\r\n        toMotoko({args}, node, compiler) {\r\n            let functionNode = compiler.editor.compilers.node.getInput(node, 'functionNode');\r\n            if(!functionNode) {\r\n                return;\r\n            }\r\n            let name = compiler.getInput(functionNode, 'name');\r\n            if(!name) {\r\n                return;\r\n            }\r\n            return `${name}(${args.join(', ')})`;\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'functionNode',\r\n        type: nodeType.withMeta({block: 'Function'}),\r\n    }],\r\n}, ({functionNode, args}, node, compiler) => {\r\n    let name = compiler.getInput(functionNode, 'name');\r\n    if(!name) {\r\n        return;\r\n    }\r\n    return `ignore ${name}(${args.join(', ')});`;\r\n});\r\nexport default block;\r\n","import {boolType, effectType, identifierType, paramType} from '../block-types/types';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FiGlobe} from 'react-icons/fi';\r\n\r\n// const defaultReturnType = unitType;\r\n//\r\n// function getGlobalFunctionReturnType(node, editor) {\r\n//     let type = editor.compilers.type.getInput(node, 'body')?.generics[0] || defaultReturnType;\r\n//     return asyncType.of(type);\r\n// }\r\n\r\n// TODO: dry with Function\r\n\r\nconst block = {\r\n    title: 'Method',\r\n    info: 'Define a callable method for the smart contract',\r\n    category: functionCategory,\r\n    icon: FiGlobe,\r\n    topRight: 'body',\r\n    // global: true,\r\n    computeTitle(node, editor) {\r\n        // return editor.compilers.motoko.getInput(node, 'name');\r\n        let name = editor.compilers.motoko.getInput(node, 'name');\r\n        let {params, body} = editor.compilers.motoko.getInputArgs(node);\r\n        let returnType = editor.compilers.type.getInput(node, 'body')?.generics[0];\r\n        if(!name && !params.length && !body) {\r\n            return;\r\n        }\r\n        return `${name || ''}(${params.join(', ')})${returnType ? ' : ' + editor.compilers.motoko.getTypeString(returnType) : ''}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'Return',\r\n        connections: [{\r\n            from: 'body',\r\n            to: 'statement',\r\n        }],\r\n    }],\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'params',\r\n        type: paramType,\r\n        multi: true,\r\n    }, {\r\n        key: 'body',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n    // outputs: [{\r\n    //     key: 'caller',\r\n    //     type: principalType,\r\n    //     toMotoko(args, node, compiler) {\r\n    //         return `${nodeIdentifierRef(node)}.caller`;\r\n    //     },\r\n    // }],\r\n    controls: [{\r\n        key: 'query',\r\n        type: boolType,\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Boolean',\r\n}, boolType);\r\nexport default block;","import {typeCategory} from '../block-categories/categories';\r\nimport {customType, referenceType, typeType, valueType} from '../block-types/types';\r\nimport {FaPencilAlt} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Custom Type',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    icon: FaPencilAlt,\r\n    hidden: true,////\r\n    inputs: [{\r\n        key: 'reference',\r\n        type: referenceType,\r\n    }, {\r\n        key: 'generics',\r\n        type: typeType.of(valueType),\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(customType),\r\n        inferType(args, node, compiler) {\r\n            let reference = compiler.editor.compilers.motoko.getInput(node, 'reference');\r\n            let generics = compiler.editor.compilers.type.getInput(node, 'generics');\r\n            if(!reference) {\r\n                return;\r\n            }\r\n            return customType.of(...generics).withMeta({name: reference}); ///\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {floatType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Float',\r\n}, floatType);\r\nexport default block;","import {identifierType} from '../block-types/types';\r\nimport {FaItalic} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Name',\r\n    // category: defaultCategory,\r\n    icon: FaItalic,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: identifierType,\r\n        control: true,\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {intType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Integer',\r\n}, intType);\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {natType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Natural Number',\r\n}, natType);\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {tupleType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Pair',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `Pair ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: valueType,\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: tupleType.of(valueType, valueType),\r\n        inferType({left, right}) {\r\n            return tupleType.of(left, right);\r\n        },\r\n        toMotoko({left, right}) {\r\n            return `(${left}, ${right})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {tupleType, typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Pair of Types',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && editor.compilers.motoko.getTypeString(type);\r\n    },\r\n    inputs: [{\r\n        key: 'left',\r\n        title: 'a',\r\n        type: typeType.of(valueType),\r\n    }, {\r\n        key: 'right',\r\n        title: 'b',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(tupleType.of(valueType, valueType)),\r\n        inferType({left, right}) {\r\n            return /*typeType.of(*/tupleType.of(left, right)/*)*/;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {literalBlock} from '../block-patterns/literal-patterns';\r\nimport {textType} from '../block-types/types';\r\n\r\nconst block = literalBlock({\r\n    title: 'Text',\r\n}, textType, JSON.stringify);\r\nexport default block;\r\n","import {literalCategory} from '../block-categories/categories';\r\nimport {tupleType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Tuple',\r\n    category: literalCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `Tuple ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'inputs',\r\n        type: valueType,\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: tupleType,\r\n        inferType({inputs}) {\r\n            return tupleType.of(...inputs);\r\n        },\r\n        toMotoko({inputs}) {\r\n            return `(${inputs.join(', ')})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {tupleType, typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Tuple of Types',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && editor.compilers.motoko.getTypeString(type);\r\n    },\r\n    inputs: [{\r\n        key: 'types',\r\n        type: typeType.of(valueType),\r\n        multi: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(tupleType),\r\n        inferType({types}) {\r\n            return /*typeType.of(*/tupleType.of(...types/*.map(t => t.generics[0])*/)/*)*/; // Unwrap Type<?> inputs\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeCategory} from '../block-categories/categories';\r\nimport {typeType, valueType} from '../block-types/types';\r\n\r\nconst block = {\r\n    title: 'Type',\r\n    category: typeCategory,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: typeType.of(valueType),\r\n        control: true,\r\n        inferType({value}) {\r\n            // return typeType.of(value);\r\n            return value;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {boolType, effectType} from '../block-types/types';\r\n\r\nconst block = statementBlock({\r\n    title: 'while() {}',\r\n    info: 'Repeat while the condition is true',\r\n    inputs: [{\r\n        key: 'condition',\r\n        type: boolType,\r\n    }, {\r\n        key: 'loop',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n}, ({condition, loop}) => {\r\n    return `while (${condition}) { ${loop ?? ''} };`;\r\n});\r\nexport default block;","import {mapType, optionalType, valueType} from '../block-types/types';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Get (Map)',\r\n    category: collectionCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: optionalType.of(valueType),\r\n        inferType({map}) {\r\n            if(mapType.isSubtype(map)) {\r\n                return optionalType.of(map.generics[1]);\r\n            }\r\n        },\r\n        toMotoko({map, key}) {\r\n            return `${map}.get(${key})`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {mapType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Put (Map)',\r\n    category: collectionCategory,\r\n    icon: stateWriteIcon,\r\n    // deprecated: true,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n    }],\r\n}, ({map, key, value}) => {\r\n    return `${map}.put(${key}, ${value});`;\r\n});\r\nexport default block;\r\n","import {mapType, valueType} from '../block-types/types';\r\nimport {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {collectionCategory} from '../block-categories/categories';\r\nimport {FaCompress} from 'react-icons/fa';\r\n\r\nconst block = statementBlock({\r\n    title: 'Remove (Map)',\r\n    category: collectionCategory,\r\n    icon: FaCompress,\r\n    inputs: [{\r\n        key: 'map',\r\n        type: mapType,\r\n    }, {\r\n        key: 'key',\r\n        type: valueType,\r\n    }],\r\n}, ({map, key}) => {\r\n    return `${map}.remove(${key});`;\r\n});\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {floatType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock(floatType, '*', (a, b) => a * b);\r\nexport default block;","import {mapType, textType, typeType, valueType} from '../block-types/types';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\nimport {collectionCategory} from '../block-categories/categories';\r\n\r\nexport const hashMapImportRef = importRef('mo:base/HashMap');\r\nexport const textImportRef = importRef('mo:base/Text');\r\n\r\nconst block = {\r\n    title: 'Create Map',\r\n    category: collectionCategory,\r\n    icon: collectionCategory.data.icon,\r\n    topRight: 'value',\r\n    computeTitle(node, editor) {\r\n        let type = editor.compilers.type.getOutput(node, 'value');//?.generics[0];\r\n        return type && `new HashMap<${editor.compilers.motoko.getTypeString(type.generics[0])}, ${editor.compilers.motoko.getTypeString(type.generics[1])}>`;\r\n    },\r\n    inputs: [{\r\n        key: 'keyType',\r\n        type: typeType.of(textType), // TODO: other key types\r\n    }, {\r\n        key: 'valueType',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: mapType,\r\n        inferType({valueType}) {\r\n            return mapType.of(textType, valueType);\r\n        },\r\n        toMotoko(args, node, compiler) {\r\n            let {valueType} = compiler.editor.compilers.type.getInputArgs(node);\r\n            let valueTypeString = compiler.getTypeString(valueType);\r\n            return `${hashMapImportRef}.HashMap<Text, ${valueTypeString}>(0, ${textImportRef}.equal, ${textImportRef}.hash)`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {unaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = unaryOperatorBlock(boolType, 'not', (a) => !a);\r\nexport default block;\r\n","import {nullType} from '../block-types/types';\r\nimport {literalCategory} from '../block-categories/categories';\r\n\r\nconst block = {\r\n    category: literalCategory,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: nullType,\r\n        toMotoko() {\r\n            return `null`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {optionalType, valueType} from '../block-types/types';\nimport {operatorCategory} from '../block-categories/categories';\n\nconst block = {\n    title: 'Wrap Optional (?a)',\n    info: 'Create an optional version of the input value',\n    category: operatorCategory,\n    // topRight: 'result',\n    inputs: [{\n        key: 'input',\n        title: 'Value',\n        type: valueType,\n    }],\n    outputs: [{\n        key: 'result',\n        type: optionalType,\n        inferType({input}) {\n            return optionalType.of(input);\n        },\n        toMotoko({input}) {\n            return `(?${input})`;\n        },\n    }, {\n        key: 'null',\n        type: optionalType,\n        inferType({input}) {\n            return optionalType.of(input);\n        },\n        toMotoko({input}) {\n            return `null`;\n        },\n    }],\n};\nexport default block;\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {effectType, optionalType, valueType} from '../block-types/types';\r\nimport {decompositionCategory} from '../block-categories/categories';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\n\r\nconst block = statementBlock({\r\n    title: 'Unwrap Optional',\r\n    info: 'Run different logic depending on whether an Optional value is null',\r\n    category: decompositionCategory,\r\n    inputs: [{\r\n        key: 'input',\r\n        type: optionalType,\r\n    }, {\r\n        key: 'valueCase',\r\n        title: 'Value',\r\n        type: effectType,\r\n        optional: true,\r\n    }, {\r\n        key: 'nullCase',\r\n        title: 'Null',\r\n        type: effectType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({input}) {\r\n            return input;\r\n        },\r\n        toMotoko({input}, node) {\r\n            return nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n}, ({input, valueCase, nullCase}, node) => {\r\n    if(String(input) === 'null') {\r\n        return nullCase;\r\n    }\r\n\r\n    let valuePart = valueCase ? `case (?${nodeIdentifierRef(node)}) {${valueCase}};` : '';\r\n    let nullPart = nullCase ? `case null {${nullCase}};` : '';\r\n\r\n    return `switch (${input}) { ${valuePart}${nullPart && ' ' + nullPart} };`;\r\n});\r\nexport default block;","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {boolType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock(boolType, 'or', (a, b) => a || b);\r\nexport default block;\r\n","import {identifierType, paramType, typeType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\n\r\nconst block = {\r\n    info: 'An input parameter to a class or function',\r\n    topLeft: 'param',\r\n    topRight: 'value',\r\n    category: paramCategory,\r\n    computeTitle(node, editor) {\r\n        let name = editor.compilers.motoko.getInput(node, 'name');\r\n        let type = editor.compilers.type.getInput(node, 'type');\r\n        return name && `${name} : ${type ? editor.compilers.motoko.getTypeString(type) : 'Any'}`;\r\n    },\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n    }, {\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'param',\r\n        type: paramType,\r\n        toMotoko({name, type}, node, compiler) {\r\n            // console.log(type)//\r\n            let typeString = compiler.getTypeString(type) || 'Any';\r\n            return `${name} : ${typeString}`;\r\n        },\r\n    }, {\r\n        key: 'value',\r\n        type: valueType,\r\n        toMotoko({name}) {\r\n            return name;\r\n        },\r\n        inferType({type}) {\r\n            return type;\r\n        },\r\n    }],\r\n};\r\nexport default block;","import {asyncType, boolType, paramType, principalType, unitType, valueType} from '../block-types/types';\r\nimport {computeMemberName, memberBlock, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\n\r\n// TODO: TEMPORARY: experimental\r\n\r\nconst defaultReturnType = unitType;\r\n\r\nexport function getQueryReturnType(node, editor) {\r\n    let type = editor.compilers.type.getInput(node, 'body') || defaultReturnType;\r\n    let visibility = editor.compilers.control.getInput(node, 'visibility');\r\n    if(visibility === 'public') {\r\n        type = asyncType.of(type);\r\n    }\r\n    return type;\r\n}\r\n\r\nconst block = memberBlock({\r\n    info: 'Return a value',\r\n    category: functionCategory,\r\n    topRight: 'body',\r\n    global: true,\r\n    computeTitle(node, editor) {\r\n        let name = computeMemberName(node, editor);\r\n        // return name;/////\r\n        let {params, body} = editor.compilers.motoko.getInputArgs(node);\r\n        let returnType = getQueryReturnType(node, editor);\r\n        if(!name && !params.length && !body) {\r\n            return;\r\n        }\r\n        return `${name || ''}(${params.join(', ')})${returnType ? ' : ' + editor.compilers.motoko.getTypeString(returnType) : ''}`;\r\n    },\r\n    shortcuts: [{\r\n        block: 'FunctionCall',\r\n        nodeKey: 'functionNode',\r\n    }, {\r\n        block: 'Return',\r\n        connections: [{\r\n            from: 'body',\r\n            to: 'statement',\r\n        }],\r\n    }],\r\n    inputs: [{\r\n        key: 'params',\r\n        type: paramType,\r\n        multi: true,\r\n    }, {\r\n        key: 'body',\r\n        type: valueType,\r\n        optional: true,\r\n    }],\r\n    outputs: [{\r\n        key: 'caller',\r\n        type: principalType,\r\n        toMotoko(args, node, compiler) {\r\n            return `${nodeIdentifierRef(node)}.caller`;\r\n        },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(), {\r\n            key: 'query',\r\n            type: boolType,\r\n        }],\r\n}, {\r\n    toMotoko({name, visibility, params, body}, node, compiler) {\r\n        let hasCaller = node.outputs.get('caller').connections.length;\r\n\r\n        let shared = !!hasCaller;\r\n        let modifiers = [visibility !== 'system' && visibility, shared && 'shared'].filter(m => m).join(' ');\r\n\r\n        let returnType = getQueryReturnType(node, compiler.editor);\r\n        let returnString = compiler.getTypeString(returnType);\r\n        return [\r\n            modifiers,\r\n            hasCaller ? nodeIdentifierRef(node) : '',\r\n            `query func ${name || ''}(${params.join(', ')})${returnString !== '()' ? ` : ${returnString}` : ''}`,\r\n            `{ ${body || ''} };`,\r\n        ];\r\n    },\r\n});\r\nexport default block;\r\n","import {referenceType, textType} from '../block-types/types';\r\nimport {FaItalic} from 'react-icons/fa';\r\nimport {importRef} from '../compilers/MotokoCompiler';\r\n\r\nconst block = {\r\n    title: 'Import Reference',\r\n    // category: defaultCategory,\r\n    icon: FaItalic,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: referenceType,\r\n        toMotoko({path}) {\r\n            return importRef(path);\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'path',\r\n        type: textType,\r\n        config: {\r\n            validation: {\r\n                minLength: 1,\r\n            },\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {effectType, unitType, valueType} from '../block-types/types';\r\nimport {endStatementBlock} from '../block-patterns/statement-patterns';\r\nimport {functionCategory} from '../block-categories/categories';\r\nimport {FaCaretLeft} from 'react-icons/fa';\r\n\r\nconst block = endStatementBlock({\r\n    info: 'End a function\\'s execution path',\r\n    category: functionCategory,\r\n    icon: FaCaretLeft,\r\n    inputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        optional: true,\r\n    }],\r\n    // controls: [{\r\n    //     key: 'functionNode',\r\n    //     config: {\r\n    //         controlType: NodeControlHandle,\r\n    //         controlProps: {\r\n    //             component: 'Function',\r\n    //         },\r\n    //     },\r\n    // }],\r\n}, {\r\n    inferType({value}) {\r\n        return effectType.of(value || unitType);\r\n    },\r\n    toMotoko({value}) {\r\n        return `return${value ? ' ' + value : ''};`;\r\n    },\r\n});\r\nexport default block;","import {nodeType, valueType} from '../block-types/types';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {stateReadIcon} from './State';\r\n\r\nconst block = {\r\n    title: 'Read State',\r\n    category: stateCategory,\r\n    icon: stateReadIcon,\r\n    topRight: 'value',\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType(args, node, compiler) {\r\n            let stateNode = compiler.editor.compilers.node.getInput(node, 'stateNode');\r\n            if(!stateNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(stateNode, 'initialValue');\r\n        },\r\n        toMotoko(args, node, compiler) {\r\n            let stateNode = compiler.editor.compilers.node.getInput(node, 'stateNode');\r\n            if(!stateNode) {\r\n                return;\r\n            }\r\n            return compiler.getInput(stateNode, 'name');\r\n        },\r\n    }],\r\n    controls: [{\r\n        key: 'stateNode',\r\n        type: nodeType.withMeta({block: 'State'}),\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {stateCategory} from '../block-categories/categories';\r\nimport {nodeType} from '../block-types/types';\r\nimport {stateWriteIcon} from './State';\r\n\r\nconst block = statementBlock({\r\n    title: 'Write State',\r\n    category: stateCategory,\r\n    icon: stateWriteIcon,\r\n    inputs: [{\r\n        key: 'value',\r\n        type: 'Value',\r\n        // optional: true,\r\n    }],\r\n    // outputs: [{\r\n    //     key: 'newValue',\r\n    //     type: 'Value',\r\n    //     toMotoko({node: stateNode, value}, node, compiler) {\r\n    //         let name = compiler.getOutput(stateNode, 'name');\r\n    //         if(!name) {\r\n    //             return;\r\n    //         }\r\n    //         return `(${name} := ${value || '()'})`;\r\n    //     },\r\n    // }],\r\n    controls: [{\r\n        key: 'stateNode',\r\n        type: nodeType.withMeta({block: 'State'}),\r\n    }],\r\n}, ({stateNode, value}, node, compiler) => {\r\n    let name = compiler.getInput(stateNode, 'name');\r\n    if(!name) {\r\n        return;\r\n    }\r\n    return `${name} := ${value};`;\r\n});\r\nexport default block;\r\n","import {arithmeticOperatorBlock} from '../block-patterns/operator-patterns';\r\n\r\nconst block = arithmeticOperatorBlock('-', (a, b) => a - b);\r\nexport default block;\r\n","import {binaryOperatorBlock} from '../block-patterns/operator-patterns';\r\nimport {textType} from '../block-types/types';\r\n\r\nconst block = binaryOperatorBlock(textType, '#', (a, b) => a || b);\r\nexport default block;\r\n","import {natType, textType} from '../block-types/types';\r\nimport {FaSitemap} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Length (Text)',\r\n    // category: textCategory,\r\n    icon: FaSitemap,\r\n    inputs: [{\r\n        key: 'text',\r\n        type: textType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: natType,\r\n        toMotoko({text}) {\r\n            return `${text}.size()`;\r\n        },\r\n    }],\r\n};\r\nexport default block;\r\n","import {typeType, valueType} from '../block-types/types';\r\nimport {computeMemberName, memberBlock, visibilityControlProp} from '../block-patterns/member-patterns';\r\nimport {typeCategory} from '../block-categories/categories';\r\n\r\nconst block = memberBlock({\r\n    title: 'Named Type',\r\n    info: 'An actor-level type definition',\r\n    category: typeCategory,\r\n    topRight: 'type',\r\n    shortcuts: [{\r\n        block: 'TypeMemberReference',\r\n        nodeKey: 'typeNode',\r\n    }],\r\n    computeTitle(node, editor) {\r\n        let name = computeMemberName(node, editor);\r\n        let type = editor.compilers.type.getInput(node, 'typeInput');//?.generics[0];\r\n        return type && `${name || '(?)'} = ${editor.compilers.motoko.getTypeString(type)}`;\r\n    },\r\n    inputs: [{\r\n        key: 'typeInput',\r\n        title: 'Definition',\r\n        type: typeType.of(valueType),\r\n    }],\r\n    outputs: [{\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n        inferType({name, typeInput}) {\r\n            if(!typeInput.isAbstract()) {\r\n                // return typeType.of(typeInput);\r\n                return typeInput.withMeta({name});///\r\n            }\r\n        },\r\n        // toMotoko({name}) {\r\n        //     return name;\r\n        // },\r\n    }],\r\n    controls: [\r\n        visibilityControlProp(),\r\n    ],\r\n}, {\r\n    toMotoko({visibility, name, typeInput}) {\r\n        let modifiers = [visibility !== 'system' && visibility].filter(m => m).join(' ');\r\n\r\n        return `${modifiers && modifiers + ' '}type ${name} = ${typeInput};`;\r\n    },\r\n});\r\nexport default block;\r\n","import {nodeType, typeType, valueType} from '../block-types/types';\r\nimport {typeCategory} from '../block-categories/categories';\r\nimport {FaAngleRight} from 'react-icons/fa';\r\n\r\nconst block = {\r\n    title: 'Type Reference',\r\n    category: typeCategory,\r\n    icon: FaAngleRight,\r\n    topRight: 'type',\r\n    computeTitle(node, editor) {\r\n        let typeNode = editor.compilers.node.getInput(node, 'typeNode');\r\n        console.log(typeNode);\r\n        if(!typeNode) {\r\n            return;\r\n        }\r\n        return editor.compilers.motoko.getInput(typeNode, 'name');\r\n    },\r\n    outputs: [{\r\n        key: 'type',\r\n        type: typeType.of(valueType),\r\n        inferType(args, node, compiler) {\r\n            let typeNode = compiler.editor.compilers.node.getInput(node, 'typeNode');\r\n            if(!typeNode) {\r\n                return;\r\n            }\r\n            return compiler.editor.compilers.types.getInput(typeNode, 'type');\r\n        },\r\n        // toMotoko({name}) {\r\n        //     return name;\r\n        // },\r\n    }],\r\n    controls: [{\r\n        key: 'typeNode',\r\n        type: nodeType.withMeta({block: 'TypeMember'}),\r\n    }],\r\n};\r\nexport default block;\r\n","import {statementBlock} from '../block-patterns/statement-patterns';\r\nimport {identifierType, valueType} from '../block-types/types';\r\nimport {paramCategory} from '../block-categories/categories';\r\nimport {nodeIdentifierRef} from '../compilers/MotokoCompiler';\r\n\r\nconst block = statementBlock({\r\n    title: 'Local Variable',\r\n    info: 'Store and retrieve data from within a function',\r\n    category: paramCategory,\r\n    inputs: [{\r\n        key: 'name',\r\n        type: identifierType,\r\n        optional: true,\r\n    }, {\r\n        key: 'initialValue',\r\n        type: valueType,\r\n    }],\r\n    outputs: [{\r\n        key: 'value',\r\n        type: valueType,\r\n        inferType({initialValue}) {\r\n            return initialValue;\r\n        },\r\n        toMotoko({name}, node) {\r\n            return name || nodeIdentifierRef(node);\r\n        },\r\n    }],\r\n}, ({name, initialValue}, node) => {\r\n    return `var ${name || nodeIdentifierRef(node)} = ${initialValue};`;\r\n});\r\nexport default block;","import React, {useMemo, useCallback} from 'react';\r\n\r\nexport default function ContextMenu({x, y, children, style: styleProp, handleCloseMenu, ...others}) {\r\n\r\n    const style = useMemo(() => ({\r\n        position: 'absolute',\r\n        left: x,\r\n        top: y,\r\n        ...styleProp,\r\n    }), [x, y, styleProp]);\r\n\r\n    const bindScreen = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        const listener = event => event.stopPropagation();\r\n        el.addEventListener('pointermove', listener);\r\n        el.addEventListener('mousemove', listener);\r\n        el.addEventListener('wheel', listener);\r\n    }, []);\r\n\r\n    const bindContainer = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        const moveIntoWindow = () => {\r\n            let offset = el.getBoundingClientRect().bottom - window.innerHeight;\r\n            if(offset > 0) {\r\n                el.style.top = `${y - offset}px`;\r\n            }\r\n        };\r\n        moveIntoWindow();\r\n        el.onresize = moveIntoWindow;\r\n    }, [y]);\r\n\r\n    return (\r\n        <div\r\n            className=\"context-menu-screen\"\r\n            style={{position: 'absolute', top: 0, left: 0, bottom: 0, right: 0, pointerEvents: 'all'}}\r\n            ref={bindScreen}\r\n            onKeyDown={e => e.keyCode === 27 /* escape */ && handleCloseMenu()}\r\n            onMouseDown={() => handleCloseMenu()}\r\n            {...others}>\r\n            <div className=\"context-menu-container\" style={style} ref={bindContainer}>\r\n                <div className=\"context-menu\">\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\nexport const MenuContext = React.createContext(null);\r\n","export default function MenuIcon({children, color}) {\r\n    return (\r\n        <span className=\"context-menu-icon\" style={{color}}>{children}</span>\r\n    );\r\n}","import classNames from 'classnames';\r\nimport MenuIcon from './MenuIcon';\r\n\r\nexport default function MenuAction({icon, color, selected, onAction, children, style, ...others}) {\r\n    return (\r\n        <div\r\n            className={classNames('context-menu-action', selected && 'selected')}\r\n            style={{color, userSelect: 'none', ...style}}\r\n            onMouseDown={event => event.button === 0 && onAction(event)} {...others}>\r\n            {icon && <MenuIcon>{icon}</MenuIcon>}\r\n            {children}\r\n        </div>\r\n    );\r\n}","export default function jsonCopy(value) {\r\n    return JSON.parse(JSON.stringify(value));\r\n}","import React, {useContext} from 'react';\r\nimport MenuAction from '../MenuAction';\r\nimport {MenuContext} from '../../contexts/MenuContext';\r\nimport jsonCopy from '../../../../utils/jsonCopy';\r\n\r\nconst cloneSelected = async (editor) => {\r\n\r\n    const newNodeMap = {};\r\n\r\n    let results = await Promise.all(editor.selected.list.map(async node => {\r\n        const component = editor.getComponent(node.name);\r\n        const newNode = await component.createNode(jsonCopy(node.data));\r\n\r\n        newNode.meta = jsonCopy(node.meta);\r\n        [newNode.position[0], newNode.position[1]] = [node.position[0] + 25, node.position[1] + 25];\r\n\r\n        editor.addNode(newNode);\r\n\r\n        newNodeMap[node.id] = newNode;\r\n\r\n        return {\r\n            original: node,\r\n            clone: newNode,\r\n        };\r\n    }));\r\n\r\n    results.forEach(({original}) => {\r\n        // original.inputs.forEach((input) => {\r\n        //     input.connections.forEach((connection) => {\r\n        //         const newInputNode = newNodeMap[connection.input.node.id];\r\n        //         const newOutputNode = newNodeMap[connection.output.node.id];\r\n        //         if(!newInputNode || !newOutputNode) {\r\n        //             return;\r\n        //         }\r\n        //         const input = newInputNode.inputs.get(connection.input.key);\r\n        //         const output = newOutputNode.outputs.get(connection.output.key);\r\n        //         if(!input || !output) {\r\n        //             return;\r\n        //         }\r\n        //         editor.connect(output, input);\r\n        //     });\r\n        // });\r\n\r\n        editor.selected.remove(original);\r\n        original.update();\r\n    });\r\n\r\n    // TODO: select after clone (capture mouse click)\r\n    // results.forEach(({clone}) => {\r\n    //     editor.selected.add(clone);\r\n    //     clone.update();\r\n    // });\r\n};\r\n\r\nexport default function SelectionMenu() {\r\n\r\n    const {editor} = useContext(MenuContext);\r\n\r\n    return (\r\n        <>\r\n            <MenuAction onAction={() => cloneSelected(editor)}>Clone</MenuAction>\r\n            <MenuAction onAction={() => editor.selected.each(node => editor.removeNode(node))}>Delete</MenuAction>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport MenuAction from './MenuAction';\r\nimport {FaRegStickyNote} from 'react-icons/fa';\r\nimport getBlockLabel from '../../../utils/getBlockLabel';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\n\r\n\r\nexport default function MenuComponent({component, ...others}) {\r\n    const block = component.block;\r\n    const category = block?.category;\r\n\r\n    useReactTooltip();\r\n    if(block?.info) {\r\n        others = {\r\n            'data-tip': block.info.endsWith('.') ? block.info : `${block.info}.`,\r\n            'data-place': 'right',\r\n            ...others,\r\n        };\r\n    }\r\n\r\n    return (\r\n        <MenuAction\r\n            icon={React.createElement(block?.icon || category?.data.icon || FaRegStickyNote)}\r\n            color={category?.data.color}\r\n            {...others}>\r\n            {getBlockLabel(block) || component.name}\r\n        </MenuAction>\r\n    );\r\n}","import {useCallback} from 'react';\r\n\r\nexport default function MenuSearch({value, onChange, onAction, onKeyDown, children, ...others}) {\r\n\r\n    const bindInput = useCallback(el => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        el.focus();\r\n        // el.select();\r\n    }, [{}/* Force redraw in order to refocus */]); /* eslint-disable-line react-hooks/exhaustive-deps */\r\n\r\n    const handleKeyDown = (onKeyDown || onAction) && (event => {\r\n        if(onKeyDown) {\r\n            onKeyDown(event);\r\n        }\r\n        if(onAction && event.key === 'Enter') {\r\n            onAction();\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <input\r\n                type=\"text\"\r\n                className=\"context-menu-search\"\r\n                autoFocus\r\n                ref={bindInput}\r\n                autoComplete=\"blocks-search\"\r\n                value={value || ''}\r\n                onClick={event => event.stopPropagation()}\r\n                onChange={onChange && (event => onChange(event.target.value))}\r\n                onKeyDown={handleKeyDown}\r\n                {...others}/>\r\n            <div className=\"context-menu-search-area\">\r\n                {children}\r\n            </div>\r\n        </>\r\n    );\r\n}","import React, {useCallback, useContext, useState} from 'react';\r\nimport MenuComponent from '../MenuComponent';\r\nimport {MenuContext} from '../../contexts/MenuContext';\r\nimport MenuSearch from '../MenuSearch';\r\nimport useEditorComponents from '../../hooks/useEditorComponents';\r\n\r\nfunction deepCopy(obj) {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nexport async function createNode(component, {data, meta, position: {x, y} = {}}) {\r\n    const node = await component.createNode(data ? deepCopy(data) : {});\r\n    if(meta) {\r\n        node.meta = Object.assign(deepCopy(meta), node.meta);\r\n    }\r\n    [node.position[0], node.position[1]] = [x, y];\r\n    return node;\r\n}\r\n\r\nfunction findRelevantComponents(input, output, components) {\r\n    if(!input && !output) {\r\n        return components;\r\n    }\r\n    let [inputType, outputType] = [input?.socket.findType?.(), output?.socket.findType?.()];\r\n    if(inputType?.data.reversed || outputType?.data.reversed) {\r\n        [inputType, outputType] = [outputType, inputType];\r\n    }\r\n    // Permissive for outputs but not inputs\r\n    return components.filter(c =>\r\n        (!inputType || c.block.outputs.some((prop) => inputType.isSubtype(prop.type))) &&\r\n        (!outputType || c.block.inputs.some((prop) => outputType.isSubtype(prop.type) || prop.type.isSubtype(outputType))));\r\n}\r\n\r\nexport default function PlacementMenu() {\r\n    let [searchText, setSearchText] = useState('');\r\n    let [index, setIndex] = useState(0);\r\n\r\n    let {editor, mouse, context} = useContext(MenuContext);\r\n\r\n    let components = useEditorComponents(editor, c => [-(c.block?.category.data.priority || 0), c.block?.category.root.name || '', c.data.title || c.name]);\r\n    if(context) {\r\n        components = findRelevantComponents(context.input, context.output, components);\r\n    }\r\n    else {\r\n        components = components.filter(c => c.block.global);\r\n    }\r\n    index = Math.min(components.length - 1, index);\r\n\r\n    if(searchText) {\r\n        let lower = searchText.toLowerCase();\r\n        components = components.filter(c => c.keywords?.some(k => k.toLowerCase().startsWith(lower)) || c.name.toLowerCase().startsWith(lower));\r\n    }\r\n\r\n    // Arrow keys pressed\r\n    function handleSearchKeyDown(event) {\r\n        if(event.keyCode === 38 /* Up Arrow */) {\r\n            setIndex(Math.max(0, index - 1));\r\n        }\r\n        if(event.keyCode === 40 /* Down Arrow */) {\r\n            setIndex(index + 1);\r\n        }\r\n    }\r\n\r\n    // Enter key pressed\r\n    async function handleSearchAction() {\r\n        if(components.length) {\r\n            await handleCreateNode(components[index]);\r\n        }\r\n    }\r\n\r\n    // Create node from component\r\n    const handleCreateNode = useCallback(async (component) => {\r\n        setSearchText('');\r\n        editor.trigger('hidecontextmenu');\r\n\r\n        const node = await createNode(component, {position: mouse});\r\n        editor.addNode(node);\r\n\r\n        if(context) {\r\n            let {input, output} = context;\r\n            if(input) {\r\n                const output = [...node.outputs.values()].find(output => input.socket.compatibleWith(output.socket));\r\n                if(output) {\r\n                    editor.connect(output, input);\r\n                }\r\n            }\r\n            if(output) {\r\n                const input = [...node.inputs.values()].find(input => input.socket.compatibleWith(output.socket));\r\n                if(input) {\r\n                    editor.connect(output, input);\r\n                }\r\n            }\r\n        }\r\n    }, [editor, mouse, context]);\r\n\r\n    // TODO: create literal blocks when typing numbers, strings, etc.\r\n    let menuItems = components.map((component, i) => (\r\n        <MenuComponent\r\n            key={component.name}\r\n            component={component}\r\n            selected={index === i}\r\n            onAction={() => handleCreateNode(component)}\r\n        />\r\n    ));\r\n    return context ? (\r\n        <MenuSearch\r\n            value={searchText}\r\n            onChange={setSearchText}\r\n            onKeyDown={handleSearchKeyDown}\r\n            onAction={handleSearchAction}>\r\n            {menuItems}\r\n        </MenuSearch>\r\n    ) : menuItems;\r\n}","import {useMemo} from 'react';\r\n\r\nexport default function useEditorComponents(editor, sortFn) {\r\n    const hash = [...editor.components].map(c => c.name).join('##');\r\n\r\n    return useMemo(() => {\r\n        return [...editor.components.values()]\r\n            .filter(c => c && 'block' in c && !c.block?.hidden && !c.block?.deprecated)// TODO: refactor?\r\n            .map(v => [sortFn(v), v])\r\n            .sort(([a], [b]) => {\r\n                if(Array.isArray(a)) {\r\n                    for(let i = 0; i < a.length; i++) {\r\n                        let compare = typeof a[i] === 'number'\r\n                            ? a[i] - b[i]\r\n                            : a[i].localeCompare(b[i]);\r\n                        if(compare !== 0) {\r\n                            return compare;\r\n                        }\r\n                    }\r\n                    return 0;\r\n                }\r\n                else {\r\n                    return a.localeCompare(b);\r\n                }\r\n            })\r\n            .map(([, v]) => v);\r\n    }, [hash]); /* eslint-disable-line react-hooks/exhaustive-deps */\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ContextMenu from './components/ContextMenu';\r\nimport {MenuContext} from './contexts/MenuContext';\r\nimport SelectionMenu from './components/menus/SelectionMenu';\r\nimport PlacementMenu from './components/menus/PlacementMenu';\r\nimport Rete from 'rete';\r\n\r\n// Adapted from https://github.com/michael-braun/rete-react-contextmenu-plugin\r\n\r\nfunction install(editor, config = {}) {\r\n    editor.bind('hidecontextmenu');\r\n    editor.bind('showcontextmenu');\r\n\r\n    let [offsetX, offsetY] = config.offset ? [config.offset.x, config.offset.y] : [-10, -10];\r\n\r\n    let menu = null;\r\n\r\n    editor.on('hidecontextmenu', () => {\r\n        if(menu) {\r\n            menu.style.display = 'none';\r\n        }\r\n    });\r\n\r\n    editor.on(['click', 'contextmenu'], () => {\r\n        editor.trigger('hidecontextmenu');\r\n    });\r\n\r\n    editor.on('contextmenu', ({e, node, context}) => {\r\n        e.preventDefault?.();\r\n        // if(e.button === 2) {\r\n        //     return;///\r\n        // }\r\n        e.stopPropagation?.();\r\n\r\n        if(!editor.trigger('showcontextmenu', {e, node, context})) {\r\n            return;\r\n        }\r\n\r\n        // Select node under cursor\r\n        if(node) {\r\n            if(!editor.selected.contains(node)) {\r\n                editor.selectNode(node);\r\n            }\r\n        }\r\n        else {\r\n            // editor.selected.clear();\r\n        }\r\n\r\n        const [x, y] = [e.clientX, e.clientY];\r\n\r\n        if(!menu) {\r\n            menu = document.createElement('div');\r\n            editor.view.container.appendChild(menu);\r\n        }\r\n        menu.style.display = 'block';\r\n        ReactDOM.render((\r\n            <ContextMenu\r\n                x={x + offsetX}\r\n                y={node ? y - 50 : y + offsetY} // TODO: magic number\r\n                handleCloseMenu={() => editor.trigger('hidecontextmenu')}>\r\n                <MenuContext.Provider value={{editor, mouse, node, context}}>\r\n                    {node ? (\r\n                        <SelectionMenu/>\r\n                    ) : (\r\n                        <PlacementMenu/>\r\n                    )}\r\n                </MenuContext.Provider>\r\n            </ContextMenu>\r\n        ), menu);\r\n    });\r\n\r\n    editor.on('destroy', () => {\r\n        editor.trigger('hidecontextmenu');\r\n        if(menu) {\r\n            menu.remove();\r\n            menu = null;\r\n        }\r\n    });\r\n\r\n    let mouse;\r\n    let mouseEvent;\r\n    let connectionMouseMoved = false;\r\n    let removingConnection = false;\r\n\r\n    editor.view.container.addEventListener('pointermove', e => mouseEvent = e);\r\n\r\n    // // Open context menu on left click\r\n    // editor.on('click', e => {\r\n    //     editor.trigger('contextmenu', {e});\r\n    // });\r\n\r\n    editor.on('mousemove', m => {\r\n        mouse = m;\r\n        connectionMouseMoved = true;\r\n    });\r\n\r\n    editor.on('connectionpick', io => {\r\n        connectionMouseMoved = false;\r\n        let prevConnections = [...io.connections];\r\n        setTimeout(() => {\r\n            if(io.connections.length < prevConnections.length) {\r\n                // Connection is being removed\r\n                removingConnection = true;\r\n            }\r\n        });\r\n    });\r\n\r\n    editor.on('connectiondrop', io => {\r\n        if(!connectionMouseMoved) {\r\n            return;\r\n        }\r\n        if(removingConnection) {\r\n            removingConnection = false;\r\n            return;\r\n        }\r\n        let prevConnections = [...io.connections];\r\n        setTimeout(() => {\r\n            // Prevent activating if connections changed\r\n            if(io.connections.length !== prevConnections.length || io.connections.some((conn, i) =>\r\n                (conn.input !== prevConnections[i].input) || (conn.output !== prevConnections[i].output))) {\r\n                return;\r\n            }\r\n            editor.trigger('contextmenu', {\r\n                e: mouseEvent,\r\n                context: {\r\n                    input: io instanceof Rete.Input ? io : null,\r\n                    output: io instanceof Rete.Output ? io : null,\r\n                },\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\nconst ContextMenuPlugin = {\r\n    name: 'blocks-contextmenu',\r\n    install,\r\n};\r\nexport default ContextMenuPlugin;\r\n","import React from 'react';\r\n\r\n// List of functions to call when starting/ending a connection (event listener optimization)\r\nexport default React.createContext([]);\r\n","import React, {useContext, useEffect, useState} from 'react';\r\nimport {paramCase} from 'change-case';\r\nimport classNames from 'classnames';\r\nimport Rete, {Output} from 'rete';\r\nimport ConnectionAwareListContext from '../../../contexts/ConnectionAwareListContext';\r\n\r\n// Derived from: https://github.com/retejs/react-render-plugin/blob/master/src/Socket.jsx\r\n\r\nexport function SocketHandle(props) {\r\n    const {type, socket, innerRef, io} = props;\r\n\r\n    const [relevant, setRelevant] = useState(false);\r\n\r\n    const connectionAwareList = useContext(ConnectionAwareListContext);\r\n\r\n    useEffect(() => {\r\n        const listener = (starting, connectionIO) => {\r\n            if(starting) {\r\n                if((io instanceof Output) === (connectionIO instanceof Output)) {\r\n                    return;\r\n                }\r\n                let [input, output] = (io instanceof Output) === !!socket.data.reversed\r\n                    ? [io, connectionIO] : [connectionIO, io];\r\n\r\n                let [inputType, outputType] = [input.socket.findType?.(), output.socket.findType?.()];\r\n\r\n                if(outputType && inputType?.isSubtype(outputType)) {\r\n                    setRelevant(true);\r\n                }\r\n            }\r\n            else {\r\n                setRelevant(false);\r\n            }\r\n        };\r\n        connectionAwareList.push(listener);\r\n        return () => {\r\n            let index = connectionAwareList.indexOf(listener);\r\n            if(index !== -1) {\r\n                connectionAwareList.splice(index, 1);\r\n            }\r\n        };\r\n    }, [socket, connectionAwareList, io]);\r\n\r\n    let socketType = socket.findType();\r\n    let reversed = !!socketType.data.reversed;\r\n\r\n    let multiple = io.multipleConnections && (io instanceof Rete.Input) === !reversed;\r\n\r\n    return (\r\n        <div\r\n            className={classNames(\r\n                'socket',\r\n                type,\r\n                paramCase(socket.name),\r\n                relevant && 'relevant',\r\n                multiple && 'multiple',\r\n                reversed && 'reversed',\r\n                !multiple && io.connections.length && 'occupied',\r\n                'category-' + socketType.data.category,\r\n            )}\r\n            title={socket.name}\r\n            ref={el => el && innerRef(el, type, io)}>\r\n            <div className=\"socket-color w-100 h-100\"/>\r\n        </div>\r\n    );\r\n}","import {useContext, useState} from 'react';\r\nimport EventsContext, {EDITOR_CHANGE_EVENT} from '../../../../contexts/EventsContext';\r\nimport useListener from '../../../../hooks/useListener';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\n\r\nexport default function DynamicTitle({editor, node, block, fallback}) {\r\n\r\n    const computeTitle = () => {\r\n        /// untested\r\n        if(editor.silent) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            return block.computeTitle(node, editor);\r\n        }\r\n        catch(err) {\r\n            console.error(`Unable to compute title for node: ${node.name}`);\r\n            console.error(err);\r\n            return '<Error>';\r\n        }\r\n    };\r\n\r\n    const [title, setTitle] = useState(computeTitle);\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, () => setTitle(computeTitle()));\r\n\r\n    const result = title || fallback || null;\r\n\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <span data-tip={result}>{result}</span>\r\n    );\r\n}","import getDefaultLabel from './getDefaultLabel';\r\n\r\nexport default function getPropLabel(prop) {\r\n    if(!prop) {\r\n        return '';\r\n    }\r\n    return prop.title || getDefaultLabel(prop.key);\r\n}","import React, {useContext} from 'react';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\nimport getBlockLabel from '../../../../utils/getBlockLabel';\r\nimport {Button} from 'react-bootstrap';\r\nimport EventsContext, {ERROR_EVENT} from '../../../../contexts/EventsContext';\r\nimport useReactTooltip from '../../../../hooks/useReactTooltip';\r\n\r\nexport default function ShortcutButton({editor, node, shortcut}) {\r\n    const {block} = shortcut;\r\n    const {category} = block;\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    const onClick = async event => {\r\n        try {\r\n            let component = editor.components.get(block.name);\r\n            if(!component) {\r\n                events.emit(ERROR_EVENT, `Component not found: ${block.name}`);\r\n                return;\r\n            }\r\n            let data = {};\r\n            if(node && shortcut.nodeKey) {\r\n                data[shortcut.nodeKey] = node.id;\r\n            }\r\n            let newNode = await editor.createNodeAtCursor(component, data);\r\n\r\n            // Start dragging node\r\n            let nodeView = editor.view.nodes.get(newNode);\r\n            nodeView._drag.down(event);\r\n\r\n            // Add shortcut-defined connections\r\n            if(shortcut.connections) {\r\n                for(let connection of shortcut.connections) {\r\n                    let {from, to, fromOutput} = connection;\r\n\r\n                    let fromIO = fromOutput ? node.outputs.get(from) : node.inputs.get(from);\r\n                    let toIO = (fromOutput ? newNode.inputs.get(to) : newNode.outputs.get(to));\r\n                    let [output, input] = fromOutput ? [fromIO, toIO] : [toIO, fromIO];\r\n                    if(output && input) {\r\n                        editor.connect(output, input);\r\n                    }\r\n                    else {\r\n                        console.warn('Could not connect', output, 'to', input);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch(err) {\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    };\r\n\r\n    useReactTooltip([block]);\r\n\r\n    return (\r\n        <Button\r\n            ref={bindNodeInput}\r\n            className=\"node-shortcut-button px-1 pt-0 pb-1\"\r\n            data-tip={getBlockLabel(block)}\r\n            data-delay-show={100}\r\n            style={{\r\n                background: 'none',\r\n                color: category.data.color,\r\n                borderColor: category.data.color,\r\n                cursor: 'grab',\r\n                // fontSize: '1em',\r\n            }}\r\n            onMouseDown={onClick}>\r\n            {block.icon\r\n                ? React.createElement(block.icon)\r\n                : getBlockLabel(block)}\r\n        </Button>\r\n    );\r\n}","import {SocketHandle} from '../../sockets/SocketHandle';\r\nimport {Control} from 'rete-react-render-plugin';\r\nimport classNames from 'classnames';\r\nimport {paramCase} from 'change-case';\r\nimport getPropLabel from '../../../../utils/getPropLabel';\r\nimport React from 'react';\r\n\r\nexport default function PropField({prop, node, hideLeft, hideRight, bindSocket, bindControl}) {\r\n    let input = node.inputs.get(prop.key);\r\n    let output = node.outputs.get(prop.key);\r\n    let control = node.controls.get(prop.key) || (input?.showControl() && input.control);\r\n\r\n    let leftSocket = input && !hideLeft && (\r\n        <SocketHandle\r\n            type=\"input\"\r\n            socket={input.socket}\r\n            io={input}\r\n            innerRef={bindSocket}\r\n        />\r\n    );\r\n    let rightSocket = output && !hideRight && (\r\n        <SocketHandle\r\n            type=\"output\"\r\n            socket={output.socket}\r\n            io={output}\r\n            innerRef={bindSocket}\r\n        />\r\n    );\r\n    let controlField = control && (\r\n        <Control\r\n            className={input ? 'input-control' : 'control'}\r\n            control={control}\r\n            innerRef={bindControl}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <div className={classNames('prop', 'key-' + paramCase(prop.key))}>\r\n            <div className=\"input\">\r\n                {leftSocket}\r\n                {controlField || (leftSocket && (\r\n                    <div className=\"input-title\">{getPropLabel(prop)}</div>\r\n                ))}\r\n            </div>\r\n            <div className=\"output\">\r\n                {!input && (rightSocket && (\r\n                    <div className=\"output-title\">{getPropLabel(prop)}</div>\r\n                ))}\r\n                {rightSocket}\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport {Node} from 'rete-react-render-plugin';\r\nimport {SocketHandle} from '../sockets/SocketHandle';\r\nimport {getBlock} from '../../../editor/blocks';\r\nimport classNames from 'classnames';\r\nimport DynamicTitle from './parts/DynamicTitle';\r\nimport getNodeLabel from '../../../utils/getNodeLabel';\r\nimport getPropLabel from '../../../utils/getPropLabel';\r\nimport {ButtonGroup} from 'react-bootstrap';\r\nimport ShortcutButton from './parts/ShortcutButton';\r\nimport PropField from './parts/PropField';\r\n\r\nexport default class NodeHandle extends Node {\r\n    render() {\r\n        let {editor, node, bindSocket, bindControl} = this.props;\r\n        let {selected} = this.state;\r\n\r\n        let block = getBlock(node.name);\r\n        if(block.component) {\r\n            let Component = block.component;\r\n            return <Component block={block} nodeHandle={this}/>;\r\n        }\r\n\r\n        // Properties for the top left/right corners\r\n        let topLeft = block.topLeft && node.inputs.get(block.topLeft);\r\n        let topRight = block.topRight && node.outputs.get(block.topRight);\r\n\r\n        let title = getNodeLabel(node, editor, true);\r\n        if(block.computeTitle) {\r\n            title = <DynamicTitle editor={editor} node={node} block={block} fallback={title}/>;\r\n        }\r\n\r\n        let getBindControl = prop => (ref, ...args) => {\r\n            let result = bindControl(ref, ...args);\r\n            if(ref) {\r\n                // Custom hover text\r\n                ref.title = getPropLabel(prop);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        let width = 32 * (node.data['editor:width'] || block.width || 6) - 3;\r\n\r\n        return (\r\n            <div style={{width}} className={classNames('node', selected, block.className)}>\r\n                <div className=\"header d-flex\">\r\n                    {topLeft && (\r\n                        <div>\r\n                            <SocketHandle\r\n                                type=\"input\"\r\n                                socket={topLeft.socket}\r\n                                io={topLeft}\r\n                                innerRef={bindSocket}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <div\r\n                        className=\"title d-inline-block flex-grow-1 text-nowrap overflow-hidden\"\r\n                        style={{color: block.category.data.color}}>\r\n                        {block.icon && (\r\n                            // TODO: globally improve react-icons render logic\r\n                            <span className=\"d-inline-block pe-1\" style={{transform: 'translateY(-.1em)'}}>\r\n                                {React.createElement(block.icon)}\r\n                            </span>\r\n                        )}\r\n                        {title}\r\n                    </div>\r\n                    {topRight && (\r\n                        <div>\r\n                            <SocketHandle\r\n                                type=\"output\"\r\n                                socket={topRight.socket}\r\n                                io={topRight}\r\n                                innerRef={bindSocket}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {block.shortcuts.length > 0 && (\r\n                    <ButtonGroup className=\"px-4 py-1 w-100\" style={{background: '#0002'}}>\r\n                        {block.shortcuts.map((shortcut, i) => (\r\n                            <ShortcutButton key={i} editor={editor} node={node} shortcut={shortcut}/>\r\n                        ))}\r\n                    </ButtonGroup>\r\n                )}\r\n                {Object.values(block.props)\r\n                    .filter(prop => !prop.hidden && (prop.control || ((!topLeft || prop.key !== block.topLeft) && (!topRight || prop.key !== block.topRight))))\r\n                    .map(prop => (\r\n                        <PropField\r\n                            key={prop.key}\r\n                            prop={prop}\r\n                            node={node}\r\n                            hideLeft={prop.key === block.topLeft}\r\n                            hideRight={prop.key === block.topRight}\r\n                            bindSocket={bindSocket}\r\n                            bindControl={getBindControl(prop)}\r\n                        />\r\n                    ))}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import * as Rete from 'rete';\r\nimport TextControlHandle from '../../components/rete/controls/TextControlHandle';\r\nimport EventEmitter from 'events';\r\nimport {bindNodeInput} from '../../utils/bindNodeInput';\r\n\r\nexport default class BaseControl extends Rete.Control {\r\n    constructor(editor, key, name, config = {}) {\r\n        super(key);\r\n\r\n        this.name = name;\r\n        this.config = config;\r\n        this.editor = editor;\r\n        this.render = 'react';\r\n        this.component = config.controlType || TextControlHandle;\r\n        this.props = {\r\n            ...config.controlProps,\r\n            validation: config.validation || {},\r\n            control: this,\r\n            editor,\r\n            bindInput: bindNodeInput,\r\n        };\r\n\r\n        this.events = new EventEmitter();\r\n    }\r\n\r\n    validate(value) {\r\n        if(value === undefined && !this.config.optional) {\r\n            return false;\r\n        }\r\n        if(value !== null && value !== undefined) {\r\n            let validation = this.config.validation;\r\n            if(validation) {\r\n                if('custom' in validation && !validation.custom(value)) {\r\n                    return false;\r\n                }\r\n                if('minLength' in validation && value.length < validation.minLength) {\r\n                    return false;\r\n                }\r\n                if('maxLength' in validation && value.length > validation.maxLength) {\r\n                    return false;\r\n                }\r\n                if('min' in validation && value < validation.min) {\r\n                    return false;\r\n                }\r\n                if('max' in validation && value > validation.max) {\r\n                    return false;\r\n                }\r\n                if('step' in validation && value - (validation.min || 0) % validation.step !== 0) {\r\n                    return false;\r\n                }\r\n                if('pattern' in validation && !validation.pattern.test(value)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    getDefaultValue() {\r\n        // return this.config.defaultValue;\r\n    }\r\n\r\n    getValue() {\r\n        let value = this.getData(this.key);\r\n        return value === undefined ? this.getDefaultValue() : value;\r\n    }\r\n\r\n    setValue(value) {\r\n        this.putData(this.key, value);\r\n        this.events.emit('update', value);\r\n    }\r\n}\r\n","import BaseControl from './BaseControl';\r\n\r\nexport default class PropControl extends BaseControl {\r\n    constructor(editor, prop, name) {\r\n        super(editor, prop.key, name, {\r\n            ...prop.type?.data || {},\r\n            ...prop.config || {},\r\n            prop,\r\n            type: prop.type,\r\n            optional: prop.optional,\r\n        });\r\n    }\r\n\r\n    getDefaultValue() {\r\n        // let value = super.getDefaultValue();\r\n        // return value !== undefined ? value : this.config.type?.getDefaultValue();\r\n\r\n        return this.config.type?.getDefaultValue();\r\n    }\r\n\r\n    // Called every EDITOR_CHANGE_EVENT when control is visible\r\n    notifyEditorChange() {\r\n        // this.config.prop.onUpdateControl?.(this, this.getNode(), this.editor);\r\n    }\r\n}","import Rete from 'rete';\r\n\r\nexport default class BaseComponent extends Rete.Component {\r\n\r\n    getEditorNode(node) {\r\n        return this.editor.nodes.find(n => n.id === node.id);\r\n    }\r\n\r\n    getControls(node) {\r\n        return this.getEditorNode(node).controls;\r\n    }\r\n}","import Rete from 'rete';\r\nimport {getType} from '../../block-types/types';\r\n\r\nexport default class TypeSocket extends Rete.Socket {\r\n    constructor(type) {\r\n        type = getType(type);\r\n        super(type.name, {...type.data, type});\r\n    }\r\n\r\n    findType() {\r\n        return this.data.type;\r\n    }\r\n\r\n    compatibleWith(other) {\r\n        if(!('findType' in other)) {\r\n            return false;\r\n        }\r\n        let type = this.findType();\r\n        let otherType = other.findType();\r\n\r\n        return type.isSubtype(otherType) || otherType.isSubtype(type);\r\n    }\r\n}","import TypeSocket from './TypeSocket';\r\nimport {typeType} from '../../block-types/types';\r\n\r\nexport default class PropOutputSocket extends TypeSocket {\r\n    constructor(nodeId, nodeName, prop, typeCompiler) {\r\n        super(prop.type);\r\n\r\n        this.nodeId = nodeId;\r\n        this.nodeName = nodeName;\r\n        this.prop = prop;\r\n        this.typeCompiler = typeCompiler;\r\n\r\n        this._isTypeOfType = typeType.isSubtype(this.prop.type);\r\n    }\r\n\r\n    findType() {\r\n        if(this.typeCompiler.editor.silent) {\r\n            return super.findType();\r\n        }\r\n\r\n        try {\r\n            let type = this.typeCompiler.getOutput(this.nodeId, this.prop.key);\r\n            if(type) {\r\n                if(this._isTypeOfType) {\r\n                    if(typeType.isSubtype(type)) {\r\n                        console.warn('Type of Type of Type (Intentional?)');\r\n                    }\r\n                    type = typeType.of(type);\r\n                }\r\n                return type || super.findType();\r\n            }\r\n        }\r\n        catch(err) {\r\n            console.warn(`Error on socket [${this.nodeName}.${this.prop.key}]:`, err);///\r\n        }\r\n        return super.findType();\r\n    }\r\n\r\n    // compatibleWith(other) {\r\n    //     if(!('findType' in other)) {\r\n    //         return;\r\n    //     }\r\n    //     let reversed = !!this.data.reversed;\r\n    //     if(reversed === !other.data.reversed) {\r\n    //         return false;\r\n    //     }\r\n    //     let self = this;\r\n    //     if(!reversed) {\r\n    //         [self, other] = [other, self];\r\n    //     }\r\n    //     let selfType = self.findType();\r\n    //     let otherType = other.findType();\r\n    //\r\n    //     console.log(selfType, otherType);\r\n    //\r\n    //     return selfType && selfType.isSubtype(otherType);\r\n    // }\r\n}","import Rete from 'rete';\r\nimport PropControl from '../controls/PropControl';\r\nimport BaseComponent from './BaseComponent';\r\nimport TypeSocket from '../sockets/TypeSocket';\r\nimport PropOutputSocket from '../sockets/PropOutputSocket';\r\nimport {sentenceCase} from 'change-case';\r\nimport getPropLabel from '../../utils/getPropLabel';\r\n\r\nexport default class BlockComponent extends BaseComponent {\r\n\r\n    constructor(block) {\r\n        super(block.name);\r\n\r\n        this.block = block;\r\n        this.keywords = [\r\n            ...sentenceCase(block.name).toLowerCase().split(' ').filter(s => s),\r\n            ...block.title?.split(' ').filter(s => s) || [],\r\n            ...block.keywords || [],\r\n        ];\r\n    }\r\n\r\n    async builder(node) {\r\n\r\n        const addProp = (prop, isPropOutput) => {\r\n            let socket = isPropOutput ? new PropOutputSocket(node.id, node.name, prop, this.editor.compilers.type) : new TypeSocket(prop.type);\r\n            if(!!prop.type.data.reversed === isPropOutput) {\r\n                return addPropInput(prop, socket, isPropOutput);\r\n            }\r\n            else {\r\n                return addPropOutput(prop, socket, isPropOutput);\r\n            }\r\n        };\r\n\r\n        const addPropInput = (prop, socket, isOutput) => {\r\n            let title = getPropLabel(prop);\r\n            let input = new Rete.Input(prop.key, title, socket, prop.type.data.reversed || !!prop.multi);\r\n            if(shouldPropHaveControl(prop, socket, isOutput)) {\r\n                input.addControl(new PropControl(this.editor, prop, title));\r\n            }\r\n            node.addInput(input);\r\n            return input;\r\n        };\r\n\r\n        const addPropOutput = (prop, socket, isOutput) => {\r\n            let title = getPropLabel(prop);\r\n            let output = new Rete.Output(prop.key, title, socket, !prop.type.data.reversed || !!prop.multi);\r\n            node.addOutput(output);\r\n            if(shouldPropHaveControl(prop, socket, isOutput)) {\r\n                node.addControl(new PropControl(this.editor, prop, title));\r\n            }\r\n            return output;\r\n        };\r\n\r\n        const shouldPropHaveControl = (prop, socket, isOutput) => {\r\n            return prop.control || (!!socket.data.reversed === isOutput && socket.data.controlType && !prop.multi);\r\n        };\r\n\r\n        delete node.meta.title;\r\n        // if(this.block.title) {\r\n        //     node.meta.title = this.block.title;\r\n        // }\r\n        // else {\r\n        //     delete node.meta.title;\r\n        // }\r\n\r\n        for(let prop of this.block.inputs) {\r\n            addProp(prop, false);\r\n        }\r\n        for(let prop of this.block.outputs) {\r\n            addProp(prop, true);\r\n        }\r\n\r\n        for(let prop of this.block.controls) {\r\n            let title = getPropLabel(prop);\r\n            node.addControl(new PropControl(this.editor, prop, title));\r\n        }\r\n\r\n        // this.block.builder?.apply(this, arguments);\r\n    }\r\n\r\n    // async worker(node, inputs, outputs, ...args) {\r\n    //     await this.block.worker?.apply(this, arguments);\r\n    // }\r\n}","import Compiler from './Compiler';\r\n\r\nexport default class NodeCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toEditorNode');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n        return node;\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        if(!result) {\r\n            return;\r\n        }\r\n        let id;\r\n        if(typeof result === 'object') {\r\n            id = result.id;\r\n            if(!id) {\r\n                throw new Error(`Invalid node object with keys: {${Object.keys(result).join(', ')}}`);\r\n            }\r\n        }\r\n        else {\r\n            id = result;\r\n        }\r\n        // Convert node id to string in case of number/string mismatch\r\n        id = String(id);\r\n        return this.editor.nodes.find(n => String(n.id) === id);\r\n    }\r\n}","import Compiler from './Compiler';\r\nimport {getType} from '../block-types/types';\r\n\r\nexport default class TypeCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'inferType');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n        return getType(prop.type);\r\n    }\r\n\r\n    postCompile(type, node, key) {\r\n        if(type === undefined) {\r\n            return;\r\n        }\r\n        type = getType(type);\r\n        if(type.isAbstract()) {\r\n            console.warn(`[${node.name}.${key}]`, 'Abstract inferred type:', type.toTypeString());\r\n            return;\r\n        }\r\n        return type;\r\n    }\r\n}","import Compiler from './Compiler';\r\n\r\nexport default class ControlCompiler extends Compiler {\r\n    constructor(editor) {\r\n        super(editor, 'toControl');\r\n    }\r\n\r\n    defaultCompile(prop, node) {\r\n    }\r\n\r\n    postCompile(result, node, key) {\r\n        return result;\r\n    }\r\n}","import Rete from 'rete';\r\nimport MotokoCompiler from '../compilers/MotokoCompiler';\r\nimport NodeCompiler from '../compilers/NodeCompiler';\r\nimport TypeCompiler from '../compilers/TypeCompiler';\r\nimport ControlCompiler from '../compilers/ControlCompiler';\r\n\r\nexport default class BlocksNodeEditor extends Rete.NodeEditor {\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        this.projectName = '';\r\n        this.projectDescription = '';\r\n        this.compilers = {\r\n            control: new ControlCompiler(this),\r\n            node: new NodeCompiler(this),\r\n            type: new TypeCompiler(this),\r\n            motoko: new MotokoCompiler(this),\r\n        };\r\n    }\r\n\r\n    // noinspection JSCheckFunctionSignatures\r\n    toJSON() {\r\n        let json = {\r\n            name: this.projectName,\r\n            description: this.projectDescription,\r\n            version: this.id,\r\n            ...super.toJSON(),\r\n        };\r\n        delete json.id;\r\n        // noinspection JSValidateTypes\r\n        return json;\r\n    }\r\n\r\n    async fromJSON(json) {\r\n        // noinspection JSUnresolvedVariable\r\n        json = {id: json.version, ...json};\r\n\r\n        if(!this.beforeImport(json)) {\r\n            return false;\r\n        }\r\n        // TODO: refactor serialization\r\n        this.projectName = json.name || '';\r\n        this.projectDescription = json.description || '';\r\n\r\n        let hadError = false;\r\n        try {\r\n            const nodes = {};\r\n            await Promise.all(Object.entries(json.nodes).map(async ([id, jsonNode]) => {\r\n                try {\r\n                    const component = this.getComponent(jsonNode.name);\r\n                    const node = await component.build(Rete.Node.fromJSON(jsonNode));\r\n                    nodes[id] = node;\r\n                    this.addNode(node);\r\n                }\r\n                catch(e) {\r\n                    hadError = true;\r\n                    return this.trigger('error', e);\r\n                }\r\n            }));\r\n\r\n            Object.entries(json.nodes).forEach(([id, jsonNode]) => {\r\n                const node = nodes[id];\r\n\r\n                Object.entries(jsonNode.outputs).forEach(([key, jsonOutput]) => {\r\n\r\n                    jsonOutput.connections.forEach(jsonConnection => {\r\n                        const nodeId = jsonConnection.node;\r\n                        const data = jsonConnection.data;\r\n                        const targetOutput = node.outputs.get(key);\r\n                        const otherNode = nodes[nodeId];\r\n                        if(!otherNode) {\r\n                            hadError = true;\r\n                            return this.trigger('error', `Tried to connect to unknown node ${node.id}`);\r\n                        }\r\n                        const targetInput = otherNode.inputs.get(jsonConnection.input);\r\n\r\n                        if(!targetOutput || !targetInput) {\r\n                            hadError = true;\r\n                            return this.trigger('error', `IO not found for node ${node.id}`);\r\n                        }\r\n\r\n                        this.connect(targetOutput, targetInput, data);\r\n                    });\r\n                });\r\n\r\n            });\r\n        }\r\n        catch(e) {\r\n            this.trigger('warn', e);\r\n            hadError = true;\r\n        }\r\n        return this.afterImport() && !hadError;\r\n    }\r\n\r\n    async createNode(component, data = {}, position = null) {\r\n        let node = await component.createNode(data);\r\n        if(position) {\r\n            let {x, y} = position;\r\n            [node.position[0], node.position[1]] = [x, y];\r\n        }\r\n        this.addNode(node);\r\n        return node;\r\n    }\r\n\r\n    async createNodeAtCursor(component, data = {}) {\r\n        let {x, y} = this.view.area.mouse;\r\n        return this.createNode(component, data, {x: x - 80, y: y - 20});\r\n    }\r\n}","import Rete from 'rete';\r\n\r\nfunction sortConnections(io) {\r\n    let key = io instanceof Rete.Input ? 'output' : 'input';\r\n    io.connections.sort((a, b) => a[key].node.position[1] - b[key].node.position[1]);\r\n}\r\n\r\nfunction install(editor, config = {}) {\r\n    editor.on('connectioncreated', connection => {\r\n        sortConnections(connection.input);\r\n        sortConnections(connection.output);\r\n    });\r\n    editor.on('nodedragged', (node) => {\r\n        for(let [ioMap, key] of [[node.inputs, 'output'], [node.outputs, 'input']]) {\r\n            for(let io of ioMap.values()) {\r\n                for(let connection of io.connections) {\r\n                    sortConnections(connection[key]);\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nconst VerticalSortPlugin = {\r\n    name: 'vertical-sort',\r\n    install,\r\n};\r\nexport default VerticalSortPlugin;","function install(editor, config = {}) {\r\n\r\n    // let currentIO = null;\r\n    //\r\n    // editor.on('connectionpick', (io) => {\r\n    //     currentIO = io;\r\n    // });\r\n    // editor.on('connectiondrop', (io) => {\r\n    //     currentIO = null;\r\n    // });\r\n\r\n    const onKeyDown = (event) => {\r\n        if(event.code === 'Escape') {\r\n            // TODO: implement drop connection without context menu\r\n\r\n            // if(currentIO) {\r\n            //     editor.trigger('connectiondrop', currentIO);\r\n            // }\r\n            // setTimeout(() => editor.trigger('hidecontextmenu'));\r\n        }\r\n    };\r\n\r\n    document.addEventListener('keydown', onKeyDown);\r\n    editor.on('destroy', () => document.removeEventListener('keydown', onKeyDown));\r\n}\r\n\r\nconst ConnectionDropPlugin = {\r\n    name: 'connection-drop',\r\n    install,\r\n};\r\nexport default ConnectionDropPlugin;","function install(editor, config = {}) {\r\n\r\n    const {minDistance = 500, opacityFalloff = 200} = config;\r\n\r\n    // Fade out distant connections\r\n    editor.on(['renderconnection', 'updateconnection', 'zoom'], () => {\r\n        setTimeout(() => {\r\n            for(let pathElement of editor.view.container.querySelectorAll('.connection .main-path')) {\r\n                let bounds = pathElement.getBoundingClientRect();\r\n                let distance = bounds.width;\r\n                pathElement.style.opacity = 1 / (1 + Math.sqrt(Math.max(distance - minDistance, 0) / opacityFalloff));\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nconst ConnectionOpacityPlugin = {\r\n    name: 'connection-opacity',\r\n    install,\r\n};\r\nexport default ConnectionOpacityPlugin;","\r\nfunction install(editor, config = {}) {\r\n\r\n    // TODO: implement properly\r\n\r\n    // if(config.editorButton !== undefined) {\r\n    //     let drag = editor.view.area._drag;\r\n    //     drag.button = config.editorButton;\r\n    // }\r\n}\r\n\r\nconst DragButtonPlugin = {\r\n    name: 'drag-button',\r\n    install,\r\n};\r\nexport default DragButtonPlugin;","var _linearGradient;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGradient(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _linearGradient || (_linearGradient = /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"svg-block-gradient\",\n    width: 0,\n    height: 0,\n    x2: 1,\n    y2: 1\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#00EFFB\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"50%\",\n    stopColor: \"#8649E1\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#F900E3\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGradient);\nexport default __webpack_public_path__ + \"static/media/gradient.04de6742.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport {IconContext} from 'react-icons';\r\nimport {ReactComponent as Gradient} from '../../../assets/icons/gradient.svg';\r\n\r\nlet MenuContainer = styled.div`\r\n    \r\n`;\r\n\r\nlet StyledGradient = styled(Gradient)`\r\n  height: 0;\r\n  width: 0;\r\n`;\r\n\r\nexport default function TopMenu({className, children, ...others}) {\r\n    return (\r\n        <MenuContainer className={classNames('bg-light text-secondary d-flex py-2 justify-content-start align-items-center', className)} {...others}>\r\n            <StyledGradient/>\r\n            <IconContext.Provider value={{style: {verticalAlign: 'bottom', transform: 'translateY(-1px)'}}}>\r\n                {children}\r\n            </IconContext.Provider>\r\n        </MenuContainer>\r\n    );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport styled from 'styled-components';\r\nimport useReactTooltip from '../../../hooks/useReactTooltip';\r\n\r\nlet ItemContainer = styled.div`\r\n\r\n`;\r\n\r\nexport default function MenuItem({variant, tooltip, className, ...others}) {\r\n    useReactTooltip();\r\n\r\n    return (\r\n        <ItemContainer\r\n            className={classNames('noselect h3 mx-3 px-3 pt-2 pb-2 mb-0 d-inline-block text-center', variant && `text-${variant}`, className)}\r\n            data-tip={tooltip}\r\n            {...others}>\r\n        </ItemContainer>\r\n    );\r\n}","import React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport styled from 'styled-components';\r\n\r\nlet MenuItemStyled = styled(MenuItem)`\r\n  cursor: pointer;\r\n  border-radius: 10px;\r\n\r\n  :hover {\r\n    background: #F0F0F0;\r\n  }\r\n\r\n  :hover > svg {\r\n    fill: url(\"#svg-block-gradient\");\r\n  }\r\n`;\r\n\r\nconst IconStyled = styled.svg`\r\n  position: absolute;\r\n  width: 0;\r\n  height: 0;\r\n`;\r\n\r\nexport default function MenuButton({children, ...others}) {\r\n    return (\r\n        <MenuItemStyled {...others}>\r\n            <IconStyled aria-hidden=\"true\" focusable=\"false\"/>\r\n            {children}\r\n        </MenuItemStyled>\r\n    );\r\n}","import React, {useCallback} from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport classNames from 'classnames';\r\n\r\nexport default function FileDropZone({options, onFile, onFileContent, className, children, ...others}) {\r\n\r\n    const onDrop = useCallback(files => {\r\n        if(files.length) {\r\n            const file = files[0];\r\n            onFile?.(file);\r\n            if(onFileContent) {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    onFileContent(e.target.result);\r\n                };\r\n                reader.readAsText(file);\r\n            }\r\n        }\r\n    }, [onFile, onFileContent]);\r\n\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({\r\n        maxFiles: 1,\r\n        onDrop,\r\n        ...options,\r\n    });\r\n\r\n    return (\r\n        <div className={classNames(className, isDragActive && 'dragging')} {...{...others, ...getRootProps()}}>\r\n            <input {...getInputProps()}/>\r\n            {children}\r\n        </div>\r\n    );\r\n}","import React, {useContext} from 'react';\nimport EventsContext, {PROJECT_LOAD_EVENT} from '../../contexts/EventsContext';\nimport styled from 'styled-components';\nimport classNames from 'classnames';\nimport {getExampleProjects} from '../../examples/examples';\nimport FileDropZone from '../common/FileDropZone';\n\nconst MenuContainer = styled.div`\n  padding: 20px;\n`;\n\nconst LoadProjectItemContainer = styled.div`\n  :hover {\n    background: #0001;\n  }\n`;\n\nconst FileDropZoneStyled = styled(FileDropZone)`\n  padding: 2em;\n  border: 2px #0005 dashed;\n\n  &.dragging, &:hover {\n    background: #0002;\n  }\n`;\n\nexport default function LoadProjectMenu({onLoadFileContent, className, ...others}) {\n\n    const events = useContext(EventsContext);\n\n    const examples = getExampleProjects();\n\n    return (\n        <MenuContainer className={classNames('bg-light', className)} {...others}>\n            <FileDropZone onFileContent={onLoadFileContent}>\n                <FileDropZoneStyled className={classNames('clickable text-center text-muted rounded-3')}>\n                    <h5>Import a .blocks file . . .</h5>\n                </FileDropZoneStyled>\n            </FileDropZone>\n            {examples.map((example, i) => (\n                <LoadProjectItemContainer\n                    key={i}\n                    className=\"clickable mt-2 px-3 py-2\"\n                    onClick={() => events.emit(PROJECT_LOAD_EVENT, example)}>\n                    <h4 className=\"fw-normal\">{example.name}</h4>\n                    <div className=\"text-muted\">{example.description || '(No description provided)'}</div>\n                </LoadProjectItemContainer>\n            ))}\n        </MenuContainer>\n    );\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDownload(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20,15L20,19C20,19.549 19.549,20 19,20C19,20 5,20 5,20C4.451,20 4,19.549 4,19C4,19 4,15 4,15C4,14.448 3.552,14 3,14C2.448,14 2,14.448 2,15L2,19C2,20.646 3.354,22 5,22L19,22C20.646,22 22,20.646 22,19L22,15C22,14.448 21.552,14 21,14C20.448,14 20,14.448 20,15Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11,12.586L7.707,9.293C7.317,8.903 6.683,8.903 6.293,9.293C5.903,9.683 5.903,10.317 6.293,10.707L11.293,15.707C11.413,15.827 11.556,15.91 11.708,15.957L11.711,15.958C11.795,15.983 11.884,15.998 11.976,16L12,16L12.024,16C12.116,15.998 12.205,15.983 12.289,15.958L12.292,15.957C12.444,15.91 12.587,15.827 12.707,15.707L17.707,10.707C18.097,10.317 18.097,9.683 17.707,9.293C17.317,8.903 16.683,8.903 16.293,9.293L13,12.586L13,3C13,2.448 12.552,2 12,2C11.448,2 11,2.448 11,3L11,12.586Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownload);\nexport default __webpack_public_path__ + \"static/media/download.9a79f24e.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFilePlus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21,8L21,7.988C20.998,7.807 20.947,7.637 20.861,7.492C20.819,7.42 20.767,7.353 20.707,7.293L14.707,1.293C14.647,1.233 14.58,1.181 14.508,1.139C14.362,1.053 14.193,1.002 14.012,1L14,1L6,1C4.354,1 3,2.354 3,4L3,20C3,21.646 4.354,23 6,23L18,23C19.646,23 21,21.646 21,20L21,8ZM13,3L6,3C5.451,3 5,3.451 5,4C5,4 5,20 5,20C5,20.549 5.451,21 6,21C6,21 18,21 18,21C18.549,21 19,20.549 19,20L19,9L14,9C13.448,9 13,8.552 13,8L13,3ZM11,14L9,14C8.448,14 8,14.448 8,15C8,15.552 8.448,16 9,16L11,16L11,18C11,18.552 11.448,19 12,19C12.552,19 13,18.552 13,18L13,16L15,16C15.552,16 16,15.552 16,15C16,14.448 15.552,14 15,14L13,14L13,12C13,11.448 12.552,11 12,11C11.448,11 11,11.448 11,12L11,14ZM15,7L17.586,7L15,4.414L15,7Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFilePlus);\nexport default __webpack_public_path__ + \"static/media/file-plus.c3f75220.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolder(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5L1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8C21,8 21,19 21,19Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolder);\nexport default __webpack_public_path__ + \"static/media/folder.fe3b16f3.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolderWide(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 30 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard1\",\n    transform: \"matrix(1.25,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 24,\n    height: 24,\n    style: {\n      fill: \"none\"\n    }\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.8,0,0,1,2.4,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5C1,5 1,19 1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8L21,19Z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolderWide);\nexport default __webpack_public_path__ + \"static/media/folder-wide.231dfb87.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolderOpen(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 30 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard1\",\n    transform: \"matrix(1.25,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 24,\n    height: 24,\n    style: {\n      fill: \"none\"\n    }\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.8,0,0,1,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.8,21.747C5.825,21.769 5.851,21.789 5.878,21.809C6.059,21.941 6.27,22.003 6.479,22L6.527,21.998C6.572,21.995 6.617,21.99 6.661,21.981C6.772,21.993 6.885,22 7,22L23,22C23.32,22 23.621,21.847 23.809,21.588L29.597,13.621C29.818,13.317 29.85,12.914 29.679,12.579C29.509,12.244 29.164,12.033 28.788,12.033L25.939,12.033L26,8C26,6.354 24.646,5 23,5L14.535,5C14.535,5 12.832,2.445 12.832,2.445C12.647,2.167 12.334,2 12,2L7,2C5.354,2 4,3.354 4,5C4,5 4,19 4,19C4,20.22 4.745,21.28 5.8,21.747ZM8.428,20L12.763,14.033L26.826,14.033C26.826,14.033 22.49,20 22.49,20L8.428,20ZM23.939,12.033C23.961,10.57 24,7.993 24,7.987C23.993,7.444 23.544,7 23,7L14,7C13.666,7 13.353,6.833 13.168,6.555C13.168,6.555 11.465,4 11.465,4C11.465,4 7,4 7,4C6.451,4 6,4.451 6,5L6,19C6,19.238 6.085,19.457 6.225,19.629L11.445,12.445L11.445,12.445C11.627,12.196 11.922,12.033 12.254,12.033L23.939,12.033Z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolderOpen);\nexport default __webpack_public_path__ + \"static/media/folder-open.81301dea.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSave(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,22C20.646,22 22,20.646 22,19L22,8C22,7.735 21.895,7.48 21.707,7.293L16.707,2.293C16.52,2.105 16.265,2 16,2L5,2C3.354,2 2,3.354 2,5L2,19C2,20.646 3.354,22 5,22L19,22ZM8,4L8,7L15,7C15.552,7 16,7.448 16,8C16,8.552 15.552,9 15,9L7,9C6.448,9 6,8.552 6,8L6,4L5,4C4.451,4 4,4.451 4,5C4,5 4,19 4,19C4,19.549 4.451,20 5,20L6,20L6,13C6,12.448 6.448,12 7,12L17,12C17.552,12 18,12.448 18,13L18,20L19,20C19.549,20 20,19.549 20,19C20,19 20,8.414 20,8.414C20,8.414 15.586,4 15.586,4L8,4ZM8,20L16,20L16,14C16,14 8,14 8,14L8,20Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSave);\nexport default __webpack_public_path__ + \"static/media/save.5b65bc79.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport {ReactComponent as Download} from '../../assets/icons/download.svg';\r\nimport {ReactComponent as FilePlus} from '../../assets/icons/file-plus.svg';\r\nimport {ReactComponent as Folder} from '../../assets/icons/folder.svg';\r\nimport {ReactComponent as FolderWide} from '../../assets/icons/folder-wide.svg';\r\nimport {ReactComponent as FolderOpen} from '../../assets/icons/folder-open.svg';\r\nimport {ReactComponent as Save} from '../../assets/icons/save.svg';\r\n// import {ReactComponent as Zoom} from '../../assets/icons/zoom.svg';\r\n\r\n// Convention here is `CONSTANT_CASE` for exported constants and `camelCase` otherwise.\r\n// This makes it easier to quickly know what values are globally accessible, since almost everything is a constant anyway.\r\n\r\nconst defaultIconSize = 24;\r\nconst defaultFill = 'rgb(108, 117, 125)';\r\n\r\nconst createIcon = (SvgComponent, widthRatio = 1) => ({fill, size, ...others}) => {\r\n    return (\r\n        <SvgComponent\r\n            fill={fill || defaultFill}\r\n            width={(size || defaultIconSize) * widthRatio}\r\n            height={size || defaultIconSize}\r\n            {...others}\r\n        />\r\n    );\r\n};\r\n\r\nexport const DownloadIcon = createIcon(Download);\r\nexport const FilePlusIcon = createIcon(FilePlus);\r\nexport const FolderIcon = createIcon(Folder);\r\nexport const FolderWideIcon = createIcon(FolderWide, 30 / 24); // TODO: we can probably automate this\r\nexport const FolderOpenIcon = createIcon(FolderOpen, 30 / 24);\r\nexport const SaveIcon = createIcon(Save);\r\n// export const ZoomIcon = createIcon(Zoom);///\r\n","import TopMenu from '../common/menus/TopMenu';\r\nimport MenuButton from '../common/menus/MenuButton';\r\nimport React, {useContext, useState} from 'react';\r\nimport MenuItem from '../common/menus/MenuItem';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport EventsContext, {\r\n    EDITOR_CHANGE_EVENT,\r\n    EDITOR_SAVE_EVENT,\r\n    PROJECT_CLEAR_EVENT,\r\n    PROJECT_EXPORT_EVENT,\r\n    PROJECT_LOAD_EVENT,\r\n} from '../../contexts/EventsContext';\r\nimport useListener from '../../hooks/useListener';\r\nimport LoadProjectMenu from './LoadProjectMenu';\r\nimport {Modal} from 'react-bootstrap';\r\nimport {DownloadIcon, FilePlusIcon, FolderOpenIcon, FolderWideIcon, SaveIcon} from '../common/Icon';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport AreaPlugin from 'rete-area-plugin';\r\nimport {FiCrosshair} from 'react-icons/fi';\r\n\r\nconst ProjectNameInput = styled.input`\r\n    border: 2px solid transparent !important;\r\n    border-bottom: solid 2px #0003 !important;\r\n    font-weight: bold;\r\n    vertical-align: top;\r\n    margin-top: .4em;\r\n    padding: .25em .25em .1em;\r\n    position: relative;\r\n    background-clip: padding-box;\r\n\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: linear-gradient(30deg, #00EFFB, #8649E1, #F900E3);\r\n        margin: -2px;\r\n        z-index: -1;\r\n        opacity: 0;\r\n    }\r\n\r\n    :focus {\r\n        outline: none;\r\n\r\n        &::before {\r\n            opacity: 1;\r\n        }\r\n    }\r\n`;\r\n\r\n// TODO: define animated icons in their own files\r\nconst saveAnimation = keyframes`\r\n    30% {\r\n        transform: scale(.6);\r\n    }\r\n`;\r\nconst StyledSaveIcon = styled(SaveIcon)`\r\n    &.animating {\r\n        animation: ${saveAnimation} .7s ease-out;\r\n    }\r\n`;\r\n\r\nconst zoomAnimation = keyframes`\r\n    from {\r\n        transform: rotate(0);\r\n    }\r\n    to {\r\n        transform: rotate(360deg);\r\n    }\r\n`;\r\nconst StyledZoomIcon = styled(FiCrosshair)` // TODO: sparkle like the others\r\n    &.animating {\r\n        animation: ${zoomAnimation} .7s ease-out;\r\n    }\r\n`;\r\n\r\nexport default function EditorMenu({getEditor, onLoadFileContent}) {\r\n    const [name, setName] = useState('');\r\n    const [saveAnimating, setSaveAnimating] = useState(false);\r\n    const [zoomAnimating, setZoomAnimating] = useState(false);\r\n    const [loadMenuOpen, setLoadMenuOpen] = useState(false);\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, EDITOR_SAVE_EVENT, () => {\r\n        setSaveAnimating(true);\r\n    });\r\n\r\n    useListener(events, PROJECT_LOAD_EVENT, project => {\r\n        setName(project.name);\r\n        setLoadMenuOpen(false);\r\n    });\r\n\r\n    /// Temp, until projectName refactor\r\n    setTimeout(() => {\r\n        setName(getEditor().projectName);\r\n    });\r\n\r\n    // TODO refactor\r\n    const updateName = (name) => {\r\n        setName(name);\r\n        let editor = getEditor();\r\n        editor.projectName = name;\r\n        events.emit(EDITOR_CHANGE_EVENT, editor);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <TopMenu>\r\n                {/*<Link to=\"/\">*/}\r\n                <MenuItem variant=\"dark\">\r\n                    <img src={`${process.env.PUBLIC_URL}/img/logo-gradient.png`} height=\"48px\" alt=\"Blocks Logo\"/>\r\n                </MenuItem>\r\n                {/*</Link>*/}\r\n                <div className=\"d-flex flex-row justify-content-center align-items-center mx-3\">\r\n                    <ProjectNameInput\r\n                        type=\"text\"\r\n                        placeholder=\"Unnamed Project\"\r\n                        className=\"bg-light text-secondary\"\r\n                        value={name || ''}\r\n                        onChange={e => updateName(e.target.value)}\r\n                        onKeyDown={e => e.key === 'Enter' && events.emit(EDITOR_SAVE_EVENT, getEditor())}\r\n                    />\r\n                    <MenuButton\r\n                        tooltip=\"Save Changes\"\r\n                        onMouseDown={() => events.emit(EDITOR_SAVE_EVENT, getEditor())}>\r\n                        <StyledSaveIcon\r\n                            className={classNames(saveAnimating && 'animating')}\r\n                            onAnimationEnd={() => setSaveAnimating(false)}\r\n                        />\r\n                    </MenuButton>\r\n                    <MenuButton\r\n                        tooltip=\"Export to File\"\r\n                        onMouseDown={() => events.emit(PROJECT_EXPORT_EVENT, getEditor().toJSON())}>\r\n                        {/*<FiDownload/>*/}\r\n                        <DownloadIcon/>\r\n                    </MenuButton>\r\n                    <MenuButton\r\n                        tooltip=\"New Project\"\r\n                        onMouseDown={() => events.emit(PROJECT_CLEAR_EVENT)}>\r\n                        <FilePlusIcon/>\r\n                    </MenuButton>\r\n                    <MenuButton\r\n                        tooltip=\"Load Project\"\r\n                        onMouseDown={() => setLoadMenuOpen(!loadMenuOpen)}>\r\n                        {loadMenuOpen ? <FolderOpenIcon/> : <FolderWideIcon/>}\r\n                    </MenuButton>\r\n                    <MenuButton\r\n                        tooltip=\"Reset Viewport\"\r\n                        onMouseDown={() => {\r\n                            AreaPlugin.zoomAt(getEditor());\r\n                            setZoomAnimating(true);\r\n                        }}>\r\n                        <StyledZoomIcon\r\n                            className={classNames(zoomAnimating && 'animating')}\r\n                            onAnimationEnd={() => setZoomAnimating(false)}\r\n                        />\r\n                    </MenuButton>\r\n                </div>\r\n            </TopMenu>\r\n            <Modal\r\n                show={loadMenuOpen}\r\n                onShow={() => ReactTooltip.hide()}\r\n                onHide={() => setLoadMenuOpen(false)}>\r\n                <Modal.Body>\r\n                    <LoadProjectMenu onLoadFileContent={onLoadFileContent}/>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </>\r\n    );\r\n}","import {getBlock} from './blocks';\r\n\r\nconst shortcutKeys = {\r\n    'c': 'Comment',\r\n    'd': 'CommentRegion',\r\n\r\n    // Arithmetic\r\n    '-': 'Subtract',\r\n    '=': 'Add',\r\n    '8': 'Multiply',\r\n    '/': 'Divide',\r\n\r\n    // Boolean logic\r\n    '7': 'And',\r\n    '\\\\': 'Or',\r\n    '1': 'Not',\r\n\r\n    // Control flow\r\n    'r': 'Return',\r\n\r\n    // Literal values\r\n    ',': 'LiteralTuple',\r\n    '.': 'LiteralIdentifier',\r\n    '\\'': 'LiteralText',///\r\n    'x': 'CodeValue',\r\n    'b': 'LiteralBool',\r\n    'n': 'LiteralNat',\r\n    'i': 'LiteralInt',\r\n    'f': 'LiteralFloat',\r\n    // 's': 'LiteralText',\r\n    'a': 'NewArray',\r\n    'm': 'NewTextHashMap',\r\n\r\n    // Optionals\r\n    'o': 'Optional',\r\n    'u': 'OptionalUnwrap',\r\n};\r\n\r\nexport const SHORTCUT_KEYS = new Map(Object.entries(shortcutKeys).map(([k, v]) => [k, getBlock(v)]));\r\n","import React, {useContext} from 'react';\r\nimport './Editor.scss';\r\nimport AreaPlugin from 'rete-area-plugin';\r\nimport ConnectionPlugin from 'rete-connection-plugin';\r\nimport ContextMenuPlugin from '../../plugins/rete-blocks-contextmenu-plugin';\r\nimport AutoArrangePlugin from 'rete-auto-arrange-plugin';\r\nimport ReactRenderPlugin from 'rete-react-render-plugin';\r\nimport EventsContext, {\r\n    EDITOR_CHANGE_EVENT,\r\n    EDITOR_SAVE_EVENT,\r\n    ERROR_EVENT,\r\n    PROJECT_LOAD_EVENT,\r\n} from '../../contexts/EventsContext';\r\nimport NodeHandle from './nodes/NodeHandle';\r\nimport BlockComponent from '../../editor/components/BlockComponent';\r\nimport {BLOCK_MAP} from '../../editor/blocks';\r\nimport useListener from '../../hooks/useListener';\r\nimport BlocksNodeEditor from '../../editor/BlocksNodeEditor';\r\nimport VerticalSortPlugin from '../../plugins/rete-vertical-sort-plugin';\r\nimport ConnectionDropPlugin from '../../plugins/rete-connection-drop-plugin';\r\nimport ConnectionOpacityPlugin from '../../plugins/rete-connection-opacity-plugin';\r\nimport DragButtonPlugin from '../../plugins/rete-drag-button-plugin';\r\nimport classNames from 'classnames';\r\nimport styled from 'styled-components';\r\nimport EditorMenu from './EditorMenu';\r\nimport FileDropZone from '../common/FileDropZone';\r\nimport {SHORTCUT_KEYS} from '../../editor/shortcutKeys';\r\nimport ConnectionAwareListContext from '../../contexts/ConnectionAwareListContext';\r\n\r\nconst EDITOR_NAME = process.env.REACT_APP_EDITOR_NAME;\r\nconst EDITOR_VERSION = process.env.REACT_APP_EDITOR_VERSION;\r\n\r\nconst INPUT_TAGS = ['input', 'textarea'];\r\n\r\nfunction findCategory(socket) {\r\n    return socket.type?./*findType?.()*/data.category ?? socket.data.category ?? 'none';\r\n}\r\n\r\n// noinspection JSCheckFunctionSignatures\r\nfunction createEditor(element) {\r\n\r\n    let editor = new BlocksNodeEditor(EDITOR_NAME + '@' + EDITOR_VERSION, element);\r\n    editor.use(ReactRenderPlugin, {\r\n        component: NodeHandle,\r\n    });\r\n    // editor.use(HistoryPlugin); // TODO: set up undo/redo history\r\n    editor.use(ConnectionPlugin);\r\n    // editor.use(CommentPlugin);\r\n    // editor.use(SelectionPlugin, {\r\n    //     enabled: true,\r\n    // });\r\n    // noinspection JSCheckFunctionSignatures\r\n    editor.use(AutoArrangePlugin);\r\n    // noinspection JSCheckFunctionSignatures\r\n    editor.use(AreaPlugin, {\r\n        background: (() => {\r\n            let background = document.createElement('div');\r\n            background.classList.add('grid');\r\n            background.style.pointerEvents = 'none';\r\n            // noinspection JSUnresolvedVariable\r\n            if(!window.chrome) {\r\n                editor.on('zoom', ({zoom}) => {\r\n                    // Fix flickering grid on non-Chrome browsers\r\n                    background.classList.toggle('far', zoom <= 1);\r\n                    background.classList.toggle('d-none', zoom <= .5);\r\n                });\r\n            }\r\n            editor.on('destroy', () => background.remove());\r\n            return background;\r\n        })(),\r\n        snap: {size: 16, dynamic: true},\r\n    });\r\n    editor.use(ContextMenuPlugin);\r\n    editor.use(ConnectionDropPlugin);\r\n    editor.use(ConnectionOpacityPlugin);\r\n    editor.use(VerticalSortPlugin);\r\n    // noinspection JSCheckFunctionSignatures\r\n    editor.use(DragButtonPlugin, {editorButton: 2});\r\n\r\n    let mouseMoved = false;\r\n    editor.view.container.addEventListener('mousedown', (e) => {\r\n        mouseMoved = false;\r\n    });\r\n    editor.on('mousemove', (e) => {\r\n        mouseMoved = true;\r\n    });\r\n    editor.on('click', ({e}) => {\r\n        // Deselect nodes when clicking background\r\n        if(!mouseMoved) {\r\n            editor.selected.clear();\r\n            editor.nodes.forEach(node => node.update());\r\n        }\r\n    });\r\n\r\n    editor.on('zoom', ({source}) => source !== 'dblclick'); // Prevent double-click zoom\r\n    editor.on('nodeselect', node => !editor.selected.contains(node)); // Allow dragging multiple nodes\r\n    editor.on('renderconnection', ({el, connection}) => {\r\n        // TODO: update with socket type\r\n        // let inputCategory = findCategory(connection.input.socket);\r\n        // let outputCategory = findCategory(connection.output.socket);\r\n        // if(connection.input.socket.data.reversed) {\r\n        //     [inputCategory, outputCategory] = [outputCategory, inputCategory];\r\n        // }\r\n        // el.querySelector('.connection').classList.add(\r\n        //     `socket-input-category-${inputCategory}`,\r\n        //     `socket-output-category-${outputCategory}`,\r\n        // );\r\n        let category = findCategory((connection.input.socket.data.reversed ? connection.input : connection.output).socket);\r\n        el.querySelector('.connection').classList.add(\r\n            `socket-output-category-${category}`,\r\n        );\r\n    });\r\n\r\n    return editor;\r\n}\r\n\r\n\r\nconst EditorContainer = styled.div`\r\n    width: 100%;\r\n    height: 100vh;\r\n`;\r\n\r\nexport default function Editor({hideMenu, onSetup, onChange, onSave, className, ...others}) {\r\n\r\n    const events = useContext(EventsContext);\r\n    const connectionAwareList = useContext(ConnectionAwareListContext);\r\n\r\n    let editor = null;\r\n\r\n    useListener(events, EDITOR_CHANGE_EVENT, (_editor) => {\r\n        if(_editor === editor) {\r\n            onChange?.(editor);\r\n        }\r\n    });\r\n    useListener(events, EDITOR_SAVE_EVENT, (_editor) => {\r\n        if(_editor === editor) {\r\n            onSave?.(editor.toJSON(), editor);\r\n        }\r\n    });\r\n\r\n    const bindEditor = (element) => {\r\n        if(editor) {\r\n            editor.silent = true;\r\n            editor.clear();\r\n            editor.components.clear();\r\n            editor.destroy();\r\n        }\r\n        if(!element) {\r\n            return;\r\n        }\r\n\r\n        editor = createEditor(element);\r\n\r\n        window.EDITOR = editor; // Browser debugging\r\n\r\n        let onKeyDown = (event) => {\r\n            // let key = String.fromCharCode(event.which).toLowerCase();\r\n            let key = event.key;\r\n\r\n            if(event.ctrlKey || event.metaKey) {\r\n                // if(key === 'q') {\r\n                //     editor.trigger('arrange');\r\n                // }\r\n                if(key === 's') {\r\n                    event.preventDefault();\r\n                    events.emit(EDITOR_SAVE_EVENT, editor);\r\n                    console.log('Saved successfully');\r\n                }\r\n            }\r\n            else if(!document.activeElement || !INPUT_TAGS.includes(document.activeElement.nodeName.toLowerCase())) {\r\n                if(key === 'Delete') {\r\n                    editor.selected.each(n => editor.removeNode(n));\r\n                }\r\n                else {\r\n                    let block = SHORTCUT_KEYS.get(key);\r\n                    if(block) {\r\n                        editor.createNodeAtCursor(editor.getComponent(block.name))\r\n                            .catch(err => events.emit('error', err));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        document.addEventListener('keydown', onKeyDown);\r\n        editor.on('destroy', () => document.removeEventListener('keydown', onKeyDown));\r\n\r\n        for(let block of BLOCK_MAP.values()) {\r\n            let node = new BlockComponent(block);\r\n            editor.register(node);\r\n        }\r\n\r\n        let timeout;\r\n        editor.on(['nodecreated', 'noderemoved', 'nodedragged', 'connectioncreated', 'connectionremoved'], async () => {\r\n            if(!editor.silent) {\r\n                // Debounce change events\r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(() => {\r\n                    events.emit(EDITOR_CHANGE_EVENT, editor);\r\n                });\r\n            }\r\n        });\r\n        editor.on('error', err => events.emit(ERROR_EVENT, err));\r\n\r\n        async function loadState(state) {\r\n            if(!state) {\r\n                return false;\r\n            }\r\n            let result = await editor.fromJSON(state);\r\n            if(result) {\r\n                editor.view.resize();\r\n                AreaPlugin.zoomAt(editor);\r\n                events.emit(EDITOR_CHANGE_EVENT, editor);\r\n                editor.nodes.forEach(node => node.update()); // Redraw nodes\r\n            }\r\n            return result;\r\n        }\r\n\r\n        (async () => {\r\n            await onSetup?.(loadState, editor);\r\n        })().catch(err => events.emit(ERROR_EVENT, err));\r\n\r\n        // TODO: dry with rete-blocks-contextmenu-plugin\r\n        const handleConnectionEnd = (startIO, endIO) => {\r\n            currentIO = null;\r\n            for(let listener of connectionAwareList) {\r\n                listener(false, startIO, endIO);\r\n            }\r\n        };\r\n        let currentIO = null;\r\n        let connectionMouseMoved = false;\r\n        editor.on('mousemove', m => {\r\n            connectionMouseMoved = true;\r\n        });\r\n        editor.on('connectionpick', io => {\r\n            connectionMouseMoved = false;\r\n            if(currentIO) {\r\n                handleConnectionEnd(currentIO, io);\r\n                return;\r\n            }\r\n            let prevConnections = [...io.connections];\r\n            setTimeout(() => {\r\n                if(io.connections.length < prevConnections.length) {\r\n                    // Connection is being removed\r\n                    let connection = prevConnections.find(c => !io.connections.includes(c));\r\n                    currentIO = (io === connection.input ? connection.output : connection.input);\r\n                }\r\n                else {\r\n                    currentIO = io;\r\n                }\r\n                for(let listener of connectionAwareList) {\r\n                    listener(true, currentIO);\r\n                }\r\n            });\r\n        });\r\n        editor.on('connectiondrop', io => {\r\n            if(!connectionMouseMoved) {\r\n                return;\r\n            }\r\n            let prevConnections = [...io.connections];\r\n            setTimeout(() => {\r\n                // Prevent activating if connections changed\r\n                if(io.connections.length !== prevConnections.length || io.connections.some((conn, i) =>\r\n                    (conn.input !== prevConnections[i].input) || (conn.output !== prevConnections[i].output))) {\r\n                    return;\r\n                }\r\n                handleConnectionEnd(io);\r\n            });\r\n        });\r\n\r\n        // const onMouseUp = event => {\r\n        //     if(currentIO) {\r\n        //         console.log(1234)\r\n        //         handleConnectionEnd(currentIO);\r\n        //     }\r\n        // };\r\n        // document.addEventListener('mouseup', onMouseUp);\r\n        // editor.on('destroy', () => document.removeEventListener('mouseup', onMouseUp));\r\n    };\r\n\r\n    const loadFileContent = content => {\r\n        try {\r\n            let project = JSON.parse(content);\r\n            events.emit(PROJECT_LOAD_EVENT, project);\r\n        }\r\n        catch(err) {\r\n            events.emit(ERROR_EVENT, err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <FileDropZone options={{noClick: true}} onFileContent={loadFileContent}>\r\n            <EditorContainer\r\n                className={classNames('node-editor d-flex flex-grow-1 flex-column', className)}\r\n                {...others}>\r\n                {!hideMenu && (\r\n                    <EditorMenu getEditor={() => editor} onLoadFileContent={loadFileContent}/>\r\n                )}\r\n                <div ref={bindEditor}/>\r\n            </EditorContainer>\r\n        </FileDropZone>\r\n    );\r\n}","import Editor from '../../rete/Editor';\r\nimport React, {useContext} from 'react';\r\nimport useListener from '../../../hooks/useListener';\r\nimport EventsContext, {\r\n    PROJECT_CLEAR_EVENT,\r\n    PROJECT_EXPORT_EVENT,\r\n    PROJECT_LOAD_EVENT,\r\n} from '../../../contexts/EventsContext';\r\nimport FileSaver from 'file-saver';\r\nimport {pascalCase} from 'change-case';\r\nimport useRedraw from '../../../hooks/useRedraw';\r\nimport isEmbedded from '../../../utils/isEmbedded';\r\nimport {parse} from 'querystring';\r\n\r\nconst STORAGE_EDITOR_STATE = 'blocks.editorState';\r\n\r\nconst DEFAULT_STATE = require('../../../examples/files/DefaultProject.json');\r\n\r\nconst embedded = isEmbedded();\r\nconst storage = embedded ? {} : localStorage; // Use temporary storage for iframe\r\n\r\nif(embedded) {\r\n    console.log('Using embedded mode.');\r\n}\r\n\r\nlet nextEditorState;\r\n\r\nexport default function EditorPage() {\r\n    const redraw = useRedraw();\r\n\r\n    const {menu: menuParam} = parse(window.location.search.substring(1));\r\n\r\n    const events = useContext(EventsContext);\r\n\r\n    useListener(events, PROJECT_CLEAR_EVENT, () => {\r\n        // TODO: confirmation modal\r\n        // delete storage[STORAGE_EDITOR_STATE];\r\n        nextEditorState = DEFAULT_STATE;\r\n        redraw();\r\n    });\r\n\r\n    useListener(events, PROJECT_LOAD_EVENT, state => {\r\n        // storage[STORAGE_EDITOR_STATE] = JSON.stringify(state);\r\n        nextEditorState = state;///\r\n        redraw();\r\n    });\r\n\r\n    useListener(events, PROJECT_EXPORT_EVENT, state => {\r\n        let data = JSON.stringify(state);\r\n        FileSaver.saveAs(new Blob([data]), `${pascalCase(state.name || 'project')}.blocks`);\r\n    });\r\n\r\n    const onEditorSetup = async (loadState, editor) => {\r\n        let stateString = nextEditorState ? JSON.stringify(nextEditorState) : storage[STORAGE_EDITOR_STATE];\r\n        nextEditorState = null;\r\n\r\n        let state;\r\n        if(stateString) {\r\n            state = JSON.parse(stateString);\r\n        }\r\n        else if(!embedded) {\r\n            state = DEFAULT_STATE;\r\n        }\r\n\r\n        if(state && !await loadState(state)) {\r\n            console.warn('Load error');\r\n        }\r\n    };\r\n\r\n    const onEditorChange = (editor) => {\r\n        // if(embedded) {\r\n        //     // TODO: dry with onEditorSave()\r\n        //     let message = {\r\n        //         type: 'change',\r\n        //         state: JSON.stringify(editor.toJSON()),\r\n        //     };\r\n        //     console.log('Sending message:', message);\r\n        //     window.parent.postMessage(message, '*'); // TODO: restrict target origin\r\n        // }\r\n    };\r\n\r\n    const onEditorSave = (state, editor) => {\r\n        let stateString = JSON.stringify(state);\r\n        storage[STORAGE_EDITOR_STATE] = stateString;\r\n        if(embedded) {\r\n            let message = {\r\n                type: 'save',\r\n                state: stateString,\r\n            };\r\n            console.log('Sending message:', message);\r\n            let targetOrigin = '*'; // TODO: restrict target origin\r\n            window.parent.postMessage(message, targetOrigin);\r\n        }\r\n    };\r\n\r\n    useListener(window, 'message', ({source, data}) => {\r\n        if(embedded && source === window.parent) {\r\n            if(typeof data === 'string') {\r\n                console.log('Received message:', data);\r\n                data = JSON.parse(data);\r\n                if(data?.type === 'load') {\r\n                    nextEditorState = data.state ? JSON.parse(JSON.stringify(data.state)) : DEFAULT_STATE;\r\n                    redraw();\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Editor\r\n            hideMenu={menuParam === 'hidden'}\r\n            onSetup={onEditorSetup}\r\n            onChange={onEditorChange}\r\n            onSave={onEditorSave}\r\n        />\r\n    );\r\n}","// Derived from: https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t\r\n\r\nexport default function isEmbedded() {\r\n    try {\r\n        return window.self !== window.top;\r\n    }\r\n    catch(e) {\r\n        return true;\r\n    }\r\n};","import {useState} from 'react';\r\n\r\nexport default function useRedraw() {\r\n\r\n    let redraw = useState({})[1];\r\n\r\n    return () => redraw({});\r\n}\r\n","import styled from 'styled-components';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport React from 'react';\r\n\r\nconst ReactTooltipStyled = styled(ReactTooltip)`\r\n  padding: .5em 1em !important;\r\n`;\r\n\r\nexport default function GlobalTooltip() {\r\n    return (\r\n        <ReactTooltipStyled backgroundColor=\"#111\" place=\"bottom\" delayShow={300}/>\r\n    );\r\n};","export default function reportWebVitals(onPerfEntry) {\n    if(onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n}\n","import React, {useContext} from 'react';\r\nimport EditorPage from './pages/editor/EditorPage';\r\nimport {toast, ToastContainer} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport EventsContext, {ERROR_EVENT} from '../contexts/EventsContext';\r\nimport useListener from '../hooks/useListener';\r\nimport GlobalTooltip from './GlobalTooltip';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\n\r\nexport default function App() {\r\n\r\n    let events = useContext(EventsContext);\r\n\r\n    useListener(events, ERROR_EVENT, err => {\r\n        toast(err, {\r\n            type: 'error',\r\n            // closeOnClick: true,\r\n        });\r\n    });\r\n\r\n    return (\r\n        <React.StrictMode>\r\n            <BrowserRouter>\r\n                <GlobalTooltip/>\r\n                <ToastContainer/>\r\n                <EditorPage/>\r\n                {/*<Switch>*/}\r\n                {/*    <Route path=\"/editor\">*/}\r\n                {/*        <EditorPage/>*/}\r\n                {/*    </Route>*/}\r\n                {/*    <Route path=\"/\">*/}\r\n                {/*        <HomePage/>*/}\r\n                {/*    </Route>*/}\r\n                {/*</Switch>*/}\r\n            </BrowserRouter>\r\n        </React.StrictMode>\r\n    );\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.scss';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\nreportWebVitals((...args) => {\n    // console.log('WebVitals:', ...args);\n});\n","import React from 'react';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport styled from 'styled-components';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\nimport useControlState from '../../../../hooks/useControlState';\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  color: black;\r\n  background: ${({selected}) => selected ? '#fffa' : '#fff8'};\r\n`;\r\n\r\nconst StyledTextArea = styled(TextareaAutosize)`\r\n  font-weight: 500;\r\n  resize: horizontal;\r\n  background: #fff8;\r\n`;\r\n\r\nexport default function CommentNodeView({block, nodeHandle}) {\r\n    const {/*editor,*/ node/*, bindControl*/} = nodeHandle.props;\r\n    const {selected} = nodeHandle.state;\r\n\r\n    const [text, setText] = useControlState(node.controls.get('text'));\r\n    const [width, setWidth] = useControlState(node.controls.get('widthPixels'));\r\n\r\n    return (\r\n        <Container className=\"pt-2 ps-2 pe-4 rounded-3\" selected={selected}>\r\n            {/*<div className=\"\">Comment</div>*/}\r\n            <StyledTextArea\r\n                style={{width: width || 200}}\r\n                rows={1}\r\n                maxRows={100}\r\n                ref={bindNodeInput}\r\n                value={text || ''}\r\n                placeholder=\"Comment\"\r\n                onChange={e => setText(e.target.value)}\r\n                onMouseUp={e => setWidth(e.target.clientWidth)}\r\n            />\r\n        </Container>\r\n    );\r\n}\r\n","import {floatType, textType} from '../block-types/types';\nimport {commentCategory} from '../block-categories/categories';\nimport CommentNodeView from '../components/rete/nodes/views/CommentNodeView';\n\nconst block = {\n    info: 'A text comment',\n    category: commentCategory,\n    global: true,\n    component: CommentNodeView,\n    controls: [{\n        key: 'text',\n        type: textType,\n    }, {\n        key: 'widthPixels',\n        type: floatType,\n    }],\n};\nexport default block;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport useControlState from '../../../../hooks/useControlState';\r\nimport {bindNodeInput} from '../../../../utils/bindNodeInput';\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n    // background: ${({selected}) => selected ? '#fff8' : '#fff3'};\r\n  border: 2px solid ${({selected}) => selected ? '#fffa' : '#fff8'};\r\n`;\r\n\r\nconst ResizeArea = styled.div`\r\n  pointer-events: none;\r\n  //cursor: default;\r\n  background: #fff1;\r\n  resize: both;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport default function RegionNodeView({block, nodeHandle}) {\r\n    const {/*editor,*/ node/*, bindControl*/} = nodeHandle.props;\r\n    const {selected} = nodeHandle.state;\r\n\r\n    const [width, setWidth] = useControlState(node.controls.get('widthPixels'));\r\n    const [height, setHeight] = useControlState(node.controls.get('heightPixels'));\r\n\r\n    const bindContainer = (el) => {\r\n        if(!el) {\r\n            return;\r\n        }\r\n        // Render behind other nodes\r\n        el.parentElement.style.zIndex = '-1';\r\n    };\r\n\r\n    return (\r\n        <Container ref={bindContainer} className=\"p-2 rounded-3\" selected={selected}>\r\n            <ResizeArea\r\n                ref={bindNodeInput}\r\n                style={{width: width || 300, height: height || 100}}\r\n                onMouseUp={event => setWidth(event.target.clientWidth) & setHeight(event.target.clientHeight)}\r\n            />\r\n        </Container>\r\n    );\r\n}\r\n","import {floatType, textType} from '../block-types/types';\nimport {commentCategory} from '../block-categories/categories';\nimport CommentRegionNodeView from '../components/rete/nodes/views/RegionNodeView';\nimport {FaSquareFull} from 'react-icons/fa';\n\nconst block = {\n    title: 'Region',\n    info: 'A background region',\n    category: commentCategory,\n    icon: FaSquareFull,\n    global: true,\n    component: CommentRegionNodeView,\n    controls: [{\n        key: 'text',\n        type: textType,\n    }, {\n        key: 'widthPixels',\n        type: floatType,\n    }, {\n        key: 'heightPixels',\n        type: floatType,\n    }],\n};\nexport default block;\n"],"sourceRoot":""}