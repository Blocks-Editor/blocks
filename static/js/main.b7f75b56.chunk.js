(this["webpackJsonpblocks-webapp"]=this["webpackJsonpblocks-webapp"]||[]).push([[0],[,,function(t,e,n){"use strict";n.d(e,"a",(function(){return L})),n.d(e,"d",(function(){return M})),n.d(e,"c",(function(){return I})),n.d(e,"B",(function(){return E})),n.d(e,"t",(function(){return A})),n.d(e,"D",(function(){return R})),n.d(e,"i",(function(){return D})),n.d(e,"y",(function(){return P})),n.d(e,"n",(function(){return F})),n.d(e,"j",(function(){return B})),n.d(e,"q",(function(){return V})),n.d(e,"b",(function(){return _})),n.d(e,"w",(function(){return q})),n.d(e,"g",(function(){return z})),n.d(e,"z",(function(){return J})),n.d(e,"k",(function(){return U})),n.d(e,"o",(function(){return K})),n.d(e,"s",(function(){return W})),n.d(e,"x",(function(){return G})),n.d(e,"A",(function(){return Z})),n.d(e,"C",(function(){return H})),n.d(e,"v",(function(){return $})),n.d(e,"u",(function(){return X})),n.d(e,"h",(function(){return Y})),n.d(e,"e",(function(){return Q})),n.d(e,"r",(function(){return tt})),n.d(e,"p",(function(){return et})),n.d(e,"f",(function(){return nt})),n.d(e,"m",(function(){return it})),n.d(e,"l",(function(){return ct}));var o=n(4),a=n(7),r=n(10),i=n(15),c=n(16),u=n(50),s=n(1),p=n(28),l=n(3);function d(t){var e=t.control,n=t.bindInput,o=t.validation,r=o.min,i=o.max,c=o.step,u=Object(p.a)(e),s=Object(a.a)(u,2),d=s[0],f=s[1];return Object(l.jsx)("input",{type:"number",style:{width:"4em"},ref:n,min:r,max:i,step:c,value:d||0,onChange:function(t){return f(+t.target.value||t.target.value)}})}var f=n(13),m=n(9),y=n(11),b=n.n(y),v=n(34),g=n(59),j=["value","constraintType","abstract","invalid","onChange"];function h(t){var e,n,a,i,c=t.value,u=t.constraintType,p=t.abstract,d=t.invalid,y=t.onChange,O=Object(r.a)(t,j);u=u||M;var k=Object(f.a)(L.values()).filter((function(t){return(p||!t.data.abstract)&&u.isSubtype(t)})),x=Object(s.useContext)(m.g);if(c)try{c=it(c)}catch(w){y(c=void 0),x.emit(m.c,w)}return d=d||!c||!k.some((function(t){return t.isSubtype(c)})),Object(v.a)(),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("select",Object(o.a)(Object(o.a)({className:b()(d&&"invalid"),value:null===(e=c)||void 0===e?void 0:e.name,onChange:function(t){return y(it(t.target.value))}},O),{},{children:[d&&Object(l.jsx)("option",{label:"(Type)",value:null===(n=c)||void 0===n?void 0:n.name}),k.map((function(t){return Object(l.jsx)("option",{label:t.name,value:t.name},t.name)}))]})),Object(l.jsx)("div",{className:"ps-2",children:null===(a=c)||void 0===a||null===(i=a.generics)||void 0===i?void 0:i.map((function(t,e){var n;return Object(l.jsx)(h,{value:t,constraintType:c.data.baseType.generics[e],abstract:p,"data-tip":Object(g.a)(null===(n=c.data.genericNames)||void 0===n?void 0:n[e]),onChange:function(t){var n=Object(f.a)(c.generics);n.splice(e,1,t),y(it(Object(o.a)(Object(o.a)({},c.toJSON()),{},{generics:n})))}},e)}))})]})}var O=n(24),k=n(60),x=n(35);var w=n(14),C=["name"],T=["generics","meta"],S=["abstract","arbitraryGenerics"],N=function(){function t(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Object(i.a)(this,t),this.name=e,this.parent=n,this.generics=o.map((function(t){return it(t)})),this.data=a,this.meta=r}return Object(c.a)(t,[{key:"toJSON",value:function(){return{name:this.name,generics:this.generics.map((function(t){return t.toJSON()}))}}},{key:"of",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return it(this,e)}},{key:"withMeta",value:function(t){var e=t.name,n=Object(r.a)(t,C),o=rt(e||this.name,this,this.generics);return Object.assign(o.meta,n),o}},{key:"isAbstract",value:function(){return this.data.abstract||this.generics.some((function(t){return t.isAbstract()}))}},{key:"getDefaultValue",value:function(){var t=this.data.defaultValue;return"function"===typeof t?t(this):t}},{key:"equals",value:function(t){return this.name===t.name&&this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.equals(t.generics[n])}))}},{key:"isSubtype",value:function(t){return!!t&&(this.data.alwaysSubtype===t||(!(!this.data.arbitraryGenerics||!t.parent||this.name!==t.parent.name)||(this.name===t.name?this.generics.length===t.generics.length&&this.generics.every((function(e,n){return e.isSubtype(t.generics[n])})):!!t.parent&&this.isSubtype(t.parent))))}},{key:"getSharedType",value:function(t){if(t)return this===t||this.isSubtype(t)?this:t.isSubtype(this)?t:this.parent?this.parent.getSharedType(t):void 0}},{key:"toTypeString",value:function(){var t,e;return null!==(t=null===(e=this.data.toTypeString)||void 0===e?void 0:e.call(this))&&void 0!==t?t:this.name+(this.generics.length?"<"+this.generics.map((function(t){return t.toTypeString()})).join(", ")+">":"")}},{key:"toString",value:function(){return"Type(".concat(this.toTypeString(),")")}}]),t}(),L=new Map;window.TYPE_MAP=L;var M=ot("Any",{abstract:!0,category:"default",reversed:!1}),I=ot("AnyReversed",{abstract:!0,category:"default",reversed:!0}),E=ot("Type",{parent:M,category:"types",controlType:function(t){var e=t.abstract,n=t.control,o=t.bindInput,r=Object(p.a)(n),i=Object(a.a)(r,2),c=i[0],u=i[1],s=n.config.type.generics[0],d=!n.validate(c);return Object(l.jsx)("div",{ref:o,children:Object(l.jsx)(h,{value:c,constraintType:s,abstract:e,invalid:d,onChange:u})})},defaultValue:function(t){return t.generics[0]},generics:[M]}),A=ot("Node",{parent:M,category:"nodes",controlType:function(t){var e,n=t.editor,o=t.control,r=t.bindInput,i=Object(p.a)(o),c=Object(a.a)(i,2),u=c[0],d=c[1],y=Object(s.useState)((function(){return Object(f.a)(n.nodes)})),v=Object(a.a)(y,2),g=v[0],j=v[1],h=Object(s.useContext)(m.g);Object(O.a)(h,m.a,(function(){return j(Object(f.a)(n.nodes))}));var w=null===(e=o.config.type)||void 0===e?void 0:e.meta.block,C=w&&(Array.isArray(w)?w:[w]).map((function(t){var e="string"===typeof t?t:t.name;return Object(x.b)(e),e}));C&&(g=g.filter((function(t){return!C||C.includes(t.name)})));var T=!u||!g.some((function(t){return String(t.id)===String(u)&&(!C||C.includes(t.name))}));return Object(l.jsxs)("select",{ref:r,className:b()(T&&"invalid"),style:{maxWidth:"100%"},value:u,onChange:function(t){return d(t.target.value||void 0)},children:[Object(l.jsx)("option",{label:"(Select a Node)",value:void 0},-1),g.map((function(t){return Object(l.jsx)("option",{label:Object(k.a)(t,n),value:t.id},t.id)}))]})},toTypeString:function(){return this.meta.block?"Node{block=".concat(JSON.stringify(this.meta.block),"}"):"Node"}}),R=ot("Value",{abstract:!0,parent:M,category:"values"}),D=ot("Custom",{parent:R,arbitraryGenerics:!0}),P=ot("Reference",{parent:M,category:"references"}),F=ot("Identifier",{parent:P,controlType:u.a,validation:{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/},defaultInput:function(t,e){return Object(w.c)(e,t.key)}}),B=ot("Effect",{parent:I,category:"effects",generics:[R],toMotoko:function(t){return Object(a.a)(t,1)[0]}}),V=ot("Member",{parent:I,singleOutput:!0,category:"members"}),_=ot("Actor",{parent:I,singleOutput:!0,category:"actors"}),q=(ot("Module",{parent:I,singleOutput:!0,category:"modules"}),ot("Param",{parent:I,category:"parameters"})),z=ot("Bool",{parent:R,controlType:function(t){var e=t.control,n=t.bindInput,o=Object(p.a)(e),r=Object(a.a)(o,2),i=r[0],c=r[1];return Object(l.jsxs)("label",{ref:n,children:[Object(l.jsx)("input",{type:"checkbox",checked:!!i,onChange:function(t){return c(t.target.checked)}}),Object(l.jsx)("span",{className:"input-title my-0",style:{verticalAlign:"top"},children:e.name})]})},defaultValue:!1}),J=(ot("Char",{parent:R,controlType:u.a,validation:{minLength:1,maxLength:1}}),ot("Text",{parent:R,controlType:u.a,defaultValue:""})),U=ot("Float",{parent:R,controlType:d,defaultValue:0}),K=ot("Int",{parent:U,category:"integers",controlType:d,validation:{step:1}}),W=ot("Nat",{parent:U,category:"naturals",validation:{step:1,min:0}}),G=(ot("Blob",{parent:R}),ot("Principal",{parent:R,category:"principals"})),Z=(ot("Error",{parent:R}),ot("Tuple",{abstract:!0,arbitraryGenerics:!0,parent:R,category:"tuples",toTypeString:function(){return this===Z?this.name:"(".concat(this.generics.map((function(t){return t.toTypeString()})).join(", "),")")}})),H=ot("Unit",Z.of());if(Z===H)throw new Error;ot("Object",{abstract:!0,arbitraryGenerics:!0,parent:R,category:"objects",toTypeString:function(){var t=this;return"(".concat(this.generics.map((function(e,n){return"".concat(t.genericNames[n],": ").concat(e.toTypeString())})).join(", "),")")}}),ot("Function",{parent:R,generics:[R,R],genericNames:["input","output"],category:"functions",toTypeString:function(){return"".concat(this.generics[0].toTypeString()," -> ").concat(this.generics[1].toTypeString())}});var $=ot("Optional",{parent:R,generics:[R],category:"optionals",toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"?".concat(e)}}),X=ot("Null",{parent:R,alwaysSubtype:$}),Y=ot("Collection",{abstract:!0,parent:R,category:"collections"}),Q=ot("Array",{parent:Y,generics:[R],genericNames:["item"],toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"[".concat(e,"]")}}),tt=ot("MutableArray",{parent:Q,generics:[R],genericNames:["item"],toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"[var ".concat(e,"]")}}),et=ot("Map",{parent:Y,generics:[R,R],genericNames:["key","value"],toMotoko:function(t){var e=Object(a.a)(t,2),n=e[0],o=e[1];return"HashMap.HashMap<".concat(n,", ").concat(o,">")}}),nt=ot("Async",{parent:R,generics:[R],category:"futures",toMotoko:function(t){var e=Object(a.a)(t,1)[0];return"async ".concat(e)}});function ot(t,e){var n;if(e instanceof N)(n=e).name=t;else{var o=e.parent,a=e.generics,i=void 0===a?[]:a,c=e.meta,u=void 0===c?{}:c;(n=rt(t,o,i,Object(r.a)(e,T),u)).data.baseType=n}return L.set(t,n),n}function at(t,e){if("string"===typeof t&&(t=it(t)),(!e||!e.length||e===t.generics)&&!t.data.arbitraryGenerics)return it(t);var n=rt(t.name,t,e);if(!t.isSubtype(n))throw new Error("Generics not assignable to ".concat(t.toTypeString()," from ").concat(n.toTypeString()));return n}function rt(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=e?e.data:{},u=(c.abstract,c.arbitraryGenerics,Object(r.a)(c,S)),s=e?e.meta:{};return new N(t,e||null,n||(e?e.generics:[]),Object(o.a)(Object(o.a)({},u),a),Object(o.a)(Object(o.a)({},s),i))}function it(t,e){if(arguments.length>1)return at(t,e);if(t instanceof N)return t;if("object"===typeof t)return at(t.name,(t.generics||[]).map((function(t){return it(t)})));if(!t)throw new Error("Invalid type: ".concat(t));if(!L.has(t))throw new Error("Unknown type: ".concat(t));return L.get(t)}function ct(){for(var t=arguments.length<=0?void 0:arguments[0],e=1;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];t?n&&(t=t.getSharedType(n)):t=n}return t}},,,,function(t,e,n){"use strict";n.d(e,"j",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"n",(function(){return f})),n.d(e,"i",(function(){return m})),n.d(e,"m",(function(){return y})),n.d(e,"o",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return g})),n.d(e,"h",(function(){return j})),n.d(e,"l",(function(){return h})),n.d(e,"a",(function(){return O})),n.d(e,"g",(function(){return k})),n.d(e,"k",(function(){return x})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return C}));var o=n(4),a=n(10),r=n(15),i=n(12),c=["name","parent"],u=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(r.a)(this,t),this.name=e,this.parent=n,this.root=n?n.root:this,this.data=o},s=new Map;function p(t){var e=t.name,n=t.parent,r=Object(a.a)(t,c),i=new u(e,n,n?Object(o.a)(Object(o.a)({},n.data),r):r);return s.set(i.name,i),i}function l(t){if(t instanceof u)return t;if(!s.has(t))throw new Error("Could not find category with name: ".concat(t));return s.get(t)}var d=p("Default"),f=p({name:"State",color:"#3fd",icon:i.i,priority:10}),m=p({name:"Function",color:"#fd3",icon:i.h,priority:20}),y=p({name:"Param",color:"#a8f",icon:i.o,priority:3}),b=p({name:"Type",color:"#2af",icon:i.y}),v=p({name:"Collection",color:"#1c8",icon:i.z}),g=p({name:"Compiler",color:"#f5a",icon:i.d}),j=p({name:"Expression",color:"#aaa",icon:i.j}),h=p({name:"Operator",icon:i.k}),O=p({name:"Actor",color:"#fa8",icon:i.l}),k=p({name:"Effect",icon:i.x,priority:5}),x=p({name:"Literal",icon:i.s}),w=p({name:"Decomposition",icon:i.p}),C=p({name:"Comment",icon:i.e})},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return l}));var o=n(1),a=n.n(o),r=n(57),i="editor-change",c="editor-save",u="project-export",s="project-load",p="project-clear",l="error",d=new(n.n(r).a);d.setMaxListeners(1e3),d.on(l,console.error),window.EVENTS=d,e.g=a.a.createContext(d)},,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return f}));var o=n(15),a=n(16),r=n(17),i=n(19),c=n(7),u=n(42),s=n(2);function p(t,e){var n="number"===typeof t||"string"===typeof t?String(t):t.id;return"node__".concat(n).concat(e?"_"+e:"")}function l(t){return'$import$"'.concat(t,'"')}function d(t){if(!t)return t;t=String(t);var e={};t=t.replace(/\$import\$"([^"]*)"/g,(function(t,n){var o=n.includes("/")?n.substring(n.lastIndexOf("/")+1):n;if(e.hasOwnProperty(o)&&e[o]!==n)throw new Error('Conflicting import paths: "'.concat(n,'" != "').concat(e[o],'"'));return e[o]=n,o}));for(var n=0,o=Object.entries(e);n<o.length;n++){var a=Object(c.a)(o[n],2),r=a[0],i=a[1];t="import ".concat(r,' "').concat(i,'"; ').concat(t)}return t}var f=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t,"toMotoko")}return Object(a.a)(n,[{key:"defaultCompile",value:function(t,e){if(s.n.isSubtype(t.type))return console.log(e.name),p(e,t.key);if(s.B.isSubtype(t.type)){var n=t.type.generics[0];if(n&&!n.isAbstract())return this.getTypeString()}}},{key:"postCompile",value:function(t,e,n){var o=this;return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||null===t?t:void 0!==t?Array.isArray(t)?t.map((function(t){return o.postCompile(t,e,n)})).filter((function(t){return t})).join(" "):(console.warn("Unexpected Motoko expression:",t),String(t)):void 0}}]),n}(u.a)},,,,function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return s}));var o=n(7),a=n(2),r=n(6);function i(t,e,n){return t=Object(a.m)(t),{topRight:"result",title:"(".concat(e," a)"),category:r.l,inputs:[{key:"input",title:"a",type:t}],outputs:[{key:"result",type:t,toMotoko:function(t){var n=t.input;return"".concat(e,"(").concat(n,")")}}]}}function c(t,e,n){var i=Array.isArray(t)?t:[t,t],c=Object(o.a)(i,2),u=c[0],s=c[1];return u=Object(a.m)(u),s=Object(a.m)(s),{title:"(a ".concat(e," b)"),category:r.l,topRight:"result",inputs:[{key:"left",title:"a",type:u},{key:"right",title:"b",type:u}],outputs:[{key:"result",type:s,toMotoko:function(t){var n=t.left,o=t.right;return"(".concat(n," ").concat(e," ").concat(o,")")}}]}}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[a.k].concat(e))}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[[a.k,a.g]].concat(e))}},,,function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s}));var o=n(4),a=n(13),r=n(2),i=n(6),c=r.j.of(r.C);function u(t,e){var n={key:"before",type:r.j,inferType:function(t,e,n){var o=n.getBlock(e);return r.l.apply(void 0,Object(a.a)(o.inputs.filter((function(t){return r.j.isSubtype(t.type)})).map((function(t){return n.getInput(e,t.key)}))))||c},toMotoko:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var r=e.apply(void 0,[t].concat(o));if(void 0!==r){var i=t.after;return"".concat(r).concat(i?" "+i:"")}}};return Object(o.a)(Object(o.a)({category:i.g,topLeft:"before",topRight:"after"},t),{},{inputs:[].concat(Object(a.a)(t.inputs||[]),[{key:"after",type:r.j,optional:!0}]),outputs:[].concat(Object(a.a)(t.outputs||[]),[n])})}function s(t,e){return Object(o.a)(Object(o.a)({category:i.g,topLeft:"statement"},t),{},{outputs:[].concat(Object(a.a)(t.outputs||[]),[Object(o.a)({key:"statement",type:r.j},e)])})}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(1);function a(t,e,n,a){return Object(o.useEffect)((function(){if(t){var o="addEventListener"in t;return o?t.addEventListener(e,n,a):t.on(e,n,a),function(){o?t.removeEventListener(e,n):t.off(e,n)}}})),n}},,,function(t,e,n){"use strict";n.r(e),n.d(e,"stateReadIcon",(function(){return c})),n.d(e,"stateWriteIcon",(function(){return u}));var o=n(2),a=n(32),r=n(6),i=n(12),c=i.b,u=i.a,s=Object(a.b)({info:"A persistent smart contract variable",topRight:"value",category:r.n,global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),r=e.compilers.type.getInput(t,"initialValue")||o.C;return n&&"".concat(n," : ").concat(e.compilers.motoko.getTypeString(r))},shortcuts:[{block:"StateRead",nodeKey:"stateNode"},{block:"StateUpdate",nodeKey:"stateNode"}],inputs:[{key:"initialValue",type:o.D,optional:!0}],outputs:[{key:"value",type:o.D,toMotoko:function(t){return t.name},inferType:function(t){return t.initialValue}}],controls:[{key:"stable",type:o.g}]},{toMotoko:function(t,e,n){var o=t.stable,a=t.name,r=t.initialValue,i=[!!o&&"stable"].filter((function(t){return t})).join(" "),c=n.editor.compilers.type.getInput(e,"initialValue");return r=r||"()","".concat(i&&i+" ").concat("var"," ").concat(a).concat(c?" : ".concat(n.getTypeString(c)):""," = ").concat(r,";")}});e.default=s},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(7),a=n(1),r=n(24),i=n(9);function c(t){var e=t.getValue(),n=Object(a.useState)(e),c=Object(o.a)(n,2)[1],u=Object(a.useContext)(i.g);return Object(r.a)(u,i.a,(function(){var e;c(t.getValue()),null===(e=t.notifyEditorChange)||void 0===e||e.call(t)})),Object(r.a)(t.events,"update",(function(){return u.emit(i.a,t,e)})),[e,function(e){return t.setValue(e)}]}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m}));var o=n(13),a=n(4),r=n(2),i=n(7),c=(n(1),n(28)),u=n(11),s=n.n(u),p=n(3);function l(t){var e=t.control,n=t.bindInput,o=t.options,a=t.findLabel,r=Object(c.a)(e),u=Object(i.a)(r,2),l=u[0],d=u[1];void 0!==l||o.includes(l)||(l=o[0],d(l));var f=!e.validate(l)||!o.includes(l);return Object(p.jsx)("select",{className:s()(f&&"invalid"),ref:n,value:l,onChange:function(t){return d(t.target.value||void 0)},children:o.map((function(t,e){var n;return Object(p.jsx)("option",{label:null!==(n=null===a||void 0===a?void 0:a(t,e))&&void 0!==n?n:t,value:t},e)}))})}function d(t,e){return e.compilers.motoko.getInput(t,"name")}function f(){return t={key:"visibility"},e=["public","private","system"],Object(a.a)(Object(a.a)({},t),{},{config:Object(a.a)(Object(a.a)({},t.config||{}),{},{controlType:l,controlProps:{options:t.optional?[void 0].concat(Object(o.a)(e)):e,findLabel:function(t){return t?t.charAt(0).toUpperCase()+t.substring(1):"--"}}})});var t,e}function m(t,e){return Object(a.a)(Object(a.a)({topLeft:"member"},t),{},{inputs:[{key:"name",type:r.n}].concat(Object(o.a)(t.inputs||[])),outputs:[Object(a.a)({key:"member",type:r.q},e)].concat(Object(o.a)(t.outputs||[]))})}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o,a=n(1),r=n(39);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(a.useEffect)((function(){clearTimeout(o),o=setTimeout((function(){return r.a.rebuild()}))}),t),r.a}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return j}));var o=n(30),a=n(7),r=n(4),i=n(69),c=n(2),u=n(6);if("undefined"===typeof n(68).context){var s=n(108),p=n(69);n(68).context=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/\.js$/,r={},i=function t(e){s.readdirSync(e).forEach((function(n){var i=p.resolve(e,n);s.statSync(i).isDirectory()?o&&t(i):a.test(i)&&(r[i]=!0)}))},c=function(t){return n(68)(t)};return c.keys=function(){return Object.keys(r)},i(p.resolve(t,e)),c}}var l=[],d=new Set,f=n(109);function m(t,e,n){if(e){var a,r=Object(o.a)(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(!i.key||t.props[i.key]!==i){if(t.props.hasOwnProperty(i.key))throw new Error("Duplicate prop in ".concat(t.name,": ").concat(i.key));i[n]=i[n]||!0,t.props[i.key]=i}}}catch(c){r.e(c)}finally{r.f()}}}f.keys().forEach((function(t){var e=Object(i.basename)(t,".js"),n=f(t).default;if(n=Object(r.a)({},n)){if(n.name=e,d.has(e))return void console.error("Duplicate block name: ".concat(e));n.category=n.category?Object(u.j)(n.category):u.f,n.props=n.props||{};for(var o=0,s=Object.entries(n.props);o<s.length;o++){var p=Object(a.a)(s[o],2),y=p[0],b=p[1];if(b.key&&b.key!==y)throw new Error("Prop key mismatch: ".concat(y," != ").concat(b.key));b.key=y}m(n,n.outputs,"output"),m(n,n.inputs,"input"),m(n,n.controls,"control"),n.inputs=[],n.outputs=[],n.controls=[];for(var v=0,g=Object.entries(n.props);v<g.length;v++){var j=Object(a.a)(g[v],2),h=j[0],O=j[1];O.key=h,O.output?n.outputs.includes(O)||n.outputs.push(O):O.input?n.inputs.includes(O)||n.inputs.push(O):O.control&&(n.controls.includes(O)||n.controls.push(O))}for(var k=0,x=Object.values(n.props);k<x.length;k++){var w=x[k];if(!w.type&&(w.input||w.output)&&w.control)throw console.log(w),new Error("Type not found for ".concat(n.name," : ").concat(w.key));w.type&&(w.type=Object(c.m)(w.type))}d.add(n.name),l.push(n)}}));var y=new Map(l.map((function(t){return[t.name,t]})));window.BLOCK_MAP=y;var b,v=Object(o.a)(y.values());try{var g=function(){var t=b.value;t.shortcuts?t.shortcuts.forEach((function(e){if(!e.block)throw new Error("Shortcut in ".concat(t.name," requires a `block` attribute"));e.block=j(e.block)})):t.shortcuts=[]};for(v.s();!(b=v.n()).done;)g()}catch(h){v.e(h)}finally{v.f()}function j(t){if(!t)throw new Error("Block cannot be ".concat(t));if("string"===typeof t){if(!y.has(t))throw new Error("Block does not exist: ".concat(t));return y.get(t)}return t}}).call(this,"/")},function(t,e,n){"use strict";n.r(e),n.d(e,"arrayImportRef",(function(){return i}));var o=n(2),a=n(14),r=n(6),i=Object(a.b)("mo:base/Array"),c={title:"Create Array",category:r.b,icon:r.b.data.icon,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value"),o=e.compilers.motoko.getOutput(t,"mutable");return n&&"new Array [ ".concat(o?"var ":"").concat(e.compilers.motoko.getTypeString(n.generics[0])," ]")},inputs:[{key:"itemType",type:o.B.of(o.D)},{key:"items",type:o.D,multi:!0}],outputs:[{key:"value",type:o.e,inferType:function(t,e,n){var a=t.itemType;return(n.editor.compilers.motoko.getInput(e,"mutable")?o.r:o.e).of(a)},toMotoko:function(t){var e=t.mutable,n=t.items;return"[".concat(e?n.length?"var ":"var":"").concat(n.join(", "),"]")}}],controls:[{key:"mutable",type:o.g}]};e.default=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(13),a=n(4),r=n(6);function i(t,e,n){return Object(a.a)(Object(a.a)({category:r.k,topRight:"value"},t),{},{outputs:[].concat(Object(o.a)(t.outputs||[]),[{key:"value",type:e,control:!0,toMotoko:function(t){var e=t.value;if(void 0!==e)return String(n?n(e):e)}}])})}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(16),a=n(15),r=n(17),i=n(19),c=n(96),u=n(35),s=n(20),p=n(2),l=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(t,o){return Object(a.a)(this,n),e.call(this,"".concat(t.name,".").concat(o))}return n}(Object(c.a)(Error)),d=function(){function t(e,n){Object(a.a)(this,t),this.editor=e,this.compileKey=n}return Object(o.a)(t,[{key:"defaultCompile",value:function(t,e){}},{key:"postCompile",value:function(t,e,n){return t}},{key:"getNode",value:function(t){if(t instanceof s.d.Node)return t;if(!t)throw new Error("Node cannot be ".concat(JSON.stringify(t)));var e=String("string"===typeof t||"number"===typeof t?t:t.id);if(!(t=this.editor.nodes.find((function(t){return String(t.id)===e}))))throw new Error("Node does not exist: ".concat(e));return t}},{key:"getBlock",value:function(t){return t=this.getNode(t),Object(u.b)(t.name)}},{key:"getInput",value:function(t,e){var n=this;t=this.getNode(t);var o=this.getBlock(t);if(!o.props.hasOwnProperty(e))throw new Error("Prop not found on ".concat(t.name,": ").concat(e));var a=o.props[e];if(a.input)if(a.type.data.reversed){var r=this._output(t,e);if(a.multi)return r.connections.map((function(t){return n._compileConnection(t,t.output,t.input,"inputs")}));if(r.connections.length){var i=r.connections[0];return this._compileConnection(i,i.output,i.input,"inputs")}}else{var c=this._input(t,e);if(a.multi)return c.connections.map((function(t){return n._compileConnection(t,t.input,t.output,"outputs")}));if(c.connections.length){var u=c.connections[0];return this._compileConnection(u,u.input,u.output,"outputs")}if(c.control)return c.control.getValue()}if(a.control){var s=this._control(t,a.key);return this.postCompile(s.getValue(),t,e)}}},{key:"getOutput",value:function(t,e){t=this.getNode(t);var n=this._prop(t,e);try{var o,a=this.getInputArgs(t);if(!a)return;return o=n[this.compileKey]?n[this.compileKey](a,t,this):this.defaultCompile(n,t),this.postCompile(o,t,e)}catch(r){if(r instanceof l)return;console.error("[".concat(t.name,".").concat(e,"]"),r),this.editor.trigger("warn","[".concat(t.name,".").concat(e,"] ").concat(r))}}},{key:"getInputArgs",value:function(t){var e=this;t=this.getNode(t);for(var n=this.getBlock(t),o={},a=function(){var a=i[r];if(a.input||a.control){var c=!1;Object.defineProperty(o,a.key,{get:function(){if(!c){var o,r,i,u=e.getInput(t,a.key);if(void 0===u&&!a.optional)if(void 0===(u=null===(o=a.type)||void 0===o||null===(r=(i=o.data).defaultInput)||void 0===r?void 0:r.call(i,a,t))&&!a.optional)throw new l(n,a.key);return c=!0,u}}})}},r=0,i=Object.values(n.props);r<i.length;r++)a();return o}},{key:"getTypeString",value:function(t){var e,n,o,a=this;return(null===(e=t=Object(p.m)(t))||void 0===e||null===(n=(o=e.data)[this.compileKey])||void 0===n?void 0:n.call(o,t.generics.map((function(t){return a.getTypeString(t)})),this))||t.toTypeString()}},{key:"inferType",value:function(t,e){return this.editor.compilers.type.getInput(t,e)}},{key:"_compileConnection",value:function(t,e,n){return this.getOutput(n.node,n.key)}},{key:"_prop",value:function(t,e){var n=this.getBlock(t);if(!n.props.hasOwnProperty(e))throw new Error("Prop does not exist in ".concat(t.name,": ").concat(e));return n.props[e]}},{key:"_input",value:function(t,e){if(!t.inputs.has(e))throw new Error("Input not found on ".concat(t.name,": ").concat(e));return t.inputs.get(e)}},{key:"_output",value:function(t,e){if(!t.outputs.has(e))throw new Error("Output not found on ".concat(t.name,": ").concat(e));return t.outputs.get(e)}},{key:"_control",value:function(t,e){if(!t.controls.has(e))throw new Error("Control not found on ".concat(t.name,": ").concat(e));return t.controls.get(e)}}]),t}()},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(196);function a(t){return t?t.title||Object(o.a)(t.name):""}},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n(7),a=(n(1),n(28)),r=n(11),i=n.n(r),c=n(3);function u(t){var e=t.control,n=t.bindInput,r=t.validation,u=r.minLength,s=r.maxLength,p=Object(a.a)(e),l=Object(o.a)(p,2),d=l[0],f=l[1],m=!e.validate(d);return Object(c.jsx)("input",{type:"text",className:i()("w-100",m&&"invalid"),autoComplete:"blocks-app",autoCorrect:"off",ref:n,value:d||"",placeholder:e.name,minLength:u,maxLength:s,onChange:function(t){return f(t.target.value||void 0)}})}},,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(197);function a(t){return t?Object(o.a)(t):""}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(35),a=n(44);function r(t,e,n){var r=Object(o.b)(t.name);if(!n&&r&&r.computeTitle){var i=r.computeTitle(t,e);if(i)return i}return Object(a.a)(r)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=/{([0-9]+)}/g;function a(t,e){return(e||"").replaceAll(o,(function(e,n){return(n=+n)>=0&&n<t.length?t[n]:e}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(7),a=(n(1),n(28)),r=n(4),i=n(10),c=n(92),u=function(t){t.languages.register({id:"motoko"}),t.languages.setLanguageConfiguration("motoko",{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"<",close:">"}]}),t.languages.setMonarchTokensProvider("motoko",{defaultToken:"",tokenPostfix:".mo",keywords:["actor","and","async","assert","await","break","case","catch","class","continue","debug","else","false","for","func","if","in","import","module","not","null","object","or","label","let","loop","private","public","return","shared","try","throw","debug_show","query","switch","true","type","var","while","stable","flexible","system"],accessmodifiers:["public","private","shared"],typeKeywords:["Any","None","Null","Bool","Int","Int8","Int16","Int32","Int64","Nat","Nat8","Nat16","Nat32","Nat64","Word8","Word16","Word32","Word64","Float","Char","Text","Blob","Error","Principal"],operators:["=","<",">",":","<:","?","+","-","*","/","%","**","&","|","^","<<",">>","#","==","!=",">=","<=",":=","+=","-=","*=","/=","%=","**=","&=","|=","^=","<<=",">>=","#=","->"],symbols:/[=(){}[\].,:;@#_&\-<>`?!+*\\/]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@typeKeywords":"keyword.type","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]+/,"number.hex"],[/[0-9_]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}})},s=n(3),p=["value","onChange"];function l(t){var e=t.value,n=t.onChange,o=Object(i.a)(t,p);return Object(s.jsx)(c.a,Object(r.a)({theme:"vs-dark",defaultLanguage:"motoko",beforeMount:u,value:e,onChange:function(t){null===n||void 0===n||n(t)},options:{tabSize:2,minimap:{enabled:!1},wordWrap:"off",scrollBeyondLastLine:!1,fontSize:16}},o))}function d(t){var e=t.control,n=t.bindInput,r=Object(a.a)(e),i=Object(o.a)(r,2),c=i[0],u=i[1];return Object(s.jsx)("div",{ref:n,style:{height:150},children:Object(s.jsx)(l,{value:c,onChange:u})})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var o=n(2),a=n(7),r=n(8),i=n.n(r),c=n(26),u=n(1),s=n(9),p=n(24);function l(t){var e,n,o,r=t.promise,i=t.loading,c=t.error,p=t.children,l=Object(u.useState)("loading"),d=Object(a.a)(l,2),f=d[0],m=d[1],y=Object(u.useState)(),b=Object(a.a)(y,2),v=b[0],g=b[1],j=Object(u.useContext)(s.g);return Object(u.useEffect)((function(){Promise.resolve(r).then((function(t){m("success"),g(t)})).catch((function(t){m("error"),g(t),c||j.emit(s.c,t)}))}),[r,c,j]),"loading"===f?null!==(n=null===i||void 0===i?void 0:i())&&void 0!==n?n:null:"error"===f?null!==(o=null===c||void 0===c?void 0:c(v))&&void 0!==o?o:null:null!==(e=null===p||void 0===p?void 0:p(v))&&void 0!==e?e:null}var d=n(79),f=n(12),m=n(205),y=n(34),b=n(39),v=n(3);function g(t){var e,n=t.control,o=t.bindInput,r=t.query,g=function(){var t=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r(n,n.getNode(),n.editor);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return","<".concat(t.t0,">"));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),j=Object(u.useState)(g),h=Object(a.a)(j,2),O=h[0],k=h[1],x=Object(u.useState)(),w=Object(a.a)(x,2),C=w[0],T=w[1],S=Object(u.useContext)(s.g);Object(p.a)(S,s.a,(function(){k(g())}));var N=function(){T(!0),b.a.show(e),setTimeout((function(){return T(!1)}),1e3)};return Object(y.a)(),Object(v.jsx)(l,{promise:O,children:function(t){return(null!==t&&void 0!==t?t:null)&&Object(v.jsxs)("div",{className:"d-flex",children:[Object(v.jsx)("input",{type:"text",className:"w-100 small",readOnly:!0,ref:o,value:t||""}),Object(v.jsx)(d.CopyToClipboard,{text:t,children:Object(v.jsxs)(m.a,{ref:o,size:"sm",variant:"outline-light","data-tip":C?void 0:"Copy to Clipboard",onClick:N,children:[Object(v.jsx)("span",{ref:function(t){return e=t},"data-tip":"Copied!"}),Object(v.jsx)(f.g,{})]})})]})}})}var j=n(6),h=n(14);function O(t,e,n){function a(t){return function(o,a,r){var i=r.compilers[e].getInput(a,t),c=n?n(i):i;return Object(h.d)(c)}}return{title:t,category:j.d,icon:j.d.data.icon,topLeft:"input",topRight:"reversed",inputs:[{key:"input",title:"Input",type:o.d},{key:"reversed",title:"Input",type:o.c}],controls:[{key:"reversedDisplay",title:"Display",config:{controlType:g,controlProps:{query:a("reversed")}}},{key:"display",config:{controlType:g,controlProps:{query:a("input")}}}]}}},,,,,function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=68},,function(t,e,n){"use strict";n.r(e),n.d(e,"getFunctionReturnType",(function(){return u}));var o=n(2),a=n(32),r=n(6),i=n(14),c=o.C;function u(t,e){var n,a=(null===(n=e.compilers.type.getInput(t,"body"))||void 0===n?void 0:n.generics[0])||c,r=e.compilers.control.getInput(t,"query"),i=e.compilers.control.getInput(t,"visibility");return(r||"public"===i)&&(a=o.f.of(a)),a}var s=Object(a.b)({info:"Evaluate based on given input parameters",category:r.i,topRight:"body",global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.motoko.getInputArgs(t),r=o.params,i=o.body,c=u(t,e);if(n||r.length||i)return"".concat(n||"","(").concat(r.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"FunctionCall",nodeKey:"functionNode"},{block:"Return",connections:[{from:"body",to:"statement"}]}],inputs:[{key:"params",type:o.w,multi:!0},{key:"body",type:o.j,optional:!0}],outputs:[{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(i.c)(e),".caller")}}],controls:[Object(a.c)(),{key:"query",type:o.g}]},{toMotoko:function(t,e,n){var o=t.name,a=t.visibility,r=t.query,c=t.params,s=t.body,p=e.outputs.get("caller").connections.length,l=["system"!==a&&a,!!p&&"shared"].filter((function(t){return t})).join(" "),d=u(e,n.editor),f=n.getTypeString(d);return[l,p?Object(i.c)(e):"",r?"query":"","func ".concat(o||"","(").concat(c.join(", "),")").concat("()"!==f?" : ".concat(f):""),"{ ".concat(s||""," };")]}});e.default=s},,,,,,,,,,,,,,function(t,e,n){var o=[n(182),n(183),n(184),n(185),n(186),n(187)];t.exports={getExampleProjects:function(){return o}}},,,,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},,,,,function(t,e,n){var o={"./Actor.js":110,"./ActorClass.js":111,"./Add.js":112,"./And.js":113,"./ArrayAppend.js":114,"./ArrayAppended.js":115,"./ArrayFilter.js":116,"./ArrayGet.js":117,"./ArrayMap.js":118,"./ArrayPrepend.js":119,"./ArrayPut.js":120,"./Await.js":121,"./CodeType.js":122,"./CodeValue.js":123,"./CollectionGet.js":124,"./CollectionPut.js":125,"./CollectionSize.js":126,"./Comment.js":127,"./CompareEqual.js":128,"./CompareGreater.js":129,"./CompareGreaterEqual.js":130,"./CompareLess.js":131,"./CompareLessEqual.js":132,"./CompareNotEqual.js":133,"./CompileMotoko.js":134,"./CompileType.js":137,"./Conditional.js":138,"./ConditionalValue.js":139,"./Divide.js":140,"./DivideInt.js":141,"./Function.js":70,"./FunctionCall.js":142,"./GlobalFunction.js":143,"./LiteralBool.js":144,"./LiteralCustomType.js":145,"./LiteralFloat.js":146,"./LiteralIdentifier.js":147,"./LiteralInt.js":148,"./LiteralNat.js":149,"./LiteralPair.js":150,"./LiteralPairType.js":151,"./LiteralText.js":152,"./LiteralTuple.js":153,"./LiteralTupleType.js":154,"./LiteralType.js":155,"./LoopWhile.js":156,"./MapGet.js":157,"./MapPut.js":158,"./MapRemove.js":159,"./Multiply.js":160,"./NewArray.js":36,"./NewTextHashMap.js":161,"./Not.js":162,"./Null.js":163,"./Optional.js":164,"./OptionalUnwrap.js":165,"./Or.js":166,"./Parameter.js":167,"./Query.js":168,"./ReferenceImport.js":169,"./Return.js":170,"./State.js":27,"./StateRead.js":171,"./StateUpdate.js":172,"./Subtract.js":173,"./TextConcat.js":174,"./TextSize.js":175,"./TypeMember.js":176,"./TypeMemberReference.js":177,"./Variable.js":178};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id=109},function(t,e,n){"use strict";n.r(e);var o=n(2),a={info:"An actor which can be deployed as a smart contract",category:n(6).a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){var n=e.compilers.motoko.getInputArgs(t).name;return n&&"actor ".concat(n)},inputs:[{key:"name",type:o.n,optional:!0},{key:"members",type:o.q,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t){var e=t.name,n=t.members;return"actor".concat(e?" "+e:""," { ").concat(n.join(" ")," };")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(14),i={info:"An object-oriented class of actors",category:a.a,topLeft:"actor",topRight:"members",global:!0,computeTitle:function(t,e){var n=e.compilers.motoko.getInputArgs(t),o=n.name,a=n.params;if(o)return"actor class ".concat(o,"(").concat(a.join(", "),")")},inputs:[{key:"name",type:o.n,optional:!0},{key:"members",type:o.q,multi:!0},{key:"params",type:o.w,multi:!0}],outputs:[{key:"actor",type:o.b,toMotoko:function(t,e,n){var o=t.name,a=t.params,i=t.members,c=e.outputs.get("caller").connections.length;return"".concat(c?"shared (".concat(Object(r.c)(e),")"):"","actor class").concat(o?" "+o:"","(").concat(a.join(", "),") = ").concat("this"," { ").concat(i.join(" ")," };")}},{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(r.c)(e),".caller")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.a)("+",(function(t,e){return t+e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)(a.g,"and",(function(t,e){return t&&e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(36),c=n(12),u=Object(a.b)({title:"Append (Array)",category:r.b,icon:c.u,inputs:[{key:"array",title:"Array",type:o.e},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.value;return"".concat(e," := ").concat(i.arrayImportRef,".append(").concat(e,", [").concat(n,"]);")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(27),i=n(36),c={title:"Appended (Array)",category:a.b,icon:r.stateWriteIcon,topRight:"result",hidden:!0,inputs:[{key:"array",type:o.e},{key:"item",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t){var e=t.array,n=t.item;return"".concat(i.arrayImportRef,".append(").concat(e,", ").concat(n,");")}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(12),i=n(14),c=n(36),u={title:"Filter Items (Array)",category:a.b,icon:r.n,topRight:"result",inputs:[{key:"array",type:o.e},{key:"body",title:"Filter",type:o.j.of(o.g)}],outputs:[{key:"result",type:o.e,inferType:function(t){return t.array},toMotoko:function(t,e,n){var a=t.array,r=t.body,u=(null===a||void 0===a?void 0:a.generics[0])||o.C,s=n.getTypeString(u);return"".concat(c.arrayImportRef,".filter<").concat(s,">(").concat(a,", func (").concat(Object(i.c)(e)," : ").concat(s,") : Bool { ").concat(r," })")}},{key:"item",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t,e,n){return Object(i.c)(e)}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(27),i={title:"Get (Array)",category:a.b,icon:r.stateReadIcon,topRight:"value",inputs:[{key:"array",type:o.e},{key:"index",type:o.s}],outputs:[{key:"value",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t){var e=t.array,n=t.index;return"".concat(e,"[").concat(n,"]")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(12),i=n(14),c=n(36),u={title:"Replace Items (Array)",category:a.b,icon:r.n,topRight:"body",inputs:[{key:"array",type:o.e},{key:"body",title:"Replace",type:o.j}],outputs:[{key:"result",type:o.e,inferType:function(t){var e=t.body;if(o.j.isSubtype(e))return o.e.of(e.generics[0])},toMotoko:function(t,e,n){var a=t.array,r=t.body,u=(null===a||void 0===a?void 0:a.generics[0])||o.C,s=n.editor.compilers.type.getInput(e,"body")||o.C,p=n.getTypeString(u),l=n.getTypeString(s);return"".concat(c.arrayImportRef,".map<").concat(p,", ").concat(l,">(").concat(a,", func (").concat(Object(i.c)(e)," : ").concat(p,") : ").concat(l," { ").concat(r," })")}},{key:"item",type:o.D,inferType:function(t){var e=t.array;if(o.e.isSubtype(e))return e.generics[0]},toMotoko:function(t,e,n){return Object(i.c)(e)}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(36),c=n(12),u=Object(a.b)({title:"Prepend (Array)",category:r.b,icon:c.t,inputs:[{key:"array",title:"Array",type:o.e},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.value;return"".concat(e," := ").concat(i.arrayImportRef,".append([").concat(n,"], ").concat(e,");")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(27),c=Object(a.b)({title:"Put (Array)",category:r.b,icon:i.stateWriteIcon,inputs:[{key:"array",title:"Array (mutable)",type:o.r},{key:"index",type:o.s},{key:"value",type:o.D}]},(function(t){var e=t.array,n=t.index,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"(await a)",info:"Wait for an asynchronous value",category:n(6).l,topRight:"result",inputs:[{key:"input",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){return t.input.generics[0]},toMotoko:function(t){var e=t.input;return"(await ".concat(e,")")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(61),a=n(2),r=n(6),i=n(62),c={title:"{ Type }",info:"Compile an arbitrary type",category:r.h,icon:r.h.data.icon,topRight:"result",className:"node-wide",inputs:[{key:"inputs",type:a.B,multi:!0},{key:"type",type:a.B.of(a.D)}],outputs:[{key:"result",type:a.B.of(a.D),inferType:function(t){return t.type||a.i},toMotoko:function(t){var e=t.inputs,n=t.expression;return Object(o.a)(e,n)}}],controls:[{key:"expression",config:{controlType:i.a}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(61),a=n(2),r=n(6),i=n(62),c={title:"{ Expression }",info:"Compile an arbitrary expression",category:r.h,icon:r.h.data.icon,topRight:"result",className:"node-wide",inputs:[{key:"inputs",type:a.d,multi:!0},{key:"type",type:a.B.of(a.D)}],outputs:[{key:"result",type:a.D,inferType:function(t){return t.type},toMotoko:function(t){var e=t.inputs,n=t.expression;return"do { ".concat(Object(o.a)(e,n)," }")}}],controls:[{key:"expression",config:{controlType:i.a}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(27),i={title:"Get (Collection)",category:a.b,icon:r.stateReadIcon,topRight:"value",hidden:!0,inputs:[{key:"collection",type:o.h},{key:"key",type:o.D}],outputs:[{key:"value",type:o.v.of(o.D),inferType:function(t){var e=t.collection;if(o.p.isSubtype(e))return o.v.of(e.generics[1])},toMotoko:function(t){var e=t.collection,n=t.key;return"".concat(e,".get(").concat(n,")")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(27),c=Object(a.b)({title:"Put (Collection)",category:r.b,icon:i.stateWriteIcon,hidden:!0,inputs:[{key:"collection",type:r.b},{key:"key",type:o.D},{key:"value",type:o.D}]},(function(t){var e=t.collection,n=t.key,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(12),i={title:"Size (Collection)",category:a.b,icon:r.w,inputs:[{key:"collection",type:o.p}],outputs:[{key:"value",type:o.s,toMotoko:function(t){var e=t.map;return"".concat(e,".size()")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a={info:"A text comment",category:n(6).c,global:!0,controls:[{key:"text",type:o.z},{key:"width",type:o.k}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)([a.D,a.g],"==",(function(t,e){return t===e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.c)(">",(function(t,e){return t>e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.c)(">=",(function(t,e){return t>=e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.c)("<",(function(t,e){return t<e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.c)("<=",(function(t,e){return t<=e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)([a.D,a.g],"!=",(function(t,e){return t!==e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(63),a=Object(o.a)("Motoko","motoko");e.default=a},,,function(t,e,n){"use strict";n.r(e);var o=n(63),a=Object(o.a)("Type","type",(function(t){return null===t||void 0===t?void 0:t.toTypeString()}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(2),r=Object(o.b)({title:"if() then {} else {}",inputs:[{key:"condition",type:a.g},{key:"trueCase",title:"True",type:a.j,optional:!0},{key:"falseCase",title:"False",type:a.j,optional:!0}]},(function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;if("true"===String(e))return n;if("false"===String(e))return o;var a=o?" else { ".concat(o," }"):"";return"if (".concat(e,") { ").concat(n||""," }").concat(a,";")}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Map Bool",category:n(6).e,topLeft:"condition",topRight:"result",inputs:[{key:"condition",type:o.g},{key:"trueCase",type:o.D},{key:"falseCase",type:o.D}],outputs:[{key:"result",type:o.D,inferType:function(t){var e=t.trueCase,n=t.falseCase;return e.getSharedType(n)},toMotoko:function(t){var e=t.condition,n=t.trueCase,o=t.falseCase;return!0===e?n:!1===e?o:"(if (".concat(e,") { ").concat(n," } else { ").concat(o," })")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.a)("/",(function(t,e){return t/e}));e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"intImportRef",(function(){return i}));var o=n(6),a=n(2),r=n(14),i=Object(r.b)("mo:base/Int"),c={title:"(a // b)",category:o.l,topRight:"result",inputs:[{key:"left",title:"a",type:a.o},{key:"right",title:"b",type:a.o}],outputs:[{key:"result",type:a.o,toMotoko:function(t){var e=t.left,n=t.right;return"".concat(i,".div(").concat(e,", ").concat(n,")")}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(2),r=n(12),i=n(6),c=n(70),u=Object(o.b)({info:"Invoke a function in this project",title:"Call Function",category:i.i,icon:r.r,computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"functionNode");if(n){var o=e.compilers.motoko.getInput(n,"name"),a=e.compilers.node.getInput(n,"params").map((function(t){return e.compilers.motoko.getInput(t,"name")}));return o&&"".concat(o,"(").concat(a.join(", "),")")}},inputs:[{key:"args",type:a.D,multi:!0}],outputs:[{key:"value",type:a.D,inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"functionNode");if(o)return Object(c.getFunctionReturnType)(o,n.editor)},toMotoko:function(t,e,n){var o=t.args,a=n.editor.compilers.node.getInput(e,"functionNode");if(a){var r=n.getInput(a,"name");if(r)return"".concat(r,"(").concat(o.join(", "),")")}}}],controls:[{key:"functionNode",type:a.t.withMeta({block:"Function"})}]},(function(t,e,n){var o=t.functionNode,a=t.args,r=n.getInput(o,"name");if(r)return"ignore ".concat(r,"(").concat(a.join(", "),");")}));e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(80),i={title:"Method",info:"Define a callable method for the smart contract",category:a.i,icon:r.a,topRight:"body",computeTitle:function(t,e){var n,o=e.compilers.motoko.getInput(t,"name"),a=e.compilers.motoko.getInputArgs(t),r=a.params,i=a.body,c=null===(n=e.compilers.type.getInput(t,"body"))||void 0===n?void 0:n.generics[0];if(o||r.length||i)return"".concat(o||"","(").concat(r.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"Return",connections:[{from:"body",to:"statement"}]}],inputs:[{key:"name",type:o.n},{key:"params",type:o.w,multi:!0},{key:"body",type:o.j,optional:!0}],controls:[{key:"query",type:o.g}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),r=Object(o.a)({title:"Boolean"},a.g);e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),r=n(2),i=n(12),c={title:"Custom Type",category:a.o,topRight:"value",icon:i.q,hidden:!0,inputs:[{key:"reference",type:r.y},{key:"generics",type:r.B.of(r.D),multi:!0}],outputs:[{key:"value",type:r.B.of(r.i),inferType:function(t,e,n){var a=n.editor.compilers.motoko.getInput(e,"reference"),i=n.editor.compilers.type.getInput(e,"generics");if(a)return r.i.of.apply(r.i,Object(o.a)(i)).withMeta({name:a})}}]};e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),r=Object(o.a)({title:"Float"},a.k);e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Name",icon:n(12).m,topRight:"value",outputs:[{key:"value",type:o.n,control:!0}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),r=Object(o.a)({title:"Integer"},a.o);e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),r=Object(o.a)({title:"Natural Number"},a.s);e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),r={title:"Pair",category:o.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"Pair ".concat(e.compilers.motoko.getTypeString(n))},inputs:[{key:"left",title:"a",type:a.D},{key:"right",title:"b",type:a.D}],outputs:[{key:"value",type:a.A.of(a.D,a.D),inferType:function(t){var e=t.left,n=t.right;return a.A.of(e,n)},toMotoko:function(t){var e=t.left,n=t.right;return"(".concat(e,", ").concat(n,")")}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),r={title:"Pair of Types",category:o.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&e.compilers.motoko.getTypeString(n)},inputs:[{key:"left",title:"a",type:a.B.of(a.D)},{key:"right",title:"b",type:a.B.of(a.D)}],outputs:[{key:"value",type:a.B.of(a.A.of(a.D,a.D)),inferType:function(t){var e=t.left,n=t.right;return a.A.of(e,n)}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(37),a=n(2),r=Object(o.a)({title:"Text"},a.z,JSON.stringify);e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),r=n(2),i={title:"Tuple",category:a.k,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"Tuple ".concat(e.compilers.motoko.getTypeString(n))},inputs:[{key:"inputs",type:r.D,multi:!0}],outputs:[{key:"value",type:r.A,inferType:function(t){var e=t.inputs;return r.A.of.apply(r.A,Object(o.a)(e))},toMotoko:function(t){var e=t.inputs;return"(".concat(e.join(", "),")")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(13),a=n(6),r=n(2),i={title:"Tuple of Types",category:a.o,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&e.compilers.motoko.getTypeString(n)},inputs:[{key:"types",type:r.B.of(r.D),multi:!0}],outputs:[{key:"value",type:r.B.of(r.A),inferType:function(t){var e=t.types;return r.A.of.apply(r.A,Object(o.a)(e))}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(6),a=n(2),r={title:"Type",category:o.o,topRight:"value",outputs:[{key:"value",type:a.B.of(a.D),control:!0,inferType:function(t){return t.value}}]};e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(2),r=Object(o.b)({title:"while() {}",info:"Repeat while the condition is true",inputs:[{key:"condition",type:a.g},{key:"loop",type:a.j,optional:!0}]},(function(t){var e=t.condition,n=t.loop;return"while (".concat(e,") { ").concat(null!==n&&void 0!==n?n:""," };")}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(27),i={title:"Get (Map)",category:a.b,icon:r.stateReadIcon,topRight:"value",inputs:[{key:"map",type:o.p},{key:"key",type:o.D}],outputs:[{key:"value",type:o.v.of(o.D),inferType:function(t){var e=t.map;if(o.p.isSubtype(e))return o.v.of(e.generics[1])},toMotoko:function(t){var e=t.map,n=t.key;return"".concat(e,".get(").concat(n,")")}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(27),c=Object(a.b)({title:"Put (Map)",category:r.b,icon:i.stateWriteIcon,inputs:[{key:"map",type:o.p},{key:"key",type:o.D},{key:"value",type:o.D}]},(function(t){var e=t.map,n=t.key,o=t.value;return"".concat(e,".put(").concat(n,", ").concat(o,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(12),c=Object(a.b)({title:"Remove (Map)",category:r.b,icon:i.f,inputs:[{key:"map",type:o.p},{key:"key",type:o.D}]},(function(t){var e=t.map,n=t.key;return"".concat(e,".remove(").concat(n,");")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)(a.k,"*",(function(t,e){return t*e}));e.default=r},function(t,e,n){"use strict";n.r(e),n.d(e,"hashMapImportRef",(function(){return i})),n.d(e,"textImportRef",(function(){return c}));var o=n(2),a=n(14),r=n(6),i=Object(a.b)("mo:base/HashMap"),c=Object(a.b)("mo:base/Text"),u={title:"Create Map",category:r.b,icon:r.b.data.icon,topRight:"value",computeTitle:function(t,e){var n=e.compilers.type.getOutput(t,"value");return n&&"new HashMap<".concat(e.compilers.motoko.getTypeString(n.generics[0]),", ").concat(e.compilers.motoko.getTypeString(n.generics[1]),">")},inputs:[{key:"keyType",type:o.B.of(o.z)},{key:"valueType",type:o.B.of(o.D)}],outputs:[{key:"value",type:o.p,inferType:function(t){var e=t.valueType;return o.p.of(o.z,e)},toMotoko:function(t,e,n){var o=n.editor.compilers.type.getInputArgs(e).valueType,a=n.getTypeString(o);return"".concat(i,".HashMap<Text, ").concat(a,">(0, ").concat(c,".equal, ").concat(c,".hash)")}}]};e.default=u},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.d)(a.g,"not",(function(t){return!t}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a={category:n(6).k,topRight:"value",outputs:[{key:"value",type:o.u,toMotoko:function(){return"null"}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Wrap Optional (?a)",info:"Create an optional version of the input value",category:n(6).l,inputs:[{key:"input",title:"Value",type:o.D}],outputs:[{key:"result",type:o.v,inferType:function(t){var e=t.input;return o.v.of(e)},toMotoko:function(t){var e=t.input;return"(?".concat(e,")")}},{key:"null",type:o.v,inferType:function(t){var e=t.input;return o.v.of(e)},toMotoko:function(t){t.input;return"null"}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(2),r=n(6),i=n(14),c=Object(o.b)({title:"Unwrap Optional",info:"Run different logic depending on whether an Optional value is null",category:r.e,inputs:[{key:"input",type:a.v},{key:"valueCase",title:"Value",type:a.j,optional:!0},{key:"nullCase",title:"Null",type:a.j,optional:!0}],outputs:[{key:"value",type:a.D,inferType:function(t){return t.input},toMotoko:function(t,e){t.input;return Object(i.c)(e)}}]},(function(t,e){var n=t.input,o=t.valueCase,a=t.nullCase;if("null"===String(n))return a;var r=o?"case (?".concat(Object(i.c)(e),") {").concat(o,"};"):"",c=a?"case null {".concat(a,"};"):"";return"switch (".concat(n,") { ").concat(r).concat(c&&" "+c," };")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)(a.g,"or",(function(t,e){return t||e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a={info:"An input parameter to a class or function",topLeft:"param",topRight:"value",category:n(6).m,computeTitle:function(t,e){var n=e.compilers.motoko.getInput(t,"name"),o=e.compilers.type.getInput(t,"type");return n&&"".concat(n," : ").concat(o?e.compilers.motoko.getTypeString(o):"Any")},inputs:[{key:"name",type:o.n},{key:"type",type:o.B.of(o.D)}],outputs:[{key:"param",type:o.w,toMotoko:function(t,e,n){var o=t.name,a=t.type,r=n.getTypeString(a)||"Any";return"".concat(o," : ").concat(r)}},{key:"value",type:o.D,toMotoko:function(t){return t.name},inferType:function(t){return t.type}}]};e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"getQueryReturnType",(function(){return u}));var o=n(2),a=n(32),r=n(6),i=n(14),c=o.C;function u(t,e){var n=e.compilers.type.getInput(t,"body")||c;return"public"===e.compilers.control.getInput(t,"visibility")&&(n=o.f.of(n)),n}var s=Object(a.b)({info:"Return a value",category:r.i,topRight:"body",global:!0,computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.motoko.getInputArgs(t),r=o.params,i=o.body,c=u(t,e);if(n||r.length||i)return"".concat(n||"","(").concat(r.join(", "),")").concat(c?" : "+e.compilers.motoko.getTypeString(c):"")},shortcuts:[{block:"FunctionCall",nodeKey:"functionNode"},{block:"Return",connections:[{from:"body",to:"statement"}]}],inputs:[{key:"params",type:o.w,multi:!0},{key:"body",type:o.D,optional:!0}],outputs:[{key:"caller",type:o.x,toMotoko:function(t,e,n){return"".concat(Object(i.c)(e),".caller")}}],controls:[Object(a.c)(),{key:"query",type:o.g}]},{toMotoko:function(t,e,n){var o=t.name,a=t.visibility,r=t.params,c=t.body,s=e.outputs.get("caller").connections.length,p=["system"!==a&&a,!!s&&"shared"].filter((function(t){return t})).join(" "),l=u(e,n.editor),d=n.getTypeString(l);return[p,s?Object(i.c)(e):"","query func ".concat(o||"","(").concat(r.join(", "),")").concat("()"!==d?" : ".concat(d):""),"{ ".concat(c||""," };")]}});e.default=s},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(12),r=n(14),i={title:"Import Reference",icon:a.m,topRight:"value",outputs:[{key:"value",type:o.y,toMotoko:function(t){var e=t.path;return Object(r.b)(e)}}],controls:[{key:"path",type:o.z,config:{validation:{minLength:1}}}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(21),r=n(6),i=n(12),c=Object(a.a)({info:"End a function's execution path",category:r.i,icon:i.c,inputs:[{key:"value",type:o.D,optional:!0}]},{inferType:function(t){var e=t.value;return o.j.of(e||o.C)},toMotoko:function(t){var e=t.value;return"return".concat(e?" "+e:"",";")}});e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(27),i={title:"Read State",category:a.n,icon:r.stateReadIcon,topRight:"value",outputs:[{key:"value",type:o.D,inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"initialValue")},toMotoko:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"stateNode");if(o)return n.getInput(o,"name")}}],controls:[{key:"stateNode",type:o.t.withMeta({block:"State"})}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(6),r=n(2),i=n(27),c=Object(o.b)({title:"Write State",category:a.n,icon:i.stateWriteIcon,inputs:[{key:"value",type:"Value"}],controls:[{key:"stateNode",type:r.t.withMeta({block:"State"})}]},(function(t,e,n){var o=t.stateNode,a=t.value,r=n.getInput(o,"name");if(r)return"".concat(r," := ").concat(a,";")}));e.default=c},function(t,e,n){"use strict";n.r(e);var o=n(18),a=Object(o.a)("-",(function(t,e){return t-e}));e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(18),a=n(2),r=Object(o.b)(a.z,"#",(function(t,e){return t||e}));e.default=r},function(t,e,n){"use strict";n.r(e);var o=n(2),a={title:"Length (Text)",icon:n(12).w,inputs:[{key:"text",type:o.z}],outputs:[{key:"value",type:o.s,toMotoko:function(t){var e=t.text;return"".concat(e,".size()")}}]};e.default=a},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(32),r=n(6),i=Object(a.b)({title:"Named Type",info:"An actor-level type definition",category:r.o,topRight:"type",shortcuts:[{block:"TypeMemberReference",nodeKey:"typeNode"}],computeTitle:function(t,e){var n=Object(a.a)(t,e),o=e.compilers.type.getInput(t,"typeInput");return o&&"".concat(n||"(?)"," = ").concat(e.compilers.motoko.getTypeString(o))},inputs:[{key:"typeInput",title:"Definition",type:o.B.of(o.D)}],outputs:[{key:"type",type:o.B.of(o.D),inferType:function(t){var e=t.name,n=t.typeInput;if(!n.isAbstract())return n.withMeta({name:e})}}],controls:[Object(a.c)()]},{toMotoko:function(t){var e=t.visibility,n=t.name,o=t.typeInput,a=["system"!==e&&e].filter((function(t){return t})).join(" ");return"".concat(a&&a+" ","type ").concat(n," = ").concat(o,";")}});e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(2),a=n(6),r=n(12),i={title:"Type Reference",category:a.o,icon:r.b,topRight:"type",computeTitle:function(t,e){var n=e.compilers.node.getInput(t,"typeNode");if(console.log(n),n)return e.compilers.motoko.getInput(n,"name")},outputs:[{key:"type",type:o.B.of(o.D),inferType:function(t,e,n){var o=n.editor.compilers.node.getInput(e,"typeNode");if(o)return n.editor.compilers.types.getInput(o,"type")}}],controls:[{key:"typeNode",type:o.t.withMeta({block:"TypeMember"})}]};e.default=i},function(t,e,n){"use strict";n.r(e);var o=n(21),a=n(2),r=n(6),i=n(14),c=Object(o.b)({title:"Local Variable",info:"Store and retrieve data from within a function",category:r.m,inputs:[{key:"name",type:a.n,optional:!0},{key:"initialValue",type:a.D}],outputs:[{key:"value",type:a.D,inferType:function(t){return t.initialValue},toMotoko:function(t,e){return t.name||Object(i.c)(e)}}]},(function(t,e){var n=t.name,o=t.initialValue;return"var ".concat(n||Object(i.c)(e)," = ").concat(o,";")}));e.default=c},,,,function(t){t.exports=JSON.parse('{"name":"Echo","description":"Return the input argument to a function.","version":"blocks-webapp@0.1.0","nodes":{"282":{"id":282,"data":{"visibility":"public","name":"say","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":875,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":284,"input":"param","data":{}}]},"body":{"connections":[{"node":285,"input":"statement","data":{}}]}},"position":[736,288],"name":"Function"},"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":875,"input":"actor","data":{}}]}},"position":[224,288],"name":"CompileMotoko"},"284":{"id":284,"data":{"name":"phrase","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":282,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":285,"input":"value","data":{}}]}},"position":[960,384],"name":"Parameter"},"285":{"id":285,"data":{},"inputs":{"value":{"connections":[{"node":284,"output":"value","data":{}}]},"statement":{"connections":[{"node":282,"output":"body","data":{}}]}},"outputs":{},"position":[1184,288],"name":"Return"},"321":{"id":321,"data":{"functionNode":282},"inputs":{"args":{"connections":[{"node":322,"output":"value","data":{}}]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":324,"input":"input","data":{}}]}},"position":[800,704],"name":"FunctionCall"},"322":{"id":322,"data":{"value":"Hello World!"},"inputs":{},"outputs":{"value":{"connections":[{"node":321,"input":"args","data":{}}]}},"position":[576,768],"name":"LiteralText"},"324":{"id":324,"data":{},"inputs":{"input":{"connections":[{"node":321,"output":"value","data":{}}]}},"outputs":{"reversed":{"connections":[]}},"position":[1024,768],"name":"CompileMotoko"},"875":{"id":875,"data":{"name":"Echo"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":282,"input":"member","data":{}}]}},"position":[480,288],"name":"Actor"}}}')},function(t){t.exports=JSON.parse('{"name":"Counter","description":"Get, set, and increment a state variable.","version":"blocks-webapp@0.1.0","nodes":{"353":{"id":353,"data":{"name":"Counter"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":416,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":354,"input":"member","data":{}},{"node":355,"input":"member","data":{}},{"node":374,"input":"member","data":{}},{"node":375,"input":"member","data":{}}]}},"position":[544,384],"name":"Actor"},"354":{"id":354,"data":{"name":"count","stable":true},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":415,"output":"value","data":{}}]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[800,128],"name":"State"},"355":{"id":355,"data":{"visibility":"public","name":"get","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":358,"input":"statement","data":{}}]}},"position":[800,416],"name":"Function"},"357":{"id":357,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":358,"input":"value","data":{}}]}},"position":[1024,448],"name":"StateRead"},"358":{"id":358,"data":{},"inputs":{"value":{"connections":[{"node":357,"output":"value","data":{}}]},"statement":{"connections":[{"node":355,"output":"body","data":{}}]}},"outputs":{},"position":[1248,416],"name":"Return"},"374":{"id":374,"data":{"visibility":"public","name":"set"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":378,"input":"param","data":{}}]},"body":{"connections":[{"node":377,"input":"before","data":{}}]}},"position":[800,736],"name":"Function"},"375":{"id":375,"data":{"visibility":"public","name":"inc"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":353,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":417,"input":"before","data":{}}]}},"position":[800,1056],"name":"Function"},"377":{"id":377,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":378,"output":"value","data":{}}]},"before":{"connections":[{"node":374,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1248,736],"name":"StateUpdate"},"378":{"id":378,"data":{"type":{"name":"Nat","generics":[]},"name":"n"},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":374,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":377,"input":"value","data":{}}]}},"position":[1024,832],"name":"Parameter"},"415":{"id":415,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":354,"input":"initialValue","data":{}}]}},"position":[544,224],"name":"LiteralNat"},"416":{"id":416,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":353,"input":"actor","data":{}}]}},"position":[256,384],"name":"CompileMotoko"},"417":{"id":417,"data":{"stateNode":"354"},"inputs":{"value":{"connections":[{"node":419,"output":"result","data":{}}]},"before":{"connections":[{"node":375,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1440,1056],"name":"StateUpdate"},"418":{"id":418,"data":{"stateNode":354},"inputs":{},"outputs":{"value":{"connections":[{"node":419,"input":"left","data":{}}]}},"position":[1024,1120],"name":"StateRead"},"419":{"id":419,"data":{"right":"1"},"inputs":{"left":{"connections":[{"node":418,"output":"value","data":{}}]},"right":{"connections":[]}},"outputs":{"result":{"connections":[{"node":417,"input":"value","data":{}}]}},"position":[1232,1152],"name":"Add"}}}')},function(t){t.exports=JSON.parse('{"name":"Calculator","description":"Add, subtract, multiply, and divide integers.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[416,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Calculator"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":330,"input":"member","data":{}},{"node":331,"input":"member","data":{}},{"node":335,"input":"member","data":{}},{"node":336,"input":"member","data":{}},{"node":337,"input":"member","data":{}},{"node":339,"input":"member","data":{}}]}},"position":[640,288],"name":"Actor"},"330":{"id":330,"data":{"name":"x","stable":true},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":332,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[{"node":455,"input":"value","data":{}}]}},"position":[928,0],"name":"State"},"331":{"id":331,"data":{"visibility":"public","name":"clear"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":333,"input":"before","data":{}}]}},"position":[928,256],"name":"Function"},"332":{"id":332,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":330,"input":"initialValue","data":{}}]}},"position":[672,0],"name":"LiteralInt"},"333":{"id":333,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":334,"output":"value","data":{}}]},"before":{"connections":[{"node":331,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1376,256],"name":"StateUpdate"},"334":{"id":334,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":333,"input":"value","data":{}}]}},"position":[1168,320],"name":"LiteralInt"},"335":{"id":335,"data":{"visibility":"public","name":"add"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":340,"input":"before","data":{}}]}},"position":[928,544],"name":"Function"},"336":{"id":336,"data":{"visibility":"public","name":"subtract"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":345,"input":"before","data":{}}]}},"position":[928,832],"name":"Function"},"337":{"id":337,"data":{"visibility":"public","name":"multiply"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":346,"input":"before","data":{}}]}},"position":[928,1120],"name":"Function"},"339":{"id":339,"data":{"visibility":"public","name":"divide"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":344,"input":"param","data":{}}]},"body":{"connections":[{"node":1188,"input":"before","data":{}}]}},"position":[928,1408],"name":"Function"},"340":{"id":340,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":343,"output":"result","data":{}}]},"before":{"connections":[{"node":335,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,544],"name":"StateUpdate"},"343":{"id":343,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":340,"input":"value","data":{}}]}},"position":[1616,608],"name":"Add"},"344":{"id":344,"data":{"name":"y","type":{"name":"Int","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":335,"output":"params","data":{}},{"node":336,"output":"params","data":{}},{"node":337,"output":"params","data":{}},{"node":339,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":343,"input":"right","data":{}},{"node":348,"input":"right","data":{}},{"node":349,"input":"right","data":{}},{"node":984,"input":"left","data":{}},{"node":1102,"input":"right","data":{}}]}},"position":[1184,992],"name":"Parameter"},"345":{"id":345,"data":{"stateNode":330},"inputs":{"value":{"connections":[{"node":348,"output":"result","data":{}}]},"before":{"connections":[{"node":336,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,832],"name":"StateUpdate"},"346":{"id":346,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":349,"output":"result","data":{}}]},"before":{"connections":[{"node":337,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":455,"input":"statement","data":{}}]}},"position":[1824,1120],"name":"StateUpdate"},"348":{"id":348,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":345,"input":"value","data":{}}]}},"position":[1616,896],"name":"Subtract"},"349":{"id":349,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":346,"input":"value","data":{}}]}},"position":[1616,1184],"name":"Multiply"},"351":{"id":351,"data":{"stateNode":330},"inputs":{},"outputs":{"value":{"connections":[{"node":343,"input":"left","data":{}},{"node":348,"input":"left","data":{}},{"node":349,"input":"left","data":{}},{"node":1102,"input":"left","data":{}}]}},"position":[1184,864],"name":"StateRead"},"455":{"id":455,"data":{},"inputs":{"value":{"connections":[{"node":330,"output":"value","data":{}}]},"statement":{"connections":[{"node":333,"output":"after","data":{}},{"node":340,"output":"after","data":{}},{"node":345,"output":"after","data":{}},{"node":346,"output":"after","data":{}}]}},"outputs":{},"position":[2336,-32],"name":"Return"},"871":{"id":871,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":984,"input":"right","data":{}}]}},"position":[1376,1504],"name":"LiteralInt"},"902":{"id":902,"data":{},"inputs":{"input":{"connections":[{"node":1102,"output":"result","data":{}}]}},"outputs":{"result":{"connections":[{"node":1159,"input":"value","data":{}}]},"null":{"connections":[{"node":1100,"input":"value","data":{}}]}},"position":[1856,1632],"name":"Optional"},"984":{"id":984,"data":{},"inputs":{"left":{"connections":[{"node":344,"output":"value","data":{}}]},"right":{"connections":[{"node":871,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":1188,"input":"condition","data":{}}]}},"position":[1616,1440],"name":"CompareNotEqual"},"1100":{"id":1100,"data":{},"inputs":{"value":{"connections":[{"node":902,"output":"null","data":{}}]},"statement":{"connections":[{"node":1188,"output":"falseCase","data":{}}]}},"outputs":{},"position":[2208,1744],"name":"Return"},"1101":{"id":1101,"data":{"stateNode":"330"},"inputs":{"value":{"connections":[{"node":1102,"output":"result","data":{}}]},"before":{"connections":[{"node":1188,"output":"trueCase","data":{}}]}},"outputs":{"after":{"connections":[{"node":1159,"input":"statement","data":{}}]}},"position":[2208,1552],"name":"StateUpdate"},"1102":{"id":1102,"data":{},"inputs":{"left":{"connections":[{"node":351,"output":"value","data":{}}]},"right":{"connections":[{"node":344,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":1101,"input":"value","data":{}},{"node":902,"input":"input","data":{}}]}},"position":[1616,1600],"name":"DivideInt"},"1159":{"id":1159,"data":{},"inputs":{"value":{"connections":[{"node":902,"output":"result","data":{}}]},"statement":{"connections":[{"node":1101,"output":"after","data":{}}]}},"outputs":{},"position":[2432,1472],"name":"Return"},"1188":{"id":1188,"data":{},"inputs":{"condition":{"connections":[{"node":984,"output":"result","data":{}}]},"before":{"connections":[{"node":339,"output":"body","data":{}}]}},"outputs":{"trueCase":{"connections":[{"node":1101,"input":"before","data":{}}]},"falseCase":{"connections":[{"node":1100,"input":"statement","data":{}}]},"after":{"connections":[]}},"position":[1984,1408],"name":"Conditional"}}}')},function(t){t.exports=JSON.parse('{"name":"Who am I?","description":"Access the caller of functions and actors.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":330,"input":"actor","data":{}}]}},"position":[224,448],"name":"CompileMotoko"},"328":{"id":328,"data":{"visibility":"public","name":"argument"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":336,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,32],"name":"Function"},"329":{"id":329,"data":{"visibility":"public","name":"whoami"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":339,"input":"statement","data":{}}]},"caller":{"connections":[{"node":339,"input":"value","data":{}}]}},"position":[960,352],"name":"Function"},"330":{"id":330,"data":{"name":"WhoAmI","undefined":""},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":334,"input":"member","data":{}},{"node":328,"input":"member","data":{}},{"node":329,"input":"member","data":{}},{"node":332,"input":"member","data":{}},{"node":333,"input":"member","data":{}}]},"params":{"connections":[{"node":331,"input":"param","data":{}}]},"caller":{"connections":[{"node":335,"input":"value","data":{}}]}},"position":[480,448],"name":"ActorClass"},"331":{"id":331,"data":{"name":"someone","type":{"name":"Principal","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":330,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":336,"input":"value","data":{}}]}},"position":[480,304],"name":"Parameter"},"332":{"id":332,"data":{"visibility":"public","name":"id"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":338,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,672],"name":"Function"},"333":{"id":333,"data":{"visibility":"public","name":"idQuick"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":337,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,992],"name":"Function"},"334":{"id":334,"data":{"visibility":"public","name":"installer","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":330,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":335,"input":"statement","data":{}}]},"caller":{"connections":[]}},"position":[960,-288],"name":"Function"},"335":{"id":335,"data":{},"inputs":{"value":{"connections":[{"node":330,"output":"caller","data":{}}]},"statement":{"connections":[{"node":334,"output":"body","data":{}}]}},"outputs":{},"position":[1504,-288],"name":"Return"},"336":{"id":336,"data":{},"inputs":{"value":{"connections":[{"node":331,"output":"value","data":{}}]},"statement":{"connections":[{"node":328,"output":"body","data":{}}]}},"outputs":{},"position":[1504,32],"name":"Return"},"337":{"id":337,"data":{},"inputs":{"value":{"connections":[{"node":341,"output":"result","data":{}}]},"statement":{"connections":[{"node":333,"output":"body","data":{}}]}},"outputs":{},"position":[1504,992],"name":"Return"},"338":{"id":338,"data":{},"inputs":{"value":{"connections":[{"node":343,"output":"result","data":{}}]},"statement":{"connections":[{"node":332,"output":"body","data":{}}]}},"outputs":{},"position":[1504,672],"name":"Return"},"339":{"id":339,"data":{},"inputs":{"value":{"connections":[{"node":329,"output":"caller","data":{}}]},"statement":{"connections":[{"node":329,"output":"body","data":{}}]}},"outputs":{},"position":[1504,352],"name":"Return"},"340":{"id":340,"data":{"functionNode":329},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":343,"input":"input","data":{}}]}},"position":[1264,704],"name":"FunctionCall"},"341":{"id":341,"data":{"expression":"{0}.fromActor(this)","type":{"name":"Principal","generics":[]}},"inputs":{"inputs":{"connections":[{"node":342,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":337,"input":"value","data":{}}]}},"position":[1248,1104],"name":"CodeValue"},"342":{"id":342,"data":{"path":"mo:base/Principal"},"inputs":{},"outputs":{"value":{"connections":[{"node":341,"input":"inputs","data":{}}]}},"position":[1024,1296],"name":"ReferenceImport"},"343":{"id":343,"data":{},"inputs":{"input":{"connections":[{"node":340,"output":"value","data":{}}]}},"outputs":{"result":{"connections":[{"node":338,"input":"value","data":{}}]}},"position":[1504,768],"name":"Await"}}}')},function(t){t.exports=JSON.parse('{"name":"Phone Book","description":"Add tuples to persistent key-value storage.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":326,"input":"member","data":{}},{"node":429,"input":"member","data":{}},{"node":428,"input":"member","data":{}}]}},"position":[704,288],"name":"Actor"},"326":{"id":326,"data":{"name":"phonebook"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":327,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[960,0],"name":"State"},"327":{"id":327,"data":{"keyType":{"name":"Text","generics":[]},"valueType":{"name":"Text","generics":[]}},"inputs":{"keyType":{"connections":[]},"valueType":{"connections":[{"node":467,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":326,"input":"initialValue","data":{}}]}},"position":[704,0],"name":"NewTextHashMap"},"428":{"id":428,"data":{"visibility":"public","name":"insert"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":432,"input":"param","data":{}},{"node":433,"input":"param","data":{}},{"node":489,"input":"param","data":{}}]},"body":{"connections":[{"node":430,"input":"before","data":{}}]}},"position":[960,608],"name":"Function"},"429":{"id":429,"data":{"visibility":"public","name":"find","query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":432,"input":"param","data":{}}]},"body":{"connections":[{"node":450,"input":"statement","data":{}}]}},"position":[960,288],"name":"Function"},"430":{"id":430,"data":{},"inputs":{"map":{"connections":[{"node":431,"output":"value","data":{}}]},"key":{"connections":[{"node":432,"output":"value","data":{}}]},"value":{"connections":[{"node":522,"output":"value","data":{}}]},"before":{"connections":[{"node":428,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1632,608],"name":"MapPut"},"431":{"id":431,"data":{"stateNode":326},"inputs":{},"outputs":{"value":{"connections":[{"node":451,"input":"map","data":{}},{"node":430,"input":"map","data":{}}]}},"position":[1216,320],"name":"StateRead"},"432":{"id":432,"data":{"name":"name","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":429,"output":"params","data":{}},{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":451,"input":"key","data":{}},{"node":430,"input":"key","data":{}}]}},"position":[1184,480],"name":"Parameter"},"433":{"id":433,"data":{"name":"phone","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":522,"input":"inputs","data":{}}]}},"position":[1184,704],"name":"Parameter"},"450":{"id":450,"data":{},"inputs":{"value":{"connections":[{"node":451,"output":"value","data":{}}]},"statement":{"connections":[{"node":429,"output":"body","data":{}}]}},"outputs":{},"position":[1840,288],"name":"Return"},"451":{"id":451,"data":{},"inputs":{"map":{"connections":[{"node":431,"output":"value","data":{}}]},"key":{"connections":[{"node":432,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":450,"input":"value","data":{}}]}},"position":[1632,352],"name":"MapGet"},"467":{"id":467,"data":{"left":{"name":"Text","generics":[]},"right":{"name":"Text","generics":[]}},"inputs":{"left":{"connections":[]},"right":{"connections":[]}},"outputs":{"value":{"connections":[{"node":327,"input":"valueType","data":{}}]}},"position":[448,0],"name":"LiteralPairType"},"489":{"id":489,"data":{"name":"address","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":428,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":522,"input":"inputs","data":{}}]}},"position":[1184,848],"name":"Parameter"},"522":{"id":522,"data":{},"inputs":{"inputs":{"connections":[{"node":433,"output":"value","data":{}},{"node":489,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":430,"input":"value","data":{}}]}},"position":[1408,736],"name":"LiteralTuple"}}}')},function(t){t.exports=JSON.parse('{"name":"To-Do List","description":"Create, display, and complete a list of tasks.","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[{"node":761,"input":"member","data":{}},{"node":567,"input":"member","data":{}},{"node":647,"input":"member","data":{}},{"node":564,"input":"member","data":{}},{"node":563,"input":"member","data":{}},{"node":562,"input":"member","data":{}},{"node":565,"input":"member","data":{}},{"node":578,"input":"member","data":{}}]}},"position":[704,288],"name":"Actor"},"562":{"id":562,"data":{"visibility":"public","name":"show","asyncKind":"query"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":579,"input":"statement","data":{}}]}},"position":[992,448],"name":"Function"},"563":{"id":563,"data":{"visibility":"public","name":"clear","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":646,"input":"before","data":{}}]}},"position":[992,128],"name":"Function"},"564":{"id":564,"data":{"name":"toDoList"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":694,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[992,-160],"name":"State"},"565":{"id":565,"data":{"visibility":"public","name":"add","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":759,"input":"param","data":{}}]},"body":{"connections":[{"node":828,"input":"before","data":{}}]}},"position":[992,768],"name":"Function"},"566":{"id":566,"data":{},"inputs":{"itemType":{"connections":[{"node":567,"output":"type","data":{}}]},"items":{"connections":[]}},"outputs":{"value":{"connections":[{"node":662,"input":"value","data":{}}]}},"position":[1248,-144],"name":"NewArray"},"567":{"id":567,"data":{"visibility":"public","name":"ToDo"},"inputs":{"name":{"connections":[]},"typeInput":{"connections":[{"node":568,"output":"result","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"type":{"connections":[{"node":566,"input":"itemType","data":{}}]}},"position":[992,-704],"name":"TypeMember"},"568":{"id":568,"data":{"expression":"{\\r\\n    id: Nat;\\r\\n    description: Text;\\r\\n    completed: Bool;\\r\\n}","type":{"name":"Custom","generics":[]}},"inputs":{"inputs":{"connections":[]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":567,"input":"typeInput","data":{}}]}},"position":[448,-720],"name":"CodeType"},"578":{"id":578,"data":{"visibility":"public","name":"complete","asyncKind":"async"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[{"node":763,"input":"param","data":{}}]},"body":{"connections":[{"node":766,"input":"before","data":{}}]}},"position":[992,1088],"name":"Function"},"579":{"id":579,"data":{},"inputs":{"value":{"connections":[{"node":831,"output":"result","data":{}}]},"statement":{"connections":[{"node":562,"output":"body","data":{}}]}},"outputs":{},"position":[2080,448],"name":"Return"},"646":{"id":646,"data":{"stateNode":"564"},"inputs":{"value":{"connections":[{"node":769,"output":"value","data":{}}]},"before":{"connections":[{"node":563,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[1472,128],"name":"StateUpdate"},"647":{"id":647,"data":{"visibility":"private","name":"newToDoList"},"inputs":{"name":{"connections":[]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"params":{"connections":[]},"body":{"connections":[{"node":662,"input":"statement","data":{}}]}},"position":[992,-480],"name":"Function"},"662":{"id":662,"data":{},"inputs":{"value":{"connections":[{"node":566,"output":"value","data":{}}]},"statement":{"connections":[{"node":647,"output":"body","data":{}}]}},"outputs":{},"position":[1472,-192],"name":"Return"},"677":{"id":677,"data":{"stateNode":564},"inputs":{},"outputs":{"value":{"connections":[{"node":831,"input":"inputs","data":{}}]}},"position":[1248,480],"name":"StateRead"},"694":{"id":694,"data":{"functionNode":"647"},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":564,"input":"initialValue","data":{}}]}},"position":[704,-96],"name":"FunctionCall"},"759":{"id":759,"data":{"name":"description","type":{"name":"Text","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":565,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":773,"input":"inputs","data":{}}]}},"position":[1248,864],"name":"Parameter"},"761":{"id":761,"data":{"name":"nextId"},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":762,"output":"value","data":{}}]},"member":{"connections":[{"node":325,"output":"members","data":{}}]}},"outputs":{"value":{"connections":[]}},"position":[992,-992],"name":"State"},"762":{"id":762,"data":{},"inputs":{},"outputs":{"value":{"connections":[{"node":761,"input":"initialValue","data":{}}]}},"position":[768,-928],"name":"LiteralNat"},"763":{"id":763,"data":{"name":"id","type":{"name":"Nat","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":578,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":765,"input":"inputs","data":{}}]}},"position":[1248,1184],"name":"Parameter"},"765":{"id":765,"data":{"expression":"Array.map<ToDo, ToDo>({1}, func (todo : ToDo) : ToDo {\\r\\n  if (todo.id == {0}) {\\r\\n    return {\\r\\n      {0} = todo.id;\\r\\n      description = todo.description;\\r\\n      completed = true;\\r\\n    };\\r\\n  };\\r\\n  todo\\r\\n})","type":{"name":"MutableArray","generics":[{"name":"Custom","generics":[]}]}},"inputs":{"inputs":{"connections":[{"node":763,"output":"value","data":{}},{"node":830,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":766,"input":"value","data":{}}]}},"position":[1536,1152],"name":"CodeValue"},"766":{"id":766,"data":{"stateNode":564},"inputs":{"value":{"connections":[{"node":765,"output":"result","data":{}}]},"before":{"connections":[{"node":578,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[2080,1088],"name":"StateUpdate"},"769":{"id":769,"data":{"functionNode":647},"inputs":{"args":{"connections":[]},"before":{"connections":[]}},"outputs":{"after":{"connections":[]},"value":{"connections":[{"node":646,"input":"value","data":{}}]}},"position":[1248,160],"name":"FunctionCall"},"773":{"id":773,"data":{"type":{"name":"Custom","generics":[]},"expression":"let result: ToDo = {\\r\\n  id = nextId;\\r\\n  description = {0};\\r\\n  completed = false;\\r\\n};\\r\\nnextId += 1;\\r\\nresult"},"inputs":{"inputs":{"connections":[{"node":759,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":828,"input":"value","data":{}}]}},"position":[1536,800],"name":"CodeValue"},"828":{"id":828,"data":{},"inputs":{"array":{"connections":[{"node":829,"output":"value","data":{}}]},"value":{"connections":[{"node":773,"output":"result","data":{}}]},"before":{"connections":[{"node":565,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[2080,768],"name":"ArrayPrepend"},"829":{"id":829,"data":{"stateNode":"564"},"inputs":{},"outputs":{"value":{"connections":[{"node":828,"input":"array","data":{}}]}},"position":[1792,688],"name":"StateRead"},"830":{"id":830,"data":{"stateNode":564},"inputs":{},"outputs":{"value":{"connections":[{"node":765,"input":"inputs","data":{}}]}},"position":[1248,1328],"name":"StateRead"},"831":{"id":831,"data":{"type":{"name":"Text","generics":[]},"expression":"var output : Text = \\"\\\\n___TO-DOs___\\";\\r\\nfor (todo : ToDo in {0}.vals()) {\\r\\n  output #= \\"\\\\n(\\" # {1}.toText(todo.id) # \\") \\" # todo.description;\\r\\n  if (todo.completed) { output #= \\" \u2714\\"; };\\r\\n};\\r\\noutput"},"inputs":{"inputs":{"connections":[{"node":677,"output":"value","data":{}},{"node":1000,"output":"value","data":{}}]},"type":{"connections":[]}},"outputs":{"result":{"connections":[{"node":579,"input":"value","data":{}}]}},"position":[1536,352],"name":"CodeValue"},"1000":{"id":1000,"data":{"path":"mo:base/Nat"},"inputs":{},"outputs":{"value":{"connections":[{"node":831,"input":"inputs","data":{}}]}},"position":[1248,576],"name":"ReferenceImport"}}}')},,,function(t){t.exports=JSON.parse('{"name":"","description":"","version":"blocks-webapp@0.1.0","nodes":{"283":{"id":283,"data":{},"inputs":{"input":{"connections":[]}},"outputs":{"reversed":{"connections":[{"node":325,"input":"actor","data":{}}]}},"position":[480,288],"name":"CompileMotoko"},"325":{"id":325,"data":{"name":"Main"},"inputs":{"name":{"connections":[]},"actor":{"connections":[{"node":283,"output":"reversed","data":{}}]}},"outputs":{"members":{"connections":[]}},"position":[704,288],"name":"Actor"}}}')},,,,,function(t,e,n){"use strict";n.r(e);var o=n(1),a=n.n(o),r=n(29),i=n.n(r),c=(n(102),n(8)),u=n.n(c),s=n(26),p=n(4),l=n(30),d=n(10),f=n(22),m=(n(104),n(71)),y=n(77),b=n(13),v=n(7),g=n(3),j=["x","y","children","style","handleCloseMenu"];function h(t){var e=t.x,n=t.y,a=t.children,r=t.style,i=t.handleCloseMenu,c=Object(d.a)(t,j),u=Object(o.useMemo)((function(){return Object(p.a)({position:"absolute",left:e,top:n},r)}),[e,n,r]),s=Object(o.useCallback)((function(t){if(t){var e=function(t){return t.stopPropagation()};t.addEventListener("pointermove",e),t.addEventListener("mousemove",e),t.addEventListener("wheel",e)}}),[]),l=Object(o.useCallback)((function(t){if(t){var e=function(){var e=t.getBoundingClientRect().bottom-window.innerHeight;e>0&&(t.style.top="".concat(n-e,"px"))};e(),t.onresize=e}}),[n]);return Object(g.jsx)("div",Object(p.a)(Object(p.a)({className:"context-menu-screen",style:{position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"all"},ref:s,onKeyDown:function(t){return 27===t.keyCode&&i()},onMouseDown:function(){return i()}},c),{},{children:Object(g.jsx)("div",{className:"context-menu-container",style:u,ref:l,children:Object(g.jsx)("div",{className:"context-menu",children:a})})}))}var O=a.a.createContext(null),k=n(11),x=n.n(k);function w(t){var e=t.children,n=t.color;return Object(g.jsx)("span",{className:"context-menu-icon",style:{color:n},children:e})}var C=["icon","color","selected","onAction","children","style"];function T(t){var e=t.icon,n=t.color,o=t.selected,a=t.onAction,r=t.children,i=t.style,c=Object(d.a)(t,C);return Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:x()("context-menu-action",o&&"selected"),style:Object(p.a)({color:n,userSelect:"none"},i),onMouseDown:function(t){return 0===t.button&&a(t)}},c),{},{children:[e&&Object(g.jsx)(w,{children:e}),r]}))}function S(){var t=Object(o.useContext)(O).editor;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(T,{onAction:function(){return t.selected.each((function(e){return t.removeNode(e)}))},children:"Delete"})})}var N=n(12),L=n(44),M=n(34),I=["component"];function E(t){var e=t.component,n=Object(d.a)(t,I),o=e.block,r=null===o||void 0===o?void 0:o.category;return Object(M.a)(),(null===o||void 0===o?void 0:o.info)&&(n=Object(p.a)({"data-tip":o.info.endsWith(".")?o.info:"".concat(o.info,"."),"data-place":"right"},n)),Object(g.jsx)(T,Object(p.a)(Object(p.a)({icon:a.a.createElement((null===o||void 0===o?void 0:o.icon)||(null===r||void 0===r?void 0:r.data.icon)||N.v),color:null===r||void 0===r?void 0:r.data.color},n),{},{children:Object(L.a)(o)||e.name}))}var A=["value","onChange","onAction","onKeyDown","children"];function R(t){var e=t.value,n=t.onChange,a=t.onAction,r=t.onKeyDown,i=t.children,c=Object(d.a)(t,A),u=Object(o.useCallback)((function(t){t&&t.focus()}),[{}]),s=(r||a)&&function(t){r&&r(t),a&&"Enter"===t.key&&a()};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",Object(p.a)({type:"text",className:"context-menu-search",autoFocus:!0,ref:u,autoComplete:"blocks-search",value:e||"",onClick:function(t){return t.stopPropagation()},onChange:n&&function(t){return n(t.target.value)},onKeyDown:s},c)),Object(g.jsx)("div",{className:"context-menu-search-area",children:i})]})}function D(t){return JSON.parse(JSON.stringify(t))}function P(t,e){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(u.a.mark((function t(e,n){var o,a,r,i,c,s,p,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.data,a=n.meta,r=n.position,c=(i=void 0===r?{}:r).x,s=i.y,t.next=3,e.createNode(o?D(o):{});case 3:return p=t.sent,a&&(p.meta=Object.assign(D(a),p.meta)),l=[c,s],p.position[0]=l[0],p.position[1]=l[1],t.abrupt("return",p);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){var t=Object(o.useState)(""),e=Object(v.a)(t,2),n=e[0],a=e[1],r=Object(o.useState)(0),i=Object(v.a)(r,2),c=i[0],p=i[1],l=Object(o.useContext)(O),d=l.editor,f=l.mouse,m=l.context,y=function(t,e){var n=Object(b.a)(t.components).map((function(t){return t.name})).join("##");return Object(o.useMemo)((function(){return Object(b.a)(t.components.values()).filter((function(t){var e,n;return t&&"block"in t&&!(null===(e=t.block)||void 0===e?void 0:e.hidden)&&!(null===(n=t.block)||void 0===n?void 0:n.deprecated)})).map((function(t){return[e(t),t]})).sort((function(t,e){var n=Object(v.a)(t,1)[0],o=Object(v.a)(e,1)[0];if(Array.isArray(n)){for(var a=0;a<n.length;a++){var r="number"===typeof n[a]?n[a]-o[a]:n[a].localeCompare(o[a]);if(0!==r)return r}return 0}return n.localeCompare(o)})).map((function(t){return Object(v.a)(t,2)[1]}))}),[n])}(d,(function(t){var e,n;return[-((null===(e=t.block)||void 0===e?void 0:e.category.data.priority)||0),(null===(n=t.block)||void 0===n?void 0:n.category.root.name)||"",t.data.title||t.name]}));if(y=m?function(t,e,n){var o,a,r,i,c,u;if(!t&&!e)return n;var s=null===t||void 0===t||null===(o=(a=t.socket).findType)||void 0===o?void 0:o.call(a),p=null===e||void 0===e||null===(r=(i=e.socket).findType)||void 0===r?void 0:r.call(i);if((null===(c=s)||void 0===c?void 0:c.data.reversed)||(null===(u=p)||void 0===u?void 0:u.data.reversed)){var l=[p,s];s=l[0],p=l[1]}return n.filter((function(t){return(!s||t.block.outputs.some((function(t){return s.isSubtype(t.type)})))&&(!p||t.block.inputs.some((function(t){return p.isSubtype(t.type)||t.type.isSubtype(p)})))}))}(m.input,m.output,y):y.filter((function(t){return t.block.global})),c=Math.min(y.length-1,c),n){var j=n.toLowerCase();y=y.filter((function(t){var e;return(null===(e=t.keywords)||void 0===e?void 0:e.some((function(t){return t.toLowerCase().startsWith(j)})))||t.name.toLowerCase().startsWith(j)}))}function h(){return(h=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!y.length){t.next=3;break}return t.next=3,k(y[c]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=Object(o.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,r,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(""),d.trigger("hidecontextmenu"),t.next=4,P(e,{position:f});case 4:n=t.sent,d.addNode(n),m&&(o=m.input,r=m.output,o&&(i=Object(b.a)(n.outputs.values()).find((function(t){return o.socket.compatibleWith(t.socket)})),i&&d.connect(i,o)),r&&(c=Object(b.a)(n.inputs.values()).find((function(t){return t.socket.compatibleWith(r.socket)})),c&&d.connect(r,c)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[d,f,m]),x=y.map((function(t,e){return Object(g.jsx)(E,{component:t,selected:c===e,onAction:function(){return k(t)}},t.name)}));return m?Object(g.jsx)(R,{value:n,onChange:a,onKeyDown:function(t){38===t.keyCode&&p(Math.max(0,c-1)),40===t.keyCode&&p(c+1)},onAction:function(){return h.apply(this,arguments)},children:x}):x}var V=n(20);var _={name:"blocks-contextmenu",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.bind("hidecontextmenu"),t.bind("showcontextmenu");var n,o,a=e.offset?[e.offset.x,e.offset.y]:[-10,-10],r=Object(v.a)(a,2),c=r[0],u=r[1],s=null;t.on("hidecontextmenu",(function(){s&&(s.style.display="none")})),t.on(["click","contextmenu"],(function(){t.trigger("hidecontextmenu")})),t.on("contextmenu",(function(e){var o,a,r=e.e,p=e.node,l=e.context;if(null===(o=r.preventDefault)||void 0===o||o.call(r),null===(a=r.stopPropagation)||void 0===a||a.call(r),t.trigger("showcontextmenu",{e:r,node:p,context:l})){p&&(t.selected.contains(p)||t.selectNode(p));var d=[r.clientX,r.clientY],f=d[0],m=d[1];s||(s=document.createElement("div"),t.view.container.appendChild(s)),s.style.display="block",i.a.render(Object(g.jsx)(h,{x:f+c,y:m+u,handleCloseMenu:function(){return t.trigger("hidecontextmenu")},children:Object(g.jsx)(O.Provider,{value:{editor:t,mouse:n,node:p,context:l},children:p?Object(g.jsx)(S,{}):Object(g.jsx)(B,{})})}),s)}})),t.on("destroy",(function(){t.trigger("hidecontextmenu"),s&&(s.remove(),s=null)}));var p=!1,l=!1;t.view.container.addEventListener("pointermove",(function(t){return o=t})),t.on("mousemove",(function(t){n=t,p=!0})),t.on("connectionpick",(function(t){p=!1;var e=Object(b.a)(t.connections);setTimeout((function(){t.connections.length<e.length&&(l=!0)}))})),t.on("connectiondrop",(function(e){if(p)if(l)l=!1;else{var n=Object(b.a)(e.connections);setTimeout((function(){e.connections.length!==n.length||e.connections.some((function(t,e){return t.input!==n[e].input||t.output!==n[e].output}))||t.trigger("contextmenu",{e:o,context:{input:e instanceof V.d.Input?e:null,output:e instanceof V.d.Output?e:null}})}))}}))}},q=_,z=n(78),J=n.n(z),U=n(48),K=n(9),W=n(15),G=n(16),Z=n(17),H=n(19),$=n(204);function X(t){var e=t.type,n=t.socket,o=t.innerRef,a=t.io,r=n.findType(),i=!!r.data.reversed,c=a.multipleConnections&&a instanceof V.d.Input===!i;return Object(g.jsx)("div",{className:x()("socket",e,Object($.a)(n.name),c&&"multiple",i&&"reversed",!c&&a.connections.length&&"occupied","category-"+r.data.category),title:n.name,ref:function(t){return t&&o(t,e,a)},children:Object(g.jsx)("div",{className:"socket-color w-100 h-100"})})}var Y=n(35),Q=n(24);function tt(t){var e=t.editor,n=t.node,a=t.block,r=t.fallback,i=function(){if(!e.silent)try{return a.computeTitle(n,e)}catch(t){return console.error("Unable to compute title for node: ".concat(n.name)),console.error(t),"<Error>"}},c=Object(o.useState)(i),u=Object(v.a)(c,2),s=u[0],p=u[1],l=Object(o.useContext)(K.g);Object(Q.a)(l,K.a,(function(){return p(i())}));var d=s||r||null;return Object(M.a)(),Object(g.jsx)("span",{"data-tip":d,children:d})}var et=n(60),nt=n(59);function ot(t){return t?t.title||Object(nt.a)(t.key):""}var at=n(201),rt=function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},it=n(205);function ct(t){var e=t.editor,n=t.node,r=t.shortcut,i=r.block,c=i.category,p=Object(o.useContext)(K.g),d=function(){var t=Object(s.a)(u.a.mark((function t(o){var a,c,s,d,f,m,y,b,g,j,h,O,k,x,w;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.components.get(i.name)){t.next=5;break}return p.emit(K.c,"Component not found: ".concat(i.name)),t.abrupt("return");case 5:return c={},n&&r.nodeKey&&(c[r.nodeKey]=n.id),t.next=9,e.createNodeAtCursor(a,c);case 9:if(s=t.sent,e.view.nodes.get(s)._drag.down(o),r.connections){d=Object(l.a)(r.connections);try{for(d.s();!(f=d.n()).done;)m=f.value,y=m.from,b=m.to,g=n.outputs.get(y)||n.inputs.get(y),j=g instanceof V.c,h=j?s.inputs.get(b):s.outputs.get(b),O=j?[g,h]:[h,g],k=Object(v.a)(O,2),x=k[0],w=k[1],x&&w?e.connect(x,w):console.warn("Could not connect",x,"to",w)}catch(u){d.e(u)}finally{d.f()}}t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),p.emit(K.c,t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(M.a)([i]),Object(g.jsx)(it.a,{ref:rt,className:"node-shortcut-button px-1 pt-0 pb-1","data-tip":Object(L.a)(i),"data-delay-show":100,style:{background:"none",color:c.data.color,borderColor:c.data.color,cursor:"grab"},onMouseDown:d,children:i.icon?a.a.createElement(i.icon):Object(L.a)(i)})}function ut(t){var e=t.prop,n=t.node,o=t.hideLeft,a=t.hideRight,r=t.bindSocket,i=t.bindControl,c=n.inputs.get(e.key),u=n.outputs.get(e.key),s=n.controls.get(e.key)||(null===c||void 0===c?void 0:c.showControl())&&c.control,p=c&&!o&&Object(g.jsx)(X,{type:"input",socket:c.socket,io:c,innerRef:r}),l=u&&!a&&Object(g.jsx)(X,{type:"output",socket:u.socket,io:u,innerRef:r}),d=s&&Object(g.jsx)(U.a,{className:c?"input-control":"control",control:s,innerRef:i});return Object(g.jsxs)("div",{className:x()("prop","key-"+Object($.a)(e.key)),children:[Object(g.jsxs)("div",{className:"input",children:[p,d||p&&Object(g.jsx)("div",{className:"input-title",children:ot(e)})]}),Object(g.jsxs)("div",{className:"output",children:[!c&&l&&Object(g.jsx)("div",{className:"output-title",children:ot(e)}),l]})]})}var st,pt,lt=n(95),dt=n(23),ft=n(28),mt=dt.a.div(st||(st=Object(f.a)(["\n  cursor: pointer;\n  color: black;\n  background: ",";\n  //resize: both;\n  //overflow: auto;\n"])),(function(t){return t.selected?"#fffa":"#fff8"})),yt=Object(dt.a)(lt.a)(pt||(pt=Object(f.a)(["\n  font-weight: 500;\n  resize: horizontal;\n  background: #fff8;\n"])));function bt(t){t.block;var e=t.nodeHandle,n=e.props.node,o=e.state.selected,a=Object(ft.a)(n.controls.get("text")),r=Object(v.a)(a,2),i=r[0],c=r[1],u=Object(ft.a)(n.controls.get("width")),s=Object(v.a)(u,2),p=s[0],l=s[1];return Object(g.jsx)(mt,{className:"pt-2 ps-2 pe-4 rounded-3",selected:o,children:Object(g.jsx)(yt,{style:{width:p||200},rows:1,maxRows:100,ref:rt,value:i||"",placeholder:"Comment",onChange:function(t){return c(t.target.value)},onMouseUp:function(t){return l(t.target.clientWidth)}})})}var vt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this.props,e=t.editor,n=t.node,o=t.bindSocket,r=t.bindControl,i=this.state.selected,c=Object(Y.b)(n.name);if("Comment"===c.name)return Object(g.jsx)(bt,{block:c,nodeHandle:this});var u=c.topLeft&&n.inputs.get(c.topLeft),s=c.topRight&&n.outputs.get(c.topRight),p=Object(et.a)(n,e,!0);c.computeTitle&&(p=Object(g.jsx)(tt,{editor:e,node:n,block:c,fallback:p}));var l=function(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var i=r.apply(void 0,[e].concat(o));return e&&(e.title=ot(t)),i}};return Object(g.jsxs)("div",{className:x()("node",i,c.className),children:[Object(g.jsxs)("div",{className:"header d-flex",children:[u&&Object(g.jsx)("div",{children:Object(g.jsx)(X,{type:"input",socket:u.socket,io:u,innerRef:o})}),Object(g.jsxs)("div",{className:"title d-inline-block flex-grow-1 text-nowrap overflow-hidden",style:{color:c.category.data.color},children:[c.icon&&Object(g.jsx)("span",{className:"d-inline-block pe-1",style:{transform:"translateY(-.1em)"},children:a.a.createElement(c.icon)}),p]}),s&&Object(g.jsx)("div",{children:Object(g.jsx)(X,{type:"output",socket:s.socket,io:s,innerRef:o})})]}),c.shortcuts.length>0&&Object(g.jsx)(at.a,{className:"px-4 py-1 w-100",style:{background:"#0002"},children:c.shortcuts.map((function(t,o){return Object(g.jsx)(ct,{editor:e,node:n,shortcut:t},o)}))}),Object.values(c.props).filter((function(t){return!t.hidden&&(t.control||(!u||t.key!==c.topLeft)&&(!s||t.key!==c.topRight))})).map((function(t){return Object(g.jsx)(ut,{prop:t,node:n,hideLeft:t.key===c.topLeft,hideRight:t.key===c.topRight,bindSocket:o,bindControl:l(t)},t.key)}))]})}}]),n}(U.b),gt=n(40),jt=n(50),ht=n(57),Ot=n.n(ht),kt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t,o,a){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(W.a)(this,n),(r=e.call(this,o)).name=a,r.config=i,r.editor=t,r.render="react",r.component=i.controlType||jt.a,r.props=Object(p.a)(Object(p.a)({},i.controlProps),{},{validation:i.validation||{},control:Object(gt.a)(r),editor:t,bindInput:rt}),r.events=new Ot.a,r}return Object(G.a)(n,[{key:"validate",value:function(t){if(void 0===t&&!this.config.optional)return!1;if(null!==t&&void 0!==t){var e=this.config.validation;if(e){if("custom"in e&&!e.custom(t))return!1;if("minLength"in e&&t.length<e.minLength)return!1;if("maxLength"in e&&t.length>e.maxLength)return!1;if("min"in e&&t<e.min)return!1;if("max"in e&&t>e.max)return!1;if("step"in e&&t-(e.min||0)%e.step!==0)return!1;if("pattern"in e&&!e.pattern.test(t))return!1}}return!0}},{key:"getDefaultValue",value:function(){}},{key:"getValue",value:function(){var t=this.getData(this.key);return void 0===t?this.getDefaultValue():t}},{key:"setValue",value:function(t){this.putData(this.key,t),this.events.emit("update",t)}}]),n}(V.a),xt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t,o,a){var r;return Object(W.a)(this,n),e.call(this,t,o.key,a,Object(p.a)(Object(p.a)(Object(p.a)({},(null===(r=o.type)||void 0===r?void 0:r.data)||{}),o.config||{}),{},{prop:o,type:o.type,optional:o.optional}))}return Object(G.a)(n,[{key:"getDefaultValue",value:function(){var t;return null===(t=this.config.type)||void 0===t?void 0:t.getDefaultValue()}},{key:"notifyEditorChange",value:function(){}}]),n}(kt),wt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"getEditorNode",value:function(t){return this.editor.nodes.find((function(e){return e.id===t.id}))}},{key:"getControls",value:function(t){return this.getEditorNode(t).controls}}]),n}(V.d.Component),Ct=n(2),Tt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t){return Object(W.a)(this,n),t=Object(Ct.m)(t),e.call(this,t.name,Object(p.a)(Object(p.a)({},t.data),{},{type:t}))}return Object(G.a)(n,[{key:"findType",value:function(){return this.data.type}},{key:"compatibleWith",value:function(t){if(!("findType"in t))return!1;var e=this.findType(),n=t.findType();return e.isSubtype(n)||n.isSubtype(e)}}]),n}(V.d.Socket),St=n(41),Nt=n(31),Lt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t,o,a,r){var i;return Object(W.a)(this,n),(i=e.call(this,a.type)).nodeId=t,i.nodeName=o,i.prop=a,i.typeCompiler=r,i._isTypeOfType=Ct.B.isSubtype(i.prop.type),i}return Object(G.a)(n,[{key:"findType",value:function(){if(this.typeCompiler.editor.silent)return Object(St.a)(Object(Nt.a)(n.prototype),"findType",this).call(this);try{var t=this.typeCompiler.getOutput(this.nodeId,this.prop.key);if(t)return this._isTypeOfType&&(Ct.B.isSubtype(t)&&console.warn("Type of Type of Type (Intentional?)"),t=Ct.B.of(t)),t||Object(St.a)(Object(Nt.a)(n.prototype),"findType",this).call(this)}catch(e){console.warn("Error on socket [".concat(this.nodeName,".").concat(this.prop.key,"]:"),e)}return Object(St.a)(Object(Nt.a)(n.prototype),"findType",this).call(this)}}]),n}(Tt),Mt=n(197),It=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t){var o,a;return Object(W.a)(this,n),(a=e.call(this,t.name)).block=t,a.keywords=[].concat(Object(b.a)(Object(Mt.a)(t.name).toLowerCase().split(" ").filter((function(t){return t}))),Object(b.a)((null===(o=t.title)||void 0===o?void 0:o.split(" ").filter((function(t){return t})))||[]),Object(b.a)(t.keywords||[])),a}return Object(G.a)(n,[{key:"builder",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,r,i,c,s,p,d,f,m,y,b,v,g=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t,n){var r=n?new Lt(e.id,e.name,t,g.editor.compilers.type):new Tt(t.type);return!!t.type.data.reversed===n?o(t,r,n):a(t,r,n)},o=function(t,n,o){var a=ot(t),i=new V.d.Input(t.key,a,n,t.type.data.reversed||!!t.multi);return r(t,n,o)&&i.addControl(new xt(g.editor,t,a)),e.addInput(i),i},a=function(t,n,o){var a=ot(t),i=new V.d.Output(t.key,a,n,!t.type.data.reversed||!!t.multi);return e.addOutput(i),r(t,n,o)&&e.addControl(new xt(g.editor,t,a)),i},r=function(t,e,n){return t.control||!!e.data.reversed===n&&e.data.controlType&&!t.multi},delete e.meta.title,i=Object(l.a)(this.block.inputs);try{for(i.s();!(c=i.n()).done;)s=c.value,n(s,!1)}catch(u){i.e(u)}finally{i.f()}p=Object(l.a)(this.block.outputs);try{for(p.s();!(d=p.n()).done;)f=d.value,n(f,!0)}catch(u){p.e(u)}finally{p.f()}m=Object(l.a)(this.block.controls);try{for(m.s();!(y=m.n()).done;)b=y.value,v=ot(b),e.addControl(new xt(this.editor,b,v))}catch(u){m.e(u)}finally{m.f()}case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(wt),Et=n(14),At=n(42),Rt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t){return Object(W.a)(this,n),e.call(this,t,"toEditorNode")}return Object(G.a)(n,[{key:"defaultCompile",value:function(t,e){return e}},{key:"postCompile",value:function(t,e,n){if(t){var o;if("object"===typeof t){if(!(o=t.id))throw new Error("Invalid node object with keys: {".concat(Object.keys(t).join(", "),"}"))}else o=t;return o=String(o),this.editor.nodes.find((function(t){return String(t.id)===o}))}}}]),n}(At.a),Dt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t){return Object(W.a)(this,n),e.call(this,t,"inferType")}return Object(G.a)(n,[{key:"defaultCompile",value:function(t,e){return Object(Ct.m)(t.type)}},{key:"postCompile",value:function(t,e,n){if(void 0!==t){if(!(t=Object(Ct.m)(t)).isAbstract())return t;console.warn("[".concat(e.name,".").concat(n,"]"),"Abstract inferred type:",t.toTypeString())}}}]),n}(At.a),Pt=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(t){return Object(W.a)(this,n),e.call(this,t,"toControl")}return Object(G.a)(n,[{key:"defaultCompile",value:function(t,e){}},{key:"postCompile",value:function(t,e,n){return t}}]),n}(At.a),Ft=function(t){Object(Z.a)(n,t);var e=Object(H.a)(n);function n(){var t;Object(W.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).projectName="",t.projectDescription="",t.compilers={control:new Pt(Object(gt.a)(t)),node:new Rt(Object(gt.a)(t)),type:new Dt(Object(gt.a)(t)),motoko:new Et.a(Object(gt.a)(t))},t}return Object(G.a)(n,[{key:"toJSON",value:function(){var t=Object(p.a)({name:this.projectName,description:this.projectDescription,version:this.id},Object(St.a)(Object(Nt.a)(n.prototype),"toJSON",this).call(this));return delete t.id,t}},{key:"fromJSON",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object(p.a)({id:e.version},e),this.beforeImport(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return this.projectName=e.name||"",this.projectDescription=e.description||"",n=!1,t.prev=6,o={},t.next=10,Promise.all(Object.entries(e.nodes).map(function(){var t=Object(s.a)(u.a.mark((function t(e){var r,i,c,s,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(v.a)(e,2),i=r[0],c=r[1],t.prev=1,s=a.getComponent(c.name),t.next=5,s.build(V.d.Node.fromJSON(c));case 5:p=t.sent,o[i]=p,a.addNode(p),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),n=!0,t.abrupt("return",a.trigger("error",t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()));case 10:Object.entries(e.nodes).forEach((function(t){var e=Object(v.a)(t,2),r=e[0],i=e[1],c=o[r];Object.entries(i.outputs).forEach((function(t){var e=Object(v.a)(t,2),r=e[0];e[1].connections.forEach((function(t){var e=t.node,i=t.data,u=c.outputs.get(r),s=o[e];if(!s)return n=!0,a.trigger("error","Tried to connect to unknown node ".concat(c.id));var p=s.inputs.get(t.input);if(!u||!p)return n=!0,a.trigger("error","IO not found for node ".concat(c.id));a.connect(u,p,i)}))}))})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),this.trigger("warn",t.t0),n=!0;case 17:return t.abrupt("return",this.afterImport()&&!n);case 18:case"end":return t.stop()}}),t,this,[[6,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createNode",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,r,i,c,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},o=s.length>2&&void 0!==s[2]?s[2]:null,t.next=4,e.createNode(n);case 4:return a=t.sent,o&&(r=o.x,i=o.y,c=[r,i],a.position[0]=c[0],a.position[1]=c[1]),this.addNode(a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createNodeAtCursor",value:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,o,a,r,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},o=this.view.area.mouse,a=o.x,r=o.y,t.abrupt("return",this.createNode(e,n,{x:a-80,y:r-20}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(V.d.NodeEditor);function Bt(t){var e=t instanceof V.d.Input?"output":"input";t.connections.sort((function(t,n){return t[e].node.position[1]-n[e].node.position[1]}))}var Vt={name:"vertical-sort",install:function(t){t.on("connectioncreated",(function(t){Bt(t.input),Bt(t.output)})),t.on("nodedragged",(function(t){for(var e=0,n=[[t.inputs,"output"],[t.outputs,"input"]];e<n.length;e++){var o,a=Object(v.a)(n[e],2),r=a[0],i=a[1],c=Object(l.a)(r.values());try{for(c.s();!(o=c.n()).done;){var u,s=o.value,p=Object(l.a)(s.connections);try{for(p.s();!(u=p.n()).done;){Bt(u.value[i])}}catch(d){p.e(d)}finally{p.f()}}}catch(d){c.e(d)}finally{c.f()}}}))}};var _t={name:"connection-drop",install:function(t){var e=function(t){t.code};document.addEventListener("keydown",e),t.on("destroy",(function(){return document.removeEventListener("keydown",e)}))}};var qt={name:"connection-opacity",install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDistance,o=void 0===n?500:n,a=e.opacityFalloff,r=void 0===a?200:a;t.on(["renderconnection","updateconnection","zoom"],(function(){setTimeout((function(){var e,n=Object(l.a)(t.view.container.querySelectorAll(".connection .main-path"));try{for(n.s();!(e=n.n()).done;){var a=e.value,i=a.getBoundingClientRect().width;a.style.opacity=1/(1+Math.sqrt(Math.max(i-o,0)/r))}}catch(c){n.e(c)}finally{n.f()}}))}))}},zt=qt;var Jt,Ut={name:"drag-button",install:function(t){}},Kt=n(0),Wt=["title","titleId"];function Gt(){return Gt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Gt.apply(this,arguments)}function Zt(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ht(t,e){var n=t.title,a=t.titleId,r=Zt(t,Wt);return o.createElement("svg",Gt({ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,Jt||(Jt=o.createElement("linearGradient",{id:"svg-block-gradient",width:0,height:0,x2:1,y2:1},o.createElement("stop",{offset:"0%",stopColor:"#00EFFB"}),o.createElement("stop",{offset:"50%",stopColor:"#8649E1"}),o.createElement("stop",{offset:"100%",stopColor:"#F900E3"}))))}var $t,Xt,Yt=o.forwardRef(Ht),Qt=(n.p,["className","children"]),te=dt.a.div($t||($t=Object(f.a)(["\n    \n"]))),ee=Object(dt.a)(Yt)(Xt||(Xt=Object(f.a)(["\n  height: 0;\n  width: 0;\n"])));function ne(t){var e=t.className,n=t.children,o=Object(d.a)(t,Qt);return Object(g.jsxs)(te,Object(p.a)(Object(p.a)({className:x()("bg-light text-secondary d-flex py-2 justify-content-start align-items-center",e)},o),{},{children:[Object(g.jsx)(ee,{}),Object(g.jsx)(Kt.b.Provider,{value:{style:{verticalAlign:"bottom",transform:"translateY(-1px)"}},children:n})]}))}var oe,ae=["variant","tooltip","className"],re=dt.a.div(oe||(oe=Object(f.a)(["\n\n"])));function ie(t){var e=t.variant,n=t.tooltip,o=t.className,a=Object(d.a)(t,ae);return Object(M.a)(),Object(g.jsx)(re,Object(p.a)({className:x()("noselect h3 mx-3 px-3 pt-2 pb-2 mb-0 d-inline-block text-center",e&&"text-".concat(e),o),"data-tip":n},a))}var ce,ue,se=["children"],pe=Object(dt.a)(ie)(ce||(ce=Object(f.a)(['\n  cursor: pointer;\n  border-radius: 10px;\n\n  :hover {\n    background: #F0F0F0;\n  }\n\n  :hover > svg {\n    fill: url("#svg-block-gradient");\n  }\n']))),le=dt.a.svg(ue||(ue=Object(f.a)(["\n  position: absolute;\n  width: 0;\n  height: 0;\n"])));function de(t){var e=t.children,n=Object(d.a)(t,se);return Object(g.jsxs)(pe,Object(p.a)(Object(p.a)({},n),{},{children:[Object(g.jsx)(le,{"aria-hidden":"true",focusable:"false"}),e]}))}var fe=n(84),me=n(94),ye=["options","onFile","onFileContent","className","children"];function be(t){var e=t.options,n=t.onFile,a=t.onFileContent,r=t.className,i=t.children,c=Object(d.a)(t,ye),u=Object(o.useCallback)((function(t){if(t.length){var e=t[0];if(null===n||void 0===n||n(e),a){var o=new FileReader;o.onload=function(t){a(t.target.result)},o.readAsText(e)}}}),[n,a]),s=Object(me.a)(Object(p.a)({maxFiles:1,onDrop:u},e)),l=s.getRootProps,f=s.getInputProps,m=s.isDragActive;return Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:x()(r,m&&"dragging")},Object(p.a)(Object(p.a)({},c),l())),{},{children:[Object(g.jsx)("input",Object(p.a)({},f())),i]}))}var ve,ge,je,he=["onLoadFileContent","className"],Oe=dt.a.div(ve||(ve=Object(f.a)(["\n  padding: 20px;\n"]))),ke=dt.a.div(ge||(ge=Object(f.a)(["\n  :hover {\n    background: #0001;\n  }\n"]))),xe=Object(dt.a)(be)(je||(je=Object(f.a)(["\n  padding: 2em;\n  border: 2px #0005 dashed;\n\n  &.dragging, &:hover {\n    background: #0002;\n  }\n"])));function we(t){var e=t.onLoadFileContent,n=t.className,a=Object(d.a)(t,he),r=Object(o.useContext)(K.g),i=Object(fe.getExampleProjects)();return Object(g.jsxs)(Oe,Object(p.a)(Object(p.a)({className:x()("bg-light",n)},a),{},{children:[Object(g.jsx)(be,{onFileContent:e,children:Object(g.jsx)(xe,{className:x()("clickable text-center text-muted rounded-3"),children:Object(g.jsx)("h5",{children:"Import a .blocks file . . ."})})}),i.map((function(t,e){return Object(g.jsxs)(ke,{className:"clickable mt-2 px-3 py-2",onClick:function(){return r.emit(K.f,t)},children:[Object(g.jsx)("h4",{className:"fw-normal",children:t.name}),Object(g.jsx)("div",{className:"text-muted",children:t.description||"(No description provided)"})]},e)}))]}))}var Ce,Te=n(203),Se=["title","titleId"];function Ne(){return Ne=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ne.apply(this,arguments)}function Le(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Me(t,e){var n=t.title,a=t.titleId,r=Le(t,Se);return o.createElement("svg",Ne({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,Ce||(Ce=o.createElement("g",null,o.createElement("path",{d:"M20,15L20,19C20,19.549 19.549,20 19,20C19,20 5,20 5,20C4.451,20 4,19.549 4,19C4,19 4,15 4,15C4,14.448 3.552,14 3,14C2.448,14 2,14.448 2,15L2,19C2,20.646 3.354,22 5,22L19,22C20.646,22 22,20.646 22,19L22,15C22,14.448 21.552,14 21,14C20.448,14 20,14.448 20,15Z"}),o.createElement("path",{d:"M11,12.586L7.707,9.293C7.317,8.903 6.683,8.903 6.293,9.293C5.903,9.683 5.903,10.317 6.293,10.707L11.293,15.707C11.413,15.827 11.556,15.91 11.708,15.957L11.711,15.958C11.795,15.983 11.884,15.998 11.976,16L12,16L12.024,16C12.116,15.998 12.205,15.983 12.289,15.958L12.292,15.957C12.444,15.91 12.587,15.827 12.707,15.707L17.707,10.707C18.097,10.317 18.097,9.683 17.707,9.293C17.317,8.903 16.683,8.903 16.293,9.293L13,12.586L13,3C13,2.448 12.552,2 12,2C11.448,2 11,2.448 11,3L11,12.586Z"}))))}var Ie,Ee=o.forwardRef(Me),Ae=(n.p,["title","titleId"]);function Re(){return Re=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Re.apply(this,arguments)}function De(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Pe(t,e){var n=t.title,a=t.titleId,r=De(t,Ae);return o.createElement("svg",Re({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,Ie||(Ie=o.createElement("path",{d:"M21,8L21,7.988C20.998,7.807 20.947,7.637 20.861,7.492C20.819,7.42 20.767,7.353 20.707,7.293L14.707,1.293C14.647,1.233 14.58,1.181 14.508,1.139C14.362,1.053 14.193,1.002 14.012,1L14,1L6,1C4.354,1 3,2.354 3,4L3,20C3,21.646 4.354,23 6,23L18,23C19.646,23 21,21.646 21,20L21,8ZM13,3L6,3C5.451,3 5,3.451 5,4C5,4 5,20 5,20C5,20.549 5.451,21 6,21C6,21 18,21 18,21C18.549,21 19,20.549 19,20L19,9L14,9C13.448,9 13,8.552 13,8L13,3ZM11,14L9,14C8.448,14 8,14.448 8,15C8,15.552 8.448,16 9,16L11,16L11,18C11,18.552 11.448,19 12,19C12.552,19 13,18.552 13,18L13,16L15,16C15.552,16 16,15.552 16,15C16,14.448 15.552,14 15,14L13,14L13,12C13,11.448 12.552,11 12,11C11.448,11 11,11.448 11,12L11,14ZM15,7L17.586,7L15,4.414L15,7Z"})))}var Fe,Be=o.forwardRef(Pe),Ve=(n.p,["title","titleId"]);function _e(){return _e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_e.apply(this,arguments)}function qe(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ze(t,e){var n=t.title,a=t.titleId,r=qe(t,Ve);return o.createElement("svg",_e({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,Fe||(Fe=o.createElement("path",{d:"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5L1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8C21,8 21,19 21,19Z"})))}var Je,Ue=o.forwardRef(ze),Ke=(n.p,["title","titleId"]);function We(){return We=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},We.apply(this,arguments)}function Ge(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ze(t,e){var n=t.title,a=t.titleId,r=Ge(t,Ke);return o.createElement("svg",We({width:"100%",height:"100%",viewBox:"0 0 30 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,o.createElement("g",{id:"Artboard1",transform:"matrix(1.25,0,0,1,0,0)"},o.createElement("rect",{x:0,y:0,width:24,height:24,style:{fill:"none"}}),Je||(Je=o.createElement("g",{transform:"matrix(0.8,0,0,1,2.4,0)"},o.createElement("path",{d:"M23,19L23,8C23,6.354 21.646,5 20,5L11.535,5C11.535,5 9.832,2.445 9.832,2.445C9.647,2.167 9.334,2 9,2L4,2C2.354,2 1,3.354 1,5C1,5 1,19 1,19C1,20.646 2.354,22 4,22L20,22C21.646,22 23,20.646 23,19ZM21,19C21,19.549 20.549,20 20,20C20,20 4,20 4,20C3.451,20 3,19.549 3,19L3,5C3,4.451 3.451,4 4,4C4,4 8.465,4 8.465,4C8.465,4 10.168,6.555 10.168,6.555C10.353,6.833 10.666,7 11,7L20,7C20.549,7 21,7.451 21,8L21,19Z"})))))}var He,$e=o.forwardRef(Ze),Xe=(n.p,["title","titleId"]);function Ye(){return Ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ye.apply(this,arguments)}function Qe(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function tn(t,e){var n=t.title,a=t.titleId,r=Qe(t,Xe);return o.createElement("svg",Ye({width:"100%",height:"100%",viewBox:"0 0 30 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,o.createElement("g",{id:"Artboard1",transform:"matrix(1.25,0,0,1,0,0)"},o.createElement("rect",{x:0,y:0,width:24,height:24,style:{fill:"none"}}),He||(He=o.createElement("g",{transform:"matrix(0.8,0,0,1,0,0)"},o.createElement("path",{d:"M5.8,21.747C5.825,21.769 5.851,21.789 5.878,21.809C6.059,21.941 6.27,22.003 6.479,22L6.527,21.998C6.572,21.995 6.617,21.99 6.661,21.981C6.772,21.993 6.885,22 7,22L23,22C23.32,22 23.621,21.847 23.809,21.588L29.597,13.621C29.818,13.317 29.85,12.914 29.679,12.579C29.509,12.244 29.164,12.033 28.788,12.033L25.939,12.033L26,8C26,6.354 24.646,5 23,5L14.535,5C14.535,5 12.832,2.445 12.832,2.445C12.647,2.167 12.334,2 12,2L7,2C5.354,2 4,3.354 4,5C4,5 4,19 4,19C4,20.22 4.745,21.28 5.8,21.747ZM8.428,20L12.763,14.033L26.826,14.033C26.826,14.033 22.49,20 22.49,20L8.428,20ZM23.939,12.033C23.961,10.57 24,7.993 24,7.987C23.993,7.444 23.544,7 23,7L14,7C13.666,7 13.353,6.833 13.168,6.555C13.168,6.555 11.465,4 11.465,4C11.465,4 7,4 7,4C6.451,4 6,4.451 6,5L6,19C6,19.238 6.085,19.457 6.225,19.629L11.445,12.445L11.445,12.445C11.627,12.196 11.922,12.033 12.254,12.033L23.939,12.033Z"})))))}var en,nn=o.forwardRef(tn),on=(n.p,["title","titleId"]);function an(){return an=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},an.apply(this,arguments)}function rn(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function cn(t,e){var n=t.title,a=t.titleId,r=rn(t,on);return o.createElement("svg",an({width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:e,"aria-labelledby":a},r),n?o.createElement("title",{id:a},n):null,en||(en=o.createElement("path",{d:"M19,22C20.646,22 22,20.646 22,19L22,8C22,7.735 21.895,7.48 21.707,7.293L16.707,2.293C16.52,2.105 16.265,2 16,2L5,2C3.354,2 2,3.354 2,5L2,19C2,20.646 3.354,22 5,22L19,22ZM8,4L8,7L15,7C15.552,7 16,7.448 16,8C16,8.552 15.552,9 15,9L7,9C6.448,9 6,8.552 6,8L6,4L5,4C4.451,4 4,4.451 4,5C4,5 4,19 4,19C4,19.549 4.451,20 5,20L6,20L6,13C6,12.448 6.448,12 7,12L17,12C17.552,12 18,12.448 18,13L18,20L19,20C19.549,20 20,19.549 20,19C20,19 20,8.414 20,8.414C20,8.414 15.586,4 15.586,4L8,4ZM8,20L16,20L16,14C16,14 8,14 8,14L8,20Z"})))}var un=o.forwardRef(cn);n.p;function sn(t){var e=Object(p.a)(Object(p.a)({},t),{},{fill:t.fill||"rgb(108, 117, 125)",height:t.height||24,width:"folder-wide"===t.name||"folder-open"===t.name?1.25*(t.height||24):t.height||24});switch(t.name){case"download":return Object(g.jsx)(Ee,Object(p.a)({},e));case"file-plus":return Object(g.jsx)(Be,Object(p.a)({},e));case"folder":return Object(g.jsx)(Ue,Object(p.a)({},e));case"folder-wide":return Object(g.jsx)($e,Object(p.a)({},e));case"folder-open":return Object(g.jsx)(nn,Object(p.a)({},e));default:return Object(g.jsx)(un,Object(p.a)({},e))}}var pn,ln,dn,fn=n(39),mn=dt.a.input(pn||(pn=Object(f.a)(["\n  background: var(--bs-light-rgb) !important;\n  border: 2px solid transparent !important;\n  border-bottom: solid 2px #0003 !important;\n  font-weight: bold;\n  vertical-align: top;\n  margin-top: .4em;\n  padding: .25em .25em .1em;\n  position: relative;\n  background-clip: padding-box;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(30deg, #00EFFB, #8649E1, #F900E3);\n    margin: -2px;\n    z-index: -1;\n    opacity: 0;\n  }\n\n  :focus {\n    outline: none;\n\n    &::before {\n      opacity: 1;\n    }\n  }\n"]))),yn=Object(dt.b)(ln||(ln=Object(f.a)(["\n  30% {\n    transform: scale(.6);\n  }\n"]))),bn=Object(dt.a)(sn)(dn||(dn=Object(f.a)(["\n  &.animated {\n    animation: "," .8s ease-out;\n  }\n"])),yn);function vn(t){var e=t.getEditor,n=t.onLoadFileContent,a=Object(o.useState)(""),r=Object(v.a)(a,2),i=r[0],c=r[1],u=Object(o.useState)(!1),s=Object(v.a)(u,2),p=s[0],l=s[1],d=Object(o.useState)(!1),f=Object(v.a)(d,2),m=f[0],y=f[1],b=Object(o.useContext)(K.g);Object(Q.a)(b,K.b,(function(){l(!0)})),Object(Q.a)(b,K.f,(function(t){c(t.name),y(!1)})),setTimeout((function(){c(e().projectName)}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(ne,{children:[Object(g.jsx)(ie,{variant:"dark",children:Object(g.jsx)("img",{src:"".concat("https://blocks-editor.github.io/blocks","/img/logo-gradient.png"),height:"48px",alt:"Blocks Logo"})}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center mx-3",children:[Object(g.jsx)(mn,{type:"text",placeholder:"Unnamed Project",className:"text-secondary",value:i||"",onChange:function(t){return function(t){c(t);var n=e();n.projectName=t,b.emit(K.a,n)}(t.target.value)},onKeyDown:function(t){return"Enter"===t.key&&b.emit(K.b,e())}}),Object(g.jsx)(de,{tooltip:"Save Changes",onMouseDown:function(){return b.emit(K.b,e())},children:Object(g.jsx)(bn,{className:x()(p&&"animated"),onAnimationEnd:function(){return l(!1)}})}),Object(g.jsx)(de,{tooltip:"Export to File",onMouseDown:function(){return b.emit(K.e,e().toJSON())},children:Object(g.jsx)(sn,{name:"download"})}),Object(g.jsx)(de,{tooltip:"New Project",onMouseDown:function(){return b.emit(K.d)},children:Object(g.jsx)(sn,{name:"file-plus"})}),Object(g.jsx)(de,{tooltip:"Load Project",onMouseDown:function(){return y(!m)},children:m?Object(g.jsx)(sn,{name:"folder-open"}):Object(g.jsx)(sn,{name:"folder-wide"})})]})]}),Object(g.jsx)(Te.a,{show:m,onShow:function(){return fn.a.hide()},onHide:function(){return y(!1)},children:Object(g.jsx)(Te.a.Body,{children:Object(g.jsx)(we,{onLoadFileContent:n})})})]})}var gn,jn=new Map(Object.entries({c:"Comment","-":"Subtract","=":"Add",8:"Multiply","/":"Divide",7:"And","\\":"Or",1:"Not",r:"Return",",":"LiteralTuple",".":"LiteralIdentifier","'":"LiteralText",x:"CodeValue",b:"LiteralBool",n:"LiteralNat",i:"LiteralInt",f:"LiteralFloat",a:"NewArray",m:"NewTextHashMap",o:"Optional",u:"OptionalUnwrap"}).map((function(t){var e=Object(v.a)(t,2),n=e[0],o=e[1];return[n,Object(Y.b)(o)]}))),hn=["hideMenu","onSetup","onChange","onSave","className"],On=["input","textarea"];var kn=dt.a.div(gn||(gn=Object(f.a)(["\n  width: 100%;\n  height: 100vh;\n"])));function xn(t){var e=t.hideMenu,n=t.onSetup,a=t.onChange,r=t.onSave,i=t.className,c=Object(d.a)(t,hn),f=Object(o.useContext)(K.g),b=null;Object(Q.a)(f,K.a,(function(t){t===b&&(null===a||void 0===a||a(b))})),Object(Q.a)(f,K.b,(function(t){t===b&&(null===r||void 0===r||r(b.toJSON(),b))}));var v=function(t){try{var e=JSON.parse(t);f.emit(K.f,e)}catch(n){f.emit(K.c,n)}};return Object(g.jsx)(be,{options:{noClick:!0},onFileContent:v,children:Object(g.jsxs)(kn,Object(p.a)(Object(p.a)({className:x()("node-editor d-flex flex-grow-1 flex-column",i)},c),{},{children:[!e&&Object(g.jsx)(vn,{getEditor:function(){return b},onLoadFileContent:v}),Object(g.jsx)("div",{ref:function(t){if(b&&(b.silent=!0,b.clear(),b.components.clear(),b.destroy()),t){b=function(t){var e=new Ft("blocks-webapp@0.1.0",t);e.use(U.c,{component:vt}),e.use(y.a),e.use(J.a),e.use(m.a,{background:function(){var t=document.createElement("div");return t.classList.add("grid"),t.style.pointerEvents="none",window.chrome||e.on("zoom",(function(e){var n=e.zoom;t.classList.toggle("far",n<=1),t.classList.toggle("d-none",n<=.5)})),e.on("destroy",(function(){return t.remove()})),t}(),snap:{size:16,dynamic:!0}}),e.use(q),e.use(_t),e.use(zt),e.use(Vt),e.use(Ut,{editorButton:2});var n=!1;return e.view.container.addEventListener("mousedown",(function(t){n=!1})),e.on("mousemove",(function(t){n=!0})),e.on("click",(function(t){t.e,n||(e.selected.clear(),e.nodes.forEach((function(t){return t.update()})))})),e.on("zoom",(function(t){return"dblclick"!==t.source})),e.on("nodeselect",(function(t){return!e.selected.contains(t)})),e.on("renderconnection",(function(t){var e=t.el,n=t.connection,o=function(t){var e,n,o;return null!==(e=null!==(n=null===(o=t.type)||void 0===o?void 0:o.data.category)&&void 0!==n?n:t.data.category)&&void 0!==e?e:"none"}((n.input.socket.data.reversed?n.input:n.output).socket);e.querySelector(".connection").classList.add("socket-output-category-".concat(o))})),e}(t),window.EDITOR=b;var e=function(t){var e=t.key;if(t.ctrlKey||t.metaKey)"s"===e&&(t.preventDefault(),f.emit(K.b,b),console.log("Saved successfully"));else if(!document.activeElement||!On.includes(document.activeElement.nodeName.toLowerCase())){var n=jn.get(e);n&&b.createNodeAtCursor(b.getComponent(n.name)).catch((function(t){return f.emit("error",t)}))}};document.addEventListener("keydown",e),b.on("destroy",(function(){return document.removeEventListener("keydown",e)}));var o,a,r=Object(l.a)(Y.a.values());try{for(r.s();!(o=r.n()).done;){var i=o.value,c=new It(i);b.register(c)}}catch(v){r.e(v)}finally{r.f()}b.on(["nodecreated","noderemoved","nodedragged","connectioncreated","connectionremoved"],Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b.silent||(clearTimeout(a),a=setTimeout((function(){f.emit(K.a,b)})));case 1:case"end":return t.stop()}}),t)})))),b.on("error",(function(t){return f.emit(K.c,t)})),Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===n||void 0===n?void 0:n(p,b);case 2:case"end":return t.stop()}}),t)})))().catch((function(t){return f.emit(K.c,t)}))}function p(t){return d.apply(this,arguments)}function d(){return d=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,b.fromJSON(e);case 4:return(n=t.sent)&&(b.view.resize(),m.a.zoomAt(b),f.emit(K.a,b),b.nodes.forEach((function(t){return t.update()}))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}}})]}))})}var wn=n(89),Cn=n.n(wn),Tn=n(202);var Sn,Nn=n(90),Ln="blocks.editorState",Mn=n(190),In=function(){try{return window.self!==window.top}catch(t){return!0}}(),En=In?{}:localStorage;function An(){var t=function(){var t=Object(o.useState)({})[1];return function(){return t({})}}(),e=Object(Nn.parse)(window.location.search.substring(1)).menu,n=Object(o.useContext)(K.g);Object(Q.a)(n,K.d,(function(){Sn=Mn,t()})),Object(Q.a)(n,K.f,(function(e){Sn=e,t()})),Object(Q.a)(n,K.e,(function(t){var e=JSON.stringify(t);Cn.a.saveAs(new Blob([e]),"".concat(Object(Tn.a)(t.name||"project"),".blocks"))}));var a=function(){var t=Object(s.a)(u.a.mark((function t(e,n){var o,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Sn?JSON.stringify(Sn):En[Ln],Sn=null,o?a=JSON.parse(o):In||(a=Mn),t.t0=a,!t.t0){t.next=8;break}return t.next=7,e(a);case 7:t.t0=!t.sent;case 8:if(!t.t0){t.next=10;break}console.warn("Load error");case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(Q.a)(window,"message",(function(e){var n,o=e.source,a=e.data;In&&o===window.parent&&("string"===typeof a&&(console.log("Received message:",a),"load"===(null===(n=a=JSON.parse(a))||void 0===n?void 0:n.type)&&(Sn=a.state?JSON.parse(JSON.stringify(a.state)):Mn,t())))})),Object(g.jsx)(xn,{hideMenu:"hidden"===e,onSetup:a,onChange:function(t){},onSave:function(t,e){var n=JSON.stringify(t);if(En[Ln]=n,In){var o={type:"save",state:n};console.log("Sending message:",o);window.parent.postMessage(o,"*")}}})}In&&console.log("Using embedded mode.");var Rn,Dn=n(74),Pn=(n(191),Object(dt.a)(fn.a)(Rn||(Rn=Object(f.a)(["\n  padding: .5em 1em !important;\n"]))));function Fn(){return Object(g.jsx)(Pn,{backgroundColor:"#111",place:"bottom",delayShow:300})}var Bn,Vn=n(93);function _n(){var t=Object(o.useContext)(K.g);return Object(Q.a)(t,K.c,(function(t){Object(Dn.b)(t,{type:"error"})})),Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsxs)(Vn.a,{children:[Object(g.jsx)(Fn,{}),Object(g.jsx)(Dn.a,{}),Object(g.jsx)(An,{})]})})}i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(_n,{})}),document.getElementById("root")),(Bn=function(){})&&Bn instanceof Function&&n.e(3).then(n.bind(null,206)).then((function(t){var e=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;e(Bn),n(Bn),o(Bn),a(Bn),r(Bn)}))}],[[195,1,2]]]);
//# sourceMappingURL=main.b7f75b56.chunk.js.map