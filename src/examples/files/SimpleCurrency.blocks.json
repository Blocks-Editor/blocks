{"name":"Simple Currency","description":"Mint and transfer fungible tokens.","version":"blocks-webapp@0.1.0","language":"motoko","output":"import HashMap \"mo:base/HashMap\";\nimport Principal \"mo:base/Principal\";\nimport Option \"mo:base/Option\";\n\nactor class SimpleCurrency(mintSupply : Nat, mintAddress : Principal) {\n\tlet balanceMap : HashMap.HashMap<Principal, Nat> = HashMap.HashMap<Principal, Nat>(0, Principal.equal, Principal.hash);\n\tbalanceMap.put(mintAddress, mintSupply);\n\t\n\tpublic query func getBalance(user : Principal) : async Nat {\n\t\treturn Option.get(balanceMap.get(user), 0);\n\t};\n\t\n\tpublic shared(send__install) func send(amount : Nat, receiver : Principal) : async Bool {\n\t\tlet node__1786_success = do {\n\t\t\tlet node__1786_balance = Option.get(balanceMap.get(send__install.caller), 0);\n\t\t\tlet node__1786_amount = amount;\n\t\t\tif (node__1786_balance >= node__1786_amount) {\n\t\t\t\tbalanceMap.put(send__install.caller, node__1786_balance - node__1786_amount);\n\t\t\t\tbalanceMap.put(receiver, Option.get(balanceMap.get(receiver), 0) + node__1786_amount);\n\t\t\t\ttrue\n\t\t\t} else {\n\t\t\t\tfalse\n\t\t\t}\n\t\t};\n\t\treturn node__1786_success;\n\t};\n}","nodes":{"740":{"id":740,"data":{"visibility":"public","name":"getBalance","editor:advanced":false,"query":true},"inputs":{"name":{"connections":[]},"member":{"connections":[]}},"outputs":{"params":{"connections":[{"node":1032,"input":"param","data":{}}]},"body":{"connections":[{"node":1025,"input":"statement","data":{}}]},"caller":{"connections":[]},"function":{"connections":[]}},"position":[-32,-96],"name":"Function"},"1025":{"id":1025,"data":{},"inputs":{"value":{"connections":[{"node":1784,"output":"value","data":{}}]},"statement":{"connections":[{"node":740,"output":"body","data":{}}]}},"outputs":{},"position":[896,-96],"name":"Return"},"1030":{"id":1030,"data":{"name":"balanceMap","editor:advanced":false,"readonly":true,"stable":false},"inputs":{"name":{"connections":[]},"initialValue":{"connections":[{"node":1031,"output":"value","data":{}}]},"member":{"connections":[]}},"outputs":{"setup":{"connections":[{"node":1558,"input":"before","data":{}}]},"value":{"connections":[{"node":1558,"input":"map","data":{}}]}},"position":[576,-704],"name":"State"},"1031":{"id":1031,"data":{"keyType":{"name":"Principal","generics":[]},"valueType":{"name":"Nat","generics":[]}},"inputs":{"keyType":{"connections":[]},"valueType":{"connections":[]}},"outputs":{"value":{"connections":[{"node":1030,"input":"initialValue","data":{}}]}},"position":[352,-672],"name":"NewHashMap"},"1032":{"id":1032,"data":{"name":"user","type":{"name":"Principal","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":740,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":1784,"input":"key","data":{}}]}},"position":[224,64],"name":"Parameter"},"1034":{"id":1034,"data":{"name":"send","editor:advanced":true},"inputs":{"name":{"connections":[]},"member":{"connections":[]}},"outputs":{"params":{"connections":[{"node":1035,"input":"param","data":{}},{"node":1345,"input":"param","data":{}}]},"body":{"connections":[{"node":1786,"input":"before","data":{}}]},"caller":{"connections":[{"node":1786,"input":"from","data":{}}]},"function":{"connections":[]}},"position":[-32,352],"name":"Function"},"1035":{"id":1035,"data":{"name":"amount","type":{"name":"Nat","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":1034,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":1786,"input":"amount","data":{}}]}},"position":[224,480],"name":"Parameter"},"1182":{"id":1182,"data":{"stateNode":1030},"inputs":{},"outputs":{"value":{"connections":[{"node":1784,"input":"map","data":{}}]}},"position":[224,-32],"name":"StateRead"},"1184":{"id":1184,"data":{"name":"mintSupply","type":{"name":"Nat","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]}},"outputs":{"value":{"connections":[{"node":1558,"input":"value","data":{}}]}},"position":[-32,-432],"name":"MainParameter"},"1335":{"id":1335,"data":{"type":{"name":"Principal","generics":[]},"name":"mintAddress"},"inputs":{"name":{"connections":[]},"type":{"connections":[]}},"outputs":{"value":{"connections":[{"node":1558,"input":"key","data":{}}]}},"position":[-32,-608],"name":"MainParameter"},"1345":{"id":1345,"data":{"name":"receiver","type":{"name":"Principal","generics":[]}},"inputs":{"name":{"connections":[]},"type":{"connections":[]},"param":{"connections":[{"node":1034,"output":"params","data":{}}]}},"outputs":{"value":{"connections":[{"node":1786,"input":"to","data":{}}]}},"position":[224,608],"name":"Parameter"},"1378":{"id":1378,"data":{"widthPixels":982,"heightPixels":435},"inputs":{},"outputs":{},"position":[-64,320],"name":"CommentRegion"},"1379":{"id":1379,"data":{"widthPixels":1176,"heightPixels":333},"inputs":{},"outputs":{},"position":[-64,-128],"name":"CommentRegion"},"1380":{"id":1380,"data":{"widthPixels":242,"heightPixels":377},"inputs":{},"outputs":{},"position":[-64,-640],"name":"CommentRegion"},"1381":{"id":1381,"data":{"widthPixels":737,"heightPixels":417},"inputs":{},"outputs":{},"position":[304,-720],"name":"CommentRegion"},"1558":{"id":1558,"data":{},"inputs":{"map":{"connections":[{"node":1030,"output":"value","data":{}}]},"key":{"connections":[{"node":1335,"output":"value","data":{}}]},"value":{"connections":[{"node":1184,"output":"value","data":{}}]},"before":{"connections":[{"node":1030,"output":"setup","data":{}}]}},"outputs":{"after":{"connections":[]}},"position":[832,-480],"name":"MapPut"},"1704":{"id":1704,"data":{"widthPixels":795,"text":"Create a Hash Map to store token balances, and mint based on the smart contract configuration."},"inputs":{},"outputs":{},"position":[304,-768],"name":"Comment"},"1779":{"id":1779,"data":{"widthPixels":257,"text":"Smart contract configuration"},"inputs":{},"outputs":{},"position":[-64,-688],"name":"Comment"},"1780":{"id":1780,"data":{"widthPixels":300,"text":"Return the balance of a given user."},"inputs":{},"outputs":{},"position":[-64,-176],"name":"Comment"},"1781":{"id":1781,"data":{"widthPixels":291,"text":"Send tokens to the specified user."},"inputs":{},"outputs":{},"position":[-64,272],"name":"Comment"},"1784":{"id":1784,"data":{},"inputs":{"map":{"connections":[{"node":1182,"output":"value","data":{}}]},"key":{"connections":[{"node":1032,"output":"value","data":{}}]},"defaultValue":{"connections":[{"node":1785,"output":"value","data":{}}]}},"outputs":{"value":{"connections":[{"node":1025,"input":"value","data":{}}]}},"position":[672,-64],"name":"MapGetOrDefault"},"1785":{"id":1785,"data":{"value":0},"inputs":{},"outputs":{"value":{"connections":[{"node":1784,"input":"defaultValue","data":{}}]}},"position":[448,96],"name":"LiteralNat"},"1786":{"id":1786,"data":{},"inputs":{"map":{"connections":[{"node":1787,"output":"value","data":{}}]},"from":{"connections":[{"node":1034,"output":"caller","data":{}}]},"to":{"connections":[{"node":1345,"output":"value","data":{}}]},"amount":{"connections":[{"node":1035,"output":"value","data":{}}]},"before":{"connections":[{"node":1034,"output":"body","data":{}}]}},"outputs":{"after":{"connections":[{"node":1788,"input":"statement","data":{}}]},"success":{"connections":[{"node":1788,"input":"value","data":{}}]}},"position":[480,352],"name":"MapTransfer"},"1787":{"id":1787,"data":{"stateNode":1030},"inputs":{},"outputs":{"value":{"connections":[{"node":1786,"input":"map","data":{}}]}},"position":[224,384],"name":"StateRead"},"1788":{"id":1788,"data":{},"inputs":{"value":{"connections":[{"node":1786,"output":"success","data":{}}]},"statement":{"connections":[{"node":1786,"output":"after","data":{}}]}},"outputs":{},"position":[704,352],"name":"Return"}}}