{"version":"blocks-webapp@0.2.0","name":"Simple Currency","description":"Mint and transfer fungible tokens.","readme":"","language":"motoko","output":"import HashMap \"mo:base/HashMap\";\nimport Principal \"mo:base/Principal\";\nimport Option \"mo:base/Option\";\n\nactor SimpleCurrency {\n\tlet balanceMap : HashMap.HashMap<Principal, Nat> = HashMap.HashMap<Principal, Nat>(0, Principal.equal, Principal.hash);\n\tbalanceMap.put(Principal.fromText(\"2vxsx-fae\"), 1000000000);\n\t\n\tpublic query func getBalance(user : Principal) : async Nat {\n\t\treturn Option.get(balanceMap.get(user), 0);\n\t};\n\t\n\tpublic shared(send__msg) func send(amount : Nat, receiver : Principal) : async Bool {\n\t\tlet node__1786_success = do {\n\t\t\tlet node__1786_balance = Option.get(balanceMap.get(send__msg.caller), 0);\n\t\t\tlet node__1786_amount = amount;\n\t\t\tif (node__1786_balance >= node__1786_amount) {\n\t\t\t\tbalanceMap.put(send__msg.caller, node__1786_balance - node__1786_amount);\n\t\t\t\tbalanceMap.put(receiver, Option.get(balanceMap.get(receiver), 0) + node__1786_amount);\n\t\t\t\ttrue\n\t\t\t} else {\n\t\t\t\tfalse\n\t\t\t}\n\t\t};\n\t\treturn node__1786_success;\n\t};\n}","nodes":{"740":{"id":740,"data":{"visibility":"public","name":"getBalance","editor:advanced":false,"query":true},"outputs":{"params":{"connections":[{"node":1032,"input":"param","data":{}}]},"body":{"connections":[{"node":1025,"input":"statement","data":{}}]},"caller":{"connections":[]},"function":{"connections":[]}},"position":[-32,-96],"name":"Function"},"1025":{"id":1025,"data":{},"outputs":{},"position":[896,-96],"name":"Return"},"1030":{"id":1030,"data":{"name":"balanceMap","editor:advanced":false,"readonly":true,"stable":false},"outputs":{"setup":{"connections":[{"node":1558,"input":"before","data":{}}]},"value":{"connections":[{"node":1558,"input":"map","data":{}}]}},"position":[576,-608],"name":"State"},"1031":{"id":1031,"data":{"keyType":{"name":"Principal","generics":[]},"valueType":{"name":"Nat","generics":[]}},"outputs":{"value":{"connections":[{"node":1030,"input":"initialValue","data":{}}]}},"position":[352,-576],"name":"NewHashMap"},"1032":{"id":1032,"data":{"name":"user","type":{"name":"Principal","generics":[]}},"outputs":{"value":{"connections":[{"node":1784,"input":"key","data":{}}]}},"position":[224,64],"name":"Parameter"},"1034":{"id":1034,"data":{"name":"send","editor:advanced":true},"outputs":{"params":{"connections":[{"node":1035,"input":"param","data":{}},{"node":1345,"input":"param","data":{}}]},"body":{"connections":[{"node":1786,"input":"before","data":{}}]},"caller":{"connections":[{"node":1786,"input":"from","data":{}}]},"function":{"connections":[]}},"position":[-32,352],"name":"Function"},"1035":{"id":1035,"data":{"name":"amount","type":{"name":"Nat","generics":[]}},"outputs":{"value":{"connections":[{"node":1786,"input":"amount","data":{}}]}},"position":[224,480],"name":"Parameter"},"1182":{"id":1182,"data":{"stateNode":1030},"outputs":{"value":{"connections":[{"node":1784,"input":"map","data":{}}]}},"position":[224,-32],"name":"StateRead"},"1345":{"id":1345,"data":{"name":"receiver","type":{"name":"Principal","generics":[]}},"outputs":{"value":{"connections":[{"node":1786,"input":"to","data":{}}]}},"position":[224,608],"name":"Parameter"},"1378":{"id":1378,"data":{"widthPixels":982,"heightPixels":435},"outputs":{},"position":[-64,320],"name":"CommentRegion"},"1379":{"id":1379,"data":{"widthPixels":1176,"heightPixels":333},"outputs":{},"position":[-64,-128],"name":"CommentRegion"},"1380":{"id":1380,"data":{"widthPixels":300,"heightPixels":350},"outputs":{},"position":[-64,-624],"name":"CommentRegion"},"1381":{"id":1381,"data":{"widthPixels":737,"heightPixels":417},"outputs":{},"position":[304,-624],"name":"CommentRegion"},"1558":{"id":1558,"data":{},"outputs":{"after":{"connections":[]}},"position":[832,-384],"name":"MapPut"},"1704":{"id":1704,"data":{"widthPixels":795,"text":"Create a Hash Map to store token balances, and mint based on the smart contract configuration."},"outputs":{},"position":[304,-672],"name":"Comment"},"1779":{"id":1779,"data":{"widthPixels":288,"text":"Configure the initial token supply."},"outputs":{},"position":[-64,-672],"name":"Comment"},"1780":{"id":1780,"data":{"widthPixels":300,"text":"Return the balance of a given user."},"outputs":{},"position":[-64,-176],"name":"Comment"},"1781":{"id":1781,"data":{"widthPixels":291,"text":"Send tokens to the specified user."},"outputs":{},"position":[-64,272],"name":"Comment"},"1784":{"id":1784,"data":{},"outputs":{"value":{"connections":[{"node":1025,"input":"value","data":{}}]}},"position":[672,-64],"name":"MapGetOrDefault"},"1785":{"id":1785,"data":{"value":0},"outputs":{"value":{"connections":[{"node":1784,"input":"defaultValue","data":{}}]}},"position":[448,96],"name":"LiteralNat"},"1786":{"id":1786,"data":{},"outputs":{"after":{"connections":[{"node":1788,"input":"statement","data":{}}]},"success":{"connections":[{"node":1788,"input":"value","data":{}}]}},"position":[480,352],"name":"MapTransfer"},"1787":{"id":1787,"data":{"stateNode":1030},"outputs":{"value":{"connections":[{"node":1786,"input":"map","data":{}}]}},"position":[224,384],"name":"StateRead"},"1788":{"id":1788,"data":{},"outputs":{},"position":[704,352],"name":"Return"},"1790":{"id":1790,"data":{"value":1000000000},"outputs":{"value":{"connections":[{"node":1558,"input":"value","data":{}}]}},"position":[-32,-368],"name":"LiteralNat"},"1792":{"id":1792,"data":{"widthPixels":174,"text":"Initial token supply"},"outputs":{},"position":[-32,-416],"name":"Comment"},"1822":{"id":1822,"data":{"widthPixels":181,"text":"Initial wallet address"},"outputs":{},"position":[-32,-592],"name":"Comment"},"1827":{"id":1827,"data":{"value":"2vxsx-fae"},"outputs":{"value":{"connections":[{"node":1558,"input":"key","data":{}}]}},"position":[-32,-544],"name":"LiteralPrincipal"}}}